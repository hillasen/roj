/*! For license information please see main.892bc7dd.js.LICENSE.txt */
(()=>{var e={1694:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var s=i.apply(null,n);s&&e.push(s)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var a in n)r.call(n,a)&&n[a]&&e.push(a)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},2176:e=>{"use strict";e.exports=function(e,t,n,r,i,o,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,s,a],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}}},908:(e,t,n)=>{var r=n(8136)(n(7009),"DataView");e.exports=r},9676:(e,t,n)=>{var r=n(5403),i=n(2747),o=n(6037),s=n(4154),a=n(7728);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,e.exports=l},8384:(e,t,n)=>{var r=n(3894),i=n(8699),o=n(4957),s=n(7184),a=n(7109);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,e.exports=l},5797:(e,t,n)=>{var r=n(8136)(n(7009),"Map");e.exports=r},8059:(e,t,n)=>{var r=n(4086),i=n(9255),o=n(9186),s=n(3423),a=n(3739);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,e.exports=l},8319:(e,t,n)=>{var r=n(8136)(n(7009),"Promise");e.exports=r},3924:(e,t,n)=>{var r=n(8136)(n(7009),"Set");e.exports=r},692:(e,t,n)=>{var r=n(8059),i=n(5774),o=n(1596);function s(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,e.exports=s},2854:(e,t,n)=>{var r=n(8384),i=n(511),o=n(835),s=n(707),a=n(8832),l=n(5077);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=s,c.prototype.has=a,c.prototype.set=l,e.exports=c},7197:(e,t,n)=>{var r=n(7009).Symbol;e.exports=r},6219:(e,t,n)=>{var r=n(7009).Uint8Array;e.exports=r},7091:(e,t,n)=>{var r=n(8136)(n(7009),"WeakMap");e.exports=r},4903:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}},7538:(e,t,n)=>{var r=n(6478),i=n(4963),o=n(3629),s=n(5174),a=n(6800),l=n(9102),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&i(e),h=!n&&!u&&s(e),d=!n&&!u&&!h&&l(e),f=n||u||h||d,p=f?r(e.length,String):[],g=p.length;for(var m in e)!t&&!c.call(e,m)||f&&("length"==m||h&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,g))||p.push(m);return p}},1705:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},7897:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},7112:(e,t,n)=>{var r=n(9231);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1986:(e,t,n)=>{var r=n(1705),i=n(3629);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},9066:(e,t,n)=>{var r=n(7197),i=n(1587),o=n(3581),s=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):o(e)}},4906:(e,t,n)=>{var r=n(9066),i=n(3141);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},1848:(e,t,n)=>{var r=n(3355),i=n(3141);e.exports=function e(t,n,o,s,a){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,o,s,e,a))}},3355:(e,t,n)=>{var r=n(2854),i=n(5305),o=n(2206),s=n(8078),a=n(8383),l=n(3629),c=n(5174),u=n(9102),h="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,g,m,v){var y=l(e),b=l(t),w=y?d:a(e),_=b?d:a(t),x=(w=w==h?f:w)==f,k=(_=_==h?f:_)==f,S=w==_;if(S&&c(e)){if(!c(t))return!1;y=!0,x=!1}if(S&&!x)return v||(v=new r),y||u(e)?i(e,t,n,g,m,v):o(e,t,w,n,g,m,v);if(!(1&n)){var E=x&&p.call(e,"__wrapped__"),C=k&&p.call(t,"__wrapped__");if(E||C){var T=E?e.value():e,O=C?t.value():t;return v||(v=new r),m(T,O,n,g,v)}}return!!S&&(v||(v=new r),s(e,t,n,g,m,v))}},6703:(e,t,n)=>{var r=n(4786),i=n(257),o=n(8092),s=n(7907),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,d=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?d:a).test(s(e))}},8150:(e,t,n)=>{var r=n(9066),i=n(4635),o=n(3141),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!s[r(e)]}},3654:(e,t,n)=>{var r=n(2936),i=n(8836),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},6478:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},6194:e=>{e.exports=function(e){return function(t){return e(t)}}},75:e=>{e.exports=function(e,t){return e.has(t)}},5525:(e,t,n)=>{var r=n(7009)["__core-js_shared__"];e.exports=r},5305:(e,t,n)=>{var r=n(692),i=n(7897),o=n(75);e.exports=function(e,t,n,s,a,l){var c=1&n,u=e.length,h=t.length;if(u!=h&&!(c&&h>u))return!1;var d=l.get(e),f=l.get(t);if(d&&f)return d==t&&f==e;var p=-1,g=!0,m=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<u;){var v=e[p],y=t[p];if(s)var b=c?s(y,v,p,t,e,l):s(v,y,p,e,t,l);if(void 0!==b){if(b)continue;g=!1;break}if(m){if(!i(t,(function(e,t){if(!o(m,t)&&(v===e||a(v,e,n,s,l)))return m.push(t)}))){g=!1;break}}else if(v!==y&&!a(v,y,n,s,l)){g=!1;break}}return l.delete(e),l.delete(t),g}},2206:(e,t,n)=>{var r=n(7197),i=n(6219),o=n(9231),s=n(5305),a=n(234),l=n(2230),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,h,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=a;case"[object Set]":var p=1&r;if(f||(f=l),e.size!=t.size&&!p)return!1;var g=d.get(e);if(g)return g==t;r|=2,d.set(e,t);var m=s(f(e),f(t),r,c,h,d);return d.delete(e),m;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},8078:(e,t,n)=>{var r=n(8248),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,s,a){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var h=u;h--;){var d=c[h];if(!(l?d in t:i.call(t,d)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var g=!0;a.set(e,t),a.set(t,e);for(var m=l;++h<u;){var v=e[d=c[h]],y=t[d];if(o)var b=l?o(y,v,d,t,e,a):o(v,y,d,e,t,a);if(!(void 0===b?v===y||s(v,y,n,o,a):b)){g=!1;break}m||(m="constructor"==d)}if(g&&!m){var w=e.constructor,_=t.constructor;w==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _||(g=!1)}return a.delete(e),a.delete(t),g}},1032:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},8248:(e,t,n)=>{var r=n(1986),i=n(5918),o=n(2742);e.exports=function(e){return r(e,o,i)}},2799:(e,t,n)=>{var r=n(5964);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},8136:(e,t,n)=>{var r=n(6703),i=n(40);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},1587:(e,t,n)=>{var r=n(7197),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(l){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}},5918:(e,t,n)=>{var r=n(4903),i=n(8174),o=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(e){return null==e?[]:(e=Object(e),r(s(e),(function(t){return o.call(e,t)})))}:i;e.exports=a},8383:(e,t,n)=>{var r=n(908),i=n(5797),o=n(8319),s=n(3924),a=n(7091),l=n(9066),c=n(7907),u="[object Map]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",g=c(r),m=c(i),v=c(o),y=c(s),b=c(a),w=l;(r&&w(new r(new ArrayBuffer(1)))!=p||i&&w(new i)!=u||o&&w(o.resolve())!=h||s&&w(new s)!=d||a&&w(new a)!=f)&&(w=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case g:return p;case m:return u;case v:return h;case y:return d;case b:return f}return t}),e.exports=w},40:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},5403:(e,t,n)=>{var r=n(9620);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},2747:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},6037:(e,t,n)=>{var r=n(9620),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},4154:(e,t,n)=>{var r=n(9620),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},7728:(e,t,n)=>{var r=n(9620);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},6800:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},5964:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},257:(e,t,n)=>{var r=n(5525),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},2936:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},3894:e=>{e.exports=function(){this.__data__=[],this.size=0}},8699:(e,t,n)=>{var r=n(7112),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},4957:(e,t,n)=>{var r=n(7112);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},7184:(e,t,n)=>{var r=n(7112);e.exports=function(e){return r(this.__data__,e)>-1}},7109:(e,t,n)=>{var r=n(7112);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},4086:(e,t,n)=>{var r=n(9676),i=n(8384),o=n(5797);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},9255:(e,t,n)=>{var r=n(2799);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},9186:(e,t,n)=>{var r=n(2799);e.exports=function(e){return r(this,e).get(e)}},3423:(e,t,n)=>{var r=n(2799);e.exports=function(e){return r(this,e).has(e)}},3739:(e,t,n)=>{var r=n(2799);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},234:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},9620:(e,t,n)=>{var r=n(8136)(Object,"create");e.exports=r},8836:(e,t,n)=>{var r=n(2709)(Object.keys,Object);e.exports=r},9494:(e,t,n)=>{e=n.nmd(e);var r=n(1032),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i&&r.process,a=function(){try{var e=o&&o.require&&o.require("util").types;return e||s&&s.binding&&s.binding("util")}catch(t){}}();e.exports=a},3581:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},2709:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},7009:(e,t,n)=>{var r=n(1032),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},5774:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},1596:e=>{e.exports=function(e){return this.__data__.has(e)}},2230:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},511:(e,t,n)=>{var r=n(8384);e.exports=function(){this.__data__=new r,this.size=0}},835:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},707:e=>{e.exports=function(e){return this.__data__.get(e)}},8832:e=>{e.exports=function(e){return this.__data__.has(e)}},5077:(e,t,n)=>{var r=n(8384),i=n(5797),o=n(8059);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<199)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},7907:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},9231:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},4963:(e,t,n)=>{var r=n(4906),i=n(3141),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},3629:e=>{var t=Array.isArray;e.exports=t},1473:(e,t,n)=>{var r=n(4786),i=n(4635);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},5174:(e,t,n)=>{e=n.nmd(e);var r=n(7009),i=n(9488),o=t&&!t.nodeType&&t,s=o&&e&&!e.nodeType&&e,a=s&&s.exports===o?r.Buffer:void 0,l=(a?a.isBuffer:void 0)||i;e.exports=l},8111:(e,t,n)=>{var r=n(1848);e.exports=function(e,t){return r(e,t)}},4786:(e,t,n)=>{var r=n(9066),i=n(8092);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},4635:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},8092:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},3141:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},9102:(e,t,n)=>{var r=n(8150),i=n(6194),o=n(9494),s=o&&o.isTypedArray,a=s?i(s):r;e.exports=a},2742:(e,t,n)=>{var r=n(7538),i=n(3654),o=n(1473);e.exports=function(e){return o(e)?r(e):i(e)}},8174:e=>{e.exports=function(){return[]}},9488:e=>{e.exports=function(){return!1}},3573:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,o.default)((function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=null;return t.forEach((function(e){if(null==i){var t=e.apply(void 0,n);null!=t&&(i=t)}})),i}))};var r,i=n(6054),o=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},6054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){function t(t,n,r,i,o,s){var a=i||"<<anonymous>>",l=s||r;if(null==n[r])return t?new Error("Required "+o+" `"+l+"` was not specified in `"+a+"`."):null;for(var c=arguments.length,u=Array(c>6?c-6:0),h=6;h<c;h++)u[h-6]=arguments[h];return e.apply(void 0,[n,r,a,o,l].concat(u))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n},e.exports=t.default},888:(e,t,n)=>{"use strict";var r=n(9047);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},2007:(e,t,n)=>{e.exports=n(888)()},9047:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},6921:function(e){var t;"undefined"!==typeof self&&self,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=109)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),i=n(18),o=n(19),s=n(45),a=n(46),l=n(47),c=n(48),u=n(49),h=n(12),d=n(32),f=n(33),p=n(31),g=n(1),m={Scope:g.Scope,create:g.create,find:g.find,query:g.query,register:g.register,Container:r.default,Format:i.default,Leaf:o.default,Embed:c.default,Scroll:s.default,Block:l.default,Inline:a.default,Text:u.default,Attributor:{Attribute:h.default,Class:d.default,Style:f.default,Store:p.default}};t.default=m},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t){var n=this;return t="[Parchment] "+t,(n=e.call(this,t)||this).message=t,n.name=n.constructor.name,n}return r(t,e),t}(Error);t.ParchmentError=i;var o,s={},a={},l={},c={};function u(e,t){var n;if(void 0===t&&(t=o.ANY),"string"===typeof e)n=c[e]||s[e];else if(e instanceof Text||e.nodeType===Node.TEXT_NODE)n=c.text;else if("number"===typeof e)e&o.LEVEL&o.BLOCK?n=c.block:e&o.LEVEL&o.INLINE&&(n=c.inline);else if(e instanceof HTMLElement){var r=(e.getAttribute("class")||"").split(/\s+/);for(var i in r)if(n=a[r[i]])break;n=n||l[e.tagName]}return null==n?null:t&o.LEVEL&n.scope&&t&o.TYPE&n.scope?n:null}t.DATA_KEY="__blot",function(e){e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY"}(o=t.Scope||(t.Scope={})),t.create=function(e,t){var n=u(e);if(null==n)throw new i("Unable to create "+e+" blot");var r=n,o=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:r.create(t);return new r(o,t)},t.find=function e(n,r){return void 0===r&&(r=!1),null==n?null:null!=n[t.DATA_KEY]?n[t.DATA_KEY].blot:r?e(n.parentNode,r):null},t.query=u,t.register=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(t.length>1)return t.map((function(t){return e(t)}));var r=t[0];if("string"!==typeof r.blotName&&"string"!==typeof r.attrName)throw new i("Invalid definition");if("abstract"===r.blotName)throw new i("Cannot register abstract class");return c[r.blotName||r.attrName]=r,"string"===typeof r.keyName?s[r.keyName]=r:(null!=r.className&&(a[r.className]=r),null!=r.tagName&&(Array.isArray(r.tagName)?r.tagName=r.tagName.map((function(e){return e.toUpperCase()})):r.tagName=r.tagName.toUpperCase(),(Array.isArray(r.tagName)?r.tagName:[r.tagName]).forEach((function(e){null!=l[e]&&null!=r.className||(l[e]=r)})))),r}},function(e,t,n){var r=n(51),i=n(11),o=n(3),s=n(20),a=String.fromCharCode(0),l=function(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]};l.prototype.insert=function(e,t){var n={};return 0===e.length?this:(n.insert=e,null!=t&&"object"===typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n))},l.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},l.prototype.retain=function(e,t){if(e<=0)return this;var n={retain:e};return null!=t&&"object"===typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n)},l.prototype.push=function(e){var t=this.ops.length,n=this.ops[t-1];if(e=o(!0,{},e),"object"===typeof n){if("number"===typeof e.delete&&"number"===typeof n.delete)return this.ops[t-1]={delete:n.delete+e.delete},this;if("number"===typeof n.delete&&null!=e.insert&&(t-=1,"object"!==typeof(n=this.ops[t-1])))return this.ops.unshift(e),this;if(i(e.attributes,n.attributes)){if("string"===typeof e.insert&&"string"===typeof n.insert)return this.ops[t-1]={insert:n.insert+e.insert},"object"===typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"===typeof e.retain&&"number"===typeof n.retain)return this.ops[t-1]={retain:n.retain+e.retain},"object"===typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},l.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},l.prototype.filter=function(e){return this.ops.filter(e)},l.prototype.forEach=function(e){this.ops.forEach(e)},l.prototype.map=function(e){return this.ops.map(e)},l.prototype.partition=function(e){var t=[],n=[];return this.forEach((function(r){(e(r)?t:n).push(r)})),[t,n]},l.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},l.prototype.changeLength=function(){return this.reduce((function(e,t){return t.insert?e+s.length(t):t.delete?e-t.delete:e}),0)},l.prototype.length=function(){return this.reduce((function(e,t){return e+s.length(t)}),0)},l.prototype.slice=function(e,t){e=e||0,"number"!==typeof t&&(t=1/0);for(var n=[],r=s.iterator(this.ops),i=0;i<t&&r.hasNext();){var o;i<e?o=r.next(e-i):(o=r.next(t-i),n.push(o)),i+=s.length(o)}return new l(n)},l.prototype.compose=function(e){var t=s.iterator(this.ops),n=s.iterator(e.ops),r=[],o=n.peek();if(null!=o&&"number"===typeof o.retain&&null==o.attributes){for(var a=o.retain;"insert"===t.peekType()&&t.peekLength()<=a;)a-=t.peekLength(),r.push(t.next());o.retain-a>0&&n.next(o.retain-a)}for(var c=new l(r);t.hasNext()||n.hasNext();)if("insert"===n.peekType())c.push(n.next());else if("delete"===t.peekType())c.push(t.next());else{var u=Math.min(t.peekLength(),n.peekLength()),h=t.next(u),d=n.next(u);if("number"===typeof d.retain){var f={};"number"===typeof h.retain?f.retain=u:f.insert=h.insert;var p=s.attributes.compose(h.attributes,d.attributes,"number"===typeof h.retain);if(p&&(f.attributes=p),c.push(f),!n.hasNext()&&i(c.ops[c.ops.length-1],f)){var g=new l(t.rest());return c.concat(g).chop()}}else"number"===typeof d.delete&&"number"===typeof h.retain&&c.push(d)}return c.chop()},l.prototype.concat=function(e){var t=new l(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t},l.prototype.diff=function(e,t){if(this.ops===e.ops)return new l;var n=[this,e].map((function(t){return t.map((function(n){if(null!=n.insert)return"string"===typeof n.insert?n.insert:a;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")})).join("")})),o=new l,c=r(n[0],n[1],t),u=s.iterator(this.ops),h=s.iterator(e.ops);return c.forEach((function(e){for(var t=e[1].length;t>0;){var n=0;switch(e[0]){case r.INSERT:n=Math.min(h.peekLength(),t),o.push(h.next(n));break;case r.DELETE:n=Math.min(t,u.peekLength()),u.next(n),o.delete(n);break;case r.EQUAL:n=Math.min(u.peekLength(),h.peekLength(),t);var a=u.next(n),l=h.next(n);i(a.insert,l.insert)?o.retain(n,s.attributes.diff(a.attributes,l.attributes)):o.push(l).delete(n)}t-=n}})),o.chop()},l.prototype.eachLine=function(e,t){t=t||"\n";for(var n=s.iterator(this.ops),r=new l,i=0;n.hasNext();){if("insert"!==n.peekType())return;var o=n.peek(),a=s.length(o)-n.peekLength(),c="string"===typeof o.insert?o.insert.indexOf(t,a)-a:-1;if(c<0)r.push(n.next());else if(c>0)r.push(n.next(c));else{if(!1===e(r,n.next(1).attributes||{},i))return;i+=1,r=new l}}r.length()>0&&e(r,{},i)},l.prototype.transform=function(e,t){if(t=!!t,"number"===typeof e)return this.transformPosition(e,t);for(var n=s.iterator(this.ops),r=s.iterator(e.ops),i=new l;n.hasNext()||r.hasNext();)if("insert"!==n.peekType()||!t&&"insert"===r.peekType())if("insert"===r.peekType())i.push(r.next());else{var o=Math.min(n.peekLength(),r.peekLength()),a=n.next(o),c=r.next(o);if(a.delete)continue;c.delete?i.push(c):i.retain(o,s.attributes.transform(a.attributes,c.attributes,t))}else i.retain(s.length(n.next()));return i.chop()},l.prototype.transformPosition=function(e,t){t=!!t;for(var n=s.iterator(this.ops),r=0;n.hasNext()&&r<=e;){var i=n.peekLength(),o=n.peekType();n.next(),"delete"!==o?("insert"===o&&(r<e||!t)&&(e+=i),r+=i):e-=Math.min(i,e-r)}return e},e.exports=l},function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,r=Object.prototype.toString,i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,s=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===r.call(e)},a=function(e){if(!e||"[object Object]"!==r.call(e))return!1;var t,i=n.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&n.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!i&&!o)return!1;for(t in e);return"undefined"===typeof t||n.call(e,t)},l=function(e,t){i&&"__proto__"===t.name?i(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},c=function(e,t){if("__proto__"===t){if(!n.call(e,t))return;if(o)return o(e,t).value}return e[t]};e.exports=function e(){var t,n,r,i,o,u,h=arguments[0],d=1,f=arguments.length,p=!1;for("boolean"===typeof h&&(p=h,h=arguments[1]||{},d=2),(null==h||"object"!==typeof h&&"function"!==typeof h)&&(h={});d<f;++d)if(null!=(t=arguments[d]))for(n in t)r=c(h,n),h!==(i=c(t,n))&&(p&&i&&(a(i)||(o=s(i)))?(o?(o=!1,u=r&&s(r)?r:[]):u=r&&a(r)?r:{},l(h,{name:n,newValue:e(p,u,i)})):"undefined"!==typeof i&&l(h,{name:n,newValue:i}));return h}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BlockEmbed=t.bubbleFormats=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=h(n(3)),s=h(n(2)),a=h(n(0)),l=h(n(16)),c=h(n(6)),u=h(n(7));function h(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),r(t,[{key:"attach",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"attach",this).call(this),this.attributes=new a.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new s.default).insert(this.value(),(0,o.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(e,t){var n=a.default.query(e,a.default.Scope.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,t)}},{key:"formatAt",value:function(e,t,n,r){this.format(n,r)}},{key:"insertAt",value:function(e,n,r){if("string"===typeof n&&n.endsWith("\n")){var o=a.default.create(m.blotName);this.parent.insertBefore(o,0===e?this:this.next),o.insertAt(0,n.slice(0,-1))}else i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,r)}}]),t}(a.default.Embed);g.scope=a.default.Scope.BLOCK_BLOT;var m=function(e){function t(e){d(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.cache={},n}return p(t,e),r(t,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(a.default.Leaf).reduce((function(e,t){return 0===t.length()?e:e.insert(t.value(),v(t))}),new s.default).insert("\n",v(this))),this.cache.delta}},{key:"deleteAt",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,n),this.cache={}}},{key:"formatAt",value:function(e,n,r,o){n<=0||(a.default.query(r,a.default.Scope.BLOCK)?e+n===this.length()&&this.format(r,o):i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,Math.min(n,this.length()-e-1),r,o),this.cache={})}},{key:"insertAt",value:function(e,n,r){if(null!=r)return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,r);if(0!==n.length){var o=n.split("\n"),s=o.shift();s.length>0&&(e<this.length()-1||null==this.children.tail?i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),s):this.children.tail.insertAt(this.children.tail.length(),s),this.cache={});var a=this;o.reduce((function(e,t){return(a=a.split(e,!0)).insertAt(0,t),t.length}),e+s.length)}}},{key:"insertBefore",value:function(e,n){var r=this.children.head;i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n),r instanceof l.default&&r.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"moveChildren",this).call(this,e,n),this.cache={}}},{key:"optimize",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&(0===e||e>=this.length()-1)){var r=this.clone();return 0===e?(this.parent.insertBefore(r,this),this):(this.parent.insertBefore(r,this.next),r)}var o=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"split",this).call(this,e,n);return this.cache={},o}}]),t}(a.default.Block);function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==e?t:("function"===typeof e.formats&&(t=(0,o.default)(t,e.formats())),null==e.parent||"scroll"==e.parent.blotName||e.parent.statics.scope!==e.statics.scope?t:v(e.parent,t))}m.blotName="block",m.tagName="P",m.defaultChild="break",m.allowedChildren=[c.default,a.default.Embed,u.default],t.bubbleFormats=v,t.BlockEmbed=g,t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.overload=t.expandConfig=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(50);var s=m(n(2)),a=m(n(14)),l=m(n(8)),c=m(n(9)),u=m(n(0)),h=n(15),d=m(h),f=m(n(3)),p=m(n(10)),g=m(n(34));function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=(0,p.default)("quill"),b=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=w(t,r),this.container=this.options.container,null==this.container)return y.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new l.default,this.scroll=u.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new a.default(this.scroll),this.selection=new d.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(l.default.events.EDITOR_CHANGE,(function(e){e===l.default.events.TEXT_CHANGE&&n.root.classList.toggle("ql-blank",n.editor.isBlank())})),this.emitter.on(l.default.events.SCROLL_UPDATE,(function(e,t){var r=n.selection.lastRange,i=r&&0===r.length?r.index:void 0;_.call(n,(function(){return n.editor.update(null,t,i)}),e)}));var o=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+i+"<p><br></p></div>");this.setContents(o),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return o(e,null,[{key:"debug",value:function(e){!0===e&&(e="log"),p.default.level(e)}},{key:"find",value:function(e){return e.__quill||u.default.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&y.error("Cannot import "+e+". Are you sure it was registered?"),this.imports[e]}},{key:"register",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!==typeof e){var i=e.attrName||e.blotName;"string"===typeof i?this.register("formats/"+i,e,t):Object.keys(e).forEach((function(r){n.register(r,e[r],t)}))}else null==this.imports[e]||r||y.warn("Overwriting "+e+" with",t),this.imports[e]=t,(e.startsWith("blots/")||e.startsWith("formats/"))&&"abstract"!==t.blotName?u.default.register(t):e.startsWith("modules")&&"function"===typeof t.register&&t.register()}}]),o(e,[{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"===typeof e){var n=e;(e=document.createElement("div")).classList.add(n)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,n){var r=this,o=x(e,t,n),s=i(o,4);return e=s[0],t=s[1],n=s[3],_.call(this,(function(){return r.editor.deleteText(e,t)}),n,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;return _.call(this,(function(){var r=n.getSelection(!0),i=new s.default;if(null==r)return i;if(u.default.query(e,u.default.Scope.BLOCK))i=n.editor.formatLine(r.index,r.length,v({},e,t));else{if(0===r.length)return n.selection.format(e,t),i;i=n.editor.formatText(r.index,r.length,v({},e,t))}return n.setSelection(r,l.default.sources.SILENT),i}),r)}},{key:"formatLine",value:function(e,t,n,r,o){var s,a=this,l=x(e,t,n,r,o),c=i(l,4);return e=c[0],t=c[1],s=c[2],o=c[3],_.call(this,(function(){return a.editor.formatLine(e,t,s)}),o,e,0)}},{key:"formatText",value:function(e,t,n,r,o){var s,a=this,l=x(e,t,n,r,o),c=i(l,4);return e=c[0],t=c[1],s=c[2],o=c[3],_.call(this,(function(){return a.editor.formatText(e,t,s)}),o,e,0)}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=void 0;n="number"===typeof e?this.selection.getBounds(e,t):this.selection.getBounds(e.index,e.length);var r=this.container.getBoundingClientRect();return{bottom:n.bottom-r.top,height:n.height,left:n.left-r.left,right:n.right-r.left,top:n.top-r.top,width:n.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,n=x(e,t),r=i(n,2);return e=r[0],t=r[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"===typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!==typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,n=x(e,t),r=i(n,2);return e=r[0],t=r[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return _.call(this,(function(){return i.editor.insertEmbed(t,n,r)}),o,t)}},{key:"insertText",value:function(e,t,n,r,o){var s,a=this,l=x(e,0,n,r,o),c=i(l,4);return e=c[0],s=c[2],o=c[3],_.call(this,(function(){return a.editor.insertText(e,t,s)}),o,e,t.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(e,t,n){this.clipboard.dangerouslyPasteHTML(e,t,n)}},{key:"removeFormat",value:function(e,t,n){var r=this,o=x(e,t,n),s=i(o,4);return e=s[0],t=s[1],n=s[3],_.call(this,(function(){return r.editor.removeFormat(e,t)}),n,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return _.call(this,(function(){e=new s.default(e);var n=t.getLength(),r=t.editor.deleteText(0,n),i=t.editor.applyDelta(e),o=i.ops[i.ops.length-1];return null!=o&&"string"===typeof o.insert&&"\n"===o.insert[o.insert.length-1]&&(t.editor.deleteText(t.getLength()-1,1),i.delete(1)),r.compose(i)}),n)}},{key:"setSelection",value:function(t,n,r){if(null==t)this.selection.setRange(null,n||e.sources.API);else{var o=x(t,n,r),s=i(o,4);t=s[0],n=s[1],r=s[3],this.selection.setRange(new h.Range(t,n),r),r!==l.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API,n=(new s.default).insert(e);return this.setContents(n,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.default.sources.API;return _.call(this,(function(){return e=new s.default(e),t.editor.applyDelta(e,n)}),n,!0)}}]),e}();function w(e,t){if((t=(0,f.default)(!0,{container:e,modules:{clipboard:!0,keyboard:!0,history:!0}},t)).theme&&t.theme!==b.DEFAULTS.theme){if(t.theme=b.import("themes/"+t.theme),null==t.theme)throw new Error("Invalid theme "+t.theme+". Did you register it?")}else t.theme=g.default;var n=(0,f.default)(!0,{},t.theme.DEFAULTS);[n,t].forEach((function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach((function(t){!0===e.modules[t]&&(e.modules[t]={})}))}));var r=Object.keys(n.modules).concat(Object.keys(t.modules)).reduce((function(e,t){var n=b.import("modules/"+t);return null==n?y.error("Cannot load "+t+" module. Are you sure you registered it?"):e[t]=n.DEFAULTS||{},e}),{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=(0,f.default)(!0,{},b.DEFAULTS,{modules:r},n,t),["bounds","container","scrollingContainer"].forEach((function(e){"string"===typeof t[e]&&(t[e]=document.querySelector(t[e]))})),t.modules=Object.keys(t.modules).reduce((function(e,n){return t.modules[n]&&(e[n]=t.modules[n]),e}),{}),t}function _(e,t,n,r){if(this.options.strict&&!this.isEnabled()&&t===l.default.sources.USER)return new s.default;var i=null==n?null:this.getSelection(),o=this.editor.delta,a=e();if(null!=i&&(!0===n&&(n=i.index),null==r?i=k(i,a,t):0!==r&&(i=k(i,n,r,t)),this.setSelection(i,l.default.sources.SILENT)),a.length()>0){var c,u,h=[l.default.events.TEXT_CHANGE,a,o,t];(c=this.emitter).emit.apply(c,[l.default.events.EDITOR_CHANGE].concat(h)),t!==l.default.sources.SILENT&&(u=this.emitter).emit.apply(u,h)}return a}function x(e,t,n,i,o){var s={};return"number"===typeof e.index&&"number"===typeof e.length?"number"!==typeof t?(o=i,i=n,n=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!==typeof t&&(o=i,i=n,n=t,t=0),"object"===("undefined"===typeof n?"undefined":r(n))?(s=n,o=i):"string"===typeof n&&(null!=i?s[n]=i:o=n),[e,t,s,o=o||l.default.sources.API]}function k(e,t,n,r){if(null==e)return null;var o=void 0,a=void 0;if(t instanceof s.default){var c=[e.index,e.index+e.length].map((function(e){return t.transformPosition(e,r!==l.default.sources.USER)})),u=i(c,2);o=u[0],a=u[1]}else{var d=[e.index,e.index+e.length].map((function(e){return e<t||e===t&&r===l.default.sources.USER?e:n>=0?e+n:Math.max(t,e+n)})),f=i(d,2);o=f[0],a=f[1]}return new h.Range(o,a-o)}b.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},b.events=l.default.events,b.sources=l.default.sources,b.version="1.3.7",b.imports={delta:s.default,parchment:u.default,"core/module":c.default,"core/theme":g.default},t.expandConfig=w,t.overload=x,t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=a(n(7)),s=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"formatAt",value:function(e,n,r,o){if(t.compare(this.statics.blotName,r)<0&&s.default.query(r,s.default.Scope.BLOT)){var a=this.isolate(e,n);o&&a.wrap(r,o)}else i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,n,r,o)}},{key:"optimize",value:function(e){if(i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.parent instanceof t&&t.compare(this.statics.blotName,this.parent.statics.blotName)>0){var n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}],[{key:"compare",value:function(e,n){var r=t.order.indexOf(e),i=t.order.indexOf(n);return r>=0||i>=0?r-i:e===n?0:e<n?-1:1}}]),t}(s.default.Inline);l.allowedChildren=[l,s.default.Embed,o.default],l.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default.Text);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=s(n(54));function s(e){return e&&e.__esModule?e:{default:e}}var a=(0,s(n(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(e){document.addEventListener(e,(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];[].slice.call(document.querySelectorAll(".ql-container")).forEach((function(e){var n;e.__quill&&e.__quill.emitter&&(n=e.__quill.emitter).handleDOM.apply(n,t)}))}))}));var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.listeners={},e.on("error",a.error),e}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"emit",value:function(){a.log.apply(a,arguments),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(this.listeners[e.type]||[]).forEach((function(t){var r=t.node,i=t.handler;(e.target===r||r.contains(e.target))&&i.apply(void 0,[e].concat(n))}))}},{key:"listenDOM",value:function(e,t,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:n})}}]),t}(o.default);l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"},t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=n};r.DEFAULTS={},t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["error","warn","log","info"],i="warn";function o(e){if(r.indexOf(e)<=r.indexOf(i)){for(var t,n=arguments.length,o=Array(n>1?n-1:0),s=1;s<n;s++)o[s-1]=arguments[s];(t=console)[e].apply(t,o)}}function s(e){return r.reduce((function(t,n){return t[n]=o.bind(console,n,e),t}),{})}o.level=s.level=function(e){i=e},t.default=s},function(e,t,n){var r=Array.prototype.slice,i=n(52),o=n(53),s=e.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=typeof e&&"object"!=typeof t?n.strict?e===t:e==t:function(e,t,n){var c,u;if(a(e)||a(t))return!1;if(e.prototype!==t.prototype)return!1;if(o(e))return!!o(t)&&(e=r.call(e),t=r.call(t),s(e,t,n));if(l(e)){if(!l(t))return!1;if(e.length!==t.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==t[c])return!1;return!0}try{var h=i(e),d=i(t)}catch(f){return!1}if(h.length!=d.length)return!1;for(h.sort(),d.sort(),c=h.length-1;c>=0;c--)if(h[c]!=d[c])return!1;for(c=h.length-1;c>=0;c--)if(u=h[c],!s(e[u],t[u],n))return!1;return typeof e===typeof t}(e,t,n))};function a(e){return null===e||void 0===e}function l(e){return!(!e||"object"!==typeof e||"number"!==typeof e.length)&&"function"===typeof e.copy&&"function"===typeof e.slice&&!(e.length>0&&"number"!==typeof e[0])}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(){function e(e,t,n){void 0===n&&(n={}),this.attrName=e,this.keyName=t;var i=r.Scope.TYPE&r.Scope.ATTRIBUTE;null!=n.scope?this.scope=n.scope&r.Scope.LEVEL|i:this.scope=r.Scope.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}return e.keys=function(e){return[].map.call(e.attributes,(function(e){return e.name}))},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null!=r.query(e,r.Scope.BLOT&(this.scope|r.Scope.TYPE))&&(null==this.whitelist||("string"===typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1))},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Code=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=h(n(2)),a=h(n(0)),l=h(n(4)),c=h(n(6)),u=h(n(7));function h(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),t}(c.default);g.blotName="code",g.tagName="CODE";var m=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),i(t,[{key:"delta",value:function(){var e=this,t=this.domNode.textContent;return t.endsWith("\n")&&(t=t.slice(0,-1)),t.split("\n").reduce((function(t,n){return t.insert(n).insert("\n",e.formats())}),new s.default)}},{key:"format",value:function(e,n){if(e!==this.statics.blotName||!n){var i=this.descendant(u.default,this.length()-1),s=r(i,1)[0];null!=s&&s.deleteAt(s.length()-1,1),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}},{key:"formatAt",value:function(e,n,r,i){if(0!==n&&null!=a.default.query(r,a.default.Scope.BLOCK)&&(r!==this.statics.blotName||i!==this.statics.formats(this.domNode))){var o=this.newlineIndex(e);if(!(o<0||o>=e+n)){var s=this.newlineIndex(e,!0)+1,l=o-s+1,c=this.isolate(s,l),u=c.next;c.format(r,i),u instanceof t&&u.formatAt(0,e-s+n-l,r,i)}}}},{key:"insertAt",value:function(e,t,n){if(null==n){var i=this.descendant(u.default,e),o=r(i,2),s=o[0],a=o[1];s.insertAt(a,t)}}},{key:"length",value:function(){var e=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?e:e+1}},{key:"newlineIndex",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,e).lastIndexOf("\n");var t=this.domNode.textContent.slice(e).indexOf("\n");return t>-1?e+t:-1}},{key:"optimize",value:function(e){this.domNode.textContent.endsWith("\n")||this.appendChild(a.default.create("text","\n")),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===n.statics.formats(n.domNode)&&(n.optimize(e),n.moveChildren(this),n.remove())}},{key:"replace",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e),[].slice.call(this.domNode.querySelectorAll("*")).forEach((function(e){var t=a.default.find(e);null==t?e.parentNode.removeChild(e):t instanceof a.default.Embed?t.remove():t.unwrap()}))}}],[{key:"create",value:function(e){var n=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return n.setAttribute("spellcheck",!1),n}},{key:"formats",value:function(){return!0}}]),t}(l.default);m.blotName="code-block",m.tagName="PRE",m.TAB="  ",t.Code=g,t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=v(n(2)),a=v(n(20)),l=v(n(0)),c=v(n(13)),u=v(n(24)),h=n(4),d=v(h),f=v(n(16)),p=v(n(21)),g=v(n(11)),m=v(n(3));function v(e){return e&&e.__esModule?e:{default:e}}var y=/^[ -~]*$/,b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.delta=this.getDelta()}return o(e,[{key:"applyDelta",value:function(e){var t=this,n=!1;this.scroll.update();var o=this.scroll.length();return this.scroll.batchStart(),(e=function(e){return e.reduce((function(e,t){if(1===t.insert){var n=(0,p.default)(t.attributes);return delete n.image,e.insert({image:t.attributes.image},n)}if(null==t.attributes||!0!==t.attributes.list&&!0!==t.attributes.bullet||((t=(0,p.default)(t)).attributes.list?t.attributes.list="ordered":(t.attributes.list="bullet",delete t.attributes.bullet)),"string"===typeof t.insert){var r=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(r,t.attributes)}return e.push(t)}),new s.default)}(e)).reduce((function(e,s){var c=s.retain||s.delete||s.insert.length||1,u=s.attributes||{};if(null!=s.insert){if("string"===typeof s.insert){var f=s.insert;f.endsWith("\n")&&n&&(n=!1,f=f.slice(0,-1)),e>=o&&!f.endsWith("\n")&&(n=!0),t.scroll.insertAt(e,f);var p=t.scroll.line(e),g=i(p,2),v=g[0],y=g[1],b=(0,m.default)({},(0,h.bubbleFormats)(v));if(v instanceof d.default){var w=v.descendant(l.default.Leaf,y),_=i(w,1)[0];b=(0,m.default)(b,(0,h.bubbleFormats)(_))}u=a.default.attributes.diff(b,u)||{}}else if("object"===r(s.insert)){var x=Object.keys(s.insert)[0];if(null==x)return e;t.scroll.insertAt(e,x,s.insert[x])}o+=c}return Object.keys(u).forEach((function(n){t.scroll.formatAt(e,c,n,u[n])})),e+c}),0),e.reduce((function(e,n){return"number"===typeof n.delete?(t.scroll.deleteAt(e,n.delete),e):e+(n.retain||n.insert.length||1)}),0),this.scroll.batchEnd(),this.update(e)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new s.default).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(r).forEach((function(i){if(null==n.scroll.whitelist||n.scroll.whitelist[i]){var o=n.scroll.lines(e,Math.max(t,1)),s=t;o.forEach((function(t){var o=t.length();if(t instanceof c.default){var a=e-t.offset(n.scroll),l=t.newlineIndex(a+s)-a+1;t.formatAt(a,l,i,r[i])}else t.format(i,r[i]);s-=o}))}})),this.scroll.optimize(),this.update((new s.default).retain(e).retain(t,(0,p.default)(r)))}},{key:"formatText",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(r).forEach((function(i){n.scroll.formatAt(e,t,i,r[i])})),this.update((new s.default).retain(e).retain(t,(0,p.default)(r)))}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(e,t){return e.concat(t.delta())}),new s.default)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=[];0===t?this.scroll.path(e).forEach((function(e){var t=i(e,1)[0];t instanceof d.default?n.push(t):t instanceof l.default.Leaf&&r.push(t)})):(n=this.scroll.lines(e,t),r=this.scroll.descendants(l.default.Leaf,e,t));var o=[n,r].map((function(e){if(0===e.length)return{};for(var t=(0,h.bubbleFormats)(e.shift());Object.keys(t).length>0;){var n=e.shift();if(null==n)return t;t=w((0,h.bubbleFormats)(n),t)}return t}));return m.default.apply(m.default,o)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter((function(e){return"string"===typeof e.insert})).map((function(e){return e.insert})).join("")}},{key:"insertEmbed",value:function(e,t,n){return this.scroll.insertAt(e,t,n),this.update((new s.default).retain(e).insert(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,n)))}},{key:"insertText",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(r).forEach((function(i){n.scroll.formatAt(e,t.length,i,r[i])})),this.update((new s.default).retain(e).insert(t,(0,p.default)(r)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var e=this.scroll.children.head;return e.statics.blotName===d.default.blotName&&!(e.children.length>1)&&e.children.head instanceof f.default}},{key:"removeFormat",value:function(e,t){var n=this.getText(e,t),r=this.scroll.line(e+t),o=i(r,2),a=o[0],l=o[1],u=0,h=new s.default;null!=a&&(u=a instanceof c.default?a.newlineIndex(l)-l+1:a.length()-l,h=a.delta().slice(l,l+u-1).insert("\n"));var d=this.getContents(e,t+u).diff((new s.default).insert(n).concat(h)),f=(new s.default).retain(e).concat(d);return this.applyDelta(f)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(y)&&l.default.find(t[0].target)){var i=l.default.find(t[0].target),o=(0,h.bubbleFormats)(i),a=i.offset(this.scroll),c=t[0].oldValue.replace(u.default.CONTENTS,""),d=(new s.default).insert(c),f=(new s.default).insert(i.value());e=(new s.default).retain(a).concat(d.diff(f,n)).reduce((function(e,t){return t.insert?e.insert(t.insert,o):e.push(t)}),new s.default),this.delta=r.compose(e)}else this.delta=this.getDelta(),e&&(0,g.default)(r.compose(e),this.delta)||(e=r.diff(this.delta,n));return e}}]),e}();function w(e,t){return Object.keys(t).reduce((function(n,r){return null==e[r]||(t[r]===e[r]?n[r]=t[r]:Array.isArray(t[r])?t[r].indexOf(e[r])<0&&(n[r]=t[r].concat([e[r]])):n[r]=[t[r],e[r]]),n}),{})}t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Range=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(0)),s=c(n(21)),a=c(n(11)),l=c(n(8));function c(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=(0,c(n(10)).default)("quill:selection"),f=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(this,e),this.index=t,this.length=n},p=function(){function e(t,n){var r=this;h(this,e),this.emitter=n,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=o.default.create("cursor",this),this.lastRange=this.savedRange=new f(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){r.mouseDown||setTimeout(r.update.bind(r,l.default.sources.USER),1)})),this.emitter.on(l.default.events.EDITOR_CHANGE,(function(e,t){e===l.default.events.TEXT_CHANGE&&t.length()>0&&r.update(l.default.sources.SILENT)})),this.emitter.on(l.default.events.SCROLL_BEFORE_UPDATE,(function(){if(r.hasFocus()){var e=r.getNativeRange();null!=e&&e.start.node!==r.cursor.textNode&&r.emitter.once(l.default.events.SCROLL_UPDATE,(function(){try{r.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset)}catch(t){}}))}})),this.emitter.on(l.default.events.SCROLL_OPTIMIZE,(function(e,t){if(t.range){var n=t.range,i=n.startNode,o=n.startOffset,s=n.endNode,a=n.endOffset;r.setNativeRange(i,o,s,a)}})),this.update(l.default.sources.SILENT)}return i(e,[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",(function(){e.composing=!0})),this.root.addEventListener("compositionend",(function(){if(e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout((function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,(function(){e.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){e.mouseDown=!1,e.update(l.default.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){if(null==this.scroll.whitelist||this.scroll.whitelist[e]){this.scroll.update();var n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!o.default.query(e,o.default.Scope.BLOCK)){if(n.start.node!==this.cursor.textNode){var r=o.default.find(n.start.node,!1);if(null==r)return;if(r instanceof o.default.Leaf){var i=r.split(n.start.offset);r.parent.insertBefore(this.cursor,i)}else r.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.scroll.length();e=Math.min(e,n-1),t=Math.min(e+t,n-1)-e;var i=void 0,o=this.scroll.leaf(e),s=r(o,2),a=s[0],l=s[1];if(null==a)return null;var c=a.position(l,!0),u=r(c,2);i=u[0],l=u[1];var h=document.createRange();if(t>0){h.setStart(i,l);var d=this.scroll.leaf(e+t),f=r(d,2);if(a=f[0],l=f[1],null==a)return null;var p=a.position(l,!0),g=r(p,2);return i=g[0],l=g[1],h.setEnd(i,l),h.getBoundingClientRect()}var m="left",v=void 0;return i instanceof Text?(l<i.data.length?(h.setStart(i,l),h.setEnd(i,l+1)):(h.setStart(i,l-1),h.setEnd(i,l),m="right"),v=h.getBoundingClientRect()):(v=a.domNode.getBoundingClientRect(),l>0&&(m="right")),{bottom:v.top+v.height,height:v.height,left:v[m],right:v[m],top:v.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var n=this.normalizeNative(t);return d.info("getNativeRange",n),n}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(e){var t=this,n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);var i=n.map((function(e){var n=r(e,2),i=n[0],s=n[1],a=o.default.find(i,!0),l=a.offset(t.scroll);return 0===s?l:a instanceof o.default.Container?l+a.length():l+a.index(i,s)})),s=Math.min(Math.max.apply(Math,u(i)),this.scroll.length()-1),a=Math.min.apply(Math,[s].concat(u(i)));return new f(a,s-a)}},{key:"normalizeNative",value:function(e){if(!g(this.root,e.startContainer)||!e.collapsed&&!g(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach((function(e){for(var t=e.node,n=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>n)t=t.childNodes[n],n=0;else{if(t.childNodes.length!==n)break;n=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length+1}e.node=t,e.offset=n})),t}},{key:"rangeToNative",value:function(e){var t=this,n=e.collapsed?[e.index]:[e.index,e.index+e.length],i=[],o=this.scroll.length();return n.forEach((function(e,n){e=Math.min(o-1,e);var s,a=t.scroll.leaf(e),l=r(a,2),c=l[0],u=l[1],h=c.position(u,0!==n),d=r(h,2);s=d[0],u=d[1],i.push(s,u)})),i.length<2&&(i=i.concat(i)),i}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var n=this.getBounds(t.index,t.length);if(null!=n){var i=this.scroll.length()-1,o=this.scroll.line(Math.min(t.index,i)),s=r(o,1)[0],a=s;if(t.length>0){var l=this.scroll.line(Math.min(t.index+t.length,i));a=r(l,1)[0]}if(null!=s&&null!=a){var c=e.getBoundingClientRect();n.top<c.top?e.scrollTop-=c.top-n.top:n.bottom>c.bottom&&(e.scrollTop+=n.bottom-c.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(d.info("setNativeRange",e,t,n,r),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=n.parentNode){var o=document.getSelection();if(null!=o)if(null!=e){this.hasFocus()||this.root.focus();var s=(this.getNativeRange()||{}).native;if(null==s||i||e!==s.startContainer||t!==s.startOffset||n!==s.endContainer||r!==s.endOffset){"BR"==e.tagName&&(t=[].indexOf.call(e.parentNode.childNodes,e),e=e.parentNode),"BR"==n.tagName&&(r=[].indexOf.call(n.parentNode.childNodes,n),n=n.parentNode);var a=document.createRange();a.setStart(e,t),a.setEnd(n,r),o.removeAllRanges(),o.addRange(a)}}else o.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.default.sources.API;if("string"===typeof t&&(n=t,t=!1),d.info("setRange",e),null!=e){var r=this.rangeToNative(e);this.setNativeRange.apply(this,u(r).concat([t]))}else this.setNativeRange(null);this.update(n)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.default.sources.USER,t=this.lastRange,n=this.getRange(),i=r(n,2),o=i[0],c=i[1];if(this.lastRange=o,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,a.default)(t,this.lastRange)){var u;!this.composing&&null!=c&&c.native.collapsed&&c.start.node!==this.cursor.textNode&&this.cursor.restore();var h,d=[l.default.events.SELECTION_CHANGE,(0,s.default)(this.lastRange),(0,s.default)(t),e];(u=this.emitter).emit.apply(u,[l.default.events.EDITOR_CHANGE].concat(d)),e!==l.default.sources.SILENT&&(h=this.emitter).emit.apply(h,d)}}}]),e}();function g(e,t){try{t.parentNode}catch(n){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}t.Range=f,t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(0),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"insertInto",value:function(e,n){0===e.children.length?o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertInto",this).call(this,e,n):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default.Embed);a.blotName="break",a.tagName="BR",t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(44),o=n(30),s=n(1),a=function(e){function t(t){var n=e.call(this,t)||this;return n.build(),n}return r(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach((function(e){e.attach()}))},t.prototype.build=function(){var e=this;this.children=new i.default,[].slice.call(this.domNode.childNodes).reverse().forEach((function(t){try{var n=l(t);e.insertBefore(n,e.children.head||void 0)}catch(r){if(r instanceof s.ParchmentError)return;throw r}}))},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,(function(e,t,n){e.deleteAt(t,n)}))},t.prototype.descendant=function(e,n){var r=this.children.find(n),i=r[0],o=r[1];return null==e.blotName&&e(i)||null!=e.blotName&&i instanceof e?[i,o]:i instanceof t?i.descendant(e,o):[null,-1]},t.prototype.descendants=function(e,n,r){void 0===n&&(n=0),void 0===r&&(r=Number.MAX_VALUE);var i=[],o=r;return this.children.forEachAt(n,r,(function(n,r,s){(null==e.blotName&&e(n)||null!=e.blotName&&n instanceof e)&&i.push(n),n instanceof t&&(i=i.concat(n.descendants(e,r,o))),o-=s})),i},t.prototype.detach=function(){this.children.forEach((function(e){e.detach()})),e.prototype.detach.call(this)},t.prototype.formatAt=function(e,t,n,r){this.children.forEachAt(e,t,(function(e,t,i){e.formatAt(t,i,n,r)}))},t.prototype.insertAt=function(e,t,n){var r=this.children.find(e),i=r[0],o=r[1];if(i)i.insertAt(o,t,n);else{var a=null==n?s.create("text",t):s.create(t,n);this.appendChild(a)}},t.prototype.insertBefore=function(e,t){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(t){return e instanceof t})))throw new s.ParchmentError("Cannot insert "+e.statics.blotName+" into "+this.statics.blotName);e.insertInto(this,t)},t.prototype.length=function(){return this.children.reduce((function(e,t){return e+t.length()}),0)},t.prototype.moveChildren=function(e,t){this.children.forEach((function(n){e.insertBefore(n,t)}))},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),0===this.children.length)if(null!=this.statics.defaultChild){var n=s.create(this.statics.defaultChild);this.appendChild(n),n.optimize(t)}else this.remove()},t.prototype.path=function(e,n){void 0===n&&(n=!1);var r=this.children.find(e,n),i=r[0],o=r[1],s=[[this,e]];return i instanceof t?s.concat(i.path(o,n)):(null!=i&&s.push([i,o]),s)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replace=function(n){n instanceof t&&n.moveChildren(this),e.prototype.replace.call(this,n)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var n=this.clone();return this.parent.insertBefore(n,this.next),this.children.forEachAt(e,this.length(),(function(e,r,i){e=e.split(r,t),n.appendChild(e)})),n},t.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},t.prototype.update=function(e,t){var n=this,r=[],i=[];e.forEach((function(e){e.target===n.domNode&&"childList"===e.type&&(r.push.apply(r,e.addedNodes),i.push.apply(i,e.removedNodes))})),i.forEach((function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=s.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==n.domNode||t.detach())}})),r.filter((function(e){return e.parentNode==n.domNode})).sort((function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(e){var t=null;null!=e.nextSibling&&(t=s.find(e.nextSibling));var r=l(e);r.next==t&&null!=r.next||(null!=r.parent&&r.parent.removeChild(n),n.insertBefore(r,t||void 0))}))},t}(o.default);function l(e){var t=s.find(e);if(null==t)try{t=s.create(e)}catch(n){t=s.create(s.Scope.INLINE),[].slice.call(e.childNodes).forEach((function(e){t.domNode.appendChild(e)})),e.parentNode&&e.parentNode.replaceChild(t.domNode,e),t.attach()}return t}t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(12),o=n(31),s=n(17),a=n(1),l=function(e){function t(t){var n=e.call(this,t)||this;return n.attributes=new o.default(n.domNode),n}return r(t,e),t.formats=function(e){return"string"===typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,t){var n=a.query(e);n instanceof i.default?this.attributes.attribute(n,t):t&&(null==n||e===this.statics.blotName&&this.formats()[e]===t||this.replaceWith(e,t))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.replaceWith=function(t,n){var r=e.prototype.replaceWith.call(this,t,n);return this.attributes.copy(r),r},t.prototype.update=function(t,n){var r=this;e.prototype.update.call(this,t,n),t.some((function(e){return e.target===r.domNode&&"attributes"===e.type}))&&this.attributes.build()},t.prototype.wrap=function(n,r){var i=e.prototype.wrap.call(this,n,r);return i instanceof t&&i.statics.scope===this.statics.scope&&this.attributes.move(i),i},t}(s.default);t.default=l},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(30),o=n(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var n=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return e>0&&(n+=1),[this.parent.domNode,n]},t.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=o.Scope.INLINE_BLOT,t}(i.default);t.default=s},function(e,t,n){var r=n(11),i=n(3),o={attributes:{compose:function(e,t,n){"object"!==typeof e&&(e={}),"object"!==typeof t&&(t={});var r=i(!0,{},t);for(var o in n||(r=Object.keys(r).reduce((function(e,t){return null!=r[t]&&(e[t]=r[t]),e}),{})),e)void 0!==e[o]&&void 0===t[o]&&(r[o]=e[o]);return Object.keys(r).length>0?r:void 0},diff:function(e,t){"object"!==typeof e&&(e={}),"object"!==typeof t&&(t={});var n=Object.keys(e).concat(Object.keys(t)).reduce((function(n,i){return r(e[i],t[i])||(n[i]=void 0===t[i]?null:t[i]),n}),{});return Object.keys(n).length>0?n:void 0},transform:function(e,t,n){if("object"!==typeof e)return t;if("object"===typeof t){if(!n)return t;var r=Object.keys(t).reduce((function(n,r){return void 0===e[r]&&(n[r]=t[r]),n}),{});return Object.keys(r).length>0?r:void 0}}},iterator:function(e){return new s(e)},length:function(e){return"number"===typeof e.delete?e.delete:"number"===typeof e.retain?e.retain:"string"===typeof e.insert?e.insert.length:1}};function s(e){this.ops=e,this.index=0,this.offset=0}s.prototype.hasNext=function(){return this.peekLength()<1/0},s.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var n=this.offset,r=o.length(t);if(e>=r-n?(e=r-n,this.index+=1,this.offset=0):this.offset+=e,"number"===typeof t.delete)return{delete:e};var i={};return t.attributes&&(i.attributes=t.attributes),"number"===typeof t.retain?i.retain=e:"string"===typeof t.insert?i.insert=t.insert.substr(n,e):i.insert=t.insert,i}return{retain:1/0}},s.prototype.peek=function(){return this.ops[this.index]},s.prototype.peekLength=function(){return this.ops[this.index]?o.length(this.ops[this.index])-this.offset:1/0},s.prototype.peekType=function(){return this.ops[this.index]?"number"===typeof this.ops[this.index].delete?"delete":"number"===typeof this.ops[this.index].retain?"retain":"insert":"retain"},s.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,n=this.next(),r=this.ops.slice(this.index);return this.offset=e,this.index=t,[n].concat(r)}return[]},e.exports=o},function(e,t){var n=function(){"use strict";function e(e,t){return null!=t&&e instanceof t}var t,n,r;try{t=Map}catch(a){t=function(){}}try{n=Set}catch(a){n=function(){}}try{r=Promise}catch(a){r=function(){}}function i(o,a,l,c,u){"object"===typeof a&&(l=a.depth,c=a.prototype,u=a.includeNonEnumerable,a=a.circular);var h=[],d=[],f="undefined"!=typeof Buffer;return"undefined"==typeof a&&(a=!0),"undefined"==typeof l&&(l=1/0),function o(l,p){if(null===l)return null;if(0===p)return l;var g,m;if("object"!=typeof l)return l;if(e(l,t))g=new t;else if(e(l,n))g=new n;else if(e(l,r))g=new r((function(e,t){l.then((function(t){e(o(t,p-1))}),(function(e){t(o(e,p-1))}))}));else if(i.__isArray(l))g=[];else if(i.__isRegExp(l))g=new RegExp(l.source,s(l)),l.lastIndex&&(g.lastIndex=l.lastIndex);else if(i.__isDate(l))g=new Date(l.getTime());else{if(f&&Buffer.isBuffer(l))return g=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(g),g;e(l,Error)?g=Object.create(l):"undefined"==typeof c?(m=Object.getPrototypeOf(l),g=Object.create(m)):(g=Object.create(c),m=c)}if(a){var v=h.indexOf(l);if(-1!=v)return d[v];h.push(l),d.push(g)}for(var y in e(l,t)&&l.forEach((function(e,t){var n=o(t,p-1),r=o(e,p-1);g.set(n,r)})),e(l,n)&&l.forEach((function(e){var t=o(e,p-1);g.add(t)})),l){var b;m&&(b=Object.getOwnPropertyDescriptor(m,y)),b&&null==b.set||(g[y]=o(l[y],p-1))}if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);for(y=0;y<w.length;y++){var _=w[y];(!(k=Object.getOwnPropertyDescriptor(l,_))||k.enumerable||u)&&(g[_]=o(l[_],p-1),k.enumerable||Object.defineProperty(g,_,{enumerable:!1}))}}if(u){var x=Object.getOwnPropertyNames(l);for(y=0;y<x.length;y++){var k,S=x[y];(k=Object.getOwnPropertyDescriptor(l,S))&&k.enumerable||(g[S]=o(l[S],p-1),Object.defineProperty(g,S,{enumerable:!1}))}}return g}(o,l)}function o(e){return Object.prototype.toString.call(e)}function s(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=o,i.__isDate=function(e){return"object"===typeof e&&"[object Date]"===o(e)},i.__isArray=function(e){return"object"===typeof e&&"[object Array]"===o(e)},i.__isRegExp=function(e){return"object"===typeof e&&"[object RegExp]"===o(e)},i.__getRegExpFlags=s,i}();"object"===typeof e&&e.exports&&(e.exports=n)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=f(n(0)),a=f(n(8)),l=n(4),c=f(l),u=f(n(16)),h=f(n(13)),d=f(n(25));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return e instanceof c.default||e instanceof l.BlockEmbed}var g=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.emitter=n.emitter,Array.isArray(n.whitelist)&&(r.whitelist=n.whitelist.reduce((function(e,t){return e[t]=!0,e}),{})),r.domNode.addEventListener("DOMNodeInserted",(function(){})),r.optimize(),r.enable(),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(e,n){var i=this.line(e),s=r(i,2),a=s[0],c=s[1],d=this.line(e+n),f=r(d,1)[0];if(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"deleteAt",this).call(this,e,n),null!=f&&a!==f&&c>0){if(a instanceof l.BlockEmbed||f instanceof l.BlockEmbed)return void this.optimize();if(a instanceof h.default){var p=a.newlineIndex(a.length(),!0);if(p>-1&&(a=a.split(p+1))===f)return void this.optimize()}else if(f instanceof h.default){var g=f.newlineIndex(0);g>-1&&f.split(g+1)}var m=f.children.head instanceof u.default?null:f.children.head;a.moveChildren(f,m),a.remove()}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,n,r,i){(null==this.whitelist||this.whitelist[r])&&(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"formatAt",this).call(this,e,n,r,i),this.optimize())}},{key:"insertAt",value:function(e,n,r){if(null==r||null==this.whitelist||this.whitelist[n]){if(e>=this.length())if(null==r||null==s.default.query(n,s.default.Scope.BLOCK)){var i=s.default.create(this.statics.defaultChild);this.appendChild(i),null==r&&n.endsWith("\n")&&(n=n.slice(0,-1)),i.insertAt(0,n,r)}else{var a=s.default.create(n,r);this.appendChild(a)}else o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertAt",this).call(this,e,n,r);this.optimize()}}},{key:"insertBefore",value:function(e,n){if(e.statics.scope===s.default.Scope.INLINE_BLOT){var r=s.default.create(this.statics.defaultChild);r.appendChild(e),e=r}o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n)}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(p,e)}},{key:"lines",value:function(){return function e(t,n,r){var i=[],o=r;return t.children.forEachAt(n,r,(function(t,n,r){p(t)?i.push(t):t instanceof s.default.Container&&(i=i.concat(e(t,n,o))),o-=r})),i}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e,n),e.length>0&&this.emitter.emit(a.default.events.SCROLL_OPTIMIZE,e,n))}},{key:"path",value:function(e){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"path",this).call(this,e).slice(1)}},{key:"update",value:function(e){if(!0!==this.batch){var n=a.default.sources.USER;"string"===typeof e&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),e.length>0&&this.emitter.emit(a.default.events.SCROLL_BEFORE_UPDATE,n,e),o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(a.default.events.SCROLL_UPDATE,n,e)}}}]),t}(s.default.Scroll);g.blotName="scroll",g.className="ql-editor",g.tagName="DIV",g.defaultChild="block",g.allowedChildren=[c.default,l.BlockEmbed,d.default],t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SHORTKEY=t.default=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=g(n(21)),a=g(n(11)),l=g(n(3)),c=g(n(2)),u=g(n(20)),h=g(n(0)),d=g(n(5)),f=g(n(10)),p=g(n(9));function g(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=(0,f.default)("quill:keyboard"),y=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",b=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.bindings={},Object.keys(r.options.bindings).forEach((function(t){("list autofill"!==t||null==e.scroll.whitelist||e.scroll.whitelist.list)&&r.options.bindings[t]&&r.addBinding(r.options.bindings[t])})),r.addBinding({key:t.keys.ENTER,shiftKey:null},S),r.addBinding({key:t.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(r.addBinding({key:t.keys.BACKSPACE},{collapsed:!0},_),r.addBinding({key:t.keys.DELETE},{collapsed:!0},x)):(r.addBinding({key:t.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},_),r.addBinding({key:t.keys.DELETE},{collapsed:!0,suffix:/^.?$/},x)),r.addBinding({key:t.keys.BACKSPACE},{collapsed:!1},k),r.addBinding({key:t.keys.DELETE},{collapsed:!1},k),r.addBinding({key:t.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},_),r.listen(),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,null,[{key:"match",value:function(e,t){return t=T(t),!["altKey","ctrlKey","metaKey","shiftKey"].some((function(n){return!!t[n]!==e[n]&&null!==t[n]}))&&t.key===(e.which||e.keyCode)}}]),o(t,[{key:"addBinding",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=T(e);if(null==r||null==r.key)return v.warn("Attempted to add invalid keyboard binding",r);"function"===typeof t&&(t={handler:t}),"function"===typeof n&&(n={handler:n}),r=(0,l.default)(r,t,n),this.bindings[r.key]=this.bindings[r.key]||[],this.bindings[r.key].push(r)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",(function(n){if(!n.defaultPrevented){var o=n.which||n.keyCode,s=(e.bindings[o]||[]).filter((function(e){return t.match(n,e)}));if(0!==s.length){var l=e.quill.getSelection();if(null!=l&&e.quill.hasFocus()){var c=e.quill.getLine(l.index),u=i(c,2),d=u[0],f=u[1],p=e.quill.getLeaf(l.index),g=i(p,2),m=g[0],v=g[1],y=0===l.length?[m,v]:e.quill.getLeaf(l.index+l.length),b=i(y,2),w=b[0],_=b[1],x=m instanceof h.default.Text?m.value().slice(0,v):"",k=w instanceof h.default.Text?w.value().slice(_):"",S={collapsed:0===l.length,empty:0===l.length&&d.length()<=1,format:e.quill.getFormat(l),offset:f,prefix:x,suffix:k};s.some((function(t){if(null!=t.collapsed&&t.collapsed!==S.collapsed)return!1;if(null!=t.empty&&t.empty!==S.empty)return!1;if(null!=t.offset&&t.offset!==S.offset)return!1;if(Array.isArray(t.format)){if(t.format.every((function(e){return null==S.format[e]})))return!1}else if("object"===r(t.format)&&!Object.keys(t.format).every((function(e){return!0===t.format[e]?null!=S.format[e]:!1===t.format[e]?null==S.format[e]:(0,a.default)(t.format[e],S.format[e])})))return!1;return!(null!=t.prefix&&!t.prefix.test(S.prefix))&&!(null!=t.suffix&&!t.suffix.test(S.suffix))&&!0!==t.handler.call(e,l,S)}))&&n.preventDefault()}}}}))}}]),t}(p.default);function w(e,t){var n,r=e===b.keys.LEFT?"prefix":"suffix";return m(n={key:e,shiftKey:t,altKey:null},r,/^$/),m(n,"handler",(function(n){var r=n.index;e===b.keys.RIGHT&&(r+=n.length+1);var o=this.quill.getLeaf(r);return!(i(o,1)[0]instanceof h.default.Embed)||(e===b.keys.LEFT?t?this.quill.setSelection(n.index-1,n.length+1,d.default.sources.USER):this.quill.setSelection(n.index-1,d.default.sources.USER):t?this.quill.setSelection(n.index,n.length+1,d.default.sources.USER):this.quill.setSelection(n.index+n.length+1,d.default.sources.USER),!1)})),n}function _(e,t){if(!(0===e.index||this.quill.getLength()<=1)){var n=this.quill.getLine(e.index),r=i(n,1)[0],o={};if(0===t.offset){var s=this.quill.getLine(e.index-1),a=i(s,1)[0];if(null!=a&&a.length()>1){var l=r.formats(),c=this.quill.getFormat(e.index-1,1);o=u.default.attributes.diff(l,c)||{}}}var h=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;this.quill.deleteText(e.index-h,h,d.default.sources.USER),Object.keys(o).length>0&&this.quill.formatLine(e.index-h,h,o,d.default.sources.USER),this.quill.focus()}}function x(e,t){var n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-n)){var r={},o=0,s=this.quill.getLine(e.index),a=i(s,1)[0];if(t.offset>=a.length()-1){var l=this.quill.getLine(e.index+1),c=i(l,1)[0];if(c){var h=a.formats(),f=this.quill.getFormat(e.index,1);r=u.default.attributes.diff(h,f)||{},o=c.length()}}this.quill.deleteText(e.index,n,d.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(e.index+o-1,n,r,d.default.sources.USER)}}function k(e){var t=this.quill.getLines(e),n={};if(t.length>1){var r=t[0].formats(),i=t[t.length-1].formats();n=u.default.attributes.diff(i,r)||{}}this.quill.deleteText(e,d.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(e.index,1,n,d.default.sources.USER),this.quill.setSelection(e.index,d.default.sources.SILENT),this.quill.focus()}function S(e,t){var n=this;e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var r=Object.keys(t.format).reduce((function(e,n){return h.default.query(n,h.default.Scope.BLOCK)&&!Array.isArray(t.format[n])&&(e[n]=t.format[n]),e}),{});this.quill.insertText(e.index,"\n",r,d.default.sources.USER),this.quill.setSelection(e.index+1,d.default.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach((function(e){null==r[e]&&(Array.isArray(t.format[e])||"link"!==e&&n.quill.format(e,t.format[e],d.default.sources.USER))}))}function E(e){return{key:b.keys.TAB,shiftKey:!e,format:{"code-block":!0},handler:function(t){var n=h.default.query("code-block"),r=t.index,o=t.length,s=this.quill.scroll.descendant(n,r),a=i(s,2),l=a[0],c=a[1];if(null!=l){var u=this.quill.getIndex(l),f=l.newlineIndex(c,!0)+1,p=l.newlineIndex(u+c+o),g=l.domNode.textContent.slice(f,p).split("\n");c=0,g.forEach((function(t,i){e?(l.insertAt(f+c,n.TAB),c+=n.TAB.length,0===i?r+=n.TAB.length:o+=n.TAB.length):t.startsWith(n.TAB)&&(l.deleteAt(f+c,n.TAB.length),c-=n.TAB.length,0===i?r-=n.TAB.length:o-=n.TAB.length),c+=t.length+1})),this.quill.update(d.default.sources.USER),this.quill.setSelection(r,o,d.default.sources.SILENT)}}}}function C(e){return{key:e[0].toUpperCase(),shortKey:!0,handler:function(t,n){this.quill.format(e,!n.format[e],d.default.sources.USER)}}}function T(e){if("string"===typeof e||"number"===typeof e)return T({key:e});if("object"===("undefined"===typeof e?"undefined":r(e))&&(e=(0,s.default)(e,!1)),"string"===typeof e.key)if(null!=b.keys[e.key.toUpperCase()])e.key=b.keys[e.key.toUpperCase()];else{if(1!==e.key.length)return null;e.key=e.key.toUpperCase().charCodeAt(0)}return e.shortKey&&(e[y]=e.shortKey,delete e.shortKey),e}b.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},b.DEFAULTS={bindings:{bold:C("bold"),italic:C("italic"),underline:C("underline"),indent:{key:b.keys.TAB,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","+1",d.default.sources.USER)}},outdent:{key:b.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){if(t.collapsed&&0!==t.offset)return!0;this.quill.format("indent","-1",d.default.sources.USER)}},"outdent backspace":{key:b.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",d.default.sources.USER):null!=t.format.list&&this.quill.format("list",!1,d.default.sources.USER)}},"indent code-block":E(!0),"outdent code-block":E(!1),"remove tab":{key:b.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,d.default.sources.USER)}},tab:{key:b.keys.TAB,handler:function(e){this.quill.history.cutoff();var t=(new c.default).retain(e.index).delete(e.length).insert("\t");this.quill.updateContents(t,d.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,d.default.sources.SILENT)}},"list empty enter":{key:b.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(e,t){this.quill.format("list",!1,d.default.sources.USER),t.format.indent&&this.quill.format("indent",!1,d.default.sources.USER)}},"checklist enter":{key:b.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(e){var t=this.quill.getLine(e.index),n=i(t,2),r=n[0],o=n[1],s=(0,l.default)({},r.formats(),{list:"checked"}),a=(new c.default).retain(e.index).insert("\n",s).retain(r.length()-o-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,d.default.sources.USER),this.quill.setSelection(e.index+1,d.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:b.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var n=this.quill.getLine(e.index),r=i(n,2),o=r[0],s=r[1],a=(new c.default).retain(e.index).insert("\n",t.format).retain(o.length()-s-1).retain(1,{header:null});this.quill.updateContents(a,d.default.sources.USER),this.quill.setSelection(e.index+1,d.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){var n=t.prefix.length,r=this.quill.getLine(e.index),o=i(r,2),s=o[0],a=o[1];if(a>n)return!0;var l=void 0;switch(t.prefix.trim()){case"[]":case"[ ]":l="unchecked";break;case"[x]":l="checked";break;case"-":case"*":l="bullet";break;default:l="ordered"}this.quill.insertText(e.index," ",d.default.sources.USER),this.quill.history.cutoff();var u=(new c.default).retain(e.index-a).delete(n+1).retain(s.length()-2-a).retain(1,{list:l});this.quill.updateContents(u,d.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-n,d.default.sources.SILENT)}},"code exit":{key:b.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(e){var t=this.quill.getLine(e.index),n=i(t,2),r=n[0],o=n[1],s=(new c.default).retain(e.index+r.length()-o-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(s,d.default.sources.USER)}},"embed left":w(b.keys.LEFT,!1),"embed left shift":w(b.keys.LEFT,!0),"embed right":w(b.keys.RIGHT,!1),"embed right shift":w(b.keys.RIGHT,!0)}},t.default=b,t.SHORTKEY=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=l(n(0)),a=l(n(7));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.selection=n,r.textNode=document.createTextNode(t.CONTENTS),r.domNode.appendChild(r.textNode),r._length=0,r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,null,[{key:"value",value:function(){}}]),o(t,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,n){if(0!==this._length)return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n);for(var r=this,o=0;null!=r&&r.statics.scope!==s.default.Scope.BLOCK_BLOT;)o+=r.offset(r.parent),r=r.parent;null!=r&&(this._length=t.CONTENTS.length,r.optimize(),r.formatAt(o,t.CONTENTS.length,e,n),this._length=0)}},{key:"index",value:function(e,n){return e===this.textNode?0:i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,n)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var e=this.textNode,n=this.selection.getNativeRange(),i=void 0,o=void 0,l=void 0;if(null!=n&&n.start.node===e&&n.end.node===e){var c=[e,n.start.offset,n.end.offset];i=c[0],o=c[1],l=c[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==t.CONTENTS){var u=this.textNode.data.split(t.CONTENTS).join("");this.next instanceof a.default?(i=this.next.domNode,this.next.insertAt(0,u),this.textNode.data=t.CONTENTS):(this.textNode.data=u,this.parent.insertBefore(s.default.create(this.textNode),this),this.textNode=document.createTextNode(t.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=o){var h=[o,l].map((function(e){return Math.max(0,Math.min(i.data.length,e-1))})),d=r(h,2);return o=d[0],l=d[1],{startNode:i,startOffset:o,endNode:i,endOffset:l}}}}},{key:"update",value:function(e,t){var n=this;if(e.some((function(e){return"characterData"===e.type&&e.target===n.textNode}))){var r=this.restore();r&&(t.range=r)}}},{key:"value",value:function(){return""}}]),t}(s.default.Embed);c.blotName="cursor",c.className="ql-cursor",c.tagName="span",c.CONTENTS="\ufeff",t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),i=n(4),o=s(i);function s(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default.Container);a.allowedChildren=[o.default,i.BlockEmbed,a],t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorStyle=t.ColorClass=t.ColorAttributor=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(0),a=(r=s)&&r.__esModule?r:{default:r},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"value",value:function(e){var n=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e);return n.startsWith("rgb(")?(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+n.split(",").map((function(e){return("00"+parseInt(e).toString(16)).slice(-2)})).join("")):n}}]),t}(a.default.Attributor.Style),c=new a.default.Attributor.Class("color","ql-color",{scope:a.default.Scope.INLINE}),u=new l("color","color",{scope:a.default.Scope.INLINE});t.ColorAttributor=l,t.ColorClass=c,t.ColorStyle=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sanitize=t.default=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(6),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"format",value:function(e,n){if(e!==this.statics.blotName||!n)return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n);n=this.constructor.sanitize(n),this.domNode.setAttribute("href",n)}}],[{key:"create",value:function(e){var n=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return e=this.sanitize(e),n.setAttribute("href",e),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return l(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);function l(e,t){var n=document.createElement("a");n.href=e;var r=n.href.slice(0,n.href.indexOf(":"));return t.indexOf(r)>-1}a.blotName="link",a.tagName="A",a.SANITIZED_URL="about:blank",a.PROTOCOL_WHITELIST=["http","https","mailto","tel"],t.default=a,t.sanitize=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=a(n(23)),s=a(n(107));function a(e){return e&&e.__esModule?e:{default:e}}var l=0;function c(e,t){e.setAttribute(t,!("true"===e.getAttribute(t)))}var u=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(function(){n.togglePicker()})),this.label.addEventListener("keydown",(function(e){switch(e.keyCode){case o.default.keys.ENTER:n.togglePicker();break;case o.default.keys.ESCAPE:n.escape(),e.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}return i(e,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),c(this.label,"aria-expanded"),c(this.options,"aria-hidden")}},{key:"buildItem",value:function(e){var t=this,n=document.createElement("span");return n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item"),e.hasAttribute("value")&&n.setAttribute("data-value",e.getAttribute("value")),e.textContent&&n.setAttribute("data-label",e.textContent),n.addEventListener("click",(function(){t.selectItem(n,!0)})),n.addEventListener("keydown",(function(e){switch(e.keyCode){case o.default.keys.ENTER:t.selectItem(n,!0),e.preventDefault();break;case o.default.keys.ESCAPE:t.escape(),e.preventDefault()}})),n}},{key:"buildLabel",value:function(){var e=document.createElement("span");return e.classList.add("ql-picker-label"),e.innerHTML=s.default,e.tabIndex="0",e.setAttribute("role","button"),e.setAttribute("aria-expanded","false"),this.container.appendChild(e),e}},{key:"buildOptions",value:function(){var e=this,t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id="ql-picker-options-"+l,l+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,[].slice.call(this.select.options).forEach((function(n){var r=e.buildItem(n);t.appendChild(r),!0===n.selected&&e.selectItem(r)})),this.container.appendChild(t)}},{key:"buildPicker",value:function(){var e=this;[].slice.call(this.select.attributes).forEach((function(t){e.container.setAttribute(t.name,t.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var e=this;this.close(),setTimeout((function(){return e.label.focus()}),1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.container.querySelector(".ql-selected");if(e!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=e&&(e.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(e.parentNode.children,e),e.hasAttribute("data-value")?this.label.setAttribute("data-value",e.getAttribute("data-value")):this.label.removeAttribute("data-value"),e.hasAttribute("data-label")?this.label.setAttribute("data-label",e.getAttribute("data-label")):this.label.removeAttribute("data-label"),t))){if("function"===typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"===typeof Event?"undefined":r(Event))){var i=document.createEvent("Event");i.initEvent("change",!0,!0),this.select.dispatchEvent(i)}this.close()}}},{key:"update",value:function(){var e=void 0;if(this.select.selectedIndex>-1){var t=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];e=this.select.options[this.select.selectedIndex],this.selectItem(t)}else this.selectItem(null);var n=null!=e&&e!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=v(n(0)),i=v(n(5)),o=n(4),s=v(o),a=v(n(16)),l=v(n(25)),c=v(n(24)),u=v(n(35)),h=v(n(6)),d=v(n(22)),f=v(n(7)),p=v(n(55)),g=v(n(42)),m=v(n(23));function v(e){return e&&e.__esModule?e:{default:e}}i.default.register({"blots/block":s.default,"blots/block/embed":o.BlockEmbed,"blots/break":a.default,"blots/container":l.default,"blots/cursor":c.default,"blots/embed":u.default,"blots/inline":h.default,"blots/scroll":d.default,"blots/text":f.default,"modules/clipboard":p.default,"modules/history":g.default,"modules/keyboard":m.default}),r.default.register(s.default,a.default,c.default,h.default,d.default,f.default),t.default=i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(){function e(e){this.domNode=e,this.domNode[r.DATA_KEY]={blot:this}}return Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),e.create=function(e){if(null==this.tagName)throw new r.ParchmentError("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"===typeof e&&(e=e.toUpperCase(),parseInt(e).toString()===e&&(e=parseInt(e))),t="number"===typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},e.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return r.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[r.DATA_KEY]},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,n,i){var o=this.isolate(e,t);if(null!=r.query(n,r.Scope.BLOT)&&i)o.wrap(n,i);else if(null!=r.query(n,r.Scope.ATTRIBUTE)){var s=r.create(this.statics.scope);o.wrap(s),s.format(n,i)}},e.prototype.insertAt=function(e,t,n){var i=null==n?r.create("text",t):r.create(t,n),o=this.split(e);this.parent.insertBefore(i,o)},e.prototype.insertInto=function(e,t){void 0===t&&(t=null),null!=this.parent&&this.parent.children.remove(this);var n=null;e.children.insertBefore(this,t),null!=t&&(n=t.domNode),this.domNode.parentNode==e.domNode&&this.domNode.nextSibling==n||e.domNode.insertBefore(this.domNode,n),this.parent=e,this.attach()},e.prototype.isolate=function(e,t){var n=this.split(e);return n.split(t),n},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this==e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){null!=this.domNode[r.DATA_KEY]&&delete this.domNode[r.DATA_KEY].mutations},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replace=function(e){null!=e.parent&&(e.parent.insertBefore(this,e.next),e.remove())},e.prototype.replaceWith=function(e,t){var n="string"===typeof e?r.create(e,t):e;return n.replace(this),n},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var n="string"===typeof e?r.create(e,t):e;return null!=this.parent&&this.parent.insertBefore(n,this.next),n.appendChild(this),n},e.blotName="abstract",e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12),i=n(32),o=n(33),s=n(1),a=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=r.default.keys(this.domNode),n=i.default.keys(this.domNode),a=o.default.keys(this.domNode);t.concat(n).concat(a).forEach((function(t){var n=s.query(t,s.Scope.ATTRIBUTE);n instanceof r.default&&(e.attributes[n.attrName]=n)}))},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach((function(n){var r=t.attributes[n].value(t.domNode);e.format(n,r)}))},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach((function(e){t.attributes[e].remove(t.domNode)})),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce((function(t,n){return t[n]=e.attributes[n].value(e.domNode),t}),{})},e}();t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function i(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter((function(e){return 0===e.indexOf(t+"-")}))}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map((function(e){return e.split("-").slice(0,-1).join("-")}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},t.prototype.remove=function(e){i(e,this.keyName).forEach((function(t){e.classList.remove(t)})),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(i(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(n(12).default);t.default=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function i(e){var t=e.split("-"),n=t.slice(1).map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("");return t[0]+n}Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map((function(e){return e.split(":")[0].trim()}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[i(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[i(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[i(this.keyName)];return this.canAdd(e,t)?t:""},t}(n(12).default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=n,this.modules={}}return r(e,[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach((function(t){null==e.modules[t]&&e.addModule(t)}))}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/"+e);return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}]),e}();i.DEFAULTS={modules:{}},i.themes={default:i},t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=a(n(0)),s=a(n(7));function a(e){return e&&e.__esModule?e:{default:e}}var l="\ufeff",c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.contentNode=document.createElement("span"),n.contentNode.setAttribute("contenteditable",!1),[].slice.call(n.domNode.childNodes).forEach((function(e){n.contentNode.appendChild(e)})),n.leftGuard=document.createTextNode(l),n.rightGuard=document.createTextNode(l),n.domNode.appendChild(n.leftGuard),n.domNode.appendChild(n.contentNode),n.domNode.appendChild(n.rightGuard),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"index",value:function(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"index",this).call(this,e,n)}},{key:"restore",value:function(e){var t=void 0,n=void 0,r=e.data.split(l).join("");if(e===this.leftGuard)if(this.prev instanceof s.default){var i=this.prev.length();this.prev.insertAt(i,r),t={startNode:this.prev.domNode,startOffset:i+r.length}}else n=document.createTextNode(r),this.parent.insertBefore(o.default.create(n),this),t={startNode:n,startOffset:r.length};else e===this.rightGuard&&(this.next instanceof s.default?(this.next.insertAt(0,r),t={startNode:this.next.domNode,startOffset:r.length}):(n=document.createTextNode(r),this.parent.insertBefore(o.default.create(n),this.next),t={startNode:n,startOffset:r.length}));return e.data=l,t}},{key:"update",value:function(e,t){var n=this;e.forEach((function(e){if("characterData"===e.type&&(e.target===n.leftGuard||e.target===n.rightGuard)){var r=n.restore(e.target);r&&(t.range=r)}}))}}]),t}(o.default.Embed);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AlignStyle=t.AlignClass=t.AlignAttribute=void 0;var r,i=n(0),o=(r=i)&&r.__esModule?r:{default:r},s={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},a=new o.default.Attributor.Attribute("align","align",s),l=new o.default.Attributor.Class("align","ql-align",s),c=new o.default.Attributor.Style("align","text-align",s);t.AlignAttribute=a,t.AlignClass=l,t.AlignStyle=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundStyle=t.BackgroundClass=void 0;var r,i=n(0),o=(r=i)&&r.__esModule?r:{default:r},s=n(26),a=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),l=new s.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});t.BackgroundClass=a,t.BackgroundStyle=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionStyle=t.DirectionClass=t.DirectionAttribute=void 0;var r,i=n(0),o=(r=i)&&r.__esModule?r:{default:r},s={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},a=new o.default.Attributor.Attribute("direction","dir",s),l=new o.default.Attributor.Class("direction","ql-direction",s),c=new o.default.Attributor.Style("direction","direction",s);t.DirectionAttribute=a,t.DirectionClass=l,t.DirectionStyle=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FontClass=t.FontStyle=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(0),a=(r=s)&&r.__esModule?r:{default:r},l={scope:a.default.Scope.INLINE,whitelist:["serif","monospace"]},c=new a.default.Attributor.Class("font","ql-font",l),u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"value",value:function(e){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e).replace(/["']/g,"")}}]),t}(a.default.Attributor.Style),h=new u("font","font-family",l);t.FontStyle=h,t.FontClass=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SizeStyle=t.SizeClass=void 0;var r,i=n(0),o=(r=i)&&r.__esModule?r:{default:r},s=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),a=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});t.SizeClass=s,t.SizeStyle=a},function(e,t,n){"use strict";e.exports={align:{"":n(76),center:n(77),right:n(78),justify:n(79)},background:n(80),blockquote:n(81),bold:n(82),clean:n(83),code:n(58),"code-block":n(58),color:n(84),direction:{"":n(85),rtl:n(86)},float:{center:n(87),full:n(88),left:n(89),right:n(90)},formula:n(91),header:{1:n(92),2:n(93)},italic:n(94),image:n(95),indent:{"+1":n(96),"-1":n(97)},link:n(98),list:{ordered:n(99),bullet:n(100),check:n(101)},script:{sub:n(102),super:n(103)},strike:n(104),underline:n(105),video:n(106)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLastChangeIndex=t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(0)),o=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.lastRecorded=0,r.ignoreChange=!1,r.clear(),r.quill.on(o.default.events.EDITOR_CHANGE,(function(e,t,n,i){e!==o.default.events.TEXT_CHANGE||r.ignoreChange||(r.options.userOnly&&i!==o.default.sources.USER?r.transform(t):r.record(t,n))})),r.quill.keyboard.addBinding({key:"Z",shortKey:!0},r.undo.bind(r)),r.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},r.redo.bind(r)),/Win/i.test(navigator.platform)&&r.quill.keyboard.addBinding({key:"Y",shortKey:!0},r.redo.bind(r)),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var n=this.stack[e].pop();this.stack[t].push(n),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n[e],o.default.sources.USER),this.ignoreChange=!1;var r=l(n[e]);this.quill.setSelection(r)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var n=this.quill.getContents().diff(t),r=Date.now();if(this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0){var i=this.stack.undo.pop();n=n.compose(i.undo),e=i.redo.compose(e)}else this.lastRecorded=r;this.stack.undo.push({redo:e,undo:n}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){this.stack.undo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)})),this.stack.redo.forEach((function(t){t.undo=e.transform(t.undo,!0),t.redo=e.transform(t.redo,!0)}))}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(s(n(9)).default);function l(e){var t=e.reduce((function(e,t){return e+=t.delete||0}),0),n=e.length()-t;return function(e){var t=e.ops[e.ops.length-1];return null!=t&&(null!=t.insert?"string"===typeof t.insert&&t.insert.endsWith("\n"):null!=t.attributes&&Object.keys(t.attributes).some((function(e){return null!=i.default.query(e,i.default.Scope.BLOCK)})))}(e)&&(n-=1),n}a.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},t.default=a,t.getLastChangeIndex=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseTooltip=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=p(n(3)),s=p(n(2)),a=p(n(8)),l=p(n(23)),c=p(n(34)),u=p(n(59)),h=p(n(60)),d=p(n(28)),f=p(n(61));function p(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=[!1,"center","right","justify"],b=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],w=[!1,"serif","monospace"],_=["1","2","3",!1],x=["small",!1,"large","huge"],k=function(e){function t(e,n){g(this,t);var r=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return e.emitter.listenDOM("click",document.body,(function t(n){if(!document.body.contains(e.root))return document.body.removeEventListener("click",t);null==r.tooltip||r.tooltip.root.contains(n.target)||document.activeElement===r.tooltip.textbox||r.quill.hasFocus()||r.tooltip.hide(),null!=r.pickers&&r.pickers.forEach((function(e){e.container.contains(n.target)||e.close()}))})),r}return v(t,e),r(t,[{key:"addModule",value:function(e){var n=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addModule",this).call(this,e);return"toolbar"===e&&this.extendToolbar(n),n}},{key:"buildButtons",value:function(e,t){e.forEach((function(e){(e.getAttribute("class")||"").split(/\s+/).forEach((function(n){if(n.startsWith("ql-")&&(n=n.slice(3),null!=t[n]))if("direction"===n)e.innerHTML=t[n][""]+t[n].rtl;else if("string"===typeof t[n])e.innerHTML=t[n];else{var r=e.value||"";null!=r&&t[n][r]&&(e.innerHTML=t[n][r])}}))}))}},{key:"buildPickers",value:function(e,t){var n=this;this.pickers=e.map((function(e){if(e.classList.contains("ql-align"))return null==e.querySelector("option")&&E(e,y),new h.default(e,t.align);if(e.classList.contains("ql-background")||e.classList.contains("ql-color")){var n=e.classList.contains("ql-background")?"background":"color";return null==e.querySelector("option")&&E(e,b,"background"===n?"#ffffff":"#000000"),new u.default(e,t[n])}return null==e.querySelector("option")&&(e.classList.contains("ql-font")?E(e,w):e.classList.contains("ql-header")?E(e,_):e.classList.contains("ql-size")&&E(e,x)),new d.default(e)})),this.quill.on(a.default.events.EDITOR_CHANGE,(function(){n.pickers.forEach((function(e){e.update()}))}))}}]),t}(c.default);k.DEFAULTS=(0,o.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var e=this,t=this.container.querySelector("input.ql-image[type=file]");null==t&&((t=document.createElement("input")).setAttribute("type","file"),t.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),t.classList.add("ql-image"),t.addEventListener("change",(function(){if(null!=t.files&&null!=t.files[0]){var n=new FileReader;n.onload=function(n){var r=e.quill.getSelection(!0);e.quill.updateContents((new s.default).retain(r.index).delete(r.length).insert({image:n.target.result}),a.default.sources.USER),e.quill.setSelection(r.index+1,a.default.sources.SILENT),t.value=""},n.readAsDataURL(t.files[0])}})),this.container.appendChild(t)),t.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var S=function(e){function t(e,n){g(this,t);var r=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.textbox=r.root.querySelector('input[type="text"]'),r.listen(),r}return v(t,e),r(t,[{key:"listen",value:function(){var e=this;this.textbox.addEventListener("keydown",(function(t){l.default.match(t,"enter")?(e.save(),t.preventDefault()):l.default.match(t,"escape")&&(e.cancel(),t.preventDefault())}))}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=t?this.textbox.value=t:e!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+e)||""),this.root.setAttribute("data-mode",e)}},{key:"restoreFocus",value:function(){var e=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=e}},{key:"save",value:function(){var e=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var t=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",e,a.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",e,a.default.sources.USER)),this.quill.root.scrollTop=t;break;case"video":e=function(e){var t=e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||e.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return t?(t[1]||"https")+"://www.youtube.com/embed/"+t[2]+"?showinfo=0":(t=e.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(t[1]||"https")+"://player.vimeo.com/video/"+t[2]+"/":e}(e);case"formula":if(!e)break;var n=this.quill.getSelection(!0);if(null!=n){var r=n.index+n.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),e,a.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(r+1," ",a.default.sources.USER),this.quill.setSelection(r+2,a.default.sources.USER)}}this.textbox.value="",this.hide()}}]),t}(f.default);function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var r=document.createElement("option");t===n?r.setAttribute("selected","selected"):r.setAttribute("value",t),e.appendChild(r)}))}t.BaseTooltip=S,t.default=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.head=this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.insertBefore(e[0],null),e.length>1&&this.append.apply(this,e.slice(1))},e.prototype.contains=function(e){for(var t,n=this.iterator();t=n();)if(t===e)return!0;return!1},e.prototype.insertBefore=function(e,t){e&&(e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,n=this.head;null!=n;){if(n===e)return t;t+=n.length(),n=n.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var n,r=this.iterator();n=r();){var i=n.length();if(e<i||t&&e===i&&(null==n.next||0!==n.next.length()))return[n,e];e-=i}return[null,0]},e.prototype.forEach=function(e){for(var t,n=this.iterator();t=n();)e(t)},e.prototype.forEachAt=function(e,t,n){if(!(t<=0))for(var r,i=this.find(e),o=i[0],s=e-i[1],a=this.iterator(o);(r=a())&&s<e+t;){var l=r.length();e>s?n(r,e-s,Math.min(t,s+l-e)):n(r,0,Math.min(l,e+t-s)),s+=l}},e.prototype.map=function(e){return this.reduce((function(t,n){return t.push(e(n)),t}),[])},e.prototype.reduce=function(e,t){for(var n,r=this.iterator();n=r();)t=e(t,n);return t},e}();t.default=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),o=n(1),s={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},a=function(e){function t(t){var n=e.call(this,t)||this;return n.scroll=n,n.observer=new MutationObserver((function(e){n.update(e)})),n.observer.observe(n.domNode,s),n.attach(),n}return r(t,e),t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,n){this.update(),0===t&&n===this.length()?this.children.forEach((function(e){e.remove()})):e.prototype.deleteAt.call(this,t,n)},t.prototype.formatAt=function(t,n,r,i){this.update(),e.prototype.formatAt.call(this,t,n,r,i)},t.prototype.insertAt=function(t,n,r){this.update(),e.prototype.insertAt.call(this,t,n,r)},t.prototype.optimize=function(t,n){var r=this;void 0===t&&(t=[]),void 0===n&&(n={}),e.prototype.optimize.call(this,n);for(var s=[].slice.call(this.observer.takeRecords());s.length>0;)t.push(s.pop());for(var a=function(e,t){void 0===t&&(t=!0),null!=e&&e!==r&&null!=e.domNode.parentNode&&(null==e.domNode[o.DATA_KEY].mutations&&(e.domNode[o.DATA_KEY].mutations=[]),t&&a(e.parent))},l=function(e){null!=e.domNode[o.DATA_KEY]&&null!=e.domNode[o.DATA_KEY].mutations&&(e instanceof i.default&&e.children.forEach(l),e.optimize(n))},c=t,u=0;c.length>0;u+=1){if(u>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach((function(e){var t=o.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(a(o.find(e.previousSibling,!1)),[].forEach.call(e.addedNodes,(function(e){var t=o.find(e,!1);a(t,!1),t instanceof i.default&&t.children.forEach((function(e){a(e,!1)}))}))):"attributes"===e.type&&a(t.prev)),a(t))})),this.children.forEach(l),s=(c=[].slice.call(this.observer.takeRecords())).slice();s.length>0;)t.push(s.pop())}},t.prototype.update=function(t,n){var r=this;void 0===n&&(n={}),(t=t||this.observer.takeRecords()).map((function(e){var t=o.find(e.target,!0);return null==t?null:null==t.domNode[o.DATA_KEY].mutations?(t.domNode[o.DATA_KEY].mutations=[e],t):(t.domNode[o.DATA_KEY].mutations.push(e),null)})).forEach((function(e){null!=e&&e!==r&&null!=e.domNode[o.DATA_KEY]&&e.update(e.domNode[o.DATA_KEY].mutations||[],n)})),null!=this.domNode[o.DATA_KEY].mutations&&e.prototype.update.call(this,this.domNode[o.DATA_KEY].mutations,n),this.optimize(t,n)},t.blotName="scroll",t.defaultChild="block",t.scope=o.Scope.BLOCK_BLOT,t.tagName="DIV",t}(i.default);t.default=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=n(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.formats=function(n){if(n.tagName!==t.tagName)return e.formats.call(this,n)},t.prototype.format=function(n,r){var o=this;n!==this.statics.blotName||r?e.prototype.format.call(this,n,r):(this.children.forEach((function(e){e instanceof i.default||(e=e.wrap(t.blotName,!0)),o.attributes.copy(e)})),this.unwrap())},t.prototype.formatAt=function(t,n,r,i){null!=this.formats()[r]||o.query(r,o.Scope.ATTRIBUTE)?this.isolate(t,n).format(r,i):e.prototype.formatAt.call(this,t,n,r,i)},t.prototype.optimize=function(n){e.prototype.optimize.call(this,n);var r=this.formats();if(0===Object.keys(r).length)return this.unwrap();var i=this.next;i instanceof t&&i.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}(r,i.formats())&&(i.moveChildren(this),i.remove())},t.blotName="inline",t.scope=o.Scope.INLINE_BLOT,t.tagName="SPAN",t}(i.default);t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(18),o=n(1),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.formats=function(n){var r=o.query(t.blotName).tagName;if(n.tagName!==r)return e.formats.call(this,n)},t.prototype.format=function(n,r){null!=o.query(n,o.Scope.BLOCK)&&(n!==this.statics.blotName||r?e.prototype.format.call(this,n,r):this.replaceWith(t.blotName))},t.prototype.formatAt=function(t,n,r,i){null!=o.query(r,o.Scope.BLOCK)?this.format(r,i):e.prototype.formatAt.call(this,t,n,r,i)},t.prototype.insertAt=function(t,n,r){if(null==r||null!=o.query(n,o.Scope.INLINE))e.prototype.insertAt.call(this,t,n,r);else{var i=this.split(t),s=o.create(n,r);i.parent.insertBefore(s,i)}},t.prototype.update=function(t,n){navigator.userAgent.match(/Trident/)?this.build():e.prototype.update.call(this,t,n)},t.blotName="block",t.scope=o.Scope.BLOCK_BLOT,t.tagName="P",t}(i.default);t.default=s},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.formats=function(e){},t.prototype.format=function(t,n){e.prototype.formatAt.call(this,0,this.length(),t,n)},t.prototype.formatAt=function(t,n,r,i){0===t&&n===this.length()?this.format(r,i):e.prototype.formatAt.call(this,t,n,r,i)},t.prototype.formats=function(){return this.statics.formats(this.domNode)},t}(n(19).default);t.default=i},function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(19),o=n(1),s=function(e){function t(t){var n=e.call(this,t)||this;return n.text=n.statics.value(n.domNode),n}return r(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){var t=e.data;return t.normalize&&(t=t.normalize()),t},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,n,r){null==r?(this.text=this.text.slice(0,t)+n+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,n,r)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(n){e.prototype.optimize.call(this,n),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return void 0===t&&(t=!1),[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var n=o.create(this.domNode.splitText(e));return this.parent.insertBefore(n,this.next),this.text=this.statics.value(this.domNode),n},t.prototype.update=function(e,t){var n=this;e.some((function(e){return"characterData"===e.type&&e.target===n.domNode}))&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=o.Scope.INLINE_BLOT,t}(i.default);t.default=s},function(e,t,n){"use strict";var r=document.createElement("div");if(r.classList.toggle("test-class",!1),r.classList.contains("test-class")){var i=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return arguments.length>1&&!this.contains(e)===!t?t:i.call(this,e)}}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!==typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var r=n.indexOf(e,t);return-1!==r&&r===t}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!==typeof e)throw new TypeError("predicate must be a function");for(var t,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(t=n[o],e.call(i,t,o,n))return t}}),document.addEventListener("DOMContentLoaded",(function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)}))},function(e,t){var n=-1,r=1,i=0;function o(e,t,u){if(e==t)return e?[[i,e]]:[];(u<0||e.length<u)&&(u=null);var d=a(e,t),f=e.substring(0,d);d=l(e=e.substring(d),t=t.substring(d));var p=e.substring(e.length-d),g=function(e,t){var c;if(!e)return[[r,t]];if(!t)return[[n,e]];var u=e.length>t.length?e:t,h=e.length>t.length?t:e,d=u.indexOf(h);if(-1!=d)return c=[[r,u.substring(0,d)],[i,h],[r,u.substring(d+h.length)]],e.length>t.length&&(c[0][0]=c[2][0]=n),c;if(1==h.length)return[[n,e],[r,t]];var f=function(e,t){var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;function i(e,t,n){for(var r,i,o,s,c=e.substring(n,n+Math.floor(e.length/4)),u=-1,h="";-1!=(u=t.indexOf(c,u+1));){var d=a(e.substring(n),t.substring(u)),f=l(e.substring(0,n),t.substring(0,u));h.length<f+d&&(h=t.substring(u-f,u)+t.substring(u,u+d),r=e.substring(0,n-f),i=e.substring(n+d),o=t.substring(0,u-f),s=t.substring(u+d))}return 2*h.length>=e.length?[r,i,o,s,h]:null}var o,s,c,u,h,d=i(n,r,Math.ceil(n.length/4)),f=i(n,r,Math.ceil(n.length/2));if(!d&&!f)return null;o=f?d&&d[4].length>f[4].length?d:f:d,e.length>t.length?(s=o[0],c=o[1],u=o[2],h=o[3]):(u=o[0],h=o[1],s=o[2],c=o[3]);var p=o[4];return[s,c,u,h,p]}(e,t);if(f){var p=f[0],g=f[1],m=f[2],v=f[3],y=f[4],b=o(p,m),w=o(g,v);return b.concat([[i,y]],w)}return function(e,t){for(var i=e.length,o=t.length,a=Math.ceil((i+o)/2),l=a,c=2*a,u=new Array(c),h=new Array(c),d=0;d<c;d++)u[d]=-1,h[d]=-1;u[l+1]=0,h[l+1]=0;for(var f=i-o,p=f%2!=0,g=0,m=0,v=0,y=0,b=0;b<a;b++){for(var w=-b+g;w<=b-m;w+=2){for(var _=l+w,x=(T=w==-b||w!=b&&u[_-1]<u[_+1]?u[_+1]:u[_-1]+1)-w;T<i&&x<o&&e.charAt(T)==t.charAt(x);)T++,x++;if(u[_]=T,T>i)m+=2;else if(x>o)g+=2;else if(p&&(E=l+f-w)>=0&&E<c&&-1!=h[E]&&T>=(S=i-h[E]))return s(e,t,T,x)}for(var k=-b+v;k<=b-y;k+=2){for(var S,E=l+k,C=(S=k==-b||k!=b&&h[E-1]<h[E+1]?h[E+1]:h[E-1]+1)-k;S<i&&C<o&&e.charAt(i-S-1)==t.charAt(o-C-1);)S++,C++;if(h[E]=S,S>i)y+=2;else if(C>o)v+=2;else if(!p){var T;if((_=l+f-k)>=0&&_<c&&-1!=u[_])if(x=l+(T=u[_])-_,T>=(S=i-S))return s(e,t,T,x)}}}return[[n,e],[r,t]]}(e,t)}(e=e.substring(0,e.length-d),t=t.substring(0,t.length-d));return f&&g.unshift([i,f]),p&&g.push([i,p]),c(g),null!=u&&(g=function(e,t){var r=function(e,t){if(0===t)return[i,e];for(var r=0,o=0;o<e.length;o++){var s=e[o];if(s[0]===n||s[0]===i){var a=r+s[1].length;if(t===a)return[o+1,e];if(t<a){e=e.slice();var l=t-r,c=[s[0],s[1].slice(0,l)],u=[s[0],s[1].slice(l)];return e.splice(o,1,c,u),[o+1,e]}r=a}}throw new Error("cursor_pos is out of bounds!")}(e,t),o=r[1],s=r[0],a=o[s],l=o[s+1];if(null==a)return e;if(a[0]!==i)return e;if(null!=l&&a[1]+l[1]===l[1]+a[1])return o.splice(s,2,l,a),h(o,s,2);if(null!=l&&0===l[1].indexOf(a[1])){o.splice(s,2,[l[0],a[1]],[0,a[1]]);var c=l[1].slice(a[1].length);return c.length>0&&o.splice(s+2,0,[l[0],c]),h(o,s,3)}return e}(g,u)),g=function(e){for(var t=!1,o=function(e){return e.charCodeAt(0)>=56320&&e.charCodeAt(0)<=57343},s=function(e){return e.charCodeAt(e.length-1)>=55296&&e.charCodeAt(e.length-1)<=56319},a=2;a<e.length;a+=1)e[a-2][0]===i&&s(e[a-2][1])&&e[a-1][0]===n&&o(e[a-1][1])&&e[a][0]===r&&o(e[a][1])&&(t=!0,e[a-1][1]=e[a-2][1].slice(-1)+e[a-1][1],e[a][1]=e[a-2][1].slice(-1)+e[a][1],e[a-2][1]=e[a-2][1].slice(0,-1));if(!t)return e;var l=[];for(a=0;a<e.length;a+=1)e[a][1].length>0&&l.push(e[a]);return l}(g)}function s(e,t,n,r){var i=e.substring(0,n),s=t.substring(0,r),a=e.substring(n),l=t.substring(r),c=o(i,s),u=o(a,l);return c.concat(u)}function a(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(o,i)==t.substring(o,i)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i}function l(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(e.length-i,e.length-o)==t.substring(t.length-i,t.length-o)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i}function c(e){e.push([i,""]);for(var t,o=0,s=0,u=0,h="",d="";o<e.length;)switch(e[o][0]){case r:u++,d+=e[o][1],o++;break;case n:s++,h+=e[o][1],o++;break;case i:s+u>1?(0!==s&&0!==u&&(0!==(t=a(d,h))&&(o-s-u>0&&e[o-s-u-1][0]==i?e[o-s-u-1][1]+=d.substring(0,t):(e.splice(0,0,[i,d.substring(0,t)]),o++),d=d.substring(t),h=h.substring(t)),0!==(t=l(d,h))&&(e[o][1]=d.substring(d.length-t)+e[o][1],d=d.substring(0,d.length-t),h=h.substring(0,h.length-t))),0===s?e.splice(o-u,s+u,[r,d]):0===u?e.splice(o-s,s+u,[n,h]):e.splice(o-s-u,s+u,[n,h],[r,d]),o=o-s-u+(s?1:0)+(u?1:0)+1):0!==o&&e[o-1][0]==i?(e[o-1][1]+=e[o][1],e.splice(o,1)):o++,u=0,s=0,h="",d=""}""===e[e.length-1][1]&&e.pop();var f=!1;for(o=1;o<e.length-1;)e[o-1][0]==i&&e[o+1][0]==i&&(e[o][1].substring(e[o][1].length-e[o-1][1].length)==e[o-1][1]?(e[o][1]=e[o-1][1]+e[o][1].substring(0,e[o][1].length-e[o-1][1].length),e[o+1][1]=e[o-1][1]+e[o+1][1],e.splice(o-1,1),f=!0):e[o][1].substring(0,e[o+1][1].length)==e[o+1][1]&&(e[o-1][1]+=e[o+1][1],e[o][1]=e[o][1].substring(e[o+1][1].length)+e[o+1][1],e.splice(o+1,1),f=!0)),o++;f&&c(e)}var u=o;function h(e,t,n){for(var r=t+n-1;r>=0&&r>=t-1;r--)if(r+1<e.length){var i=e[r],o=e[r+1];i[0]===o[1]&&e.splice(r,2,[i[0],i[1]+o[1]])}return e}u.INSERT=r,u.DELETE=n,u.EQUAL=i,e.exports=u},function(e,t){function n(e){var t=[];for(var n in e)t.push(n);return t}(e.exports="function"===typeof Object.keys?Object.keys:n).shim=n},function(e,t){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function i(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}(t=e.exports=n?r:i).supported=r,t.unsupported=i},function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,r="~";function i(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)n.call(e,t)&&i.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e,t){var n=r?r+e:e,i=this._events[n];if(t)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,s=i.length,a=new Array(s);o<s;o++)a[o]=i[o].fn;return a},s.prototype.emit=function(e,t,n,i,o,s){var a=r?r+e:e;if(!this._events[a])return!1;var l,c,u=this._events[a],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,o),!0;case 6:return u.fn.call(u.context,t,n,i,o,s),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){var i=new o(t,n||this),s=r?r+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):(this._events[s]=i,this._eventsCount++),this},s.prototype.once=function(e,t,n){var i=new o(t,n||this,!0),s=r?r+e:e;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):(this._events[s]=i,this._eventsCount++),this},s.prototype.removeListener=function(e,t,n,o){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return 0===--this._eventsCount?this._events=new i:delete this._events[s],this;var a=this._events[s];if(a.fn)a.fn!==t||o&&!a.once||n&&a.context!==n||(0===--this._eventsCount?this._events=new i:delete this._events[s]);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==t||o&&!a[l].once||n&&a[l].context!==n)&&c.push(a[l]);c.length?this._events[s]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new i:delete this._events[s]}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&(0===--this._eventsCount?this._events=new i:delete this._events[t])):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prototype.setMaxListeners=function(){return this},s.prefixed=r,s.EventEmitter=s,"undefined"!==typeof e&&(e.exports=s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchText=t.matchSpacing=t.matchNewline=t.matchBlot=t.matchAttributor=t.default=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=b(n(3)),a=b(n(2)),l=b(n(0)),c=b(n(5)),u=b(n(10)),h=b(n(9)),d=n(36),f=n(37),p=b(n(13)),g=n(26),m=n(38),v=n(39),y=n(40);function b(e){return e&&e.__esModule?e:{default:e}}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=(0,u.default)("quill:clipboard"),x="__ql-matcher",k=[[Node.TEXT_NODE,j],[Node.TEXT_NODE,M],["br",function(e,t){return A(t,"\n")||t.insert("\n"),t}],[Node.ELEMENT_NODE,M],[Node.ELEMENT_NODE,D],[Node.ELEMENT_NODE,L],[Node.ELEMENT_NODE,R],[Node.ELEMENT_NODE,function(e,t){var n={},r=e.style||{};return r.fontStyle&&"italic"===O(e).fontStyle&&(n.italic=!0),r.fontWeight&&(O(e).fontWeight.startsWith("bold")||parseInt(O(e).fontWeight)>=700)&&(n.bold=!0),Object.keys(n).length>0&&(t=T(t,n)),parseFloat(r.textIndent||0)>0&&(t=(new a.default).insert("\t").concat(t)),t}],["li",function(e,t){var n=l.default.query(e);if(null==n||"list-item"!==n.blotName||!A(t,"\n"))return t;for(var r=-1,i=e.parentNode;!i.classList.contains("ql-clipboard");)"list"===(l.default.query(i)||{}).blotName&&(r+=1),i=i.parentNode;return r<=0?t:t.compose((new a.default).retain(t.length()-1).retain(1,{indent:r}))}],["b",P.bind(P,"bold")],["i",P.bind(P,"italic")],["style",function(){return new a.default}]],S=[d.AlignAttribute,m.DirectionAttribute].reduce((function(e,t){return e[t.keyName]=t,e}),{}),E=[d.AlignStyle,f.BackgroundStyle,g.ColorStyle,m.DirectionStyle,v.FontStyle,y.SizeStyle].reduce((function(e,t){return e[t.keyName]=t,e}),{}),C=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.quill.root.addEventListener("paste",r.onPaste.bind(r)),r.container=r.quill.addContainer("ql-clipboard"),r.container.setAttribute("contenteditable",!0),r.container.setAttribute("tabindex",-1),r.matchers=[],k.concat(r.options.matchers).forEach((function(e){var t=i(e,2),o=t[0],s=t[1];(n.matchVisual||s!==L)&&r.addMatcher(o,s)})),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"convert",value:function(e){if("string"===typeof e)return this.container.innerHTML=e.replace(/\>\r?\n +\</g,"><"),this.convert();var t=this.quill.getFormat(this.quill.selection.savedRange.index);if(t[p.default.blotName]){var n=this.container.innerText;return this.container.innerHTML="",(new a.default).insert(n,w({},p.default.blotName,t[p.default.blotName]))}var r=this.prepareMatching(),o=i(r,2),s=o[0],l=o[1],c=I(this.container,s,l);return A(c,"\n")&&null==c.ops[c.ops.length-1].attributes&&(c=c.compose((new a.default).retain(c.length()-1).delete(1))),_.log("convert",this.container.innerHTML,c),this.container.innerHTML="",c}},{key:"dangerouslyPasteHTML",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.default.sources.API;if("string"===typeof e)this.quill.setContents(this.convert(e),t),this.quill.setSelection(0,c.default.sources.SILENT);else{var r=this.convert(t);this.quill.updateContents((new a.default).retain(e).concat(r),n),this.quill.setSelection(e+r.length(),c.default.sources.SILENT)}}},{key:"onPaste",value:function(e){var t=this;if(!e.defaultPrevented&&this.quill.isEnabled()){var n=this.quill.getSelection(),r=(new a.default).retain(n.index),i=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(c.default.sources.SILENT),setTimeout((function(){r=r.concat(t.convert()).delete(n.length),t.quill.updateContents(r,c.default.sources.USER),t.quill.setSelection(r.length()-n.length,c.default.sources.SILENT),t.quill.scrollingContainer.scrollTop=i,t.quill.focus()}),1)}}},{key:"prepareMatching",value:function(){var e=this,t=[],n=[];return this.matchers.forEach((function(r){var o=i(r,2),s=o[0],a=o[1];switch(s){case Node.TEXT_NODE:n.push(a);break;case Node.ELEMENT_NODE:t.push(a);break;default:[].forEach.call(e.container.querySelectorAll(s),(function(e){e[x]=e[x]||[],e[x].push(a)}))}})),[t,n]}}]),t}(h.default);function T(e,t,n){return"object"===("undefined"===typeof t?"undefined":r(t))?Object.keys(t).reduce((function(e,n){return T(e,n,t[n])}),e):e.reduce((function(e,r){return r.attributes&&r.attributes[t]?e.push(r):e.insert(r.insert,(0,s.default)({},w({},t,n),r.attributes))}),new a.default)}function O(e){if(e.nodeType!==Node.ELEMENT_NODE)return{};var t="__ql-computed-style";return e[t]||(e[t]=window.getComputedStyle(e))}function A(e,t){for(var n="",r=e.ops.length-1;r>=0&&n.length<t.length;--r){var i=e.ops[r];if("string"!==typeof i.insert)break;n=i.insert+n}return n.slice(-1*t.length)===t}function N(e){if(0===e.childNodes.length)return!1;var t=O(e);return["block","list-item"].indexOf(t.display)>-1}function I(e,t,n){return e.nodeType===e.TEXT_NODE?n.reduce((function(t,n){return n(e,t)}),new a.default):e.nodeType===e.ELEMENT_NODE?[].reduce.call(e.childNodes||[],(function(r,i){var o=I(i,t,n);return i.nodeType===e.ELEMENT_NODE&&(o=t.reduce((function(e,t){return t(i,e)}),o),o=(i[x]||[]).reduce((function(e,t){return t(i,e)}),o)),r.concat(o)}),new a.default):new a.default}function P(e,t,n){return T(n,e,!0)}function R(e,t){var n=l.default.Attributor.Attribute.keys(e),r=l.default.Attributor.Class.keys(e),i=l.default.Attributor.Style.keys(e),o={};return n.concat(r).concat(i).forEach((function(t){var n=l.default.query(t,l.default.Scope.ATTRIBUTE);null!=n&&(o[n.attrName]=n.value(e),o[n.attrName])||(null==(n=S[t])||n.attrName!==t&&n.keyName!==t||(o[n.attrName]=n.value(e)||void 0),null==(n=E[t])||n.attrName!==t&&n.keyName!==t||(n=E[t],o[n.attrName]=n.value(e)||void 0))})),Object.keys(o).length>0&&(t=T(t,o)),t}function D(e,t){var n=l.default.query(e);if(null==n)return t;if(n.prototype instanceof l.default.Embed){var r={},i=n.value(e);null!=i&&(r[n.blotName]=i,t=(new a.default).insert(r,n.formats(e)))}else"function"===typeof n.formats&&(t=T(t,n.blotName,n.formats(e)));return t}function M(e,t){return A(t,"\n")||(N(e)||t.length()>0&&e.nextSibling&&N(e.nextSibling))&&t.insert("\n"),t}function L(e,t){if(N(e)&&null!=e.nextElementSibling&&!A(t,"\n\n")){var n=e.offsetHeight+parseFloat(O(e).marginTop)+parseFloat(O(e).marginBottom);e.nextElementSibling.offsetTop>e.offsetTop+1.5*n&&t.insert("\n")}return t}function j(e,t){var n=e.data;if("O:P"===e.parentNode.tagName)return t.insert(n.trim());if(0===n.trim().length&&e.parentNode.classList.contains("ql-clipboard"))return t;if(!O(e.parentNode).whiteSpace.startsWith("pre")){var r=function(e,t){return(t=t.replace(/[^\u00a0]/g,"")).length<1&&e?" ":t};n=(n=n.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,r.bind(r,!0)),(null==e.previousSibling&&N(e.parentNode)||null!=e.previousSibling&&N(e.previousSibling))&&(n=n.replace(/^\s+/,r.bind(r,!1))),(null==e.nextSibling&&N(e.parentNode)||null!=e.nextSibling&&N(e.nextSibling))&&(n=n.replace(/\s+$/,r.bind(r,!1)))}return t.insert(n)}C.DEFAULTS={matchers:[],matchVisual:!0},t.default=C,t.matchAttributor=R,t.matchBlot=D,t.matchNewline=M,t.matchSpacing=L,t.matchText=j},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(6),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"optimize",value:function(e){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);a.blotName="bold",a.tagName=["STRONG","B"],t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addControls=t.default=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(2)),s=u(n(0)),a=u(n(5)),l=u(n(10)),c=u(n(9));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var d=(0,l.default)("quill:toolbar"),f=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i,o=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if(Array.isArray(o.options.container)){var s=document.createElement("div");g(s,o.options.container),e.container.parentNode.insertBefore(s,e.container),o.container=s}else"string"===typeof o.options.container?o.container=document.querySelector(o.options.container):o.container=o.options.container;return o.container instanceof HTMLElement?(o.container.classList.add("ql-toolbar"),o.controls=[],o.handlers={},Object.keys(o.options.handlers).forEach((function(e){o.addHandler(e,o.options.handlers[e])})),[].forEach.call(o.container.querySelectorAll("button, select"),(function(e){o.attach(e)})),o.quill.on(a.default.events.EDITOR_CHANGE,(function(e,t){e===a.default.events.SELECTION_CHANGE&&o.update(t)})),o.quill.on(a.default.events.SCROLL_OPTIMIZE,(function(){var e=o.quill.selection.getRange(),t=r(e,1)[0];o.update(t)})),o):(i=d.error("Container required for toolbar",o.options),h(o,i))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"attach",value:function(e){var t=this,n=[].find.call(e.classList,(function(e){return 0===e.indexOf("ql-")}));if(n){if(n=n.slice(3),"BUTTON"===e.tagName&&e.setAttribute("type","button"),null==this.handlers[n]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[n])return void d.warn("ignoring attaching to disabled format",n,e);if(null==s.default.query(n))return void d.warn("ignoring attaching to nonexistent format",n,e)}var i="SELECT"===e.tagName?"change":"click";e.addEventListener(i,(function(i){var l=void 0;if("SELECT"===e.tagName){if(e.selectedIndex<0)return;var c=e.options[e.selectedIndex];l=!c.hasAttribute("selected")&&(c.value||!1)}else l=!e.classList.contains("ql-active")&&(e.value||!e.hasAttribute("value")),i.preventDefault();t.quill.focus();var u=t.quill.selection.getRange(),h=r(u,1)[0];if(null!=t.handlers[n])t.handlers[n].call(t,l);else if(s.default.query(n).prototype instanceof s.default.Embed){if(!(l=prompt("Enter "+n)))return;t.quill.updateContents((new o.default).retain(h.index).delete(h.length).insert(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,l)),a.default.sources.USER)}else t.quill.format(n,l,a.default.sources.USER);t.update(h)})),this.controls.push([n,e])}}},{key:"update",value:function(e){var t=null==e?{}:this.quill.getFormat(e);this.controls.forEach((function(n){var i=r(n,2),o=i[0],s=i[1];if("SELECT"===s.tagName){var a=void 0;if(null==e)a=null;else if(null==t[o])a=s.querySelector("option[selected]");else if(!Array.isArray(t[o])){var l=t[o];"string"===typeof l&&(l=l.replace(/\"/g,'\\"')),a=s.querySelector('option[value="'+l+'"]')}null==a?(s.value="",s.selectedIndex=-1):a.selected=!0}else if(null==e)s.classList.remove("ql-active");else if(s.hasAttribute("value")){var c=t[o]===s.getAttribute("value")||null!=t[o]&&t[o].toString()===s.getAttribute("value")||null==t[o]&&!s.getAttribute("value");s.classList.toggle("ql-active",c)}else s.classList.toggle("ql-active",null!=t[o])}))}}]),t}(c.default);function p(e,t,n){var r=document.createElement("button");r.setAttribute("type","button"),r.classList.add("ql-"+t),null!=n&&(r.value=n),e.appendChild(r)}function g(e,t){Array.isArray(t[0])||(t=[t]),t.forEach((function(t){var n=document.createElement("span");n.classList.add("ql-formats"),t.forEach((function(e){if("string"===typeof e)p(n,e);else{var t=Object.keys(e)[0],r=e[t];Array.isArray(r)?function(e,t,n){var r=document.createElement("select");r.classList.add("ql-"+t),n.forEach((function(e){var t=document.createElement("option");!1!==e?t.setAttribute("value",e):t.setAttribute("selected","selected"),r.appendChild(t)})),e.appendChild(r)}(n,t,r):p(n,t,r)}})),e.appendChild(n)}))}f.DEFAULTS={},f.DEFAULTS={container:null,handlers:{clean:function(){var e=this,t=this.quill.getSelection();if(null!=t)if(0==t.length){var n=this.quill.getFormat();Object.keys(n).forEach((function(t){null!=s.default.query(t,s.default.Scope.INLINE)&&e.quill.format(t,!1)}))}else this.quill.removeFormat(t,a.default.sources.USER)},direction:function(e){var t=this.quill.getFormat().align;"rtl"===e&&null==t?this.quill.format("align","right",a.default.sources.USER):e||"right"!==t||this.quill.format("align",!1,a.default.sources.USER),this.quill.format("direction",e,a.default.sources.USER)},indent:function(e){var t=this.quill.getSelection(),n=this.quill.getFormat(t),r=parseInt(n.indent||0);if("+1"===e||"-1"===e){var i="+1"===e?1:-1;"rtl"===n.direction&&(i*=-1),this.quill.format("indent",r+i,a.default.sources.USER)}},link:function(e){!0===e&&(e=prompt("Enter link URL:")),this.quill.format("link",e,a.default.sources.USER)},list:function(e){var t=this.quill.getSelection(),n=this.quill.getFormat(t);"check"===e?"checked"===n.list||"unchecked"===n.list?this.quill.format("list",!1,a.default.sources.USER):this.quill.format("list","unchecked",a.default.sources.USER):this.quill.format("list",e,a.default.sources.USER)}}},t.default=f,t.addControls=g},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(28),a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.label.innerHTML=n,r.container.classList.add("ql-color-picker"),[].slice.call(r.container.querySelectorAll(".ql-picker-item"),0,7).forEach((function(e){e.classList.add("ql-primary")})),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"buildItem",value:function(e){var n=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"buildItem",this).call(this,e);return n.style.backgroundColor=e.getAttribute("value")||"",n}},{key:"selectItem",value:function(e,n){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,n);var r=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";r&&("line"===r.tagName?r.style.stroke=i:r.style.fill=i)}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(28),a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.container.classList.add("ql-icon-picker"),[].forEach.call(r.container.querySelectorAll(".ql-picker-item"),(function(e){e.innerHTML=n[e.getAttribute("data-value")||""]})),r.defaultItem=r.container.querySelector(".ql-selected"),r.selectItem(r.defaultItem),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"selectItem",value:function(e,n){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"selectItem",this).call(this,e,n),e=e||this.defaultItem,this.label.innerHTML=e.innerHTML}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.boundsContainer=n||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",(function(){r.root.style.marginTop=-1*r.quill.root.scrollTop+"px"})),this.hide()}return r(e,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(e){var t=e.left+e.width/2-this.root.offsetWidth/2,n=e.bottom+this.quill.root.scrollTop;this.root.style.left=t+"px",this.root.style.top=n+"px",this.root.classList.remove("ql-flip");var r=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect(),o=0;if(i.right>r.right&&(o=r.right-i.right,this.root.style.left=t+o+"px"),i.left<r.left&&(o=r.left-i.left,this.root.style.left=t+o+"px"),i.bottom>r.bottom){var s=i.bottom-i.top,a=e.bottom-e.top+s;this.root.style.top=n-a+"px",this.root.classList.add("ql-flip")}return o}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=f(n(3)),a=f(n(8)),l=n(43),c=f(l),u=f(n(27)),h=n(15),d=f(n(41));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function m(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var v=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],y=function(e){function t(e,n){p(this,t),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=v);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.quill.container.classList.add("ql-snow"),r}return m(t,e),o(t,[{key:"extendToolbar",value:function(e){e.container.classList.add("ql-snow"),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),d.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),d.default),this.tooltip=new b(this.quill,this.options.bounds),e.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},(function(t,n){e.handlers.link.call(e,!n.format.link)}))}}]),t}(c.default);y.DEFAULTS=(0,s.default)(!0,{},c.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){if(e){var t=this.quill.getSelection();if(null==t||0==t.length)return;var n=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(n)&&0!==n.indexOf("mailto:")&&(n="mailto:"+n),this.quill.theme.tooltip.edit("link",n)}else this.quill.format("link",!1)}}}}});var b=function(e){function t(e,n){p(this,t);var r=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.preview=r.root.querySelector("a.ql-preview"),r}return m(t,e),o(t,[{key:"listen",value:function(){var e=this;i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",(function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(function(t){if(null!=e.linkRange){var n=e.linkRange;e.restoreFocus(),e.quill.formatText(n,"link",!1,a.default.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()})),this.quill.on(a.default.events.SELECTION_CHANGE,(function(t,n,i){if(null!=t){if(0===t.length&&i===a.default.sources.USER){var o=e.quill.scroll.descendant(u.default,t.index),s=r(o,2),l=s[0],c=s[1];if(null!=l){e.linkRange=new h.Range(t.index-c,l.length());var d=u.default.formats(l.domNode);return e.preview.textContent=d,e.preview.setAttribute("href",d),e.show(),void e.position(e.quill.getBounds(e.linkRange))}}else delete e.linkRange;e.hide()}}))}},{key:"show",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),t}(l.BaseTooltip);b.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=M(n(29)),i=n(36),o=n(38),s=n(64),a=M(n(65)),l=M(n(66)),c=n(67),u=M(c),h=n(37),d=n(26),f=n(39),p=n(40),g=M(n(56)),m=M(n(68)),v=M(n(27)),y=M(n(69)),b=M(n(70)),w=M(n(71)),_=M(n(72)),x=M(n(73)),k=n(13),S=M(k),E=M(n(74)),C=M(n(75)),T=M(n(57)),O=M(n(41)),A=M(n(28)),N=M(n(59)),I=M(n(60)),P=M(n(61)),R=M(n(108)),D=M(n(62));function M(e){return e&&e.__esModule?e:{default:e}}r.default.register({"attributors/attribute/direction":o.DirectionAttribute,"attributors/class/align":i.AlignClass,"attributors/class/background":h.BackgroundClass,"attributors/class/color":d.ColorClass,"attributors/class/direction":o.DirectionClass,"attributors/class/font":f.FontClass,"attributors/class/size":p.SizeClass,"attributors/style/align":i.AlignStyle,"attributors/style/background":h.BackgroundStyle,"attributors/style/color":d.ColorStyle,"attributors/style/direction":o.DirectionStyle,"attributors/style/font":f.FontStyle,"attributors/style/size":p.SizeStyle},!0),r.default.register({"formats/align":i.AlignClass,"formats/direction":o.DirectionClass,"formats/indent":s.IndentClass,"formats/background":h.BackgroundStyle,"formats/color":d.ColorStyle,"formats/font":f.FontClass,"formats/size":p.SizeClass,"formats/blockquote":a.default,"formats/code-block":S.default,"formats/header":l.default,"formats/list":u.default,"formats/bold":g.default,"formats/code":k.Code,"formats/italic":m.default,"formats/link":v.default,"formats/script":y.default,"formats/strike":b.default,"formats/underline":w.default,"formats/image":_.default,"formats/video":x.default,"formats/list/item":c.ListItem,"modules/formula":E.default,"modules/syntax":C.default,"modules/toolbar":T.default,"themes/bubble":R.default,"themes/snow":D.default,"ui/icons":O.default,"ui/picker":A.default,"ui/icon-picker":I.default,"ui/color-picker":N.default,"ui/tooltip":P.default},!0),t.default=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndentClass=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(0),a=(r=s)&&r.__esModule?r:{default:r},l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"add",value:function(e,n){if("+1"===n||"-1"===n){var r=this.value(e)||0;n="+1"===n?r+1:r-1}return 0===n?(this.remove(e),!0):o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,n)}},{key:"canAdd",value:function(e,n){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,n)||o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canAdd",this).call(this,e,parseInt(n))}},{key:"value",value:function(e){return parseInt(o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"value",this).call(this,e))||void 0}}]),t}(a.default.Attributor.Class),c=new l("indent","ql-indent",{scope:a.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});t.IndentClass=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(4),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default);o.blotName="blockquote",o.tagName="blockquote",t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(4),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}]),t}(((r=o)&&r.__esModule?r:{default:r}).default);s.blotName="header",s.tagName=["H1","H2","H3","H4","H5","H6"],t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ListItem=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=l(n(0)),s=l(n(4)),a=l(n(25));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),r(t,[{key:"format",value:function(e,n){e!==f.blotName||n?i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n):this.replaceWith(o.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(e,n){return this.parent.isolate(this.offset(this.parent),this.length()),e===this.parent.statics.blotName?(this.parent.replaceWith(e,n),this):(this.parent.unwrap(),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e,n))}}],[{key:"formats",value:function(e){return e.tagName===this.tagName?void 0:i(t.__proto__||Object.getPrototypeOf(t),"formats",this).call(this,e)}}]),t}(s.default);d.blotName="list-item",d.tagName="LI";var f=function(e){function t(e){c(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=function(t){if(t.target.parentNode===e){var r=n.statics.formats(e),i=o.default.find(t.target);"checked"===r?i.format("list","unchecked"):"unchecked"===r&&i.format("list","checked")}};return e.addEventListener("touchstart",r),e.addEventListener("mousedown",r),n}return h(t,e),r(t,null,[{key:"create",value:function(e){var n="ordered"===e?"OL":"UL",r=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,n);return"checked"!==e&&"unchecked"!==e||r.setAttribute("data-checked","checked"===e),r}},{key:"formats",value:function(e){return"OL"===e.tagName?"ordered":"UL"===e.tagName?e.hasAttribute("data-checked")?"true"===e.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),r(t,[{key:"format",value:function(e,t){this.children.length>0&&this.children.tail.format(e,t)}},{key:"formats",value:function(){return e={},t=this.statics.blotName,n=this.statics.formats(this.domNode),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e;var e,t,n}},{key:"insertBefore",value:function(e,n){if(e instanceof d)i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertBefore",this).call(this,e,n);else{var r=null==n?this.length():n.offset(this),o=this.split(r);o.parent.insertBefore(e,o)}}},{key:"optimize",value:function(e){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"optimize",this).call(this,e);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&n.domNode.tagName===this.domNode.tagName&&n.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(n.moveChildren(this),n.remove())}},{key:"replace",value:function(e){if(e.statics.blotName!==this.statics.blotName){var n=o.default.create(this.statics.defaultChild);e.moveChildren(n),this.appendChild(n)}i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replace",this).call(this,e)}}]),t}(a.default);f.blotName="list",f.scope=o.default.Scope.BLOCK_BLOT,f.tagName=["OL","UL"],f.defaultChild="list-item",f.allowedChildren=[d],t.ListItem=d,t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(56),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default);o.blotName="italic",o.tagName=["EM","I"],t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(6),a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,null,[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}]),t}(((r=s)&&r.__esModule?r:{default:r}).default);a.blotName="script",a.tagName=["SUB","SUP"],t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default);o.blotName="strike",o.tagName="S",t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(6),o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default);o.blotName="underline",o.tagName="U",t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(0),a=(r=s)&&r.__esModule?r:{default:r},l=n(27),c=["alt","height","width"],u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"format",value:function(e,n){c.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}],[{key:"create",value:function(e){var n=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"===typeof e&&n.setAttribute("src",this.sanitize(e)),n}},{key:"formats",value:function(e){return c.reduce((function(t,n){return e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t}),{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"sanitize",value:function(e){return(0,l.sanitize)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(a.default.Embed);u.blotName="image",u.tagName="IMG",t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},s=n(4),a=n(27),l=(r=a)&&r.__esModule?r:{default:r},c=["height","width"],u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"format",value:function(e,n){c.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"format",this).call(this,e,n)}}],[{key:"create",value:function(e){var n=o(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen",!0),n.setAttribute("src",this.sanitize(e)),n}},{key:"formats",value:function(e){return c.reduce((function(t,n){return e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t}),{})}},{key:"sanitize",value:function(e){return l.default.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}]),t}(s.BlockEmbed);u.blotName="video",u.className="ql-video",u.tagName="IFRAME",t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormulaBlot=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=l(n(35)),s=l(n(5)),a=l(n(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),r(t,null,[{key:"create",value:function(e){var n=i(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,e);return"string"===typeof e&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}},{key:"value",value:function(e){return e.getAttribute("data-value")}}]),t}(o.default);d.blotName="formula",d.className="ql-formula",d.tagName="SPAN";var f=function(e){function t(){c(this,t);var e=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return e}return h(t,e),r(t,null,[{key:"register",value:function(){s.default.register(d,!0)}}]),t}(a.default);t.FormulaBlot=d,t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.CodeToken=t.CodeBlock=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},o=l(n(0)),s=l(n(5)),a=l(n(9));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=function(e){function t(){return c(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,e),r(t,[{key:"replaceWith",value:function(e){this.domNode.textContent=this.domNode.textContent,this.attach(),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"replaceWith",this).call(this,e)}},{key:"highlight",value:function(e){var t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}}]),t}(l(n(13)).default);d.className="ql-syntax";var f=new o.default.Attributor.Class("token","hljs",{scope:o.default.Scope.INLINE}),p=function(e){function t(e,n){c(this,t);var r=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));if("function"!==typeof r.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var i=null;return r.quill.on(s.default.events.SCROLL_OPTIMIZE,(function(){clearTimeout(i),i=setTimeout((function(){r.highlight(),i=null}),r.options.interval)})),r.highlight(),r}return h(t,e),r(t,null,[{key:"register",value:function(){s.default.register(f,!0),s.default.register(d,!0)}}]),r(t,[{key:"highlight",value:function(){var e=this;if(!this.quill.selection.composing){this.quill.update(s.default.sources.USER);var t=this.quill.getSelection();this.quill.scroll.descendants(d).forEach((function(t){t.highlight(e.options.highlight)})),this.quill.update(s.default.sources.SILENT),null!=t&&this.quill.setSelection(t,s.default.sources.SILENT)}}}]),t}(a.default);p.DEFAULTS={highlight:null==window.hljs?null:function(e){return window.hljs.highlightAuto(e).value},interval:1e3},t.CodeBlock=d,t.CodeToken=f,t.default=p},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(e,t){e.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(e,t){e.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(e,t){e.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BubbleTooltip=void 0;var r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=h(n(3)),s=h(n(8)),a=n(43),l=h(a),c=n(15),u=h(n(41));function h(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],m=function(e){function t(e,n){d(this,t),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=g);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.quill.container.classList.add("ql-bubble"),r}return p(t,e),i(t,[{key:"extendToolbar",value:function(e){this.tooltip=new v(this.quill,this.options.bounds),this.tooltip.root.appendChild(e.container),this.buildButtons([].slice.call(e.container.querySelectorAll("button")),u.default),this.buildPickers([].slice.call(e.container.querySelectorAll("select")),u.default)}}]),t}(l.default);m.DEFAULTS=(0,o.default)(!0,{},l.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(e){e?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var v=function(e){function t(e,n){d(this,t);var r=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.quill.on(s.default.events.EDITOR_CHANGE,(function(e,t,n,i){if(e===s.default.events.SELECTION_CHANGE)if(null!=t&&t.length>0&&i===s.default.sources.USER){r.show(),r.root.style.left="0px",r.root.style.width="",r.root.style.width=r.root.offsetWidth+"px";var o=r.quill.getLines(t.index,t.length);if(1===o.length)r.position(r.quill.getBounds(t));else{var a=o[o.length-1],l=r.quill.getIndex(a),u=Math.min(a.length()-1,t.index+t.length-l),h=r.quill.getBounds(new c.Range(l,u));r.position(h)}}else document.activeElement!==r.textbox&&r.quill.hasFocus()&&r.hide()})),r}return p(t,e),i(t,[{key:"listen",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",(function(){e.root.classList.remove("ql-editing")})),this.quill.on(s.default.events.SCROLL_OPTIMIZE,(function(){setTimeout((function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();null!=t&&e.position(e.quill.getBounds(t))}}),1)}))}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(e){var n=r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"position",this).call(this,e),i=this.root.querySelector(".ql-tooltip-arrow");if(i.style.marginLeft="",0===n)return n;i.style.marginLeft=-1*n-i.offsetWidth/2+"px"}}]),t}(a.BaseTooltip);v.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),t.BubbleTooltip=v,t.default=m},function(e,t,n){e.exports=n(63)}]).default},e.exports=t()},4463:(e,t,n)=>{"use strict";var r=n(2791),i=n(5296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,j=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var q=!1;function B(e,t){if(!e||q)return"";q=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{q=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case x:return"Portal";case E:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case O:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,ke=null,Se=null;function Ee(e){if(e=bi(e)){if("function"!==typeof xe)throw Error(o(280));var t=e.stateNode;t&&(t=_i(t),xe(e.stateNode,e.type,t))}}function Ce(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Te(){if(ke){var e=ke,t=Se;if(Se=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Oe(e,t){return e(t)}function Ae(){}var Ne=!1;function Ie(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Oe(e,t,n)}finally{Ne=!1,(null!==ke||null!==Se)&&(Ae(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Re=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Re=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Re=!1}function Me(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,je=null,Fe=!1,qe=null,Be={onError:function(e){Le=!0,je=e}};function Ue(e,t,n,r,i,o,s,a,l){Le=!1,je=null,Me.apply(Be,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ve(e)!==e)throw Error(o(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return He(i),e;if(s===r)return He(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ht(a):0!==(o&=s)&&(r=ht(o))}else 0!==(s=n&~i)?r=ht(s):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,xt,kt,St,Et,Ct=!1,Tt=[],Ot=null,At=null,Nt=null,It=new Map,Pt=new Map,Rt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=yi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Et(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function qt(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Ct=!1,null!==Ot&&Ft(Ot)&&(Ot=null),null!==At&&Ft(At)&&(At=null),null!==Nt&&Ft(Nt)&&(Nt=null),It.forEach(qt),Pt.forEach(qt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function Vt(e){function t(t){return Ut(t,e)}if(0<Tt.length){Ut(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ot&&Ut(Ot,e),null!==At&&Ut(At,e),null!==Nt&&Ut(Nt,e),It.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)jt(n),null===n.blockedOn&&Rt.shift()}var zt=w.ReactCurrentBatchConfig,Ht=!0;function Wt(e,t,n,r){var i=bt,o=zt.transition;zt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,zt.transition=o}}function Kt(e,t,n,r){var i=bt,o=zt.transition;zt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,zt.transition=o}}function Gt(e,t,n,r){if(Ht){var i=Qt(e,t,n,r);if(null===i)Hr(e,t,r,Yt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ot=Lt(Ot,e,t,n,r,i),!0;case"dragenter":return At=Lt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Lt(Nt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return It.set(o,Lt(It.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Pt.set(o,Lt(Pt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&_t(o),null===(o=Qt(e,t,n,r))&&Hr(e,t,r,Yt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Yt=null;function Qt(e,t,n,r){if(Yt=null,null!==(e=yi(e=_e(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=j({},cn,{view:0,detail:0}),dn=on(hn),fn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=on(fn),gn=on(j({},fn,{dataTransfer:0})),mn=on(j({},hn,{relatedTarget:0})),vn=on(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),wn=on(j({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Sn}var Cn=j({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=on(Cn),On=on(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=on(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=on(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=j({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=on(In),Rn=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Mn,jn=u&&(!Dn||Mn&&8<Mn&&11>=Mn),Fn=String.fromCharCode(32),qn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ce(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Yn(e){Fr(e,0)}function Qn(e){if(G(wi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];Wn(t,Gn,e,_e(e)),Ie(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function or(e,t){if("click"===e)return Qn(t)}function sr(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,vr=null,yr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Y(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},kr={},Sr={};function Er(e){if(kr[e])return kr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return kr[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Cr=Er("animationend"),Tr=Er("animationiteration"),Or=Er("animationstart"),Ar=Er("transitionend"),Nr=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Nr.set(e,t),l(t,[e])}for(var Rr=0;Rr<Ir.length;Rr++){var Dr=Ir[Rr];Pr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Pr(Cr,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Or,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Ue.apply(this,arguments),Le){if(!Le)throw Error(o(198));var u=je;Le=!1,je=null,Fe||(Fe=!0,qe=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;jr(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;jr(i,a,c),o=l}}}if(Fe)throw e=qe,Fe=!1,qe=null,e}function qr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Ur]){e[Ur]=!0,s.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,Br("selectionchange",!1,t))}}function zr(e,t,n,r){switch($t(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Ie((function(){var r=o,i=_e(n),s=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Cr:case Tr:case Or:l=vn;break;case Ar:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=On}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Pe(p,d))&&u.push(Wr(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=Ve(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=On,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:wi(l),f=null==c?a:wi(c),(a=new u(g,p+"leave",l,n,i)).target=h,a.relatedTarget=f,g=null,yi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,g=d;g;g=Gr(g))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Yr(s,a,l,u,!1),null!==c&&null!==h&&Yr(s,h,c,u,!0)}if("select"===(l=(a=r?wi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=$n;else if(Hn(a))if(Xn)m=sr;else{m=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=or);switch(m&&(m=m(e,r))?Wn(s,m,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?wi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(mr=v,vr=r,yr=null);break;case"focusout":yr=vr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(s,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(s,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(jn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Vn=!0)),0<(v=Kr(r,b)).length&&(b=new wn(b,e,null,n,i),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=Un(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(qn=!0,Fn);case"textInput":return(e=t.data)===Fn&&qn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Dn&&Bn(e,t)?(e=en(),Zt=Jt=Xt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Fr(s,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Pe(e,n))&&r.unshift(Wr(e,o,i)),null!=(o=Pe(e,t))&&r.push(Wr(e,o,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,o))&&s.unshift(Wr(n,l,a)):i||null!=(l=Pe(n,o))&&s.push(Wr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Qr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(o(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _i(e){return e[fi]||null}var xi=[],ki=-1;function Si(e){return{current:e}}function Ei(e){0>ki||(e.current=xi[ki],xi[ki]=null,ki--)}function Ci(e,t){ki++,xi[ki]=e.current,e.current=t}var Ti={},Oi=Si(Ti),Ai=Si(!1),Ni=Ti;function Ii(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Ei(Ai),Ei(Oi)}function Di(e,t,n){if(Oi.current!==Ti)throw Error(o(168));Ci(Oi,t),Ci(Ai,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,z(e)||"Unknown",i));return j({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Oi.current,Ci(Oi,e),Ci(Ai,Ai.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Mi(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Oi),Ci(Oi,e)):Ei(Ai),Ci(Ai,n)}var Fi=null,qi=!1,Bi=!1;function Ui(e){null===Fi?Fi=[e]:Fi.push(e)}function Vi(){if(!Bi&&null!==Fi){Bi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,qi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Ze,Vi),i}finally{bt=t,Bi=!1}}return null}var zi=[],Hi=0,Wi=null,Ki=0,Gi=[],Yi=0,Qi=null,$i=1,Xi="";function Ji(e,t){zi[Hi++]=Ki,zi[Hi++]=Wi,Wi=e,Ki=t}function Zi(e,t,n){Gi[Yi++]=$i,Gi[Yi++]=Xi,Gi[Yi++]=Qi,Qi=e;var r=$i;e=Xi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,$i=1<<32-st(t)+i|n<<i|r,Xi=o+e}else $i=1<<o|n<<i|r,Xi=e}function eo(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function to(e){for(;e===Wi;)Wi=zi[--Hi],zi[Hi]=null,Ki=zi[--Hi],zi[Hi]=null;for(;e===Qi;)Qi=Gi[--Yi],Gi[Yi]=null,Xi=Gi[--Yi],Gi[Yi]=null,$i=Gi[--Yi],Gi[Yi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function go(e){null===oo?oo=[e]:oo.push(e)}var mo=w.ReactCurrentBatchConfig;function vo(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=Si(null),bo=null,wo=null,_o=null;function xo(){_o=wo=bo=null}function ko(e){var t=yo.current;Ei(yo),e._currentValue=t}function So(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Eo(e,t){bo=e,_o=wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Co(e){var t=e._currentValue;if(_o!==e)if(e={context:e,memoizedValue:t,next:null},null===wo){if(null===bo)throw Error(o(308));wo=e,bo.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return t}var To=null;function Oo(e){null===To?To=[e]:To.push(e)}function Ao(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Oo(t)):(n.next=i.next,i.next=n),t.interleaved=n,No(e,r)}function No(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Io=!1;function Po(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Do(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Mo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,No(e,n)}return null===(i=r.interleaved)?(t.next=t,Oo(r)):(t.next=i.next,i.next=t),r.interleaved=t,No(e,n)}function Lo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function jo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fo(e,t,n,r){var i=e.updateQueue;Io=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(s=0,u=c=l=null,a=o;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=j({},h,d);break e;case 2:Io=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);jl|=s,e.lanes=s,e.memoizedState=h}}function qo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Bo=(new r.Component).refs;function Uo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Vo={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Do(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Mo(e,o,i))&&(rc(t,e,i,r),Lo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Do(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Mo(e,o,i))&&(rc(t,e,i,r),Lo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Do(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Mo(e,i,r))&&(rc(t,e,r,n),Lo(t,e,r))}};function zo(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Ho(e,t,n){var r=!1,i=Ti,o=t.contextType;return"object"===typeof o&&null!==o?o=Co(o):(i=Pi(t)?Ni:Oi.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ii(e,i):Ti),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Wo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vo.enqueueReplaceState(t,t.state,null)}function Ko(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Bo,Po(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Co(o):(o=Pi(t)?Ni:Oi.current,i.context=Ii(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Uo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Vo.enqueueReplaceState(i,i.state,null),Fo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Go(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===Bo&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qo(e){return(0,e._init)(e._payload)}function $o(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===P&&Qo(o)===t.type)?((r=i(t,n.props)).ref=Go(e,t,n),r.return=e,r):((r=Mc(n.type,n.key,n.props,null,e.mode,r)).ref=Go(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Mc(t.type,t.key,t.props,null,e.mode,n)).ref=Go(e,null,t),n.return=e,n;case x:return(t=qc(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Yo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:h(e,t,n,r,null);Yo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return h(t,e=e.get(n)||null,r,i,null);Yo(t,r)}return null}function g(i,o,a,l){for(var c=null,u=null,h=o,g=o=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=f(i,h,a[g],l);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(i,h),o=s(v,o,g),null===u?c=v:u.sibling=v,u=v,h=m}if(g===a.length)return n(i,h),io&&Ji(i,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(i,a[g],l))&&(o=s(h,o,g),null===u?c=h:u.sibling=h,u=h);return io&&Ji(i,g),c}for(h=r(i,h);g<a.length;g++)null!==(m=p(h,i,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),o=s(m,o,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(i,e)})),io&&Ji(i,g),c}function m(i,a,l,c){var u=M(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var b=f(i,g,y.value,c);if(null===b){null===g&&(g=v);break}e&&g&&null===b.alternate&&t(i,g),a=s(b,a,m),null===h?u=b:h.sibling=b,h=b,g=v}if(y.done)return n(i,g),io&&Ji(i,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(i,y.value,c))&&(a=s(y,a,m),null===h?u=y:h.sibling=y,h=y);return io&&Ji(i,m),u}for(g=r(i,g);!y.done;m++,y=l.next())null!==(y=p(g,i,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=s(y,a,m),null===h?u=y:h.sibling=y,h=y);return e&&g.forEach((function(e){return t(i,e)})),io&&Ji(i,m),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===k&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===k){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=Go(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===k?((o=Lc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Mc(s.type,s.key,s.props,null,r.mode,l)).ref=Go(r,o,s),l.return=r,r=l)}return a(r);case x:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=qc(s,r.mode,l)).return=r,r=o}return a(r);case P:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return g(r,o,s,l);if(M(s))return m(r,o,s,l);Yo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Fc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var Xo=$o(!0),Jo=$o(!1),Zo={},es=Si(Zo),ts=Si(Zo),ns=Si(Zo);function rs(e){if(e===Zo)throw Error(o(174));return e}function is(e,t){switch(Ci(ns,t),Ci(ts,e),Ci(es,Zo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(es),Ci(es,t)}function os(){Ei(es),Ei(ts),Ei(ns)}function ss(e){rs(ns.current);var t=rs(es.current),n=le(t,e.type);t!==n&&(Ci(ts,e),Ci(es,n))}function as(e){ts.current===e&&(Ei(es),Ei(ts))}var ls=Si(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function hs(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var ds=w.ReactCurrentDispatcher,fs=w.ReactCurrentBatchConfig,ps=0,gs=null,ms=null,vs=null,ys=!1,bs=!1,ws=0,_s=0;function xs(){throw Error(o(321))}function ks(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Ss(e,t,n,r,i,s){if(ps=s,gs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),bs){s=0;do{if(bs=!1,ws=0,25<=s)throw Error(o(301));s+=1,vs=ms=null,t.updateQueue=null,ds.current=ca,e=n(r,i)}while(bs)}if(ds.current=sa,t=null!==ms&&null!==ms.next,ps=0,vs=ms=gs=null,ys=!1,t)throw Error(o(300));return e}function Es(){var e=0!==ws;return ws=0,e}function Cs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vs?gs.memoizedState=vs=e:vs=vs.next=e,vs}function Ts(){if(null===ms){var e=gs.alternate;e=null!==e?e.memoizedState:null}else e=ms.next;var t=null===vs?gs.memoizedState:vs.next;if(null!==t)vs=t,ms=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ms=e).memoizedState,baseState:ms.baseState,baseQueue:ms.baseQueue,queue:ms.queue,next:null},null===vs?gs.memoizedState=vs=e:vs=vs.next=e}return vs}function Os(e,t){return"function"===typeof t?t(e):t}function As(e){var t=Ts(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ms,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var h=u.lane;if((ps&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,gs.lanes|=h,jl|=h}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,gs.lanes|=s,jl|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ns(e){var t=Ts(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(wa=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Is(){}function Ps(e,t){var n=gs,r=Ts(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,wa=!0),r=r.queue,Hs(Ms.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==vs&&1&vs.memoizedState.tag){if(n.flags|=2048,qs(9,Ds.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(o(349));0!==(30&ps)||Rs(n,t,i)}return i}function Rs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ds(e,t,n,r){t.value=n,t.getSnapshot=r,Ls(t)&&js(e)}function Ms(e,t,n){return n((function(){Ls(t)&&js(e)}))}function Ls(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function js(e){var t=No(e,1);null!==t&&rc(t,e,1,-1)}function Fs(e){var t=Cs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Os,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,gs,e),[t.memoizedState,e]}function qs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=gs.updateQueue)?(t={lastEffect:null,stores:null},gs.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bs(){return Ts().memoizedState}function Us(e,t,n,r){var i=Cs();gs.flags|=e,i.memoizedState=qs(1|t,n,void 0,void 0===r?null:r)}function Vs(e,t,n,r){var i=Ts();r=void 0===r?null:r;var o=void 0;if(null!==ms){var s=ms.memoizedState;if(o=s.destroy,null!==r&&ks(r,s.deps))return void(i.memoizedState=qs(t,n,o,r))}gs.flags|=e,i.memoizedState=qs(1|t,n,o,r)}function zs(e,t){return Us(8390656,8,e,t)}function Hs(e,t){return Vs(2048,8,e,t)}function Ws(e,t){return Vs(4,2,e,t)}function Ks(e,t){return Vs(4,4,e,t)}function Gs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ys(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vs(4,4,Gs.bind(null,t,e),n)}function Qs(){}function $s(e,t){var n=Ts();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ks(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xs(e,t){var n=Ts();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ks(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Js(e,t,n){return 0===(21&ps)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=gt(),gs.lanes|=n,jl|=n,e.baseState=!0),t)}function Zs(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fs.transition;fs.transition={};try{e(!1),t()}finally{bt=n,fs.transition=r}}function ea(){return Ts().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Ao(e,t,n,r))){rc(n,e,r,tc()),oa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,Oo(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ao(e,t,i,r))&&(rc(n,e,r,i=tc()),oa(n,t,r))}}function ra(e){var t=e.alternate;return e===gs||null!==t&&t===gs}function ia(e,t){bs=ys=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var sa={readContext:Co,useCallback:xs,useContext:xs,useEffect:xs,useImperativeHandle:xs,useInsertionEffect:xs,useLayoutEffect:xs,useMemo:xs,useReducer:xs,useRef:xs,useState:xs,useDebugValue:xs,useDeferredValue:xs,useTransition:xs,useMutableSource:xs,useSyncExternalStore:xs,useId:xs,unstable_isNewReconciler:!1},aa={readContext:Co,useCallback:function(e,t){return Cs().memoizedState=[e,void 0===t?null:t],e},useContext:Co,useEffect:zs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Us(4194308,4,Gs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Us(4194308,4,e,t)},useInsertionEffect:function(e,t){return Us(4,2,e,t)},useMemo:function(e,t){var n=Cs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Cs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,gs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Cs().memoizedState=e},useState:Fs,useDebugValue:Qs,useDeferredValue:function(e){return Cs().memoizedState=e},useTransition:function(){var e=Fs(!1),t=e[0];return e=Zs.bind(null,e[1]),Cs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=gs,i=Cs();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Nl)throw Error(o(349));0!==(30&ps)||Rs(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,zs(Ms.bind(null,r,s,e),[e]),r.flags|=2048,qs(9,Ds.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Cs(),t=Nl.identifierPrefix;if(io){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-st($i)-1)).toString(32)+n),0<(n=ws++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_s++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Co,useCallback:$s,useContext:Co,useEffect:Hs,useImperativeHandle:Ys,useInsertionEffect:Ws,useLayoutEffect:Ks,useMemo:Xs,useReducer:As,useRef:Bs,useState:function(){return As(Os)},useDebugValue:Qs,useDeferredValue:function(e){return Js(Ts(),ms.memoizedState,e)},useTransition:function(){return[As(Os)[0],Ts().memoizedState]},useMutableSource:Is,useSyncExternalStore:Ps,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Co,useCallback:$s,useContext:Co,useEffect:Hs,useImperativeHandle:Ys,useInsertionEffect:Ws,useLayoutEffect:Ks,useMemo:Xs,useReducer:Ns,useRef:Bs,useState:function(){return Ns(Os)},useDebugValue:Qs,useDeferredValue:function(e){var t=Ts();return null===ms?t.memoizedState=e:Js(t,ms.memoizedState,e)},useTransition:function(){return[Ns(Os)[0],Ts().memoizedState]},useMutableSource:Is,useSyncExternalStore:Ps,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Do(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Kl=r),da(0,t)},n}function ga(e,t,n){(n=Do(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Do(-1,1)).tag=2,Mo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ba=w.ReactCurrentOwner,wa=!1;function _a(e,t,n,r){t.child=null===e?Jo(t,null,n,r):Xo(t,e.child,n,r)}function xa(e,t,n,r,i){n=n.render;var o=t.ref;return Eo(t,i),r=Ss(e,t,n,r,o,i),n=Es(),null===e||wa?(io&&n&&eo(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function ka(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Rc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Mc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Sa(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Dc(o,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(wa=!0)}}return Ta(e,t,n,r,i)}function Ea(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Dl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Dl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Dl,Rl),Rl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ci(Dl,Rl),Rl|=r;return _a(e,t,i,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var o=Pi(n)?Ni:Oi.current;return o=Ii(t,o),Eo(t,i),n=Ss(e,t,n,r,o,i),r=Es(),null===e||wa?(io&&r&&eo(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Oa(e,t,n,r,i){if(Pi(n)){var o=!0;Li(t)}else o=!1;if(Eo(t,i),null===t.stateNode)Ha(e,t),Ho(t,n,r),Ko(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Co(c):c=Ii(t,c=Pi(n)?Ni:Oi.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&Wo(t,s,r,c),Io=!1;var d=t.memoizedState;s.state=d,Fo(t,r,s,i),l=t.memoizedState,a!==r||d!==l||Ai.current||Io?("function"===typeof u&&(Uo(t,n,u,r),l=t.memoizedState),(a=Io||zo(t,n,a,r,d,l,c))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Ro(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:vo(t.type,a),s.props=c,h=t.pendingProps,d=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Co(l):l=Ii(t,l=Pi(n)?Ni:Oi.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==l)&&Wo(t,s,r,l),Io=!1,d=t.memoizedState,s.state=d,Fo(t,r,s,i);var p=t.memoizedState;a!==h||d!==p||Ai.current||Io?("function"===typeof f&&(Uo(t,n,f,r),p=t.memoizedState),(c=Io||zo(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Aa(e,t,n,r,o,i)}function Aa(e,t,n,r,i,o){Ca(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&ji(t,n,!1),Wa(e,t,o);r=t.stateNode,ba.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Xo(t,e.child,null,o),t.child=Xo(t,null,a,o)):_a(e,t,a,o),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),is(e,t.containerInfo)}function Ia(e,t,n,r,i){return po(),go(i),t.flags|=256,_a(e,t,n,r),t.child}var Pa,Ra,Da,Ma,La={dehydrated:null,treeContext:null,retryLane:0};function ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,s=ls.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ci(ls,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=jc(l,i,0,null),e=Lc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ja(n),t.memoizedState=La,e):qa(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,r=ha(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=jc({mode:"visible",children:r.children},i,0,null),(s=Lc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Xo(t,e.child,null,a),t.child.memoizedState=ja(a),t.memoizedState=La,s);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Ba(e,t,a,r=ha(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,No(e,i),rc(r,e,i,-1))}return mc(),Ba(e,t,a,r=ha(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Oc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Gi[Yi++]=$i,Gi[Yi++]=Xi,Gi[Yi++]=Qi,$i=e.id,Xi=e.overflow,Qi=t),t=qa(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=Dc(r,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?ja(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,i}return e=(a=e.child).sibling,i=Dc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function qa(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,r){return null!==r&&go(r),Xo(t,e.child,null,n),(e=qa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),So(e.return,t,n)}function Va(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function za(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ls.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,n,t);else if(19===e.tag)Ua(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(ls,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===cs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Va(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===cs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Va(t,!0,n,null,o);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ha(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ya(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Ga(t),null;case 3:return r=t.stateNode,os(),Ei(Ai),Ei(Oi),hs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Ra(e,t),Ga(t),null;case 5:as(t);var i=rs(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ga(t),null}if(e=rs(es.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[di]=t,r[fi]=s,e=0!==(1&t.mode),n){case"dialog":qr("cancel",r),qr("close",r);break;case"iframe":case"object":case"embed":qr("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)qr(Mr[i],r);break;case"source":qr("error",r);break;case"img":case"image":case"link":qr("error",r),qr("load",r);break;case"details":qr("toggle",r);break;case"input":$(r,s),qr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},qr("invalid",r);break;case"textarea":ie(r,s),qr("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&qr("scroll",r)}switch(n){case"input":K(r),Z(r,s,!0);break;case"textarea":K(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":qr("cancel",e),qr("close",e),i=r;break;case"iframe":case"object":case"embed":qr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)qr(Mr[i],e);i=r;break;case"source":qr("error",e),i=r;break;case"img":case"image":case"link":qr("error",e),qr("load",e),i=r;break;case"details":qr("toggle",e),i=r;break;case"input":$(e,r),i=Q(e,r),qr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),qr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),qr("invalid",e)}for(s in ye(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?me(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&qr("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=rs(ns.current),rs(es.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ga(t),null;case 13:if(Ei(ls),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[di]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),s=!1}else null!==oo&&(ac(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ls.current)?0===Ml&&(Ml=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return os(),Ra(e,t),null===e&&Vr(t.stateNode.containerInfo),Ga(t),null;case 10:return ko(t.type._context),Ga(t),null;case 19:if(Ei(ls),null===(s=t.memoizedState))return Ga(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ka(s,!1);else{if(0!==Ml||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=cs(e))){for(t.flags|=128,Ka(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(ls,1&ls.current|2),t.child}e=e.sibling}null!==s.tail&&Xe()>zl&&(t.flags|=128,r=!0,Ka(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=cs(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Ga(t),null}else 2*Xe()-s.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Ka(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Xe(),t.sibling=null,n=ls.current,Ci(ls,r?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Qa(e,t){switch(to(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),Ei(Ai),Ei(Oi),hs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(Ei(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ls),null;case 4:return os(),null;case 10:return ko(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ra=function(){},Da=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,rs(es.current);var o,s=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),s=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&qr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Xa=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tl(t,n,o)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[gi],delete t[mi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Xa||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Vt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tl(n,t,s),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Xa&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ec(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Xa=(r=Xa)||null!==n.memoizedState,fl(e,t,n),Xa=r):fl(e,t,n);break;default:fl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(o(160));pl(s,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(m){Ec(e,e.return,m)}try{rl(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:ml(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&X(i,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,u)}switch(l){case"input":J(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?ne(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(m){Ec(e,e.return,m)}}break;case 6:if(ml(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Ec(e,e.return,m)}}break;case 3:if(ml(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Xe())),4&r&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(u=Xa)||h,ml(t,e),Xa=u):ml(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){xl(d);continue}}null!==p?(p.return=f,Za=p):xl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Ec(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),yl(e),4&r&&gl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cl(e,ll(e),s);break;default:throw Error(o(161))}}catch(a){Ec(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Za=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||$a;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=$a;var c=Xa;if($a=s,(Xa=l)&&!c)for(Za=i;null!==Za;)l=(s=Za).child,22===s.tag&&null!==s.memoizedState?kl(i):null!==l?(l.return=s,Za=l):kl(i);for(;null!==o;)Za=o,wl(o,t,n),o=o.sibling;Za=i,$a=a,Xa=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Za=o):_l(e)}}function _l(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xa)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&qo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}qo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(o(163))}Xa||512&t.flags&&ol(t)}catch(f){Ec(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function xl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function kl(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ec(t,i,l)}}var o=t.return;try{ol(t)}catch(l){Ec(t,o,l)}break;case 5:var s=t.return;try{ol(t)}catch(l){Ec(t,s,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Sl,El=Math.ceil,Cl=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,Ol=w.ReactCurrentBatchConfig,Al=0,Nl=null,Il=null,Pl=0,Rl=0,Dl=Si(0),Ml=0,Ll=null,jl=0,Fl=0,ql=0,Bl=null,Ul=null,Vl=0,zl=1/0,Hl=null,Wl=!1,Kl=null,Gl=null,Yl=!1,Ql=null,$l=0,Xl=0,Jl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Al)?Xe():-1!==Zl?Zl:Zl=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Pl?Pl&-Pl:null!==mo.transition?(0===ec&&(ec=gt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Xl)throw Xl=0,Jl=null,Error(o(185));vt(e,n,r),0!==(2&Al)&&e===Nl||(e===Nl&&(0===(2&Al)&&(Fl|=n),4===Ml&&lc(e,Pl)),ic(e,r),1===n&&0===Al&&0===(1&t.mode)&&(zl=Xe()+500,qi&&Vi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=dt(e,e===Nl?Pl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){qi=!0,Ui(e)}(cc.bind(null,e)):Ui(cc.bind(null,e)),si((function(){0===(6&Al)&&Vi()})),n=null;else{switch(wt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Zl=-1,ec=0,0!==(6&Al))throw Error(o(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=dt(e,e===Nl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Al;Al|=2;var s=gc();for(Nl===e&&Pl===t||(Hl=null,zl=Xe()+500,fc(e,t));;)try{bc();break}catch(l){pc(e,l)}xo(),Cl.current=s,Al=i,null!==Il?t=0:(Nl=null,Pl=0,t=Ml)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ll,fc(e,0),lc(e,r),ic(e,Xe()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(s=pt(e))&&(r=s,t=sc(e,s))),1===t))throw n=Ll,fc(e,0),lc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:xc(e,Ul,Hl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Vl+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Ul,Hl),t);break}xc(e,Ul,Hl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Ul,Hl),r);break}xc(e,Ul,Hl);break;default:throw Error(o(329))}}}return ic(e,Xe()),e.callbackNode===n?oc.bind(null,e):null}function sc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Ul,Ul=n,null!==t&&ac(t)),e}function ac(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function lc(e,t){for(t&=~ql,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Al))throw Error(o(327));kc();var t=dt(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ll,fc(e,0),lc(e,t),ic(e,Xe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Ul,Hl),ic(e,Xe()),null}function uc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(zl=Xe()+500,qi&&Vi())}}function hc(e){null!==Ql&&0===Ql.tag&&0===(6&Al)&&kc();var t=Al;Al|=1;var n=Ol.transition,r=bt;try{if(Ol.transition=null,bt=1,e)return e()}finally{bt=r,Ol.transition=n,0===(6&(Al=t))&&Vi()}}function dc(){Rl=Dl.current,Ei(Dl)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:os(),Ei(Ai),Ei(Oi),hs();break;case 5:as(r);break;case 4:os();break;case 13:case 19:Ei(ls);break;case 10:ko(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Nl=e,Il=e=Dc(e.current,null),Pl=Rl=t,Ml=0,Ll=null,ql=Fl=jl=0,Ul=Bl=null,null!==To){for(t=0;t<To.length;t++)if(null!==(r=(n=To[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}To=null}return e}function pc(e,t){for(;;){var n=Il;try{if(xo(),ds.current=sa,ys){for(var r=gs.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ys=!1}if(ps=0,vs=ms=gs=null,bs=!1,ws=0,Tl.current=null,null===n||null===n.return){Ml=1,Ll=t,Il=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(s,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ma(s,u,t),mc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),go(ua(c,l));break e}}s=c=ua(c,l),4!==Ml&&(Ml=2),null===Bl?Bl=[s]:Bl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,jo(s,pa(0,c,t));break e;case 1:l=c;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,jo(s,ga(s,l,t));break e}}s=s.return}while(null!==s)}_c(n)}catch(w){t=w,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function gc(){var e=Cl.current;return Cl.current=sa,null===e?sa:e}function mc(){0!==Ml&&3!==Ml&&2!==Ml||(Ml=4),null===Nl||0===(268435455&jl)&&0===(268435455&Fl)||lc(Nl,Pl)}function vc(e,t){var n=Al;Al|=2;var r=gc();for(Nl===e&&Pl===t||(Hl=null,fc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(xo(),Al=n,Cl.current=r,null!==Il)throw Error(o(261));return Nl=null,Pl=0,Ml}function yc(){for(;null!==Il;)wc(Il)}function bc(){for(;null!==Il&&!Qe();)wc(Il)}function wc(e){var t=Sl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?_c(e):Il=t,Tl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ya(n,t,Rl)))return void(Il=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Ml=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Ml&&(Ml=5)}function xc(e,t,n){var r=bt,i=Ol.transition;try{Ol.transition=null,bt=1,function(e,t,n,r){do{kc()}while(null!==Ql);if(0!==(6&Al))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Nl&&(Il=Nl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Nc(tt,(function(){return kc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Ol.transition,Ol.transition=null;var a=bt;bt=1;var l=Al;Al|=4,Tl.current=null,function(e,t){if(ei=Ht,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(_){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:vo(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(_){Ec(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}g=nl,nl=!1}(e,n),vl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,bl(n,e,i),$e(),Al=l,bt=a,Ol.transition=s}else e.current=n;if(Yl&&(Yl=!1,Ql=e,$l=i),s=e.pendingLanes,0===s&&(Gl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Kl,Kl=null,e;0!==(1&$l)&&0!==e.tag&&kc(),s=e.pendingLanes,0!==(1&s)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Vi()}(e,t,n,r)}finally{Ol.transition=i,bt=r}return null}function kc(){if(null!==Ql){var e=wt($l),t=Ol.transition,n=bt;try{if(Ol.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,$l=0,0!==(6&Al))throw Error(o(331));var i=Al;for(Al|=4,Za=e.current;null!==Za;){var s=Za,a=s.child;if(0!==(16&Za.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,s)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(sl(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var g=s.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Za=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Za=a;else e:for(;null!==Za;){if(0!==(2048&(s=Za).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Za=y;break e}Za=s.return}}var b=e.current;for(Za=b;null!==Za;){var w=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Za=w;else e:for(a=b;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(x){Ec(l,l.return,x)}if(l===a){Za=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Za=_;break e}Za=l.return}}if(Al=i,Vi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{bt=n,Ol.transition=t}}return!1}function Sc(e,t,n){e=Mo(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Mo(t,e=ga(t,e=ua(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Pl&n)===n&&(4===Ml||3===Ml&&(130023424&Pl)===Pl&&500>Xe()-Vl?fc(e,0):ql|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=No(e,t))&&(vt(e,t,n),ic(e,n))}function Oc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return Ge(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ic(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Mc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Rc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Lc(n.children,i,s,t);case S:a=8,i|=8;break;case E:return(e=Pc(12,n,t,2|i)).elementType=E,e.lanes=s,e;case A:return(e=Pc(13,n,t,i)).elementType=A,e.lanes=s,e;case N:return(e=Pc(19,n,t,i)).elementType=N,e.lanes=s,e;case R:return jc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:a=10;break e;case T:a=9;break e;case O:a=11;break e;case I:a=14;break e;case P:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function jc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function qc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,r,i,o,s,a,l){return e=new Bc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Pc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Po(o),e}function Vc(e){if(!e)return Ti;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Mi(e,n,t)}return t}function zc(e,t,n,r,i,o,s,a,l){return(e=Uc(n,r,!0,e,0,o,0,a,l)).context=Vc(null),n=e.current,(o=Do(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Mo(n,o,i),e.current.lanes=i,vt(e,i,r),ic(e,r),e}function Hc(e,t,n,r){var i=t.current,o=tc(),s=nc(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Do(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Mo(i,t,s))&&(rc(e,i,s,o),Lo(e,i,s)),s}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Na(t),po();break;case 5:ss(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:is(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(ls,1&ls.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Ci(ls,1&ls.current),null!==(e=Wa(e,t,n))?e.sibling:null);Ci(ls,1&ls.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return za(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(ls,ls.current),r)break;return null;case 22:case 23:return t.lanes=0,Ea(e,t,n)}return Wa(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,io&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ha(e,t),e=t.pendingProps;var i=Ii(t,Oi.current);Eo(t,n),i=Ss(null,t,r,e,i,n);var s=Es();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(s=!0,Li(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Po(t),i.updater=Vo,t.stateNode=i,i._reactInternals=t,Ko(t,r,e,n),t=Aa(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ha(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===O)return 11;if(e===I)return 14}return 2}(r),e=vo(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=Oa(null,t,r,e,n);break e;case 11:t=xa(null,t,r,e,n);break e;case 14:t=ka(null,t,r,vo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Oa(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,Ro(e,t),Fo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ia(e,t,r,n,i=ua(Error(o(423)),t));break e}if(r!==i){t=Ia(e,t,r,n,i=ua(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Jo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Wa(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return ss(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ca(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Fa(e,t,n);case 4:return is(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xo(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ci(yo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ai.current){t=Wa(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Do(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),So(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),So(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Eo(t,n),r=r(i=Co(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=vo(r=t.type,t.pendingProps),ka(e,t,r,i=vo(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vo(r,i),Ha(e,t),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,Eo(t,n),Ho(t,r,i),Ko(t,r,i,n),Aa(null,t,r,!0,e,n);case 19:return za(e,t,n);case 22:return Ea(e,t,n)}throw Error(o(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Wc(s);a.call(e)}}Hc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Wc(s);o.call(e)}}var s=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Vr(8===e.nodeType?e.parentNode:e),hc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,Vr(8===e.nodeType?e.parentNode:e),hc((function(){Hc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(s)}$c.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Hc(e,t,null,null)},$c.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Hc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&jt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Xe()),0===(6&Al)&&(zl=Xe()+500,Vi()))}break;case 13:hc((function(){var t=No(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Gc(e,1)}},xt=function(e){if(13===e.tag){var t=No(e,134217728);if(null!==t)rc(t,e,134217728,tc());Gc(e,134217728)}},kt=function(e){if(13===e.tag){var t=nc(e),n=No(e,t);if(null!==n)rc(n,e,t,tc());Gc(e,t)}},St=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(o(90));G(r),J(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Oe=uc,Ae=hc;var tu={usingClientEntryPoint:!1,Events:[bi,wi,_i,Ce,Te,uc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(o(299));var n=!1,r="",i=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(o(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,s,a),e[pi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(o(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(o(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:(e,t,n)=>{"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},6770:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},o=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=s(n(2791)),l=s(n(4164)),c=s(n(8111)),u=s(n(6921)),h=function(e){function t(t){var n=e.call(this,t)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(e,t,r,i){var o,s,a,l;"text-change"===e?null===(s=(o=n).onEditorChangeText)||void 0===s||s.call(o,n.editor.root.innerHTML,t,i,n.unprivilegedEditor):"selection-change"===e&&(null===(l=(a=n).onEditorChangeSelection)||void 0===l||l.call(a,t,i,n.unprivilegedEditor))};var r=n.isControlled()?t.value:t.defaultValue;return n.value=null!==r&&void 0!==r?r:"",n}return r(t,e),t.prototype.validateProps=function(e){var t;if(a.default.Children.count(e.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(a.default.Children.count(e.children)&&"textarea"===(null===(t=a.default.Children.only(e.children))||void 0===t?void 0:t.type))throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.");if(this.lastDeltaChangeSet&&e.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(e,t){var n,r=this;if(this.validateProps(e),!this.editor||this.state.generation!==t.generation)return!0;if("value"in e){var i=this.getEditorContents(),s=null!==(n=e.value)&&void 0!==n?n:"";this.isEqualValue(s,i)||this.setEditorContents(this.editor,s)}return e.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,e.readOnly),o(this.cleanProps,this.dirtyProps).some((function(t){return!c.default(e[t],r.props[t])}))},t.prototype.shouldComponentRegenerate=function(e){var t=this;return this.dirtyProps.some((function(n){return!c.default(e[n],t.props[n])}))},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(e,t){var n=this;if(this.editor&&this.shouldComponentRegenerate(e)){var r=this.editor.getContents(),i=this.editor.getSelection();this.regenerationSnapshot={delta:r,selection:i},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==t.generation){var o=this.regenerationSnapshot,s=(r=o.delta,o.selection);delete this.regenerationSnapshot,this.instantiateEditor();var a=this.editor;a.setContents(r),d((function(){return n.setEditorSelection(a,s)}))}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(e,t){var n=new u.default(e,t);return null!=t.tabIndex&&this.setEditorTabIndex(n,t.tabIndex),this.hookEditor(n),n},t.prototype.hookEditor=function(e){this.unprivilegedEditor=this.makeUnprivilegedEditor(e),e.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(e){e.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(e){return e&&e.ops},t.prototype.isEqualValue=function(e,t){return this.isDelta(e)&&this.isDelta(t)?c.default(e.ops,t.ops):c.default(e,t)},t.prototype.setEditorContents=function(e,t){var n=this;this.value=t;var r=this.getEditorSelection();"string"===typeof t?e.setContents(e.clipboard.convert(t)):e.setContents(t),d((function(){return n.setEditorSelection(e,r)}))},t.prototype.setEditorSelection=function(e,t){if(this.selection=t,t){var n=e.getLength();t.index=Math.max(0,Math.min(t.index,n-1)),t.length=Math.max(0,Math.min(t.length,n-1-t.index)),e.setSelection(t)}},t.prototype.setEditorTabIndex=function(e,t){var n,r;(null===(r=null===(n=e)||void 0===n?void 0:n.scroll)||void 0===r?void 0:r.domNode)&&(e.scroll.domNode.tabIndex=t)},t.prototype.setEditorReadOnly=function(e,t){t?e.disable():e.enable()},t.prototype.makeUnprivilegedEditor=function(e){var t=e;return{getHTML:function(){return t.root.innerHTML},getLength:t.getLength.bind(t),getText:t.getText.bind(t),getContents:t.getContents.bind(t),getSelection:t.getSelection.bind(t),getBounds:t.getBounds.bind(t)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var e=l.default.findDOMNode(this.editingArea);if(!e)throw new Error("Cannot find element for editing area");if(3===e.nodeType)throw new Error("Editing area cannot be a text node");return e},t.prototype.renderEditingArea=function(){var e=this,t=this.props,n=t.children,r=t.preserveWhitespace,o={key:this.state.generation,ref:function(t){e.editingArea=t}};return a.default.Children.count(n)?a.default.cloneElement(a.default.Children.only(n),o):r?a.default.createElement("pre",i({},o)):a.default.createElement("div",i({},o))},t.prototype.render=function(){var e;return a.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(e=this.props.className,null!==e&&void 0!==e?e:""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(e,t,n,r){var i,o;if(this.editor){var s=this.isDelta(this.value)?r.getContents():r.getHTML();s!==this.getEditorContents()&&(this.lastDeltaChangeSet=t,this.value=s,null===(o=(i=this.props).onChange)||void 0===o||o.call(i,e,t,n,r))}},t.prototype.onEditorChangeSelection=function(e,t,n){var r,i,o,s,a,l;if(this.editor){var u=this.getEditorSelection(),h=!u&&e,d=u&&!e;c.default(e,u)||(this.selection=e,null===(i=(r=this.props).onChangeSelection)||void 0===i||i.call(r,e,t,n),h?null===(s=(o=this.props).onFocus)||void 0===s||s.call(o,e,t,n):d&&(null===(l=(a=this.props).onBlur)||void 0===l||l.call(a,u,t,n)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=u.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(a.default.Component);function d(e){Promise.resolve().then(e)}e.exports=h},6374:(e,t,n)=>{"use strict";var r=n(2791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},9117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var w=b.prototype=new y;w.constructor=b,g(w,v.prototype),w.isPureReactComponent=!0;var _=Array.isArray,x=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,i)&&!S.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:k.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function O(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+O(l,0):o,_(s)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),A(s,t,i,"",(function(e){return e}))):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",_(e))for(var c=0;c<e.length;c++){var u=o+O(a=e[c],c);l+=A(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=o+O(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},D={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:k};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=k.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},2791:(e,t,n)=>{"use strict";e.exports=n(9117)},184:(e,t,n)=>{"use strict";e.exports=n(6374)},6813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,R(x);else{var t=r(u);null!==t&&D(_,t.startTime-e)}}function x(e,n){g=!1,m&&(m=!1,y(C),C=-1),p=!0;var o=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&D(_,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,E=null,C=-1,T=5,O=-1;function A(){return!(t.unstable_now()-O<T)}function N(){if(null!==E){var e=t.unstable_now();O=e;var n=!0;try{n=E(!0,e)}finally{n?k():(S=!1,E=null)}}else S=!1}if("function"===typeof b)k=function(){b(N)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,P=I.port2;I.port1.onmessage=N,k=function(){P.postMessage(null)}}else k=function(){v(N,0)};function R(e){E=e,S||(S=!0,k())}function D(e,n){C=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(m?(y(C),C=-1):m=!0,D(_,o-s))):(e.sortIndex=a,n(c,e),g||p||(g=!0,R(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},5296:(e,t,n)=>{"use strict";e.exports=n(6813)},2391:e=>{"use strict";var t=function(){};e.exports=t}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".6673cb34.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="kimoj:";n.l=(r,i,o,s)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/roj/",(()=>{var e={179:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,s=r[0],a=r[1],l=r[2],c=0;if(s.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkkimoj=self.webpackChunkkimoj||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e,t=n(2791),r=n.t(t,2),i=n(1250),o=n(4164),s=n.t(o,2);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function f(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function g(t,n,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:s=!1}=i,u=o.history,p=e.Pop,g=null,m=v();function v(){return(u.state||{idx:null}).idx}function y(){p=e.Pop;let t=v(),n=null==t?null:t-m;m=t,g&&g({action:p,location:w.location,delta:n})}function b(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:f(e);return c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,u.replaceState(a({},u.state,{idx:m}),""));let w={get action(){return p},get location(){return t(o,u)},listen(e){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(l,y),g=e,()=>{o.removeEventListener(l,y),g=null}},createHref:e=>n(o,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let i=d(w.location,t,n);r&&r(i,t),m=v()+1;let a=h(i,m),l=w.createHref(i);try{u.pushState(a,"",l)}catch(Kw){if(Kw instanceof DOMException&&"DataCloneError"===Kw.name)throw Kw;o.location.assign(l)}s&&g&&g({action:p,location:w.location,delta:1})},replace:function(t,n){p=e.Replace;let i=d(w.location,t,n);r&&r(i,t),m=v();let o=h(i,m),a=w.createHref(i);u.replaceState(o,"",a),s&&g&&g({action:p,location:w.location,delta:0})},go:e=>u.go(e)};return w}var m;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(m||(m={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){void 0===n&&(n="/");let r=I(("string"===typeof t?p(t):t).pathname||"/",n);if(null==r)return null;let i=y(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let o=null;for(let s=0;null==o&&s<i.length;++s)o=O(i[s],N(r));return o}function y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(c(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=M([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),y(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:T(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=b(r.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const w=/^:\w+$/,_=3,x=2,k=1,S=10,E=-2,C=e=>"*"===e;function T(e,t){let n=e.split("/"),r=n.length;return n.some(C)&&(r+=E),t&&(r+=x),n.filter((e=>!C(e))).reduce(((e,t)=>e+(w.test(t)?_:""===t?k:S)),r)}function O(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let s=0;s<n.length;++s){let e=n[s],a=s===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=A({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;o.push({params:r,pathname:M([i,c.pathname]),pathnameBase:L(M([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=M([i,c.pathnameBase]))}return o}function A(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(Kw){return u(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+Kw+")."),e}}(l||"",r),e}),{});return{params:l,pathname:o,pathnameBase:s,pattern:e}}function N(e){try{return decodeURI(e)}catch(Kw){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Kw+")."),e}}function I(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function P(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function R(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function D(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=p(e):(i=a({},e),c(!i.pathname||!i.pathname.includes("?"),P("?","pathname","search",i)),c(!i.pathname||!i.pathname.includes("#"),P("#","pathname","hash",i)),c(!i.search||!i.search.includes("#"),P("#","search","hash",i)));let o,s=""===e||""===i.pathname,l=s?"/":i.pathname;if(null==l)o=n;else if(r){let e=t[t.length-1].replace(/^\//,"").split("/");if(l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e.pop();i.pathname=t.join("/")}o="/"+e.join("/")}else{let e=t.length-1;if(l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?p(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:j(r),hash:F(i)}}(i,o),h=l&&"/"!==l&&l.endsWith("/"),d=(s||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!d||(u.pathname+="/"),u}const M=e=>e.join("/").replace(/\/\/+/g,"/"),L=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),j=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const B=["post","put","patch","delete"],U=(new Set(B),["get",...B]);new Set(U),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}const z=t.createContext(null);const H=t.createContext(null);const W=t.createContext(null);const K=t.createContext(null);const G=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Y=t.createContext(null);function Q(){return null!=t.useContext(K)}function $(){return Q()||c(!1),t.useContext(K).location}function X(e){t.useContext(W).static||t.useLayoutEffect(e)}function J(){let{isDataRoute:e}=t.useContext(G);return e?function(){let{router:e}=le(se.UseNavigateStable),n=ue(ae.UseNavigateStable),r=t.useRef(!1);X((()=>{r.current=!0}));let i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,V({fromRouteId:n},i)))}),[e,n]);return i}():function(){Q()||c(!1);let e=t.useContext(z),{basename:n,navigator:r}=t.useContext(W),{matches:i}=t.useContext(G),{pathname:o}=$(),s=JSON.stringify(R(i).map((e=>e.pathnameBase))),a=t.useRef(!1);X((()=>{a.current=!0}));let l=t.useCallback((function(t,i){if(void 0===i&&(i={}),!a.current)return;if("number"===typeof t)return void r.go(t);let l=D(t,JSON.parse(s),o,"path"===i.relative);null==e&&"/"!==n&&(l.pathname="/"===l.pathname?n:M([n,l.pathname])),(i.replace?r.replace:r.push)(l,i.state,i)}),[n,r,s,o,e]);return l}()}function Z(){let{matches:e}=t.useContext(G),n=e[e.length-1];return n?n.params:{}}function ee(n,r,i){Q()||c(!1);let{navigator:o}=t.useContext(W),{matches:s}=t.useContext(G),a=s[s.length-1],l=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let h,d=$();if(r){var f;let e="string"===typeof r?p(r):r;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||c(!1),h=e}else h=d;let g=h.pathname||"/",m=v(n,{pathname:"/"===u?g:g.slice(u.length)||"/"});let y=oe(m&&m.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:M([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:M([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,i);return r&&y?t.createElement(K.Provider,{value:{location:V({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:e.Pop}},y):y}function te(){let e=function(){var e;let n=t.useContext(Y),r=ce(ae.UseRouteError),i=ue(ae.UseRouteError);if(n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,null)}const ne=t.createElement(te,null);class re extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error?t.createElement(G.Provider,{value:this.props.routeContext},t.createElement(Y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:n,match:r,children:i}=e,o=t.useContext(z);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(G.Provider,{value:n},i)}function oe(e,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==e){var o;if(null==(o=r)||!o.errors)return null;e=r.matches}let s=e,a=null==(i=r)?void 0:i.errors;if(null!=a){let e=s.findIndex((e=>e.route.id&&(null==a?void 0:a[e.route.id])));e>=0||c(!1),s=s.slice(0,Math.min(s.length,e+1))}return s.reduceRight(((e,i,o)=>{let l=i.route.id?null==a?void 0:a[i.route.id]:null,c=null;r&&(c=i.route.errorElement||ne);let u=n.concat(s.slice(0,o+1)),h=()=>{let n;return n=l?c:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(ie,{match:i,routeContext:{outlet:e,matches:u,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?t.createElement(re,{location:r.location,revalidation:r.revalidation,component:c,error:l,children:h(),routeContext:{outlet:null,matches:u,isDataRoute:!0}}):h()}),null)}var se=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(se||{}),ae=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ae||{});function le(e){let n=t.useContext(z);return n||c(!1),n}function ce(e){let n=t.useContext(H);return n||c(!1),n}function ue(e){let n=function(e){let n=t.useContext(G);return n||c(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||c(!1),r.route.id}r.startTransition;function he(e){c(!1)}function de(n){let{basename:r="/",children:i=null,location:o,navigationType:s=e.Pop,navigator:a,static:l=!1}=n;Q()&&c(!1);let u=r.replace(/^\/*/,"/"),h=t.useMemo((()=>({basename:u,navigator:a,static:l})),[u,a,l]);"string"===typeof o&&(o=p(o));let{pathname:d="/",search:f="",hash:g="",state:m=null,key:v="default"}=o,y=t.useMemo((()=>{let e=I(d,u);return null==e?null:{location:{pathname:e,search:f,hash:g,state:m,key:v},navigationType:s}}),[u,d,f,g,m,v,s]);return null==y?null:t.createElement(W.Provider,{value:h},t.createElement(K.Provider,{children:i,value:y}))}function fe(e){let{children:t,location:n}=e;return ee(pe(t),n)}new Promise((()=>{}));t.Component;function pe(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let o=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,pe(e.props.children,o));e.type!==he&&c(!1),e.props.index&&e.props.children&&c(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=pe(e.props.children,o)),r.push(s)})),r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);new Map;const ge=r.startTransition;s.flushSync;function me(e){let{basename:n,children:r,future:i,window:o}=e,s=t.useRef();null==s.current&&(s.current=function(e){return void 0===e&&(e={}),g((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return d("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:f(t)}),null,e)}({window:o,v5Compat:!0}));let a=s.current,[l,c]=t.useState({action:a.action,location:a.location}),{v7_startTransition:u}=i||{},h=t.useCallback((e=>{u&&ge?ge((()=>c(e))):c(e)}),[c,u]);return t.useLayoutEffect((()=>a.listen(h)),[a,h]),t.createElement(de,{basename:n,children:r,location:l.location,navigationType:l.action,navigator:a})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var ve,ye;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ve||(ve={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ye||(ye={}));var be=n(1694),we=n.n(be);const _e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null!=e?String(e):t||null},xe=t.createContext(null);function ke(){return ke=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ke.apply(this,arguments)}function Se(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n(2176);function Ee(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function Ce(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function Te(e,n){return Object.keys(n).reduce((function(r,i){var o,s=r,a=s[Ee(i)],l=s[i],c=Se(s,[Ee(i),i].map(Ce)),u=n[i],h=function(e,n,r){var i=(0,t.useRef)(void 0!==e),o=(0,t.useState)(n),s=o[0],a=o[1],l=void 0!==e,c=i.current;return i.current=l,!l&&c&&s!==n&&a(n),[l?e:s,(0,t.useCallback)((function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];r&&r.apply(void 0,[e].concat(n)),a(e)}),[r])]}(l,a,e[u]),d=h[0],f=h[1];return ke({},c,((o={})[i]=d,o[u]=f,o))}),e)}function Oe(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function Ae(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!==n&&void 0!==n?n:null}.bind(this))}function Ne(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}Oe.__suppressDeprecationWarning=!0,Ae.__suppressDeprecationWarning=!0,Ne.__suppressDeprecationWarning=!0;var Ie=n(184);const Pe=["xxl","xl","lg","md","sm","xs"],Re="xs",De=t.createContext({prefixes:{},breakpoints:Pe,minBreakpoint:Re}),{Consumer:Me,Provider:Le}=De;function je(e,n){const{prefixes:r}=(0,t.useContext)(De);return e||r[n]||n}const Fe=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i,...o}=e;n=je(n,"navbar-brand");const s=i||(o.href?"a":"span");return(0,Ie.jsx)(s,{...o,ref:t,className:we()(r,n)})}));Fe.displayName="NavbarBrand";const qe=Fe;function Be(e){return e&&e.ownerDocument||document}function Ue(e,t){return function(e){var t=Be(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var Ve=/([A-Z])/g;var ze=/^ms-/;function He(e){return function(e){return e.replace(Ve,"-$1").toLowerCase()}(e).replace(ze,"-ms-")}var We=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;const Ke=function(e,t){var n="",r="";if("string"===typeof t)return e.style.getPropertyValue(He(t))||Ue(e).getPropertyValue(He(t));Object.keys(t).forEach((function(i){var o=t[i];o||0===o?!function(e){return!(!e||!We.test(e))}(i)?n+=He(i)+": "+o+";":r+=i+"("+o+") ":e.style.removeProperty(He(i))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n};function Ge(e,t){return Ge=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ge(e,t)}const Ye=!1,Qe=t.createContext(null);var $e="unmounted",Xe="exited",Je="entering",Ze="entered",et="exiting",tt=function(e){var n,r;function i(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=Xe,r.appearStatus=Je):i=Ze:i=t.unmountOnExit||t.mountOnEnter?$e:Xe,r.state={status:i},r.nextCallback=null,r}r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,Ge(n,r),i.getDerivedStateFromProps=function(e,t){return e.in&&t.status===$e?{status:Xe}:null};var s=i.prototype;return s.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},s.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==Je&&n!==Ze&&(t=Je):n!==Je&&n!==Ze||(t=et)}this.updateStatus(!1,t)},s.componentWillUnmount=function(){this.cancelNextCallback()},s.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},s.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===Je){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:o.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Xe&&this.setState({status:$e})},s.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[o.findDOMNode(this),r],s=i[0],a=i[1],l=this.getTimeouts(),c=r?l.appear:l.enter;!e&&!n||Ye?this.safeSetState({status:Ze},(function(){t.props.onEntered(s)})):(this.props.onEnter(s,a),this.safeSetState({status:Je},(function(){t.props.onEntering(s,a),t.onTransitionEnd(c,(function(){t.safeSetState({status:Ze},(function(){t.props.onEntered(s,a)}))}))})))},s.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:o.findDOMNode(this);t&&!Ye?(this.props.onExit(r),this.safeSetState({status:et},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:Xe},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:Xe},(function(){e.props.onExited(r)}))},s.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},s.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},s.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},s.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:o.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],s=i[0],a=i[1];this.props.addEndListener(s,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},s.render=function(){var e=this.state.status;if(e===$e)return null;var n=this.props,r=n.children,i=(n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef,Se(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return t.createElement(Qe.Provider,{value:null},"function"===typeof r?r(e,i):t.cloneElement(t.Children.only(r),i))},i}(t.Component);function nt(){}tt.contextType=Qe,tt.propTypes={},tt.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:nt,onEntering:nt,onEntered:nt,onExit:nt,onExiting:nt,onExited:nt},tt.UNMOUNTED=$e,tt.EXITED=Xe,tt.ENTERING=Je,tt.ENTERED=Ze,tt.EXITING=et;const rt=tt,it=!("undefined"===typeof window||!window.document||!window.document.createElement);var ot=!1,st=!1;try{var at={get passive(){return ot=!0},get once(){return st=ot=!0}};it&&(window.addEventListener("test",at,at),window.removeEventListener("test",at,!0))}catch(GV){}const lt=function(e,t,n,r){if(r&&"boolean"!==typeof r&&!st){var i=r.once,o=r.capture,s=n;!st&&i&&(s=n.__once||function e(r){this.removeEventListener(t,e,o),n.call(this,r)},n.__once=s),e.addEventListener(t,s,ot?r:o)}e.addEventListener(t,n,r)};const ct=function(e,t,n,r){var i=r&&"boolean"!==typeof r?r.capture:r;e.removeEventListener(t,n,i),n.__once&&e.removeEventListener(t,n.__once,i)};const ut=function(e,t,n,r){return lt(e,t,n,r),function(){ct(e,t,n,r)}};function ht(e,t,n){void 0===n&&(n=5);var r=!1,i=setTimeout((function(){r||function(e,t,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!0),e){var i=document.createEvent("HTMLEvents");i.initEvent(t,n,r),e.dispatchEvent(i)}}(e,"transitionend",!0)}),t+n),o=ut(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(i),o()}}function dt(e,t,n,r){null==n&&(n=function(e){var t=Ke(e,"transitionDuration")||"",n=-1===t.indexOf("ms")?1e3:1;return parseFloat(t)*n}(e)||0);var i=ht(e,n,r),o=ut(e,"transitionend",t);return function(){i(),o()}}function ft(e,t){const n=Ke(e,t)||"",r=-1===n.indexOf("ms")?1e3:1;return parseFloat(n)*r}function pt(e,t){const n=ft(e,"transitionDuration"),r=ft(e,"transitionDelay"),i=dt(e,(n=>{n.target===e&&(i(),t(n))}),n+r)}const gt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e=>null!=e)).reduce(((e,t)=>{if("function"!==typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),null)};function mt(e){e.offsetHeight}const vt=e=>e&&"function"!==typeof e?t=>{e.current=t}:e;const yt=function(e,n){return(0,t.useMemo)((()=>function(e,t){const n=vt(e),r=vt(t);return e=>{n&&n(e),r&&r(e)}}(e,n)),[e,n])};const bt=t.forwardRef(((e,n)=>{let{onEnter:r,onEntering:i,onEntered:s,onExit:a,onExiting:l,onExited:c,addEndListener:u,children:h,childRef:d,...f}=e;const p=(0,t.useRef)(null),g=yt(p,d),m=e=>{var t;g((t=e)&&"setState"in t?o.findDOMNode(t):null!=t?t:null)},v=e=>t=>{e&&p.current&&e(p.current,t)},y=(0,t.useCallback)(v(r),[r]),b=(0,t.useCallback)(v(i),[i]),w=(0,t.useCallback)(v(s),[s]),_=(0,t.useCallback)(v(a),[a]),x=(0,t.useCallback)(v(l),[l]),k=(0,t.useCallback)(v(c),[c]),S=(0,t.useCallback)(v(u),[u]);return(0,Ie.jsx)(rt,{ref:n,...f,onEnter:y,onEntered:w,onEntering:b,onExit:_,onExited:k,onExiting:x,addEndListener:S,nodeRef:p,children:"function"===typeof h?(e,t)=>h(e,{...t,ref:m}):t.cloneElement(h,{ref:m})})})),wt=bt,_t={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function xt(e,t){const n=t["offset".concat(e[0].toUpperCase()).concat(e.slice(1))],r=_t[e];return n+parseInt(Ke(t,r[0]),10)+parseInt(Ke(t,r[1]),10)}const kt={[Xe]:"collapse",[et]:"collapsing",[Je]:"collapsing",[Ze]:"collapse show"},St=t.forwardRef(((e,n)=>{let{onEnter:r,onEntering:i,onEntered:o,onExit:s,onExiting:a,className:l,children:c,dimension:u="height",in:h=!1,timeout:d=300,mountOnEnter:f=!1,unmountOnExit:p=!1,appear:g=!1,getDimensionValue:m=xt,...v}=e;const y="function"===typeof u?u():u,b=(0,t.useMemo)((()=>gt((e=>{e.style[y]="0"}),r)),[y,r]),w=(0,t.useMemo)((()=>gt((e=>{const t="scroll".concat(y[0].toUpperCase()).concat(y.slice(1));e.style[y]="".concat(e[t],"px")}),i)),[y,i]),_=(0,t.useMemo)((()=>gt((e=>{e.style[y]=null}),o)),[y,o]),x=(0,t.useMemo)((()=>gt((e=>{e.style[y]="".concat(m(y,e),"px"),mt(e)}),s)),[s,m,y]),k=(0,t.useMemo)((()=>gt((e=>{e.style[y]=null}),a)),[y,a]);return(0,Ie.jsx)(wt,{ref:n,addEndListener:pt,...v,"aria-expanded":v.role?h:null,onEnter:b,onEntering:w,onEntered:_,onExit:x,onExiting:k,childRef:c.ref,in:h,timeout:d,mountOnEnter:f,unmountOnExit:p,appear:g,children:(e,n)=>t.cloneElement(c,{...n,className:we()(l,c.props.className,kt[e],"width"===y&&"collapse-horizontal")})})})),Et=t.createContext(null);Et.displayName="NavbarContext";const Ct=Et,Tt=t.forwardRef(((e,n)=>{let{children:r,bsPrefix:i,...o}=e;i=je(i,"navbar-collapse");const s=(0,t.useContext)(Ct);return(0,Ie.jsx)(St,{in:!(!s||!s.expanded),...o,children:(0,Ie.jsx)("div",{ref:n,className:i,children:r})})}));Tt.displayName="NavbarCollapse";const Ot=Tt;const At=function(e){const n=(0,t.useRef)(e);return(0,t.useEffect)((()=>{n.current=e}),[e]),n};function Nt(e){const n=At(e);return(0,t.useCallback)((function(){return n.current&&n.current(...arguments)}),[n])}const It=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:i,children:o,label:s="Toggle navigation",as:a="button",onClick:l,...c}=e;r=je(r,"navbar-toggler");const{onToggle:u,expanded:h}=(0,t.useContext)(Ct)||{},d=Nt((e=>{l&&l(e),u&&u()}));return"button"===a&&(c.type="button"),(0,Ie.jsx)(a,{...c,ref:n,onClick:d,"aria-label":s,className:we()(i,r,!h&&"collapsed"),children:o||(0,Ie.jsx)("span",{className:"".concat(r,"-icon")})})}));It.displayName="NavbarToggle";const Pt=It,Rt="undefined"!==typeof n.g&&n.g.navigator&&"ReactNative"===n.g.navigator.product,Dt="undefined"!==typeof document||Rt?t.useLayoutEffect:t.useEffect,Mt=new WeakMap,Lt=(e,t)=>{if(!e||!t)return;const n=Mt.get(t)||new Map;Mt.set(t,n);let r=n.get(e);return r||(r=t.matchMedia(e),r.refCount=0,n.set(r.media,r)),r};function jt(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"undefined"===typeof window?void 0:window;const r=Lt(e,n),[i,o]=(0,t.useState)((()=>!!r&&r.matches));return Dt((()=>{let t=Lt(e,n);if(!t)return o(!1);let r=Mt.get(n);const i=()=>{o(t.matches)};return t.refCount++,t.addListener(i),i(),()=>{t.removeListener(i),t.refCount--,t.refCount<=0&&(null==r||r.delete(t.media)),t=void 0}}),[e]),i}const Ft=function(e){const n=Object.keys(e);function r(e,t){return e===t?t:e?"".concat(e," and ").concat(t):t}function i(t){const r=function(e){return n[Math.min(n.indexOf(e)+1,n.length-1)]}(t);let i=e[r];return i="number"===typeof i?"".concat(i-.2,"px"):"calc(".concat(i," - 0.2px)"),"(max-width: ".concat(i,")")}return function(n,o,s){let a;"object"===typeof n?(a=n,s=o,o=!0):a={[n]:o=o||!0};let l=(0,t.useMemo)((()=>Object.entries(a).reduce(((t,n)=>{let[o,s]=n;return"up"!==s&&!0!==s||(t=r(t,function(t){let n=e[t];return"number"===typeof n&&(n="".concat(n,"px")),"(min-width: ".concat(n,")")}(o))),"down"!==s&&!0!==s||(t=r(t,i(o))),t}),"")),[JSON.stringify(a)]);return jt(l,s)}}({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),qt=Ft;function Bt(e){void 0===e&&(e=Be());try{var t=e.activeElement;return t&&t.nodeName?t:null}catch(GV){return e.body}}function Ut(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function Vt(e){const n=function(e){const n=(0,t.useRef)(e);return n.current=e,n}(e);(0,t.useEffect)((()=>()=>n.current()),[])}const zt="data-rr-ui-";function Ht(e){return"".concat(zt).concat(e)}const Wt=Ht("modal-open");const Kt=class{constructor(){let{ownerDocument:e,handleContainerOverflow:t=!0,isRTL:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.handleContainerOverflow=t,this.isRTL=n,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const t={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",r=this.getElement();e.style={overflow:r.style.overflow,[n]:r.style[n]},e.scrollBarWidth&&(t[n]="".concat(parseInt(Ke(r,n)||"0",10)+e.scrollBarWidth,"px")),r.setAttribute(Wt,""),Ke(r,t)}reset(){[...this.modals].forEach((e=>this.remove(e)))}removeContainerStyle(e){const t=this.getElement();t.removeAttribute(Wt),Object.assign(t.style,e.style)}add(e){let t=this.modals.indexOf(e);return-1!==t?t:(t=this.modals.length,this.modals.push(e),this.setModalAttributes(e),0!==t||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),t)}remove(e){const t=this.modals.indexOf(e);-1!==t&&(this.modals.splice(t,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}},Gt=(0,t.createContext)(it?window:void 0);Gt.Provider;function Yt(){return(0,t.useContext)(Gt)}const Qt=(e,t)=>it?null==e?(t||Be()).body:("function"===typeof e&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;const $t=function(e){let{children:n,in:r,onExited:i,mountOnEnter:o,unmountOnExit:s}=e;const a=(0,t.useRef)(null),l=(0,t.useRef)(r),c=Nt(i);(0,t.useEffect)((()=>{r?l.current=!0:c(a.current)}),[r,c]);const u=yt(a,n.ref),h=(0,t.cloneElement)(n,{ref:u});return r?h:s||!l.current&&o?null:h};function Xt(e){let{children:n,in:r,onExited:i,onEntered:o,transition:s}=e;const[a,l]=(0,t.useState)(!r);r&&a&&l(!1);const c=function(e){let{in:n,onTransition:r}=e;const i=(0,t.useRef)(null),o=(0,t.useRef)(!0),s=Nt(r);return Dt((()=>{if(!i.current)return;let e=!1;return s({in:n,element:i.current,initial:o.current,isStale:()=>e}),()=>{e=!0}}),[n,s]),Dt((()=>(o.current=!1,()=>{o.current=!0})),[]),i}({in:!!r,onTransition:e=>{Promise.resolve(s(e)).then((()=>{e.isStale()||(e.in?null==o||o(e.element,e.initial):(l(!0),null==i||i(e.element)))}),(t=>{throw e.in||l(!0),t}))}}),u=yt(c,n.ref);return a&&!r?null:(0,t.cloneElement)(n,{ref:u})}function Jt(e,t,n){return e?(0,Ie.jsx)(e,Object.assign({},n)):t?(0,Ie.jsx)(Xt,Object.assign({},n,{transition:t})):(0,Ie.jsx)($t,Object.assign({},n))}const Zt=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];let en;function tn(e){const n=Yt(),r=e||function(e){return en||(en=new Kt({ownerDocument:null==e?void 0:e.document})),en}(n),i=(0,t.useRef)({dialog:null,backdrop:null});return Object.assign(i.current,{add:()=>r.add(i.current),remove:()=>r.remove(i.current),isTopModal:()=>r.isTopModal(i.current),setDialogRef:(0,t.useCallback)((e=>{i.current.dialog=e}),[]),setBackdropRef:(0,t.useCallback)((e=>{i.current.backdrop=e}),[])})}const nn=(0,t.forwardRef)(((e,n)=>{let{show:r=!1,role:i="dialog",className:s,style:a,children:l,backdrop:c=!0,keyboard:u=!0,onBackdropClick:h,onEscapeKeyDown:d,transition:f,runTransition:p,backdropTransition:g,runBackdropTransition:m,autoFocus:v=!0,enforceFocus:y=!0,restoreFocus:b=!0,restoreFocusOptions:w,renderDialog:_,renderBackdrop:x=(e=>(0,Ie.jsx)("div",Object.assign({},e))),manager:k,container:S,onShow:E,onHide:C=(()=>{}),onExit:T,onExited:O,onExiting:A,onEnter:N,onEntering:I,onEntered:P}=e,R=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Zt);const D=Yt(),M=function(e,n){const r=Yt(),[i,o]=(0,t.useState)((()=>Qt(e,null==r?void 0:r.document)));if(!i){const t=Qt(e);t&&o(t)}return(0,t.useEffect)((()=>{n&&i&&n(i)}),[n,i]),(0,t.useEffect)((()=>{const t=Qt(e);t!==i&&o(t)}),[e,i]),i}(S),L=tn(k),j=function(){const e=(0,t.useRef)(!0),n=(0,t.useRef)((()=>e.current));return(0,t.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),n.current}(),F=function(e){const n=(0,t.useRef)(null);return(0,t.useEffect)((()=>{n.current=e})),n.current}(r),[q,B]=(0,t.useState)(!r),U=(0,t.useRef)(null);(0,t.useImperativeHandle)(n,(()=>L),[L]),it&&!F&&r&&(U.current=Bt(null==D?void 0:D.document)),r&&q&&B(!1);const V=Nt((()=>{if(L.add(),Y.current=ut(document,"keydown",K),G.current=ut(document,"focus",(()=>setTimeout(H)),!0),E&&E(),v){var e,t;const n=Bt(null!=(e=null==(t=L.dialog)?void 0:t.ownerDocument)?e:null==D?void 0:D.document);L.dialog&&n&&!Ut(L.dialog,n)&&(U.current=n,L.dialog.focus())}})),z=Nt((()=>{var e;(L.remove(),null==Y.current||Y.current(),null==G.current||G.current(),b)&&(null==(e=U.current)||null==e.focus||e.focus(w),U.current=null)}));(0,t.useEffect)((()=>{r&&M&&V()}),[r,M,V]),(0,t.useEffect)((()=>{q&&z()}),[q,z]),Vt((()=>{z()}));const H=Nt((()=>{if(!y||!j()||!L.isTopModal())return;const e=Bt(null==D?void 0:D.document);L.dialog&&e&&!Ut(L.dialog,e)&&L.dialog.focus()})),W=Nt((e=>{e.target===e.currentTarget&&(null==h||h(e),!0===c&&C())})),K=Nt((e=>{u&&function(e){return"Escape"===e.code||27===e.keyCode}(e)&&L.isTopModal()&&(null==d||d(e),e.defaultPrevented||C())})),G=(0,t.useRef)(),Y=(0,t.useRef)();if(!M)return null;const Q=Object.assign({role:i,ref:L.setDialogRef,"aria-modal":"dialog"===i||void 0},R,{style:a,className:s,tabIndex:-1});let $=_?_(Q):(0,Ie.jsx)("div",Object.assign({},Q,{children:t.cloneElement(l,{role:"document"})}));$=Jt(f,p,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!r,onExit:T,onExiting:A,onExited:function(){B(!0),null==O||O(...arguments)},onEnter:N,onEntering:I,onEntered:P,children:$});let X=null;return c&&(X=x({ref:L.setBackdropRef,onClick:W}),X=Jt(g,m,{in:!!r,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:X})),(0,Ie.jsx)(Ie.Fragment,{children:o.createPortal((0,Ie.jsxs)(Ie.Fragment,{children:[X,$]}),M)})}));nn.displayName="Modal";const rn=Object.assign(nn,{Manager:Kt}),on={[Je]:"show",[Ze]:"show"},sn=t.forwardRef(((e,n)=>{let{className:r,children:i,transitionClasses:o={},onEnter:s,...a}=e;const l={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...a},c=(0,t.useCallback)(((e,t)=>{mt(e),null==s||s(e,t)}),[s]);return(0,Ie.jsx)(wt,{ref:n,addEndListener:pt,...l,onEnter:c,childRef:i.ref,children:(e,n)=>t.cloneElement(i,{...n,className:we()("fade",r,i.props.className,on[e],o[e])})})}));sn.displayName="Fade";const an=sn,ln=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=je(r,"offcanvas-body"),(0,Ie.jsx)(i,{ref:t,className:we()(n,r),...o})}));ln.displayName="OffcanvasBody";const cn=ln,un={[Je]:"show",[Ze]:"show"},hn=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:i,children:o,in:s=!1,mountOnEnter:a=!1,unmountOnExit:l=!1,appear:c=!1,...u}=e;return r=je(r,"offcanvas"),(0,Ie.jsx)(wt,{ref:n,addEndListener:pt,in:s,mountOnEnter:a,unmountOnExit:l,appear:c,...u,childRef:o.ref,children:(e,n)=>t.cloneElement(o,{...n,className:we()(i,o.props.className,(e===Je||e===et)&&"".concat(r,"-toggling"),un[e])})})}));hn.displayName="OffcanvasToggling";const dn=hn,fn=t.createContext({onHide(){}});var pn=n(2007),gn=n.n(pn);const mn={"aria-label":gn().string,onClick:gn().func,variant:gn().oneOf(["white"])},vn=t.forwardRef(((e,t)=>{let{className:n,variant:r,"aria-label":i="Close",...o}=e;return(0,Ie.jsx)("button",{ref:t,type:"button",className:we()("btn-close",r&&"btn-close-".concat(r),n),"aria-label":i,...o})}));vn.displayName="CloseButton",vn.propTypes=mn;const yn=vn,bn=t.forwardRef(((e,n)=>{let{closeLabel:r="Close",closeVariant:i,closeButton:o=!1,onHide:s,children:a,...l}=e;const c=(0,t.useContext)(fn),u=Nt((()=>{null==c||c.onHide(),null==s||s()}));return(0,Ie.jsxs)("div",{ref:n,...l,children:[a,o&&(0,Ie.jsx)(yn,{"aria-label":r,variant:i,onClick:u})]})})),wn=bn,_n=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,closeLabel:i="Close",closeButton:o=!1,...s}=e;return n=je(n,"offcanvas-header"),(0,Ie.jsx)(wn,{ref:t,...s,className:we()(r,n),closeLabel:i,closeButton:o})}));_n.displayName="OffcanvasHeader";const xn=_n,kn=e=>t.forwardRef(((t,n)=>(0,Ie.jsx)("div",{...t,ref:n,className:we()(t.className,e)}))),Sn=kn("h5"),En=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=Sn,...o}=e;return r=je(r,"offcanvas-title"),(0,Ie.jsx)(i,{ref:t,className:we()(n,r),...o})}));En.displayName="OffcanvasTitle";const Cn=En;var Tn=Function.prototype.bind.call(Function.prototype.call,[].slice);function On(e,t){return Tn(e.querySelectorAll(t))}function An(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}const Nn=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",In=".sticky-top",Pn=".navbar-toggler";class Rn extends Kt{adjustAndStore(e,t,n){const r=t.style[e];t.dataset[e]=r,Ke(t,{[e]:"".concat(parseFloat(Ke(t,e))+n,"px")})}restore(e,t){const n=t.dataset[e];void 0!==n&&(delete t.dataset[e],Ke(t,{[e]:n}))}setContainerStyle(e){super.setContainerStyle(e);const t=this.getElement();var n,r;if(r="modal-open",(n=t).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)),!e.scrollBarWidth)return;const i=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";On(t,Nn).forEach((t=>this.adjustAndStore(i,t,e.scrollBarWidth))),On(t,In).forEach((t=>this.adjustAndStore(o,t,-e.scrollBarWidth))),On(t,Pn).forEach((t=>this.adjustAndStore(o,t,e.scrollBarWidth)))}removeContainerStyle(e){super.removeContainerStyle(e);const t=this.getElement();var n,r;r="modal-open",(n=t).classList?n.classList.remove(r):"string"===typeof n.className?n.className=An(n.className,r):n.setAttribute("class",An(n.className&&n.className.baseVal||"",r));const i=this.isRTL?"paddingLeft":"paddingRight",o=this.isRTL?"marginLeft":"marginRight";On(t,Nn).forEach((e=>this.restore(i,e))),On(t,In).forEach((e=>this.restore(o,e))),On(t,Pn).forEach((e=>this.restore(o,e)))}}let Dn;const Mn=Rn;function Ln(e){return(0,Ie.jsx)(dn,{...e})}function jn(e){return(0,Ie.jsx)(an,{...e})}const Fn=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:i,children:o,"aria-labelledby":s,placement:a="start",responsive:l,show:c=!1,backdrop:u=!0,keyboard:h=!0,scroll:d=!1,onEscapeKeyDown:f,onShow:p,onHide:g,container:m,autoFocus:v=!0,enforceFocus:y=!0,restoreFocus:b=!0,restoreFocusOptions:w,onEntered:_,onExit:x,onExiting:k,onEnter:S,onEntering:E,onExited:C,backdropClassName:T,manager:O,renderStaticNode:A=!1,...N}=e;const I=(0,t.useRef)();r=je(r,"offcanvas");const{onToggle:P}=(0,t.useContext)(Ct)||{},[R,D]=(0,t.useState)(!1),M=qt(l||"xs","up");(0,t.useEffect)((()=>{D(l?c&&!M:c)}),[c,l,M]);const L=Nt((()=>{null==P||P(),null==g||g()})),j=(0,t.useMemo)((()=>({onHide:L})),[L]);const F=(0,t.useCallback)((e=>(0,Ie.jsx)("div",{...e,className:we()("".concat(r,"-backdrop"),T)})),[T,r]),q=e=>(0,Ie.jsx)("div",{...e,...N,className:we()(i,l?"".concat(r,"-").concat(l):r,"".concat(r,"-").concat(a)),"aria-labelledby":s,children:o});return(0,Ie.jsxs)(Ie.Fragment,{children:[!R&&(l||A)&&q({}),(0,Ie.jsx)(fn.Provider,{value:j,children:(0,Ie.jsx)(rn,{show:R,ref:n,backdrop:u,container:m,keyboard:h,autoFocus:v,enforceFocus:y&&!d,restoreFocus:b,restoreFocusOptions:w,onEscapeKeyDown:f,onShow:p,onHide:L,onEnter:function(e){e&&(e.style.visibility="visible");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==S||S(e,...n)},onEntering:E,onEntered:_,onExit:x,onExiting:k,onExited:function(e){e&&(e.style.visibility="");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];null==C||C(...n)},manager:O||(d?(I.current||(I.current=new Mn({handleContainerOverflow:!1})),I.current):function(e){return Dn||(Dn=new Rn(e)),Dn}()),transition:Ln,backdropTransition:jn,renderBackdrop:F,renderDialog:q})})]})}));Fn.displayName="Offcanvas";const qn=Object.assign(Fn,{Body:cn,Header:xn,Title:Cn}),Bn=t.forwardRef(((e,n)=>{const r=(0,t.useContext)(Ct);return(0,Ie.jsx)(qn,{ref:n,show:!(null==r||!r.expanded),...e,renderStaticNode:!0})}));Bn.displayName="NavbarOffcanvas";const Un=Bn,Vn=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="span",...o}=e;return r=je(r,"navbar-text"),(0,Ie.jsx)(i,{ref:t,className:we()(n,r),...o})}));Vn.displayName="NavbarText";const zn=Vn,Hn=t.forwardRef(((e,n)=>{const{bsPrefix:r,expand:i=!0,variant:o="light",bg:s,fixed:a,sticky:l,className:c,as:u="nav",expanded:h,onToggle:d,onSelect:f,collapseOnSelect:p=!1,...g}=Te(e,{expanded:"onToggle"}),m=je(r,"navbar"),v=(0,t.useCallback)((function(){null==f||f(...arguments),p&&h&&(null==d||d(!1))}),[f,p,h,d]);void 0===g.role&&"nav"!==u&&(g.role="navigation");let y="".concat(m,"-expand");"string"===typeof i&&(y="".concat(y,"-").concat(i));const b=(0,t.useMemo)((()=>({onToggle:()=>null==d?void 0:d(!h),bsPrefix:m,expanded:!!h,expand:i})),[m,h,i,d]);return(0,Ie.jsx)(Ct.Provider,{value:b,children:(0,Ie.jsx)(xe.Provider,{value:v,children:(0,Ie.jsx)(u,{ref:n,...g,className:we()(c,m,i&&y,o&&"".concat(m,"-").concat(o),s&&"bg-".concat(s),l&&"sticky-".concat(l),a&&"fixed-".concat(a))})})})}));Hn.displayName="Navbar";const Wn=Object.assign(Hn,{Brand:qe,Collapse:Ot,Offcanvas:Un,Text:zn,Toggle:Pt});n(3573);const Kn=t.createContext(null);Kn.displayName="NavContext";const Gn=Kn,Yn=t.createContext(null),Qn=["as","disabled"];function $n(e){let{tagName:t,disabled:n,href:r,target:i,rel:o,role:s,onClick:a,tabIndex:l=0,type:c}=e;t||(t=null!=r||null!=i||null!=o?"a":"button");const u={tagName:t};if("button"===t)return[{type:c||"button",disabled:n},u];const h=e=>{(n||"a"===t&&function(e){return!e||"#"===e.trim()}(r))&&e.preventDefault(),n?e.stopPropagation():null==a||a(e)};return"a"===t&&(r||(r="#"),n&&(r=void 0)),[{role:null!=s?s:"button",disabled:void 0,tabIndex:n?void 0:l,href:r,target:"a"===t?i:void 0,"aria-disabled":n||void 0,rel:"a"===t?o:void 0,onClick:h,onKeyDown:e=>{" "===e.key&&(e.preventDefault(),h(e))}},u]}const Xn=t.forwardRef(((e,t)=>{let{as:n,disabled:r}=e,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Qn);const[o,{tagName:s}]=$n(Object.assign({tagName:n,disabled:r},i));return(0,Ie.jsx)(s,Object.assign({},i,o,{ref:t}))}));Xn.displayName="Button";const Jn=Xn,Zn=["as","active","eventKey"];function er(e){let{key:n,onClick:r,active:i,id:o,role:s,disabled:a}=e;const l=(0,t.useContext)(xe),c=(0,t.useContext)(Gn),u=(0,t.useContext)(Yn);let h=i;const d={role:s};if(c){s||"tablist"!==c.role||(d.role="tab");const e=c.getControllerId(null!=n?n:null),t=c.getControlledId(null!=n?n:null);d[Ht("event-key")]=n,d.id=e||o,h=null==i&&null!=n?c.activeKey===n:i,!h&&(null!=u&&u.unmountOnExit||null!=u&&u.mountOnEnter)||(d["aria-controls"]=t)}return"tab"===d.role&&(d["aria-selected"]=h,h||(d.tabIndex=-1),a&&(d.tabIndex=-1,d["aria-disabled"]=!0)),d.onClick=Nt((e=>{a||(null==r||r(e),null!=n&&l&&!e.isPropagationStopped()&&l(n,e))})),[d,{isActive:h}]}const tr=t.forwardRef(((e,t)=>{let{as:n=Jn,active:r,eventKey:i}=e,o=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,Zn);const[s,a]=er(Object.assign({key:_e(i,o.href),active:r},o));return s[Ht("active")]=a.isActive,(0,Ie.jsx)(n,Object.assign({},o,s,{ref:t}))}));tr.displayName="NavItem";const nr=tr,rr=["as","onSelect","activeKey","role","onKeyDown"];const ir=()=>{},or=Ht("event-key"),sr=t.forwardRef(((e,n)=>{let{as:r="div",onSelect:i,activeKey:o,role:s,onKeyDown:a}=e,l=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,rr);const c=function(){const[,e]=(0,t.useReducer)((e=>!e),!1);return e}(),u=(0,t.useRef)(!1),h=(0,t.useContext)(xe),d=(0,t.useContext)(Yn);let f,p;d&&(s=s||"tablist",o=d.activeKey,f=d.getControlledId,p=d.getControllerId);const g=(0,t.useRef)(null),m=e=>{const t=g.current;if(!t)return null;const n=On(t,"[".concat(or,"]:not([aria-disabled=true])")),r=t.querySelector("[aria-selected=true]");if(!r||r!==document.activeElement)return null;const i=n.indexOf(r);if(-1===i)return null;let o=i+e;return o>=n.length&&(o=0),o<0&&(o=n.length-1),n[o]},v=(e,t)=>{null!=e&&(null==i||i(e,t),null==h||h(e,t))};(0,t.useEffect)((()=>{if(g.current&&u.current){const e=g.current.querySelector("[".concat(or,"][aria-selected=true]"));null==e||e.focus()}u.current=!1}));const y=yt(n,g);return(0,Ie.jsx)(xe.Provider,{value:v,children:(0,Ie.jsx)(Gn.Provider,{value:{role:s,activeKey:_e(o),getControlledId:f||ir,getControllerId:p||ir},children:(0,Ie.jsx)(r,Object.assign({},l,{onKeyDown:e=>{if(null==a||a(e),!d)return;let t;switch(e.key){case"ArrowLeft":case"ArrowUp":t=m(-1);break;case"ArrowRight":case"ArrowDown":t=m(1);break;default:return}var n;t&&(e.preventDefault(),v(t.dataset[(n="EventKey","".concat("rrUi").concat(n))]||null,e),u.current=!0,c())},ref:y,role:s}))})})}));sr.displayName="Nav";const ar=Object.assign(sr,{Item:nr}),lr=t.createContext(null);lr.displayName="CardHeaderContext";const cr=lr,ur=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=je(r,"nav-item"),(0,Ie.jsx)(i,{ref:t,className:we()(n,r),...o})}));ur.displayName="NavItem";const hr=ur;new WeakMap;const dr=["onKeyDown"];const fr=t.forwardRef(((e,t)=>{let{onKeyDown:n}=e,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,dr);const[i]=$n(Object.assign({tagName:"a"},r)),o=Nt((e=>{i.onKeyDown(e),null==n||n(e)}));return(s=r.href)&&"#"!==s.trim()&&"button"!==r.role?(0,Ie.jsx)("a",Object.assign({ref:t},r,{onKeyDown:n})):(0,Ie.jsx)("a",Object.assign({ref:t},r,i,{onKeyDown:o}));var s}));fr.displayName="Anchor";const pr=fr,gr=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i=pr,active:o,eventKey:s,disabled:a=!1,...l}=e;n=je(n,"nav-link");const[c,u]=er({key:_e(s,l.href),active:o,disabled:a,...l});return(0,Ie.jsx)(i,{...l,...c,ref:t,disabled:a,className:we()(r,n,a&&"disabled",u.isActive&&"active")})}));gr.displayName="NavLink";const mr=gr,vr=t.forwardRef(((e,n)=>{const{as:r="div",bsPrefix:i,variant:o,fill:s=!1,justify:a=!1,navbar:l,navbarScroll:c,className:u,activeKey:h,...d}=Te(e,{activeKey:"onSelect"}),f=je(i,"nav");let p,g,m=!1;const v=(0,t.useContext)(Ct),y=(0,t.useContext)(cr);return v?(p=v.bsPrefix,m=null==l||l):y&&({cardHeaderBsPrefix:g}=y),(0,Ie.jsx)(ar,{as:r,ref:n,activeKey:h,className:we()(u,{[f]:!m,["".concat(p,"-nav")]:m,["".concat(p,"-nav-scroll")]:m&&c,["".concat(g,"-").concat(o)]:!!g,["".concat(f,"-").concat(o)]:!!o,["".concat(f,"-fill")]:s,["".concat(f,"-justified")]:a}),...d})}));vr.displayName="Nav";const yr=Object.assign(vr,{Item:hr,Link:mr}),br=t.forwardRef(((e,t)=>{let{bsPrefix:n,fluid:r=!1,as:i="div",className:o,...s}=e;const a=je(n,"container"),l="string"===typeof r?"-".concat(r):"-fluid";return(0,Ie.jsx)(i,{ref:t,...s,className:we()(o,r?"".concat(a).concat(l):a)})}));br.displayName="Container";const wr=br,_r=!1,xr=!1,kr="${JSCORE_VERSION}",Sr=function(e,t){if(!e)throw Er(t)},Er=function(e){return new Error("Firebase Database ("+kr+") INTERNAL ASSERT FAILED: "+e)},Cr=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Tr={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let h=(15&s)<<2|l>>6,d=63&l;a||(d=64,o||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Cr(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new Or;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Or extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ar=function(e){const t=Cr(e);return Tr.encodeByteArray(t,!0)},Nr=function(e){return Ar(e).replace(/\./g,"")},Ir=function(e){try{return Tr.decodeString(e,!0)}catch(GV){console.error("base64Decode failed: ",GV)}return null};function Pr(e){return Rr(void 0,e)}function Rr(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Rr(e[n],t[n]));return e}const Dr=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Mr=()=>{try{return Dr()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/roj",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBTVY40vxNb5Odkg7pCGq_qLXrcJ70Y4lQ",REACT_APP_AUTH_DOMAIN:"kimoj-778f5.firebaseapp.com",REACT_APP_PROJECT_ID:"kimoj-778f5",REACT_APP_STORAGE_BUCKET:"kimoj-778f5.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"650038740242",REACT_APP_APP_ID:"1:650038740242:web:d958dcc42de18e36469fcb",REACT_APP_DATABASE_URL:"https://kimoj-778f5-default-rtdb.firebaseio.com"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(GV){return}const t=e&&Ir(e[1]);return t&&JSON.parse(t)})()}catch(GV){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(GV))}},Lr=e=>{var t,n;return null===(n=null===(t=Mr())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},jr=e=>{const t=Lr(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Fr=()=>{var e;return null===(e=Mr())||void 0===e?void 0:e.config},qr=e=>{var t;return null===(t=Mr())||void 0===t?void 0:t["_".concat(e)]};class Br{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Ur(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Nr(JSON.stringify({alg:"none",type:"JWT"})),Nr(JSON.stringify(o)),""].join(".")}function Vr(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function zr(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vr())}function Hr(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Wr(){return!0===_r||!0===xr}class Kr extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gr.prototype.create)}}class Gr{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Yr,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Kr(n,o,t)}}const Yr=/\{\$([^}]+)}/g;function Qr(e){return JSON.parse(e)}function $r(e){return JSON.stringify(e)}const Xr=function(e){let t={},n={},r={},i="";try{const o=e.split(".");t=Qr(Ir(o[0])||""),n=Qr(Ir(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(GV){}return{header:t,claims:n,data:r,signature:i}};function Jr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Zr(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ei(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ti(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function ni(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(ri(n)&&ri(o)){if(!ni(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ri(e){return null!==e&&"object"===typeof e}function ii(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function oi(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function si(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class ai{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,o=this.chain_[0],s=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=l^s&(a^l),i=1518500249):(r=s^a^l,i=1859775393):u<60?(r=s&a|l&(s|a),i=2400959708):(r=s^a^l,i=3395469782);const e=(o<<5|o>>>27)+r+c+i+n[u]&4294967295;c=l,l=a,a=4294967295&(s<<30|s>>>2),s=o,o=e}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let o=this.inbuf_;for(;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}class li{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ci),void 0===r.error&&(r.error=ci),void 0===r.complete&&(r.complete=ci);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(GV){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(GV){"undefined"!==typeof console&&console.error&&console.error(GV)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function ci(){}function ui(e,t){return"".concat(e," failed: ").concat(t," argument ")}const hi=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function di(e){return e&&e._delegate?e._delegate:e}class fi{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const pi="[DEFAULT]";class gi{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Br;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(GV){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(GV){if(r)return null;throw GV}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:pi})}catch(GV){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(GV){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pi;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pi;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pi;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(OL){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===pi?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(OL){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pi;return this.component?this.component.multipleInstances?e:pi:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class mi{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new gi(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const vi=[];var yi;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(yi||(yi={}));const bi={debug:yi.DEBUG,verbose:yi.VERBOSE,info:yi.INFO,warn:yi.WARN,error:yi.ERROR,silent:yi.SILENT},wi=yi.INFO,_i={[yi.DEBUG]:"log",[yi.VERBOSE]:"log",[yi.INFO]:"info",[yi.WARN]:"warn",[yi.ERROR]:"error"},xi=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=_i[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class ki{constructor(e){this.name=e,this._logLevel=wi,this._logHandler=xi,this._userLogHandler=null,vi.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yi))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?bi[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,yi.DEBUG,...t),this._logHandler(this,yi.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,yi.VERBOSE,...t),this._logHandler(this,yi.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,yi.INFO,...t),this._logHandler(this,yi.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,yi.WARN,...t),this._logHandler(this,yi.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,yi.ERROR,...t),this._logHandler(this,yi.ERROR,...t)}}const Si=(e,t)=>t.some((t=>e instanceof t));let Ei,Ci;const Ti=new WeakMap,Oi=new WeakMap,Ai=new WeakMap,Ni=new WeakMap,Ii=new WeakMap;let Pi={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Oi.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ai.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mi(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ri(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ci||(Ci=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Li(this),n),Mi(Ti.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Mi(e.apply(Li(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(Li(this),t,...r);return Ai.set(o,t.sort?t.sort():[t]),Mi(o)}}function Di(e){return"function"===typeof e?Ri(e):(e instanceof IDBTransaction&&function(e){if(Oi.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Oi.set(e,t)}(e),Si(e,Ei||(Ei=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Pi):e)}function Mi(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Mi(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&Ti.set(t,e)})).catch((()=>{})),Ii.set(t,e),t}(e);if(Ni.has(e))return Ni.get(e);const t=Di(e);return t!==e&&(Ni.set(e,t),Ii.set(t,e)),t}const Li=e=>Ii.get(e);const ji=["get","getKey","getAll","getAllKeys","count"],Fi=["put","add","delete","clear"],qi=new Map;function Bi(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(qi.get(t))return qi.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Fi.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!ji.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return qi.set(t,o),o}Pi=(e=>({...e,get:(t,n,r)=>Bi(t,n)||e.get(t,n,r),has:(t,n)=>!!Bi(t,n)||e.has(t,n)}))(Pi);class Ui{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Vi="@firebase/app",zi="0.9.25",Hi=new ki("@firebase/app"),Wi="[DEFAULT]",Ki={[Vi]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Gi=new Map,Yi=new Map;function Qi(e,t){try{e.container.addComponent(t)}catch(GV){Hi.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),GV)}}function $i(e){const t=e.name;if(Yi.has(t))return Hi.debug("There were multiple attempts to register component ".concat(t,".")),!1;Yi.set(t,e);for(const n of Gi.values())Qi(n,e);return!0}function Xi(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Ji=new Gr("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Zi{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new fi("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ji.create("app-deleted",{appName:this._name})}}const eo="10.7.1";function to(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Wi,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ji.create("bad-app-name",{appName:String(i)});if(n||(n=Fr()),!n)throw Ji.create("no-options");const o=Gi.get(i);if(o){if(ni(n,o.options)&&ni(r,o.config))return o;throw Ji.create("duplicate-app",{appName:i})}const s=new mi(i);for(const l of Yi.values())s.addComponent(l);const a=new Zi(n,r,s);return Gi.set(i,a),a}function no(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wi;const t=Gi.get(e);if(!t&&e===Wi&&Fr())return to();if(!t)throw Ji.create("no-app",{appName:e});return t}function ro(e,t,n){var r;let i=null!==(r=Ki[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Hi.warn(e.join(" "))}$i(new fi("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const io="firebase-heartbeat-database",oo=1,so="firebase-heartbeat-store";let ao=null;function lo(){return ao||(ao=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=Mi(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(Mi(s.result),e.oldVersion,e.newVersion,Mi(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(io,oo,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(so)}}).catch((e=>{throw Ji.create("idb-open",{originalErrorMessage:e.message})}))),ao}async function co(e,t){try{const n=(await lo()).transaction(so,"readwrite"),r=n.objectStore(so);await r.put(t,uo(e)),await n.done}catch(GV){if(GV instanceof Kr)Hi.warn(GV.message);else{const t=Ji.create("idb-set",{originalErrorMessage:null===GV||void 0===GV?void 0:GV.message});Hi.warn(t.message)}}}function uo(e){return"".concat(e.name,"!").concat(e.options.appId)}class ho{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new po(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=fo();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=fo(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),go(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),go(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Nr(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function fo(){return(new Date).toISOString().substring(0,10)}class po{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!function(){try{return"object"===typeof indexedDB}catch(GV){return!1}}()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Kw){t(Kw)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await lo();return await t.transaction(so).objectStore(so).get(uo(e))}catch(GV){if(GV instanceof Kr)Hi.warn(GV.message);else{const t=Ji.create("idb-get",{originalErrorMessage:null===GV||void 0===GV?void 0:GV.message});Hi.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return co(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return co(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function go(e){return Nr(JSON.stringify({version:2,heartbeats:e})).length}var mo;mo="",$i(new fi("platform-logger",(e=>new Ui(e)),"PRIVATE")),$i(new fi("heartbeat",(e=>new ho(e)),"PRIVATE")),ro(Vi,zi,mo),ro(Vi,zi,"esm2017"),ro("fire-js","");function vo(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function yo(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bo=yo,wo=new Gr("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),_o=new ki("@firebase/auth");function xo(e){if(_o.logLevel<=yi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];_o.error("Auth (".concat(eo,"): ").concat(e),...n)}}function ko(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Co(e,...n)}function So(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Co(e,...n)}function Eo(e,t,n){const r=Object.assign(Object.assign({},bo()),{[t]:n});return new Gr("auth","Firebase",r).create(t,{appName:e.name})}function Co(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return wo.create(e,...n)}function To(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Co(t,...r)}}function Oo(e){const t="INTERNAL ASSERTION FAILED: "+e;throw xo(t),new Error(t)}function Ao(e,t){e||Oo(t)}function No(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Io(){return"http:"===Po()||"https:"===Po()}function Po(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Ro(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Io()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Do{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ao(t>e,"Short delay should be less than long delay!"),this.isMobile=zr()||Hr()}get(){return Ro()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Mo(e,t){Ao(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Lo{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Oo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Oo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Oo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const jo={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Fo=new Do(3e4,6e4);function qo(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Bo(e,t,n,r){return Uo(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=ii(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Lo.fetch()(zo(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Uo(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},jo),t);try{const t=new Wo(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ko(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Ko(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Ko(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Ko(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw Eo(e,a,s);ko(e,a)}}catch(GV){if(GV instanceof Kr)throw GV;ko(e,"network-request-failed",{message:String(GV)})}}async function Vo(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await Bo(e,t,n,r,i);return"mfaPendingCredential"in o&&ko(e,"multi-factor-auth-required",{_serverResponse:o}),o}function zo(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Mo(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Ho(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Wo{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(So(this.auth,"network-request-failed"))),Fo.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ko(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=So(e,t,r);return i.customData._tokenResponse=n,i}function Go(e){return void 0!==e&&void 0!==e.enterprise}class Yo{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ho(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Qo(e,t){return Bo(e,"GET","/v2/recaptchaConfig",qo(e,t))}function $o(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(GV){}}function Xo(e){return 1e3*Number(e)}function Jo(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return xo("JWT malformed, contained fewer than 3 sections"),null;try{const e=Ir(n);return e?JSON.parse(e):(xo("Failed to decode base64 JWT payload"),null)}catch(GV){return xo("Caught error parsing JWT payload as JSON",null===GV||void 0===GV?void 0:GV.toString()),null}}async function Zo(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(GV){throw GV instanceof Kr&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(GV)&&e.auth.currentUser===e&&await e.auth.signOut(),GV}}class es{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(GV){return void((null===GV||void 0===GV?void 0:GV.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ts{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=$o(this.lastLoginAt),this.creationTime=$o(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ns(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Zo(e,async function(e,t){return Bo(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));To(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map((e=>{var{providerId:t}=e,n=vo(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=(l=e.providerData,c=s,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new ts(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class rs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){To(e.idToken,"internal-error"),To("undefined"!==typeof e.idToken,"internal-error"),To("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Jo(e);return To(t,"internal-error"),To("undefined"!==typeof t.exp,"internal-error"),To("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return To(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Uo(e,{},(async()=>{const n=ii({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=zo(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",Lo.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new rs;return n&&(To("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(To("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(To("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new rs,this.toJSON())}_performRefresh(){return Oo("not implemented")}}function is(e,t){To("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class os{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=vo(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new es(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ts(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Zo(this,this.stsTokenManager.getToken(this.auth,e));return To(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=di(e),r=await n.getIdToken(t),i=Jo(r);To(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:$o(Xo(i.auth_time)),issuedAtTime:$o(Xo(i.iat)),expirationTime:$o(Xo(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=di(e);await ns(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(To(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new os(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){To(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ns(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Zo(this,async function(e,t){return Bo(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(o=t.photoURL)&&void 0!==o?o:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:x}=t;To(y&&x,e,"internal-error");const k=rs.fromJSON(this.name,x);To("string"===typeof y,e,"internal-error"),is(u,e.name),is(h,e.name),To("boolean"===typeof b,e,"internal-error"),To("boolean"===typeof w,e,"internal-error"),is(d,e.name),is(f,e.name),is(p,e.name),is(g,e.name),is(m,e.name),is(v,e.name);const S=new os({uid:y,auth:e,email:h,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:k,createdAt:m,lastLoginAt:v});return _&&Array.isArray(_)&&(S.providerData=_.map((e=>Object.assign({},e)))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new rs;r.updateFromServerResponse(t);const i=new os({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ns(i),i}}const ss=new Map;function as(e){Ao(e instanceof Function,"Expected a class definition");let t=ss.get(e);return t?(Ao(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ss.set(e,t),t)}class ls{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ls.type="NONE";const cs=ls;function us(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class hs{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=us(this.userKey,r.apiKey,i),this.fullPersistenceKey=us("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?os._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new hs(as(cs),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||as(cs);const o=us(n,e.config.apiKey,e.name);let s=null;for(const l of t)try{const t=await l._get(o);if(t){const n=os._fromJSON(e,t);l!==i&&(s=n),i=l;break}}catch(OL){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(OL){}}))),new hs(i,e,n)):new hs(i,e,n)}}function ds(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ms(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(fs(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ys(t))return"Blackberry";if(bs(t))return"Webos";if(ps(t))return"Safari";if((t.includes("chrome/")||gs(t))&&!t.includes("edge/"))return"Chrome";if(vs(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function fs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr();return/firefox\//i.test(e)}function ps(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr();return/crios\//i.test(e)}function ms(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr();return/iemobile/i.test(e)}function vs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr();return/android/i.test(e)}function ys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr();return/blackberry/i.test(e)}function bs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr();return/webos/i.test(e)}function ws(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function _s(){return function(){const e=Vr();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function xs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr();return ws(e)||vs(e)||bs(e)||ys(e)||/windows phone/i.test(e)||ms(e)}function ks(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ds(Vr());break;case"Worker":t="".concat(ds(Vr()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(eo,"/").concat(r)}class Ss{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(GV){r(GV)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(GV){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===GV||void 0===GV?void 0:GV.message})}}}class Es{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Cs{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Os(this),this.idTokenSubscription=new Os(this),this.beforeStateQueue=new Ss(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=wo,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=as(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await hs.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(GV){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(GV){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(GV)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return To(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(GV){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ns(e)}catch(GV){if((null===GV||void 0===GV?void 0:GV.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?di(e):null;return t&&To(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&To(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(as(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Bo(e,"GET","/v2/passwordPolicy",qo(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Es(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Gr("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Bo(e,"POST","/v2/accounts:revokeToken",qo(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&as(e)||this._popupRedirectResolver;To(t,this,"argument-error"),this.redirectPersistenceManager=await hs.create(this,[as(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(To(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return To(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ks(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(_o.logLevel<=yi.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];_o.warn("Auth (".concat(eo,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ts(e){return di(e)}class Os{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new li(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return To(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function As(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=So("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ns(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Is{constructor(e){this.type="recaptcha-enterprise",this.auth=Ts(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Go(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Qo(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Yo(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Go(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));As("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Ps(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Is(e);let o;try{o=await i.verify(n)}catch(Kw){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Rs(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ps(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Ps(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Ds(e,t,n){const r=Ts(e);To(r._canInitEmulator,r,"emulator-config-failed"),To(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=Ms(t),{host:s,port:a}=function(e){const t=Ms(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ls(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ls(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ms(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ls(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class js{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Oo("not implemented")}_getIdTokenResponse(e){return Oo("not implemented")}_linkToIdToken(e,t){return Oo("not implemented")}_getReauthenticationResolver(e){return Oo("not implemented")}}async function Fs(e,t){return Bo(e,"POST","/v1/accounts:signUp",t)}async function qs(e,t){return Vo(e,"POST","/v1/accounts:signInWithPassword",qo(e,t))}class Bs extends js{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Bs(e,t,"password")}static _fromEmailAndCode(e,t){return new Bs(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Rs(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",qs);case"emailLink":return async function(e,t){return Vo(e,"POST","/v1/accounts:signInWithEmailLink",qo(e,t))}(e,{email:this._email,oobCode:this._password});default:ko(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Rs(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fs);case"emailLink":return async function(e,t){return Vo(e,"POST","/v1/accounts:signInWithEmailLink",qo(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ko(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Us(e,t){return Vo(e,"POST","/v1/accounts:signInWithIdp",qo(e,t))}class Vs extends js{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Vs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ko("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=vo(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Vs(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return Us(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Us(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Us(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ii(t)}return e}}const zs={USER_NOT_FOUND:"user-not-found"};class Hs extends js{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Hs({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Hs({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Vo(e,"POST","/v1/accounts:signInWithPhoneNumber",qo(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Vo(e,"POST","/v1/accounts:signInWithPhoneNumber",qo(e,t));if(n.temporaryProof)throw Ko(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Vo(e,"POST","/v1/accounts:signInWithPhoneNumber",qo(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),zs)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Hs({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ws{constructor(e){var t,n,r,i,o,s;const a=oi(si(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);To(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=oi(si(e)).link,n=t?oi(si(t)).deep_link_id:null,r=oi(si(e)).deep_link_id;return(r?oi(si(r)).link:null)||r||n||t||e}(e);try{return new Ws(t)}catch(OL){return null}}}class Ks{constructor(){this.providerId=Ks.PROVIDER_ID}static credential(e,t){return Bs._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ws.parseLink(t);return To(n,"argument-error"),Bs._fromEmailAndCode(e,n.code,n.tenantId)}}Ks.PROVIDER_ID="password",Ks.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ks.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Gs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ys extends Gs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Qs extends Ys{constructor(){super("facebook.com")}static credential(e){return Vs._fromParams({providerId:Qs.PROVIDER_ID,signInMethod:Qs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qs.credentialFromTaggedObject(e)}static credentialFromError(e){return Qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Qs.credential(t.oauthAccessToken)}catch(OL){return null}}}Qs.FACEBOOK_SIGN_IN_METHOD="facebook.com",Qs.PROVIDER_ID="facebook.com";class $s extends Ys{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Vs._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $s.credentialFromTaggedObject(e)}static credentialFromError(e){return $s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return $s.credential(n,r)}catch(OL){return null}}}$s.GOOGLE_SIGN_IN_METHOD="google.com",$s.PROVIDER_ID="google.com";class Xs extends Ys{constructor(){super("github.com")}static credential(e){return Vs._fromParams({providerId:Xs.PROVIDER_ID,signInMethod:Xs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xs.credentialFromTaggedObject(e)}static credentialFromError(e){return Xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Xs.credential(t.oauthAccessToken)}catch(OL){return null}}}Xs.GITHUB_SIGN_IN_METHOD="github.com",Xs.PROVIDER_ID="github.com";class Js extends Ys{constructor(){super("twitter.com")}static credential(e,t){return Vs._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Js.credential(n,r)}catch(OL){return null}}}async function Zs(e,t){return Vo(e,"POST","/v1/accounts:signUp",qo(e,t))}Js.TWITTER_SIGN_IN_METHOD="twitter.com",Js.PROVIDER_ID="twitter.com";class ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await os._fromIdTokenResponse(e,n,r),o=ta(n);return new ea({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=ta(n);return new ea({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function ta(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class na extends Kr{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,na.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new na(e,t,n,r)}}function ra(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw na._fromErrorAndOperation(e,n,t,r);throw n}))}async function ia(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Zo(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ea._forOperation(e,"link",r)}async function oa(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const o=await Zo(e,ra(r,i,t,e),n);To(o.idToken,r,"internal-error");const s=Jo(o.idToken);To(s,r,"internal-error");const{sub:a}=s;return To(e.uid===a,r,"user-mismatch"),ea._forOperation(e,i,o)}catch(GV){throw(null===GV||void 0===GV?void 0:GV.code)==="auth/".concat("user-not-found")&&ko(r,"user-mismatch"),GV}}async function sa(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await ra(e,r,t),o=await ea._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function aa(e,t){return sa(Ts(e),t)}async function la(e){const t=Ts(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}new WeakMap;const ca="__sak";class ua{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ca,"1"),this.storage.removeItem(ca),Promise.resolve(!0)):Promise.resolve(!1)}catch(OL){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ha extends ua{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Vr();return ps(e)||ws(e)}()&&function(){try{return!(!window||window===window.top)}catch(GV){return!1}}(),this.fallbackToPolling=xs(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);_s()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ha.type="LOCAL";const da=ha;class fa extends ua{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}fa.type="SESSION";const pa=fa;class ga{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new ga(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ma(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ga.receivers=[];class va{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const l=ma("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function ya(){return window}function ba(){return"undefined"!==typeof ya().WorkerGlobalScope&&"function"===typeof ya().importScripts}const wa="firebaseLocalStorageDb",_a="firebaseLocalStorage",xa="fbase_key";class ka{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Sa(e,t){return e.transaction([_a],t?"readwrite":"readonly").objectStore(_a)}function Ea(){const e=indexedDB.open(wa,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(_a,{keyPath:xa})}catch(GV){n(GV)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(_a)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(wa);return new ka(e).toPromise()}(),t(await Ea()))}))}))}async function Ca(e,t,n){const r=Sa(e,!0).put({[xa]:t,value:n});return new ka(r).toPromise()}function Ta(e,t){const n=Sa(e,!0).delete(t);return new ka(n).toPromise()}class Oa{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Ea()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(GV){if(t++>3)throw GV;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ba()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ga._getInstance(ba()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new va(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(OL){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ea();return await Ca(e,ca,"1"),await Ta(e,ca),!0}catch(OL){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Ca(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Sa(e,!1).get(t),r=await new ka(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Ta(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Sa(e,!1).getAll();return new ka(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Oa.type="LOCAL";const Aa=Oa;Ns("rcb"),new Do(3e4,6e4);const Na="recaptcha";async function Ia(e,t,n){var r;const i=await n.verify();try{let o;if(To("string"===typeof i,e,"argument-error"),To(n.type===Na,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){To("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Bo(e,"POST","/v2/accounts/mfaEnrollment:start",qo(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{To("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;To(n,e,"missing-multi-factor-info");const s=await function(e,t){return Bo(e,"POST","/v2/accounts/mfaSignIn:start",qo(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Bo(e,"POST","/v1/accounts:sendVerificationCode",qo(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Pa{constructor(e){this.providerId=Pa.PROVIDER_ID,this.auth=Ts(e)}verifyPhoneNumber(e,t){return Ia(this.auth,e,di(t))}static credential(e,t){return Hs._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Pa.credentialFromTaggedObject(t)}static credentialFromError(e){return Pa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Hs._fromTokenResponse(n,r):null}}function Ra(e,t){return t?as(t):(To(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Pa.PROVIDER_ID="phone",Pa.PHONE_SIGN_IN_METHOD="phone";class Da extends js{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Us(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Us(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Us(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ma(e){return sa(e.auth,new Da(e),e.bypassAuthState)}function La(e){const{auth:t,user:n}=e;return To(n,t,"internal-error"),oa(n,new Da(e),e.bypassAuthState)}async function ja(e){const{auth:t,user:n}=e;return To(n,t,"internal-error"),ia(n,new Da(e),e.bypassAuthState)}class Fa{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(GV){this.reject(GV)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(GV){this.reject(GV)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ma;case"linkViaPopup":case"linkViaRedirect":return ja;case"reauthViaPopup":case"reauthViaRedirect":return La;default:ko(this.auth,"internal-error")}}resolve(e){Ao(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ao(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const qa=new Do(2e3,1e4);class Ba extends Fa{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Ba.currentPopupAction&&Ba.currentPopupAction.cancel(),Ba.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return To(e,this.auth,"internal-error"),e}async onExecution(){Ao(1===this.filter.length,"Popup operations only handle one event");const e=ma();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(So(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(So(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ba.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(So(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,qa.get())};e()}}Ba.currentPopupAction=null;const Ua="pendingRedirect",Va=new Map;class za extends Fa{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Va.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Ka(t),r=Wa(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(GV){e=()=>Promise.reject(GV)}Va.set(this.auth._key(),e)}return this.bypassAuthState||Va.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ha(e,t){Va.set(e._key(),t)}function Wa(e){return as(e._redirectPersistence)}function Ka(e){return us(Ua,e.config.apiKey,e.name)}async function Ga(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Ts(e),i=Ra(r,t),o=new za(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class Ya{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $a(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!$a(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(So(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qa(e))}saveEventToCache(e){this.cachedEventUids.add(Qa(e)),this.lastProcessedEventTime=Date.now()}}function Qa(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function $a(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Xa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ja=/^https?/;async function Za(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Bo(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(el(n))return}catch(OL){}ko(e,"unauthorized-domain")}function el(e){const t=No(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ja.test(n))return!1;if(Xa.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const tl=new Do(3e4,6e4);function nl(){const e=ya().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let rl=null;function il(e){return rl=rl||function(e){return new Promise(((t,n)=>{var r,i,o;function s(){nl(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{nl(),n(So(e,"network-request-failed"))},timeout:tl.get()})}if(null===(i=null===(r=ya().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=ya().gapi)||void 0===o?void 0:o.load)){const t=Ns("iframefcb");return ya()[t]=()=>{gapi.load?s():n(So(e,"network-request-failed"))},As("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}s()}})).catch((e=>{throw rl=null,e}))}(e),rl}const ol=new Do(5e3,15e3),sl="__/auth/iframe",al="emulator/auth/iframe",ll={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ul(e){const t=e.config;To(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Mo(t,al):"https://".concat(e.config.authDomain,"/").concat(sl),r={apiKey:t.apiKey,appName:e.name,v:eo},i=cl.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(ii(r).slice(1))}const hl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class dl{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(GV){}}}function fl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},hl),{width:r.toString(),height:i.toString(),top:o,left:s}),c=Vr().toLowerCase();n&&(a=gs(c)?"_blank":n),fs(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return ws(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vr())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new dl(null);const h=window.open(t||"",a,u);To(h,e,"popup-blocked");try{h.focus()}catch(GV){}return new dl(h)}const pl="__/auth/handler",gl="emulator/auth/handler",ml=encodeURIComponent("fac");async function vl(e,t,n,r,i,o){To(e.config.authDomain,e,"auth-domain-config-required"),To(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:eo,eventId:i};if(t instanceof Gs){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",ei(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof Ys){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(ml,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(pl);return Mo(t,gl)}(e),"?").concat(ii(a).slice(1)).concat(c)}const yl="webStorageSupport";const bl=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pa,this._completeRedirectFn=Ga,this._overrideRedirectResult=Ha}async _openPopup(e,t,n,r){var i;Ao(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return fl(e,await vl(e,t,n,No(),r),ma())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){ya().location.href=e}(await vl(e,t,n,No(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Ao(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await il(e),n=ya().gapi;return To(n,e,"internal-error"),t.open({where:document.body,url:ul(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ll,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=So(e,"network-request-failed"),o=ya().setTimeout((()=>{r(i)}),ol.get());function s(){ya().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}(e),n=new Ya(e);return t.register("authEvent",(t=>{To(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yl,{type:yl},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[yl];void 0!==i&&t(!!i),ko(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Za(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return xs()||ps()||ws()}};var wl="@firebase/auth",_l="1.5.1";class xl{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){To(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const kl=qr("authIdTokenMaxAge")||300;let Sl=null;var El;El="Browser",$i(new fi("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;To(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:El,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ks(El)},c=new Cs(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(as);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),$i(new fi("auth-internal",(e=>(e=>new xl(e))(Ts(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),ro(wl,_l,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(El)),ro(wl,_l,"esm2017");ro("firebase","10.7.1","app");var Cl,Tl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Ol={},Al=Al||{},Nl=Tl||self;function Il(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Pl(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Rl="closure_uid_"+(1e9*Math.random()>>>0),Dl=0;function Ml(e,t,n){return e.call.apply(e.bind,arguments)}function Ll(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function jl(e,t,n){return(jl=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ml:Ll).apply(null,arguments)}function Fl(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ql(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function Bl(){this.s=this.s,this.o=this.o}Bl.prototype.s=!1,Bl.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Rl)&&e[Rl]||(e[Rl]=++Dl))},Bl.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ul=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Vl(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function zl(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Il(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Hl(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Hl.prototype.h=function(){this.defaultPrevented=!0};var Wl=function(){if(!Nl.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};Nl.addEventListener("test",e,t),Nl.removeEventListener("test",e,t)}catch(n){}return e}();function Kl(e){return/^[\s\xa0]*$/.test(e)}function Gl(){var e=Nl.navigator;return e&&(e=e.userAgent)?e:""}function Yl(e){return-1!=Gl().indexOf(e)}function Ql(e){return Ql[" "](e),e}Ql[" "]=function(){};var $l,Xl,Jl=Yl("Opera"),Zl=Yl("Trident")||Yl("MSIE"),ec=Yl("Edge"),tc=ec||Zl,nc=Yl("Gecko")&&!(-1!=Gl().toLowerCase().indexOf("webkit")&&!Yl("Edge"))&&!(Yl("Trident")||Yl("MSIE"))&&!Yl("Edge"),rc=-1!=Gl().toLowerCase().indexOf("webkit")&&!Yl("Edge");function ic(){var e=Nl.document;return e?e.documentMode:void 0}e:{var oc="",sc=function(){var e=Gl();return nc?/rv:([^\);]+)(\)|;)/.exec(e):ec?/Edge\/([\d\.]+)/.exec(e):Zl?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):rc?/WebKit\/(\S+)/.exec(e):Jl?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(sc&&(oc=sc?sc[1]:""),Zl){var ac=ic();if(null!=ac&&ac>parseFloat(oc)){$l=String(ac);break e}}$l=oc}if(Nl.document&&Zl){var lc=ic();Xl=lc||(parseInt($l,10)||void 0)}else Xl=void 0;var cc=Xl;function uc(e,t){if(Hl.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(nc){e:{try{Ql(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:hc[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&uc.$.h.call(this)}}ql(uc,Hl);var hc={2:"touch",3:"pen",4:"mouse"};uc.prototype.h=function(){uc.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var dc="closure_listenable_"+(1e6*Math.random()|0),fc=0;function pc(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++fc,this.fa=this.ia=!1}function gc(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function mc(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function vc(e){const t={};for(const n in e)t[n]=e[n];return t}const yc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function bc(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<yc.length;t++)n=yc[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function wc(e){this.src=e,this.g={},this.h=0}function _c(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Ul(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(gc(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function xc(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}wc.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=xc(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new pc(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var kc="closure_lm_"+(1e6*Math.random()|0),Sc={};function Ec(e,t,n,r,i){if(r&&r.once)return Tc(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)Ec(e,t[o],n,r,i);return null}return n=Dc(n),e&&e[dc]?e.O(t,n,Pl(r)?!!r.capture:!!r,i):Cc(e,t,n,!1,r,i)}function Cc(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=Pl(i)?!!i.capture:!!i,a=Pc(e);if(a||(e[kc]=a=new wc(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Ic;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Wl||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Nc(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Tc(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Tc(e,t[o],n,r,i);return null}return n=Dc(n),e&&e[dc]?e.P(t,n,Pl(r)?!!r.capture:!!r,i):Cc(e,t,n,!0,r,i)}function Oc(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Oc(e,t[o],n,r,i);else r=Pl(r)?!!r.capture:!!r,n=Dc(n),e&&e[dc]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=xc(o=e.g[t],n,r,i))&&(gc(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=Pc(e))&&(t=e.g[t.toString()],e=-1,t&&(e=xc(t,n,r,i)),(n=-1<e?t[e]:null)&&Ac(n))}function Ac(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[dc])_c(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Nc(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Pc(t))?(_c(n,e),0==n.h&&(n.src=null,t[kc]=null)):gc(e)}}}function Nc(e){return e in Sc?Sc[e]:Sc[e]="on"+e}function Ic(e,t){if(e.fa)e=!0;else{t=new uc(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Ac(e),e=n.call(r,t)}return e}function Pc(e){return(e=e[kc])instanceof wc?e:null}var Rc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dc(e){return"function"===typeof e?e:(e[Rc]||(e[Rc]=function(t){return e.handleEvent(t)}),e[Rc])}function Mc(){Bl.call(this),this.i=new wc(this),this.S=this,this.J=null}function Lc(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Hl(t,e);else if(t instanceof Hl)t.target=t.target||e;else{var i=t;bc(t=new Hl(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=jc(s,r,!0,t)&&i}if(i=jc(s=t.g=e,r,!0,t)&&i,i=jc(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=jc(s=t.g=n[o],r,!1,t)&&i}function jc(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&_c(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}ql(Mc,Bl),Mc.prototype[dc]=!0,Mc.prototype.removeEventListener=function(e,t,n,r){Oc(this,e,t,n,r)},Mc.prototype.N=function(){if(Mc.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)gc(n[r]);delete t.g[e],t.h--}}this.J=null},Mc.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Mc.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Fc=Nl.JSON.stringify;function qc(){var e=Kc;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Bc=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Uc),(e=>e.reset()));class Uc{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Vc(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function zc(e){Nl.setTimeout((()=>{throw e}),0)}let Hc,Wc=!1,Kc=new class{constructor(){this.h=this.g=null}add(e,t){const n=Bc.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Gc=()=>{const e=Nl.Promise.resolve(void 0);Hc=()=>{e.then(Yc)}};var Yc=()=>{for(var e;e=qc();){try{e.h.call(e.g)}catch(n){zc(n)}var t=Bc;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Wc=!1};function Qc(e,t){Mc.call(this),this.h=e||1,this.g=t||Nl,this.j=jl(this.qb,this),this.l=Date.now()}function $c(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Xc(e,t,n){if("function"===typeof e)n&&(e=jl(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=jl(e.handleEvent,e)}return 2147483647<Number(t)?-1:Nl.setTimeout(e,t||0)}function Jc(e){e.g=Xc((()=>{e.g=null,e.i&&(e.i=!1,Jc(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}ql(Qc,Mc),(Cl=Qc.prototype).ga=!1,Cl.T=null,Cl.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Lc(this,"tick"),this.ga&&($c(this),this.start()))}},Cl.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Cl.N=function(){Qc.$.N.call(this),$c(this),delete this.g};class Zc extends Bl{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Jc(this)}N(){super.N(),this.g&&(Nl.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eu(e){Bl.call(this),this.h=e,this.g={}}ql(eu,Bl);var tu=[];function nu(e,t,n,r){Array.isArray(n)||(n&&(tu[0]=n.toString()),n=tu);for(var i=0;i<n.length;i++){var o=Ec(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function ru(e){mc(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ac(e)}),e),e.g={}}function iu(){this.g=!0}function ou(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Fc(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}eu.prototype.N=function(){eu.$.N.call(this),ru(this)},eu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},iu.prototype.Ea=function(){this.g=!1},iu.prototype.info=function(){};var su={},au=null;function lu(){return au=au||new Mc}function cu(e){Hl.call(this,su.Ta,e)}function uu(e){const t=lu();Lc(t,new cu(t))}function hu(e,t){Hl.call(this,su.STAT_EVENT,e),this.stat=t}function du(e){const t=lu();Lc(t,new hu(t,e))}function fu(e,t){Hl.call(this,su.Ua,e),this.size=t}function pu(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Nl.setTimeout((function(){e()}),t)}su.Ta="serverreachability",ql(cu,Hl),su.STAT_EVENT="statevent",ql(hu,Hl),su.Ua="timingevent",ql(fu,Hl);var gu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},mu={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function vu(){}function yu(e){return e.h||(e.h=e.i())}function bu(){}vu.prototype.h=null;var wu,_u={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function xu(){Hl.call(this,"d")}function ku(){Hl.call(this,"c")}function Su(){}function Eu(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new eu(this),this.P=Tu,e=tc?125:void 0,this.V=new Qc(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Cu}function Cu(){this.i=null,this.g="",this.h=!1}ql(xu,Hl),ql(ku,Hl),ql(Su,vu),Su.prototype.g=function(){return new XMLHttpRequest},Su.prototype.i=function(){return{}},wu=new Su;var Tu=45e3,Ou={},Au={};function Nu(e,t,n){e.L=1,e.A=Qu(Hu(t)),e.u=n,e.S=!0,Iu(e,null)}function Iu(e,t){e.G=Date.now(),Mu(e),e.B=Hu(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),lh(n.i,"t",r),e.o=0,n=e.l.J,e.h=new Cu,e.g=cd(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Zc(jl(e.Pa,e,e.g),e.O)),nu(e.U,e.g,"readystatechange",e.nb),t=e.I?vc(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),uu(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");s=2<=h.length&&"type"==h[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function Pu(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function Ru(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=Du(e,n),r==Au){4==t&&(e.s=4,du(14),i=!1),ou(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ou){e.s=4,du(15),ou(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ou(e.j,e.m,r,null),Bu(e,r)}Pu(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,du(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),td(t),t.M=!0,du(11))):(ou(e.j,e.m,n,"[Invalid Chunked Response]"),qu(e),Fu(e))}function Du(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?Au:(n=Number(t.substring(n,r)),isNaN(n)?Ou:(r+=1)+n>t.length?Au:(t=t.slice(r,r+n),e.o=r+n,t))}function Mu(e){e.Y=Date.now()+e.P,Lu(e,e.P)}function Lu(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=pu(jl(e.lb,e),t)}function ju(e){e.C&&(Nl.clearTimeout(e.C),e.C=null)}function Fu(e){0==e.l.H||e.J||id(e.l,e)}function qu(e){ju(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,$c(e.V),ru(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Bu(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||gh(n.i,e)))if(!e.K&&gh(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;rd(n),Gh(n)}ed(n),du(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=pu(jl(n.ib,n),6e3));if(1>=ph(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else sd(n,11)}else if((e.K||n.g==e)&&rd(n),!Kl(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(mh(o,o.h),o.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Yu(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=ld(r,r.J?r.pa:null,r.Y),s.K){vh(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.C&&(ju(a),Mu(a)),r.g=s}else Zh(r);0<n.j.length&&Qh(n)}else"stop"!=c[0]&&"close"!=c[0]||sd(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?sd(n,7):Kh(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}uu()}catch(c){}}function Uu(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Il(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Il(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Il(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(Cl=Eu.prototype).setTimeout=function(e){this.P=e},Cl.nb=function(e){e=e.target;const t=this.M;t&&3==Bh(e)?t.l():this.Pa(e)},Cl.Pa=function(e){try{if(e==this.g)e:{const u=Bh(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||tc||this.g&&(this.h.h||this.g.ja()||Uh(this.g)))){this.J||4!=u||7==t||uu(),ju(this);var n=this.g.da();this.ca=n;t:if(Pu(this)){var r=Uh(this.g);e="";var i=r.length,o=4==Bh(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){qu(this),Fu(this);var s="";break t}this.h.i=new Nl.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kl(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,du(12),qu(this),Fu(this);break e}ou(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Bu(this,n)}this.S?(Ru(this,u,s),tc&&this.i&&3==u&&(nu(this.U,this.V,"tick",this.mb),this.V.start())):(ou(this.j,this.m,s,null),Bu(this,s)),4==u&&qu(this),this.i&&!this.J&&(4==u?id(this.l,this):(this.i=!1,Mu(this)))}else(function(e){const t={};e=(e.g&&2<=Bh(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Kl(e[r]))continue;var n=Vc(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,du(12)):(this.s=0,du(13)),qu(this),Fu(this)}}}catch(u){}},Cl.mb=function(){if(this.g){var e=Bh(this.g),t=this.g.ja();this.o<t.length&&(ju(this),Ru(this,e,t),this.i&&4!=e&&Mu(this))}},Cl.cancel=function(){this.J=!0,qu(this)},Cl.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(uu(),du(17)),qu(this),this.s=2,Fu(this)):Lu(this,this.Y-e)};var Vu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zu(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof zu){this.h=e.h,Wu(this,e.j),this.s=e.s,this.g=e.g,Ku(this,e.m),this.l=e.l;var t=e.i,n=new ih;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Gu(this,n),this.o=e.o}else e&&(t=String(e).match(Vu))?(this.h=!1,Wu(this,t[1]||"",!0),this.s=$u(t[2]||""),this.g=$u(t[3]||"",!0),Ku(this,t[4]),this.l=$u(t[5]||"",!0),Gu(this,t[6]||"",!0),this.o=$u(t[7]||"")):(this.h=!1,this.i=new ih(null,this.h))}function Hu(e){return new zu(e)}function Wu(e,t,n){e.j=n?$u(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ku(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Gu(e,t,n){t instanceof ih?(e.i=t,function(e,t){t&&!e.j&&(oh(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(sh(this,t),lh(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Xu(t,nh)),e.i=new ih(t,e.h))}function Yu(e,t,n){e.i.set(t,n)}function Qu(e){return Yu(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function $u(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Xu(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ju),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ju(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}zu.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Xu(t,Zu,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Xu(t,Zu,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Xu(n,"/"==n.charAt(0)?th:eh,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Xu(n,rh)),e.join("")};var Zu=/[#\/\?@]/g,eh=/[#\?:]/g,th=/[#\?]/g,nh=/[#\?@]/g,rh=/#/g;function ih(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function oh(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function sh(e,t){oh(e),t=ch(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function ah(e,t){return oh(e),t=ch(e,t),e.g.has(t)}function lh(e,t,n){sh(e,t),0<n.length&&(e.i=null,e.g.set(ch(e,t),Vl(n)),e.h+=n.length)}function ch(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Cl=ih.prototype).add=function(e,t){oh(this),this.i=null,e=ch(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Cl.forEach=function(e,t){oh(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Cl.ta=function(){oh(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},Cl.Z=function(e){oh(this);let t=[];if("string"===typeof e)ah(this,e)&&(t=t.concat(this.g.get(ch(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Cl.set=function(e,t){return oh(this),this.i=null,ah(this,e=ch(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Cl.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Cl.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var uh=class{constructor(e,t){this.g=e,this.map=t}};function hh(e){this.l=e||dh,Nl.PerformanceNavigationTiming?e=0<(e=Nl.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Nl.g&&Nl.g.Ka&&Nl.g.Ka()&&Nl.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var dh=10;function fh(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ph(e){return e.h?1:e.g?e.g.size:0}function gh(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function mh(e,t){e.g?e.g.add(t):e.h=t}function vh(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function yh(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Vl(e.i)}hh.prototype.cancel=function(){if(this.i=yh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var bh,wh=class{stringify(e){return Nl.JSON.stringify(e,void 0)}parse(e){return Nl.JSON.parse(e,void 0)}};function _h(){this.g=new wh}function xh(e,t,n){const r=n||"";try{Uu(e,(function(e,n){let i=e;Pl(e)&&(i=Fc(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(GV){throw t.push(r+"type="+encodeURIComponent("_badmap")),GV}}function kh(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function Sh(e){this.l=e.ec||null,this.j=e.ob||!1}function Eh(e,t){Mc.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Ch,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ql(Sh,vu),Sh.prototype.g=function(){return new Eh(this.l,this.j)},Sh.prototype.i=(bh={},function(){return bh}),ql(Eh,Mc);var Ch=0;function Th(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Oh(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ah(e)}function Ah(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Cl=Eh.prototype).open=function(e,t){if(this.readyState!=Ch)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ah(this)},Cl.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Nl).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Cl.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Oh(this)),this.readyState=Ch},Cl.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ah(this)),this.g&&(this.readyState=3,Ah(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Nl.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Th(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Cl.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Oh(this):Ah(this),3==this.readyState&&Th(this)}},Cl.Za=function(e){this.g&&(this.response=this.responseText=e,Oh(this))},Cl.Ya=function(e){this.g&&(this.response=e,Oh(this))},Cl.ka=function(){this.g&&Oh(this)},Cl.setRequestHeader=function(e,t){this.v.append(e,t)},Cl.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Cl.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Eh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Nh=Nl.JSON.parse;function Ih(e){Mc.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Ph,this.L=this.M=!1}ql(Ih,Mc);var Ph="",Rh=/^https?$/i,Dh=["POST","PUT"];function Mh(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Lh(e),Fh(e)}function Lh(e){e.F||(e.F=!0,Lc(e,"complete"),Lc(e,"error"))}function jh(e){if(e.h&&"undefined"!=typeof Al&&(!e.C[1]||4!=Bh(e)||2!=e.da()))if(e.v&&4==Bh(e))Xc(e.La,0,e);else if(Lc(e,"readystatechange"),4==Bh(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Vu)[1]||null;!i&&Nl.self&&Nl.self.location&&(i=Nl.self.location.protocol.slice(0,-1)),r=!Rh.test(i?i.toLowerCase():"")}n=r}if(n)Lc(e,"complete"),Lc(e,"success");else{e.m=6;try{var o=2<Bh(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",Lh(e)}}finally{Fh(e)}}}function Fh(e,t){if(e.g){qh(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Lc(e,"ready");try{n.onreadystatechange=r}catch(GV){}}}function qh(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Nl.clearTimeout(e.A),e.A=null)}function Bh(e){return e.g?e.g.readyState:0}function Uh(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Ph:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Yd){return null}}function Vh(e){let t="";return mc(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function zh(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Vh(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Yu(e,t,n))}function Hh(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Wh(e){this.Ga=0,this.j=[],this.l=new iu,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Hh("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Hh("baseRetryDelayMs",5e3,e),this.hb=Hh("retryDelaySeedMs",1e4,e),this.eb=Hh("forwardChannelMaxRetries",2,e),this.xa=Hh("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new hh(e&&e.concurrentRequestLimit),this.Ja=new _h,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Kh(e){if(Yh(e),3==e.H){var t=e.W++,n=Hu(e.I);if(Yu(n,"SID",e.K),Yu(n,"RID",t),Yu(n,"TYPE","terminate"),Xh(e,n),(t=new Eu(e,e.l,t)).L=2,t.A=Qu(Hu(n)),n=!1,Nl.navigator&&Nl.navigator.sendBeacon)try{n=Nl.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&Nl.Image&&((new Image).src=t.A,n=!0),n||(t.g=cd(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Mu(t)}ad(e)}function Gh(e){e.g&&(td(e),e.g.cancel(),e.g=null)}function Yh(e){Gh(e),e.u&&(Nl.clearTimeout(e.u),e.u=null),rd(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Nl.clearTimeout(e.m),e.m=null)}function Qh(e){if(!fh(e.i)&&!e.m){e.m=!0;var t=e.Na;Hc||Gc(),Wc||(Hc(),Wc=!0),Kc.add(t,e),e.C=0}}function $h(e,t){var n;n=t?t.m:e.W++;const r=Hu(e.I);Yu(r,"SID",e.K),Yu(r,"RID",n),Yu(r,"AID",e.V),Xh(e,r),e.o&&e.s&&zh(r,e.o,e.s),n=new Eu(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Jh(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),mh(e.i,n),Nu(n,r,t)}function Xh(e,t){e.na&&mc(e.na,(function(e,n){Yu(t,n,e)})),e.h&&Uu({},(function(e,n){Yu(t,n,e)}))}function Jh(e,t,n){n=Math.min(e.j.length,n);var r=e.h?jl(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{xh(l,e,"req"+n+"_")}catch(o){r&&r(l)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Zh(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Hc||Gc(),Wc||(Hc(),Wc=!0),Kc.add(t,e),e.A=0}}function ed(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=pu(jl(e.Ma,e),od(e,e.A)),e.A++,!0)}function td(e){null!=e.B&&(Nl.clearTimeout(e.B),e.B=null)}function nd(e){e.g=new Eu(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Hu(e.wa);Yu(t,"RID","rpc"),Yu(t,"SID",e.K),Yu(t,"AID",e.V),Yu(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Yu(t,"TO",e.qa),Yu(t,"TYPE","xmlhttp"),Xh(e,t),e.o&&e.s&&zh(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Qu(Hu(t)),n.u=null,n.S=!0,Iu(n,e)}function rd(e){null!=e.v&&(Nl.clearTimeout(e.v),e.v=null)}function id(e,t){var n=null;if(e.g==t){rd(e),td(e),e.g=null;var r=2}else{if(!gh(e.i,t))return;n=t.F,vh(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Lc(r=lu(),new fu(r,n)),Qh(e)}else Zh(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(ph(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=pu(jl(e.Na,e,t),od(e,e.C)),e.C++,!0))}(e,t)||2==r&&ed(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:sd(e,5);break;case 4:sd(e,10);break;case 3:sd(e,6);break;default:sd(e,2)}}function od(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function sd(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=jl(e.pb,e);n||(n=new zu("//www.google.com/images/cleardot.gif"),Nl.location&&"http"==Nl.location.protocol||Wu(n,"https"),Qu(n)),function(e,t){const n=new iu;if(Nl.Image){const r=new Image;r.onload=Fl(kh,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Fl(kh,n,r,"TestLoadImage: error",!1,t),r.onabort=Fl(kh,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Fl(kh,n,r,"TestLoadImage: timeout",!1,t),Nl.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else du(2);e.H=0,e.h&&e.h.za(t),ad(e),Yh(e)}function ad(e){if(e.H=0,e.ma=[],e.h){const t=yh(e.i);0==t.length&&0==e.j.length||(zl(e.ma,t),zl(e.ma,e.j),e.i.i.length=0,Vl(e.j),e.j.length=0),e.h.ya()}}function ld(e,t,n){var r=n instanceof zu?Hu(n):new zu(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Ku(r,r.m);else{var i=Nl.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new zu(null);r&&Wu(o,r),t&&(o.g=t),i&&Ku(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&Yu(r,n,t),Yu(r,"VER",e.ra),Xh(e,r),r}function cd(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new Ih(new Sh({ob:n})):new Ih(e.va)).Oa(e.J),t}function ud(){}function hd(){if(Zl&&!(10<=Number(cc)))throw Error("Environmental error: no available transport.")}function dd(e,t){Mc.call(this),this.g=new Wh(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Kl(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Kl(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new gd(this)}function fd(e){xu.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function pd(){ku.call(this),this.status=1}function gd(e){this.g=e}function md(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function vd(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function yd(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(Cl=Ih.prototype).Oa=function(e){this.M=e},Cl.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():wu.g(),this.C=this.u?yu(this.u):yu(wu),this.g.onreadystatechange=jl(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){return void Mh(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=Nl.FormData&&e instanceof Nl.FormData,!(0<=Ul(Dh,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{qh(this),0<this.B&&((this.L=function(e){return Zl&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jl(this.ua,this)):this.A=Xc(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){Mh(this,o)}},Cl.ua=function(){"undefined"!=typeof Al&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Lc(this,"timeout"),this.abort(8))},Cl.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Lc(this,"complete"),Lc(this,"abort"),Fh(this))},Cl.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Fh(this,!0)),Ih.$.N.call(this)},Cl.La=function(){this.s||(this.G||this.v||this.l?jh(this):this.kb())},Cl.kb=function(){jh(this)},Cl.isActive=function(){return!!this.g},Cl.da=function(){try{return 2<Bh(this)?this.g.status:-1}catch(bh){return-1}},Cl.ja=function(){try{return this.g?this.g.responseText:""}catch(bh){return""}},Cl.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Nh(t)}},Cl.Ia=function(){return this.m},Cl.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Cl=Wh.prototype).ra=8,Cl.H=1,Cl.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new Eu(this,this.l,e);let o=this.s;if(this.U&&(o?(o=vc(o),bc(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Jh(this,i,t),Yu(n=Hu(this.I),"RID",e),Yu(n,"CVER",22),this.F&&Yu(n,"X-HTTP-Session-Id",this.F),Xh(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Vh(o)))+"&"+t:this.o&&zh(n,this.o,o)),mh(this.i,i),this.bb&&Yu(n,"TYPE","init"),this.P?(Yu(n,"$req",t),Yu(n,"SID","null"),i.aa=!0,Nu(i,n,null)):Nu(i,n,t),this.H=2}}else 3==this.H&&(e?$h(this,e):0==this.j.length||fh(this.i)||$h(this))},Cl.Ma=function(){if(this.u=null,nd(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=pu(jl(this.jb,this),e)}},Cl.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,du(10),Gh(this),nd(this))},Cl.ib=function(){null!=this.v&&(this.v=null,Gh(this),ed(this),du(19))},Cl.pb=function(e){e?(this.l.info("Successfully pinged google.com"),du(2)):(this.l.info("Failed to ping google.com"),du(1))},Cl.isActive=function(){return!!this.h&&this.h.isActive(this)},(Cl=ud.prototype).Ba=function(){},Cl.Aa=function(){},Cl.za=function(){},Cl.ya=function(){},Cl.isActive=function(){return!0},Cl.Va=function(){},hd.prototype.g=function(e,t){return new dd(e,t)},ql(dd,Mc),dd.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;du(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=ld(e,null,e.Y),Qh(e)},dd.prototype.close=function(){Kh(this.g)},dd.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Fc(e),e=n);t.j.push(new uh(t.fb++,e)),3==t.H&&Qh(t)},dd.prototype.N=function(){this.g.h=null,delete this.j,Kh(this.g),delete this.g,dd.$.N.call(this)},ql(fd,xu),ql(pd,ku),ql(gd,ud),gd.prototype.Ba=function(){Lc(this.g,"a")},gd.prototype.Aa=function(e){Lc(this.g,new fd(e))},gd.prototype.za=function(e){Lc(this.g,new pd)},gd.prototype.ya=function(){Lc(this.g,"b")},ql(md,(function(){this.blockSize=-1})),md.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},md.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)vd(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){vd(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){vd(this,r),i=0;break}}this.h=i,this.i+=t},md.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var bd={};function wd(e){return-128<=e&&128>e?function(e,t){var n=bd;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new yd([0|e],0>e?-1:0)})):new yd([0|e],0>e?-1:0)}function _d(e){if(isNaN(e)||!isFinite(e))return kd;if(0>e)return Od(_d(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=xd;return new yd(t,0)}var xd=4294967296,kd=wd(0),Sd=wd(1),Ed=wd(16777216);function Cd(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Td(e){return-1==e.h}function Od(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new yd(n,~e.h).add(Sd)}function Ad(e,t){return e.add(Od(t))}function Nd(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Id(e,t){this.g=e,this.h=t}function Pd(e,t){if(Cd(t))throw Error("division by zero");if(Cd(e))return new Id(kd,kd);if(Td(e))return t=Pd(Od(e),t),new Id(Od(t.g),Od(t.h));if(Td(t))return t=Pd(e,Od(t)),new Id(Od(t.g),t.h);if(30<e.g.length){if(Td(e)||Td(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Sd,r=t;0>=r.X(e);)n=Rd(n),r=Rd(r);var i=Dd(n,1),o=Dd(r,1);for(r=Dd(r,2),n=Dd(n,2);!Cd(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=Dd(r,1),n=Dd(n,1)}return t=Ad(e,i.R(t)),new Id(i,t)}for(i=kd;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=_d(n)).R(t);Td(s)||0<s.X(e);)s=(o=_d(n-=r)).R(t);Cd(o)&&(o=Sd),i=i.add(o),e=Ad(e,s)}return new Id(i,e)}function Rd(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new yd(n,e.h)}function Dd(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new yd(i,e.h)}(Cl=yd.prototype).ea=function(){if(Td(this))return-Od(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:xd+r)*t,t*=xd}return e},Cl.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Cd(this))return"0";if(Td(this))return"-"+Od(this).toString(e);for(var t=_d(Math.pow(e,6)),n=this,r="";;){var i=Pd(n,t).g,o=((0<(n=Ad(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Cd(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},Cl.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Cl.X=function(e){return Td(e=Ad(this,e))?-1:Cd(e)?0:1},Cl.abs=function(){return Td(this)?Od(this):this},Cl.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new yd(n,-2147483648&n[n.length-1]?-1:0)},Cl.R=function(e){if(Cd(this)||Cd(e))return kd;if(Td(this))return Td(e)?Od(this).R(Od(e)):Od(Od(this).R(e));if(Td(e))return Od(this.R(Od(e)));if(0>this.X(Ed)&&0>e.X(Ed))return _d(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=s*l,Nd(n,2*r+2*i),n[2*r+2*i+1]+=o*l,Nd(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Nd(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Nd(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new yd(n,0)},Cl.gb=function(e){return Pd(this,e).h},Cl.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new yd(n,this.h&e.h)},Cl.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new yd(n,this.h|e.h)},Cl.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new yd(n,this.h^e.h)},hd.prototype.createWebChannel=hd.prototype.g,dd.prototype.send=dd.prototype.u,dd.prototype.open=dd.prototype.m,dd.prototype.close=dd.prototype.close,gu.NO_ERROR=0,gu.TIMEOUT=8,gu.HTTP_ERROR=6,mu.COMPLETE="complete",bu.EventType=_u,_u.OPEN="a",_u.CLOSE="b",_u.ERROR="c",_u.MESSAGE="d",Mc.prototype.listen=Mc.prototype.O,Ih.prototype.listenOnce=Ih.prototype.P,Ih.prototype.getLastError=Ih.prototype.Sa,Ih.prototype.getLastErrorCode=Ih.prototype.Ia,Ih.prototype.getStatus=Ih.prototype.da,Ih.prototype.getResponseJson=Ih.prototype.Wa,Ih.prototype.getResponseText=Ih.prototype.ja,Ih.prototype.send=Ih.prototype.ha,Ih.prototype.setWithCredentials=Ih.prototype.Oa,md.prototype.digest=md.prototype.l,md.prototype.reset=md.prototype.reset,md.prototype.update=md.prototype.j,yd.prototype.add=yd.prototype.add,yd.prototype.multiply=yd.prototype.R,yd.prototype.modulo=yd.prototype.gb,yd.prototype.compare=yd.prototype.X,yd.prototype.toNumber=yd.prototype.ea,yd.prototype.toString=yd.prototype.toString,yd.prototype.getBits=yd.prototype.D,yd.fromNumber=_d,yd.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Od(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=_d(Math.pow(n,8)),i=kd,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=_d(Math.pow(n,s)),i=i.R(s).add(_d(a))):i=(i=i.R(r)).add(_d(a))}return i};var Md=Ol.createWebChannelTransport=function(){return new hd},Ld=Ol.getStatEventTarget=function(){return lu()},jd=Ol.ErrorCode=gu,Fd=Ol.EventType=mu,qd=Ol.Event=su,Bd=Ol.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ud=(Ol.FetchXmlHttpFactory=Sh,Ol.WebChannel=bu),Vd=Ol.XhrIo=Ih,zd=Ol.Md5=md,Hd=Ol.Integer=yd;const Wd="@firebase/firestore";class Kd{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Kd.UNAUTHENTICATED=new Kd(null),Kd.GOOGLE_CREDENTIALS=new Kd("google-credentials-uid"),Kd.FIRST_PARTY=new Kd("first-party-uid"),Kd.MOCK_USER=new Kd("mock-user");let Gd="10.7.0";const Yd=new ki("@firebase/firestore");function Qd(){return Yd.logLevel}function $d(e){if(Yd.logLevel<=yi.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Zd);Yd.debug("Firestore (".concat(Gd,"): ").concat(e),...i)}}function Xd(e){if(Yd.logLevel<=yi.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Zd);Yd.error("Firestore (".concat(Gd,"): ").concat(e),...i)}}function Jd(e){if(Yd.logLevel<=yi.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Zd);Yd.warn("Firestore (".concat(Gd,"): ").concat(e),...i)}}function Zd(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(dL){return e}}function ef(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Gd,") INTERNAL ASSERTION FAILED: ")+e;throw Xd(t),new Error(t)}function tf(e,t){e||ef()}function nf(e,t){return e}const rf={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class of extends Kr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class sf{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class af{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class lf{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Kd.UNAUTHENTICATED)))}shutdown(){}}class cf{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class uf{constructor(e){this.t=e,this.currentUser=Kd.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new sf;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new sf,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{$d("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):($d("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new sf)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?($d("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(tf("string"==typeof t.accessToken),new af(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return tf(null===e||"string"==typeof e),new Kd(e)}}class hf{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Kd.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class df{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new hf(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Kd.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ff{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pf{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&$d("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,$d("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{$d("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):$d("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(tf("string"==typeof e.token),this.R=e.token,new ff(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function gf(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class mf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=gf(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function vf(e,t){return e<t?-1:e>t?1:0}function yf(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class bf{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new of(rf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new of(rf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new of(rf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new of(rf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bf.fromMillis(Date.now())}static fromDate(e){return bf.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new bf(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?vf(this.nanoseconds,e.nanoseconds):vf(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class wf{constructor(e){this.timestamp=e}static fromTimestamp(e){return new wf(e)}static min(){return new wf(new bf(0,0))}static max(){return new wf(new bf(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class _f{constructor(e,t,n){void 0===t?t=0:t>e.length&&ef(),void 0===n?n=e.length-t:n>e.length-t&&ef(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===_f.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _f?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class xf extends _f{construct(e,t,n){return new xf(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new of(rf.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new xf(e)}static emptyPath(){return new xf([])}}const kf=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sf extends _f{construct(e,t,n){return new Sf(e,t,n)}static isValidIdentifier(e){return kf.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sf.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Sf(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new of(rf.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new of(rf.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new of(rf.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new of(rf.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sf(t)}static emptyPath(){return new Sf([])}}class Ef{constructor(e){this.path=e}static fromPath(e){return new Ef(xf.fromString(e))}static fromName(e){return new Ef(xf.fromString(e).popFirst(5))}static empty(){return new Ef(xf.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===xf.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return xf.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ef(new xf(e.slice()))}}class Cf{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Cf.UNKNOWN_ID=-1;function Tf(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=wf.fromTimestamp(1e9===r?new bf(n+1,0):new bf(n,r));return new Af(i,Ef.empty(),t)}function Of(e){return new Af(e.readTime,e.key,-1)}class Af{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Af(wf.min(),Ef.empty(),-1)}static max(){return new Af(wf.max(),Ef.empty(),-1)}}function Nf(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ef.comparator(e.documentKey,t.documentKey),0!==n?n:vf(e.largestBatchId,t.largestBatchId))}const If="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Pf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Rf(e){if(e.code!==rf.FAILED_PRECONDITION||e.message!==If)throw e;$d("LocalStore","Unexpectedly lost primary lease")}class Df{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ef(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Df(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Df?t:Df.resolve(t)}catch(e){return Df.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Df.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Df.reject(t)}static resolve(e){return new Df(((t,n)=>{t(e)}))}static reject(e){return new Df(((t,n)=>{n(e)}))}static waitFor(e){return new Df(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=Df.resolve(!1);for(const n of e)t=t.next((e=>e?Df.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new Df(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{o[l]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new Df(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}function Mf(e){return"IndexedDbTransactionError"===e.name}class Lf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function jf(e){return null==e}function Ff(e){return 0===e&&1/e==-1/0}function qf(e){return"number"==typeof e&&Number.isInteger(e)&&!Ff(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Lf._e=-1;const Bf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Uf=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Vf=Uf;function zf(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Hf(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Wf(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Kf{constructor(e,t){this.comparator=e,this.root=t||Yf.EMPTY}insert(e,t){return new Kf(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yf.BLACK,null,null))}remove(e){return new Kf(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yf.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Gf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Gf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Gf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Gf(this.root,e,this.comparator,!0)}}class Gf{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yf{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Yf.RED,this.left=null!=r?r:Yf.EMPTY,this.right=null!=i?i:Yf.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Yf(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Yf.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Yf.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yf.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yf.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ef();if(this.right.isRed())throw ef();const e=this.left.check();if(e!==this.right.check())throw ef();return e+(this.isRed()?0:1)}}Yf.EMPTY=null,Yf.RED=!0,Yf.BLACK=!1,Yf.EMPTY=new class{constructor(){this.size=0}get key(){throw ef()}get value(){throw ef()}get color(){throw ef()}get left(){throw ef()}get right(){throw ef()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Yf(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Qf{constructor(e){this.comparator=e,this.data=new Kf(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $f(this.data.getIterator())}getIteratorFrom(e){return new $f(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Qf))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Qf(this.comparator);return t.data=e,t}}class $f{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Xf{constructor(e){this.fields=e,e.sort(Sf.comparator)}static empty(){return new Xf([])}unionWith(e){let t=new Qf(Sf.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Xf(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yf(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Jf extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zf{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Jf("Invalid base64 string: "+e):e}}(e);return new Zf(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Zf(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vf(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zf.EMPTY_BYTE_STRING=new Zf("");const ep=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tp(e){if(tf(!!e),"string"==typeof e){let t=0;const n=ep.exec(e);if(tf(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:np(e.seconds),nanos:np(e.nanos)}}function np(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function rp(e){return"string"==typeof e?Zf.fromBase64String(e):Zf.fromUint8Array(e)}function ip(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function op(e){const t=e.mapValue.fields.__previous_value__;return ip(t)?op(t):t}function sp(e){const t=tp(e.mapValue.fields.__local_write_time__.timestampValue);return new bf(t.seconds,t.nanos)}class ap{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class lp{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new lp("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof lp&&e.projectId===this.projectId&&e.database===this.database}}const cp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function up(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ip(e)?4:kp(e)?9007199254740991:10:ef()}function hp(e,t){if(e===t)return!0;const n=up(e);if(n!==up(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return sp(e).isEqual(sp(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=tp(e.timestampValue),r=tp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return rp(e.bytesValue).isEqual(rp(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return np(e.geoPointValue.latitude)===np(t.geoPointValue.latitude)&&np(e.geoPointValue.longitude)===np(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return np(e.integerValue)===np(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=np(e.doubleValue),r=np(t.doubleValue);return n===r?Ff(n)===Ff(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return yf(e.arrayValue.values||[],t.arrayValue.values||[],hp);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(zf(n)!==zf(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!hp(n[i],r[i])))return!1;return!0}(e,t);default:return ef()}}function dp(e,t){return void 0!==(e.values||[]).find((e=>hp(e,t)))}function fp(e,t){if(e===t)return 0;const n=up(e),r=up(t);if(n!==r)return vf(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return vf(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=np(e.integerValue||e.doubleValue),r=np(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return pp(e.timestampValue,t.timestampValue);case 4:return pp(sp(e),sp(t));case 5:return vf(e.stringValue,t.stringValue);case 6:return function(e,t){const n=rp(e),r=rp(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=vf(n[i],r[i]);if(0!==e)return e}return vf(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=vf(np(e.latitude),np(t.latitude));return 0!==n?n:vf(np(e.longitude),np(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=fp(n[i],r[i]);if(e)return e}return vf(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===cp.mapValue&&t===cp.mapValue)return 0;if(e===cp.mapValue)return 1;if(t===cp.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=vf(r[s],o[s]);if(0!==e)return e;const t=fp(n[r[s]],i[o[s]]);if(0!==t)return t}return vf(r.length,o.length)}(e.mapValue,t.mapValue);default:throw ef()}}function pp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return vf(e,t);const n=tp(e),r=tp(t),i=vf(n.seconds,r.seconds);return 0!==i?i:vf(n.nanos,r.nanos)}function gp(e){return mp(e)}function mp(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=tp(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return rp(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Ef.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=mp(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(mp(e.fields[i]));return n+"}"}(e.mapValue):ef()}function vp(e){return!!e&&"integerValue"in e}function yp(e){return!!e&&"arrayValue"in e}function bp(e){return!!e&&"nullValue"in e}function wp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function _p(e){return!!e&&"mapValue"in e}function xp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Hf(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=xp(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=xp(e.arrayValue.values[n]);return t}return Object.assign({},e)}function kp(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Sp{constructor(e){this.value=e}static empty(){return new Sp({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!_p(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xp(t)}setAll(e){let t=Sf.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=xp(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());_p(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hp(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];_p(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Hf(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Sp(xp(this.value))}}function Ep(e){const t=[];return Hf(e.fields,((e,n)=>{const r=new Sf([e]);if(_p(n)){const e=Ep(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new Xf(t)}class Cp{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new Cp(e,0,wf.min(),wf.min(),wf.min(),Sp.empty(),0)}static newFoundDocument(e,t,n,r){return new Cp(e,1,t,wf.min(),n,r,0)}static newNoDocument(e,t){return new Cp(e,2,t,wf.min(),wf.min(),Sp.empty(),0)}static newUnknownDocument(e,t){return new Cp(e,3,t,wf.min(),wf.min(),Sp.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(wf.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sp.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sp.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=wf.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cp&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cp(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Tp{constructor(e,t){this.position=e,this.inclusive=t}}function Op(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?Ef.comparator(Ef.fromName(s.referenceValue),n.key):fp(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Ap(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!hp(e.position[n],t.position[n]))return!1;return!0}class Np{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Ip(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Pp{}class Rp extends Pp{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Up(e,t,n):"array-contains"===t?new Wp(e,n):"in"===t?new Kp(e,n):"not-in"===t?new Gp(e,n):"array-contains-any"===t?new Yp(e,n):new Rp(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Vp(e,n):new zp(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(fp(t,this.value)):null!==t&&up(this.value)===up(t)&&this.matchesComparison(fp(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ef()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dp extends Pp{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Dp(e,t)}matches(e){return Mp(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Mp(e){return"and"===e.op}function Lp(e){return jp(e)&&Mp(e)}function jp(e){for(const t of e.filters)if(t instanceof Dp)return!1;return!0}function Fp(e){if(e instanceof Rp)return e.field.canonicalString()+e.op.toString()+gp(e.value);if(Lp(e))return e.filters.map((e=>Fp(e))).join(",");{const t=e.filters.map((e=>Fp(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function qp(e,t){return e instanceof Rp?function(e,t){return t instanceof Rp&&e.op===t.op&&e.field.isEqual(t.field)&&hp(e.value,t.value)}(e,t):e instanceof Dp?function(e,t){return t instanceof Dp&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&qp(n,t.filters[r])),!0)}(e,t):void ef()}function Bp(e){return e instanceof Rp?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(gp(e.value))}(e):e instanceof Dp?function(e){return e.op.toString()+" {"+e.getFilters().map(Bp).join(" ,")+"}"}(e):"Filter"}class Up extends Rp{constructor(e,t,n){super(e,t,n),this.key=Ef.fromName(n.referenceValue)}matches(e){const t=Ef.comparator(e.key,this.key);return this.matchesComparison(t)}}class Vp extends Rp{constructor(e,t){super(e,"in",t),this.keys=Hp("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class zp extends Rp{constructor(e,t){super(e,"not-in",t),this.keys=Hp("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Hp(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Ef.fromName(e.referenceValue)))}class Wp extends Rp{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return yp(t)&&dp(t.arrayValue,this.value)}}class Kp extends Rp{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&dp(this.value.arrayValue,t)}}class Gp extends Rp{constructor(e,t){super(e,"not-in",t)}matches(e){if(dp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!dp(this.value.arrayValue,t)}}class Yp extends Rp{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!yp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>dp(this.value.arrayValue,e)))}}class Qp{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ce=null}}function $p(e){return new Qp(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Xp(e){const t=nf(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Fp(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),jf(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>gp(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>gp(e))).join(",")),t.ce=e}return t.ce}function Jp(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Ip(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!qp(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ap(e.startAt,t.startAt)&&Ap(e.endAt,t.endAt)}function Zp(e){return Ef.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class eg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function tg(e,t,n,r,i,o,s,a){return new eg(e,t,n,r,i,o,s,a)}function ng(e){return new eg(e)}function rg(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ig(e){return null!==e.collectionGroup}function og(e){const t=nf(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Qf(Sf.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Np(r,n))})),e.has(Sf.keyField().canonicalString())||t.le.push(new Np(Sf.keyField(),n))}return t.le}function sg(e){const t=nf(e);return t.he||(t.he=ag(t,og(e))),t.he}function ag(e,t){if("F"===e.limitType)return $p(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Np(e.field,t)}));const n=e.endAt?new Tp(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Tp(e.startAt.position,e.startAt.inclusive):null;return $p(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function lg(e,t,n){return new eg(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function cg(e,t){return Jp(sg(e),sg(t))&&e.limitType===t.limitType}function ug(e){return"".concat(Xp(sg(e)),"|lt:").concat(e.limitType)}function hg(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Bp(e))).join(", "),"]")),jf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>gp(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>gp(e))).join(",")),"Target(".concat(t,")")}(sg(e)),"; limitType=").concat(e.limitType,")")}function dg(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ef.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of og(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Op(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,og(e),t))&&!(e.endAt&&!function(e,t,n){const r=Op(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,og(e),t))}(e,t)}function fg(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function pg(e){return(t,n)=>{let r=!1;for(const i of og(e)){const e=gg(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function gg(e,t,n){const r=e.field.isKeyField()?Ef.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?fp(r,i):ef()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ef()}}class mg{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Hf(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Wf(this.inner)}size(){return this.innerSize}}const vg=new Kf(Ef.comparator);function yg(){return vg}const bg=new Kf(Ef.comparator);function wg(){let e=bg;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function _g(e){let t=bg;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function xg(){return Sg()}function kg(){return Sg()}function Sg(){return new mg((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Eg=new Kf(Ef.comparator),Cg=new Qf(Ef.comparator);function Tg(){let e=Cg;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Og=new Qf(vf);function Ag(){return Og}function Ng(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ff(t)?"-0":t}}function Ig(e){return{integerValue:""+e}}function Pg(e,t){return qf(t)?Ig(t):Ng(e,t)}class Rg{constructor(){this._=void 0}}function Dg(e,t,n){return e instanceof jg?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ip(t)&&(t=op(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Fg?qg(e,t):e instanceof Bg?Ug(e,t):function(e,t){const n=Lg(e,t),r=zg(n)+zg(e.Ie);return vp(n)&&vp(e.Ie)?Ig(r):Ng(e.serializer,r)}(e,t)}function Mg(e,t,n){return e instanceof Fg?qg(e,t):e instanceof Bg?Ug(e,t):n}function Lg(e,t){return e instanceof Vg?function(e){return vp(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class jg extends Rg{}class Fg extends Rg{constructor(e){super(),this.elements=e}}function qg(e,t){const n=Hg(t);for(const r of e.elements)n.some((e=>hp(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Bg extends Rg{constructor(e){super(),this.elements=e}}function Ug(e,t){let n=Hg(t);for(const r of e.elements)n=n.filter((e=>!hp(e,r)));return{arrayValue:{values:n}}}class Vg extends Rg{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function zg(e){return np(e.integerValue||e.doubleValue)}function Hg(e){return yp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Wg{constructor(e,t){this.version=e,this.transformResults=t}}class Kg{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Kg}static exists(e){return new Kg(void 0,e)}static updateTime(e){return new Kg(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gg(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Yg{}function Qg(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new om(e.key,Kg.none()):new em(e.key,e.data,Kg.none());{const n=e.data,r=Sp.empty();let i=new Qf(Sf.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new tm(e.key,r,new Xf(i.toArray()),Kg.none())}}function $g(e,t,n){e instanceof em?function(e,t,n){const r=e.value.clone(),i=rm(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof tm?function(e,t,n){if(!Gg(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=rm(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(nm(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Xg(e,t,n,r){return e instanceof em?function(e,t,n,r){if(!Gg(e.precondition,t))return n;const i=e.value.clone(),o=im(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof tm?function(e,t,n,r){if(!Gg(e.precondition,t))return n;const i=im(e.fieldTransforms,r,t),o=t.data;return o.setAll(nm(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Gg(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Jg(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Lg(r.transform,e||null);null!=i&&(null===n&&(n=Sp.empty()),n.set(r.field,i))}return n||null}function Zg(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&yf(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Fg&&t instanceof Fg||e instanceof Bg&&t instanceof Bg?yf(e.elements,t.elements,hp):e instanceof Vg&&t instanceof Vg?hp(e.Ie,t.Ie):e instanceof jg&&t instanceof jg}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class em extends Yg{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class tm extends Yg{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function nm(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function rm(e,t,n){const r=new Map;tf(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,Mg(s,a,n[i]))}return r}function im(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Dg(e,o,t))}return r}class om extends Yg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sm extends Yg{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class am{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&$g(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Xg(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Xg(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=kg();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=Qg(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(wf.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Tg())}isEqual(e){return this.batchId===e.batchId&&yf(this.mutations,e.mutations,((e,t)=>Zg(e,t)))&&yf(this.baseMutations,e.baseMutations,((e,t)=>Zg(e,t)))}}class lm{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){tf(e.mutations.length===n.length);let r=Eg;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new lm(e,t,n,r)}}class cm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class um{constructor(e,t){this.count=e,this.unchangedNames=t}}var hm,dm;function fm(e){switch(e){default:return ef();case rf.CANCELLED:case rf.UNKNOWN:case rf.DEADLINE_EXCEEDED:case rf.RESOURCE_EXHAUSTED:case rf.INTERNAL:case rf.UNAVAILABLE:case rf.UNAUTHENTICATED:return!1;case rf.INVALID_ARGUMENT:case rf.NOT_FOUND:case rf.ALREADY_EXISTS:case rf.PERMISSION_DENIED:case rf.FAILED_PRECONDITION:case rf.ABORTED:case rf.OUT_OF_RANGE:case rf.UNIMPLEMENTED:case rf.DATA_LOSS:return!0}}function pm(e){if(void 0===e)return Xd("GRPC error has no .code"),rf.UNKNOWN;switch(e){case hm.OK:return rf.OK;case hm.CANCELLED:return rf.CANCELLED;case hm.UNKNOWN:return rf.UNKNOWN;case hm.DEADLINE_EXCEEDED:return rf.DEADLINE_EXCEEDED;case hm.RESOURCE_EXHAUSTED:return rf.RESOURCE_EXHAUSTED;case hm.INTERNAL:return rf.INTERNAL;case hm.UNAVAILABLE:return rf.UNAVAILABLE;case hm.UNAUTHENTICATED:return rf.UNAUTHENTICATED;case hm.INVALID_ARGUMENT:return rf.INVALID_ARGUMENT;case hm.NOT_FOUND:return rf.NOT_FOUND;case hm.ALREADY_EXISTS:return rf.ALREADY_EXISTS;case hm.PERMISSION_DENIED:return rf.PERMISSION_DENIED;case hm.FAILED_PRECONDITION:return rf.FAILED_PRECONDITION;case hm.ABORTED:return rf.ABORTED;case hm.OUT_OF_RANGE:return rf.OUT_OF_RANGE;case hm.UNIMPLEMENTED:return rf.UNIMPLEMENTED;case hm.DATA_LOSS:return rf.DATA_LOSS;default:return ef()}}(dm=hm||(hm={}))[dm.OK=0]="OK",dm[dm.CANCELLED=1]="CANCELLED",dm[dm.UNKNOWN=2]="UNKNOWN",dm[dm.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",dm[dm.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",dm[dm.NOT_FOUND=5]="NOT_FOUND",dm[dm.ALREADY_EXISTS=6]="ALREADY_EXISTS",dm[dm.PERMISSION_DENIED=7]="PERMISSION_DENIED",dm[dm.UNAUTHENTICATED=16]="UNAUTHENTICATED",dm[dm.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",dm[dm.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",dm[dm.ABORTED=10]="ABORTED",dm[dm.OUT_OF_RANGE=11]="OUT_OF_RANGE",dm[dm.UNIMPLEMENTED=12]="UNIMPLEMENTED",dm[dm.INTERNAL=13]="INTERNAL",dm[dm.UNAVAILABLE=14]="UNAVAILABLE",dm[dm.DATA_LOSS=15]="DATA_LOSS";let gm=null;function mm(){return new TextEncoder}const vm=new Hd([4294967295,4294967295],0);function ym(e){const t=mm().encode(e),n=new zd;return n.update(t),new Uint8Array(n.digest())}function bm(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Hd([n,r],0),new Hd([i,o],0)]}class wm{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new _m("Invalid padding: ".concat(t));if(n<0)throw new _m("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new _m("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new _m("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Hd.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Hd.fromNumber(n)));return 1===r.compare(vm)&&(r=new Hd([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=ym(e),[n,r]=bm(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new wm(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Te)return;const t=ym(e),[n,r]=bm(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class _m extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xm{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,km.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new xm(wf.min(),r,new Kf(vf),yg(),Tg())}}class km{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new km(n,t,Tg(),Tg(),Tg())}}class Sm{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class Em{constructor(e,t){this.targetId=e,this.fe=t}}class Cm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zf.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Tm{constructor(){this.ge=0,this.pe=Nm(),this.ye=Zf.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Tg(),t=Tg(),n=Tg();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:ef()}})),new km(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Nm()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,tf(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Om{constructor(e){this.Le=e,this.ke=new Map,this.qe=yg(),this.Qe=Am(),this.Ke=new Kf(vf)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:ef()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Zp(i))if(0===n){const e=new Ef(i.path);this.We(t,e,Cp.newNoDocument(e,wf.min()))}else tf(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==gm||gm.tt(function(e,t,n,r,i){var o,s,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(o=null==d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(a=null===(s=null==d?void 0:d.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=rp(n).toUint8Array()}catch(e){if(e instanceof Jf)return Jd("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new wm(o,r,i)}catch(e){return Jd(e instanceof _m?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Te?null:s}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Zp(i.target)){const t=new Ef(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Cp.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Tg();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new xm(e,t,this.Ke,this.qe,n);return this.qe=yg(),this.Qe=Am(),this.Ke=new Kf(vf),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Tm,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Qf(vf),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||$d("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Tm),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Am(){return new Kf(Ef.comparator)}function Nm(){return new Kf(Ef.comparator)}const Im={asc:"ASCENDING",desc:"DESCENDING"},Pm={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Rm={and:"AND",or:"OR"};class Dm{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Mm(e,t){return e.useProto3Json||jf(t)?t:{value:t}}function Lm(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function jm(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Fm(e,t){return Lm(e,t.toTimestamp())}function qm(e){return tf(!!e),wf.fromTimestamp(function(e){const t=tp(e);return new bf(t.seconds,t.nanos)}(e))}function Bm(e,t){return function(e){return new xf(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Um(e){const t=xf.fromString(e);return tf(av(t)),t}function Vm(e,t){return Bm(e.databaseId,t.path)}function zm(e,t){const n=Um(t);if(n.get(1)!==e.databaseId.projectId)throw new of(rf.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new of(rf.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ef(Gm(n))}function Hm(e,t){return Bm(e.databaseId,t)}function Wm(e){const t=Um(e);return 4===t.length?xf.emptyPath():Gm(t)}function Km(e){return new xf(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Gm(e){return tf(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ym(e,t,n){return{name:Vm(e,t),fields:n.value.mapValue.fields}}function Qm(e,t){let n;if(t instanceof em)n={update:Ym(e,t.key,t.value)};else if(t instanceof om)n={delete:Vm(e,t.key)};else if(t instanceof tm)n={update:Ym(e,t.key,t.data),updateMask:sv(t.fieldMask)};else{if(!(t instanceof sm))return ef();n={verify:Vm(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof jg)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Fg)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Bg)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Vg)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw ef()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Fm(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:ef()}(e,t.precondition)),n}function $m(e,t){return{documents:[Hm(e,t.path)]}}function Xm(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Hm(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Hm(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return ov(Dp.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:rv(e.field),direction:ev(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const s=Mm(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Jm(e){let t=Wm(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){tf(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=Zm(e);return t instanceof Dp&&Lp(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new Np(iv(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,jf(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Tp(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Tp(n,t)}(n.endAt)),tg(t,i,s,o,a,"F",l,c)}function Zm(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=iv(e.unaryFilter.field);return Rp.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=iv(e.unaryFilter.field);return Rp.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=iv(e.unaryFilter.field);return Rp.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=iv(e.unaryFilter.field);return Rp.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ef()}}(e):void 0!==e.fieldFilter?function(e){return Rp.create(iv(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ef()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Dp.create(e.compositeFilter.filters.map((e=>Zm(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return ef()}}(e.compositeFilter.op))}(e):ef()}function ev(e){return Im[e]}function tv(e){return Pm[e]}function nv(e){return Rm[e]}function rv(e){return{fieldPath:e.canonicalString()}}function iv(e){return Sf.fromServerFormat(e.fieldPath)}function ov(e){return e instanceof Rp?function(e){if("=="===e.op){if(wp(e.value))return{unaryFilter:{field:rv(e.field),op:"IS_NAN"}};if(bp(e.value))return{unaryFilter:{field:rv(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(wp(e.value))return{unaryFilter:{field:rv(e.field),op:"IS_NOT_NAN"}};if(bp(e.value))return{unaryFilter:{field:rv(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rv(e.field),op:tv(e.op),value:e.value}}}(e):e instanceof Dp?function(e){const t=e.getFilters().map((e=>ov(e)));return 1===t.length?t[0]:{compositeFilter:{op:nv(e.op),filters:t}}}(e):ef()}function sv(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function av(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class lv{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:wf.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:wf.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Zf.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new lv(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new lv(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lv(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class cv{constructor(e){this.ut=e}}function uv(e){const t=Jm({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?lg(t,t.limit,"L"):t}class hv{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(np(e.integerValue));else if("doubleValue"in e){const n=np(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),Ff(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(rp(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?kp(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):ef()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),Ef.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}hv.St=new hv;class dv{constructor(){this.on=new fv}addToCollectionParentIndex(e,t){return this.on.add(t),Df.resolve()}getCollectionParents(e,t){return Df.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return Df.resolve()}deleteFieldIndex(e,t){return Df.resolve()}deleteAllFieldIndexes(e){return Df.resolve()}createTargetIndexes(e,t){return Df.resolve()}getDocumentsMatchingTarget(e,t){return Df.resolve(null)}getIndexType(e,t){return Df.resolve(0)}getFieldIndexes(e,t){return Df.resolve([])}getNextCollectionGroupToUpdate(e){return Df.resolve(null)}getMinOffset(e,t){return Df.resolve(Af.min())}getMinOffsetFromCollectionGroup(e,t){return Df.resolve(Af.min())}updateCollectionGroup(e,t,n){return Df.resolve()}updateIndexEntries(e,t){return Df.resolve()}}class fv{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Qf(xf.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Qf(xf.comparator)).toArray()}}new Uint8Array(0);class pv{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new pv(e,pv.DEFAULT_COLLECTION_PERCENTILE,pv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}pv.DEFAULT_COLLECTION_PERCENTILE=10,pv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pv.DEFAULT=new pv(41943040,pv.DEFAULT_COLLECTION_PERCENTILE,pv.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pv.DISABLED=new pv(-1,0,0);class gv{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new gv(0)}static Nn(){return new gv(-1)}}class mv{constructor(){this.changes=new mg((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cp.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Df.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class yv{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Xg(n.mutation,e,Xf.empty(),bf.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Tg()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tg();const r=xg();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=wg();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=xg();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Tg())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=yg();const o=Sg(),s=Sg();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof tm)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),Xg(s.mutation,t,s.mutation.getFieldMask(),bf.now())):o.set(t.key,Xf.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new vv(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=Sg();let r=new Kf(((e,t)=>e-t)),i=Tg();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||Xf.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||Tg()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=kg();l.forEach((e=>{if(!i.has(e)){const r=Qg(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Df.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return Ef.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ig(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Df.resolve(xg());let s=-1,a=i;return o.next((t=>Df.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?Df.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Tg()))).next((e=>({batchId:s,changes:_g(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ef(t)).next((e=>{let t=wg();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=wg();return this.indexManager.getCollectionParents(e,i).next((s=>Df.forEach(s,(s=>{const a=function(e,t){return new eg(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Cp.newInvalidDocument(r)))}));let n=wg();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&Xg(o.mutation,r,Xf.empty(),bf.now()),dg(t,r)&&(n=n.insert(e,r))})),n}))}}class bv{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return Df.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:qm(e.createTime)}}(t)),Df.resolve()}getNamedQuery(e,t){return Df.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:uv(e.bundledQuery),readTime:qm(e.readTime)}}(t)),Df.resolve()}}class wv{constructor(){this.overlays=new Kf(Ef.comparator),this.lr=new Map}getOverlay(e,t){return Df.resolve(this.overlays.get(t))}getOverlays(e,t){const n=xg();return Df.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),Df.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),Df.resolve()}getOverlaysForCollection(e,t,n){const r=xg(),i=t.length+1,o=new Ef(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Df.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Kf(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=xg(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=xg(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return Df.resolve(s)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new cm(t,n));let i=this.lr.get(t);void 0===i&&(i=Tg(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class _v{constructor(){this.hr=new Qf(xv.Pr),this.Ir=new Qf(xv.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new xv(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new xv(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new Ef(new xf([])),n=new xv(t,e),r=new xv(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new Ef(new xf([])),n=new xv(t,e),r=new xv(t,e+1);let i=Tg();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new xv(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class xv{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return Ef.comparator(e.key,t.key)||vf(e.gr,t.gr)}static Tr(e,t){return vf(e.gr,t.gr)||Ef.comparator(e.key,t.key)}}class kv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new Qf(xv.Pr)}checkEmpty(e){return Df.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new am(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.yr=this.yr.add(new xv(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Df.resolve(o)}lookupMutationBatch(e,t){return Df.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return Df.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Df.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return Df.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new xv(t,0),r=new xv(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),Df.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Qf(vf);return t.forEach((e=>{const t=new xv(e,0),r=new xv(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),Df.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Ef.isDocumentKey(i)||(i=i.child(""));const o=new xv(new Ef(i),0);let s=new Qf(vf);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.gr)),!0)}),o),Df.resolve(this.br(s))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){tf(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return Df.forEach(t.mutations,(r=>{const i=new xv(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new xv(t,0),r=this.yr.firstAfterOrEqual(n);return Df.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Df.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Sv{constructor(e){this.Cr=e,this.docs=new Kf(Ef.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Df.resolve(n?n.document.mutableCopy():Cp.newInvalidDocument(t))}getEntries(e,t){let n=yg();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Cp.newInvalidDocument(e))})),Df.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=yg();const o=t.path,s=new Ef(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||Nf(Of(s),n)<=0||(r.has(s.key)||dg(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return Df.resolve(i)}getAllFromCollectionGroup(e,t,n,r){ef()}vr(e,t){return Df.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Ev(this)}getSize(e){return Df.resolve(this.size)}}class Ev extends mv{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),Df.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class Cv{constructor(e){this.persistence=e,this.Fr=new mg((e=>Xp(e)),Jp),this.lastRemoteSnapshotVersion=wf.min(),this.highestTargetId=0,this.Mr=0,this.Or=new _v,this.targetCount=0,this.Nr=gv.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),Df.resolve()}getLastRemoteSnapshotVersion(e){return Df.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Df.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),Df.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),Df.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new gv(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,Df.resolve()}updateTargetData(e,t){return this.kn(t),Df.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,Df.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Fr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),Df.waitFor(i).next((()=>r))}getTargetCount(e){return Df.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return Df.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),Df.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),Df.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),Df.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return Df.resolve(n)}containsKey(e,t){return Df.resolve(this.Or.containsKey(t))}}class Tv{constructor(e,t){this.Br={},this.overlays={},this.Lr=new Lf(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new Cv(this),this.indexManager=new dv,this.remoteDocumentCache=function(e){return new Sv(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new cv(t),this.Kr=new bv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new kv(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){$d("MemoryPersistence","Starting transaction:",e);const r=new Ov(this.Lr.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return Df.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Ov extends Pf{constructor(e){super(),this.currentSequenceNumber=e}}class Av{constructor(e){this.persistence=e,this.Gr=new _v,this.zr=null}static jr(e){return new Av(e)}get Hr(){if(this.zr)return this.zr;throw ef()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),Df.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),Df.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),Df.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Df.forEach(this.Hr,(n=>{const r=Ef.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,wf.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return Df.or([()=>Df.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class Nv{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=Tg(),r=Tg();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Nv(e,t.fromCache,n,r)}}class Iv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Pv{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Iv;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(Qd()<=yi.DEBUG&&$d("QueryEngine","SDK will not create cache indexes for query:",hg(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),Df.resolve()):(Qd()<=yi.DEBUG&&$d("QueryEngine","Query:",hg(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(Qd()<=yi.DEBUG&&$d("QueryEngine","The SDK decides to create cache indexes for query:",hg(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sg(t))):Df.resolve())}zi(e,t){if(rg(t))return Df.resolve(null);let n=sg(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=lg(t,null,"F"),n=sg(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Tg(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Yi(t,r);return this.Zi(t,o,i,n.readTime)?this.zi(e,lg(t,null,"F")):this.Xi(e,o,t,n)}))))})))))}ji(e,t,n,r){return rg(t)||r.isEqual(wf.min())?Df.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const o=this.Yi(t,i);return this.Zi(t,o,n,r)?Df.resolve(null):(Qd()<=yi.DEBUG&&$d("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),hg(t)),this.Xi(e,o,t,Tf(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new Qf(pg(e));return t.forEach(((t,r)=>{dg(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return Qd()<=yi.DEBUG&&$d("QueryEngine","Using full collection scan to execute query:",hg(t)),this.Gi.getDocumentsMatchingQuery(e,t,Af.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Rv{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new Kf(vf),this.ns=new mg((e=>Xp(e)),Jp),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yv(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function Dv(e,t,n,r){return new Rv(e,t,n,r)}async function Mv(e,t){const n=nf(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=Tg();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function Lv(e){const t=nf(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function jv(e,t,n){let r=Tg(),i=Tg();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=yg();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(wf.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):$d("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{us:r,cs:i}}))}function Fv(e,t){const n=nf(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function qv(e,t){const n=nf(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,Df.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new lv(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function Bv(e,t,n){const r=nf(e),i=r.ts.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Mf(e))throw e;$d("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function Uv(e,t,n){const r=nf(e);let i=wf.min(),o=Tg();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=nf(e),i=r.ns.get(n);return void 0!==i?Df.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,sg(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:wf.min(),n?o:Tg()))).next((e=>(Vv(r,fg(t),e),{documents:e,ls:o})))))}function Vv(e,t,n){let r=e.rs.get(t)||wf.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}class zv{constructor(){this.activeTargetIds=Ag()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hv{constructor(){this.eo=new zv,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new zv,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Wv{ro(e){}shutdown(){}}class Kv{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){$d("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){$d("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Gv=null;function Yv(){return null===Gv?Gv=268435456+Math.round(2147483648*Math.random()):Gv++,"0x"+Gv.toString(16)}const Qv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $v{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const Xv="WebChannelConnection";class Jv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo="projects/".concat(n,"/databases/").concat(r),this.po="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get yo(){return!1}wo(e,t,n,r,i){const o=Yv(),s=this.So(e,t);$d("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,r,i),this.Do(e,s,a,n).then((t=>($d("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw Jd("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}Co(e,t,n,r,i,o){return this.wo(e,t,n,r,i)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Gd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=Qv[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,r){const i=Yv();return new Promise(((o,s)=>{const a=new Vd;a.setWithCredentials(!0),a.listenOnce(Fd.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case jd.NO_ERROR:const t=a.getResponseJson();$d(Xv,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case jd.TIMEOUT:$d(Xv,"RPC '".concat(e,"' ").concat(i," timed out")),s(new of(rf.DEADLINE_EXCEEDED,"Request time out"));break;case jd.HTTP_ERROR:const n=a.getStatus();if($d(Xv,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(rf).indexOf(t)>=0?t:rf.UNKNOWN}(t.status);s(new of(e,t.message))}else s(new of(rf.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new of(rf.UNAVAILABLE,"Connection failed."));break;default:ef()}}finally{$d(Xv,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);$d(Xv,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}vo(e,t,n){const r=Yv(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Md(),s=Ld(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.bo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");$d(Xv,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=o.createWebChannel(c,a);let h=!1,d=!1;const f=new $v({co:t=>{d?$d(Xv,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||($d(Xv,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),$d(Xv,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Ud.EventType.OPEN,(()=>{d||$d(Xv,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,Ud.EventType.CLOSE,(()=>{d||(d=!0,$d(Xv,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Ro())})),p(u,Ud.EventType.ERROR,(t=>{d||(d=!0,Jd(Xv,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Ro(new of(rf.UNAVAILABLE,"The operation could not be completed")))})),p(u,Ud.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];tf(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){$d(Xv,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=hm[e];if(void 0!==t)return pm(t)}(t),i=s.message;void 0===n&&(n=rf.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.Ro(new of(n,i)),u.close()}else $d(Xv,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.Vo(i)}})),p(s,qd.STAT_EVENT,(t=>{t.stat===Bd.PROXY?$d(Xv,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Bd.NOPROXY&&$d(Xv,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ao()}),0),f}}function Zv(){return"undefined"!=typeof document?document:null}function ey(e){return new Dm(e,!0)}class ty{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Fo=n,this.Mo=r,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&$d("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class ny{constructor(e,t,n,r,i,o,s,a){this.si=e,this.Ko=n,this.$o=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new ty(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===rf.RESOURCE_EXHAUSTED?(Xd(t.toString()),Xd("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===rf.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Uo===t&&this.s_(n,r)}),(t=>{e((()=>{const e=new of(rf.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return $d("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():($d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ry extends ny{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:ef()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(tf(void 0===t||"string"==typeof t),Zf.fromBase64String(t||"")):(tf(void 0===t||t instanceof Uint8Array),Zf.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?rf.UNKNOWN:pm(e.code);return new of(t,e.message||"")}(s);n=new Cm(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=zm(e,r.document.name),o=qm(r.document.updateTime),s=r.document.createTime?qm(r.document.createTime):wf.min(),a=new Sp({mapValue:{fields:r.document.fields}}),l=Cp.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Sm(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=zm(e,r.document),o=r.readTime?qm(r.readTime):wf.min(),s=Cp.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Sm([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=zm(e,r.document),o=r.removedTargetIds||[];n=new Sm([],o,i,null)}else{if(!("filter"in t))return ef();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new um(r,i),s=e.targetId;n=new Em(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return wf.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?wf.min():t.readTime?qm(t.readTime):wf.min()}(e);return this.listener.a_(t,n)}u_(e){const t={};t.database=Km(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Zp(r)?{documents:$m(e,r)}:{query:Xm(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=jm(e,t.resumeToken);const r=Mm(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(wf.min())>0){n.readTime=Lm(e,t.snapshotVersion.toTimestamp());const r=Mm(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ef()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}c_(e){const t={};t.database=Km(this.serializer),t.removeTarget=e,this.e_(t)}}class iy extends ny{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(tf(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(tf(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?qm(e.updateTime):qm(t);return n.isEqual(wf.min())&&(n=qm(t)),new Wg(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=qm(e.commitTime);return this.listener.I_(n,t)}return tf(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Km(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Qm(this.serializer,e)))};this.e_(t)}}class oy extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new of(rf.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,o]=r;return this.connection.wo(e,t,n,i,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===rf.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new of(rf.UNKNOWN,e.toString())}))}Co(e,t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.Co(e,t,n,o,s,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===rf.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new of(rf.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class sy{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(Xd(t),this.f_=!1):$d("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class ay{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro((e=>{n.enqueueAndForget((async()=>{my(this)&&($d("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=nf(e);t.C_.add(4),await cy(t),t.M_.set("Unknown"),t.C_.delete(4),await ly(t)}(this))}))})),this.M_=new sy(n,r)}}async function ly(e){if(my(e))for(const t of e.v_)await t(!0)}async function cy(e){for(const t of e.v_)await t(!1)}function uy(e,t){const n=nf(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),gy(n)?py(n):Dy(n).Ho()&&dy(n,t))}function hy(e,t){const n=nf(e),r=Dy(n);n.D_.delete(t),r.Ho()&&fy(n,t),0===n.D_.size&&(r.Ho()?r.Zo():my(n)&&n.M_.set("Unknown"))}function dy(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(wf.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Dy(e).u_(t)}function fy(e,t){e.x_.Oe(t),Dy(e).c_(t)}function py(e){e.x_=new Om({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),Dy(e).start(),e.M_.g_()}function gy(e){return my(e)&&!Dy(e).jo()&&e.D_.size>0}function my(e){return 0===nf(e).C_.size}function vy(e){e.x_=void 0}async function yy(e){e.D_.forEach(((t,n)=>{dy(e,t)}))}async function by(e,t){vy(e),gy(e)?(e.M_.w_(t),py(e)):e.M_.set("Unknown")}async function wy(e,t,n){if(e.M_.set("Online"),t instanceof Cm&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.D_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.D_.delete(r),e.x_.removeTarget(r))}(e,t)}catch(n){$d("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await _y(e,n)}else if(t instanceof Sm?e.x_.$e(t):t instanceof Em?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(wf.min()))try{const t=await Lv(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.x_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.D_.get(r);i&&e.D_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.D_.get(t);if(!r)return;e.D_.set(t,r.withResumeToken(Zf.EMPTY_BYTE_STRING,r.snapshotVersion)),fy(e,t);const i=new lv(r.target,t,n,r.sequenceNumber);dy(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){$d("RemoteStore","Failed to raise snapshot:",t),await _y(e,t)}}async function _y(e,t,n){if(!Mf(t))throw t;e.C_.add(1),await cy(e),e.M_.set("Offline"),n||(n=()=>Lv(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{$d("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await ly(e)}))}function xy(e,t){return t().catch((n=>_y(e,n,t)))}async function ky(e){const t=nf(e),n=My(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;Sy(t);)try{const e=await Fv(t.localStore,r);if(null===e){0===t.b_.length&&n.Zo();break}r=e.batchId,Ey(t,e)}catch(e){await _y(t,e)}Cy(t)&&Ty(t)}function Sy(e){return my(e)&&e.b_.length<10}function Ey(e,t){e.b_.push(t);const n=My(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function Cy(e){return my(e)&&!My(e).jo()&&e.b_.length>0}function Ty(e){My(e).start()}async function Oy(e){My(e).E_()}async function Ay(e){const t=My(e);for(const n of e.b_)t.P_(n.mutations)}async function Ny(e,t,n){const r=e.b_.shift(),i=lm.from(r,t,n);await xy(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await ky(e)}async function Iy(e,t){t&&My(e).h_&&await async function(e,t){if(function(e){return fm(e)&&e!==rf.ABORTED}(t.code)){const n=e.b_.shift();My(e).Yo(),await xy(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await ky(e)}}(e,t),Cy(e)&&Ty(e)}async function Py(e,t){const n=nf(e);n.asyncQueue.verifyOperationInProgress(),$d("RemoteStore","RemoteStore received new credentials");const r=my(n);n.C_.add(3),await cy(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await ly(n)}async function Ry(e,t){const n=nf(e);t?(n.C_.delete(2),await ly(n)):t||(n.C_.add(2),await cy(n),n.M_.set("Unknown"))}function Dy(e){return e.O_||(e.O_=function(e,t,n){const r=nf(e);return r.A_(),new ry(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:yy.bind(null,e),Io:by.bind(null,e),a_:wy.bind(null,e)}),e.v_.push((async t=>{t?(e.O_.Yo(),gy(e)?py(e):e.M_.set("Unknown")):(await e.O_.stop(),vy(e))}))),e.O_}function My(e){return e.N_||(e.N_=function(e,t,n){const r=nf(e);return r.A_(),new iy(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:Oy.bind(null,e),Io:Iy.bind(null,e),T_:Ay.bind(null,e),I_:Ny.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await ky(e)):(await e.N_.stop(),e.b_.length>0&&($d("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]))}))),e.N_}class Ly{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new sf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new Ly(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new of(rf.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jy(e,t){if(Xd("AsyncQueue","".concat(t,": ").concat(e)),Mf(e))return new of(rf.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Fy{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ef.comparator(t.key,n.key):(e,t)=>Ef.comparator(e.key,t.key),this.keyedMap=wg(),this.sortedSet=new Kf(this.comparator)}static emptySet(e){return new Fy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fy))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Fy;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class qy{constructor(){this.B_=new Kf(Ef.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):ef():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class By{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new By(e,t,Fy.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Uy{constructor(){this.k_=void 0,this.listeners=[]}}class Vy{constructor(){this.queries=new mg((e=>ug(e)),cg),this.onlineState="Unknown",this.q_=new Set}}async function zy(e,t){const n=nf(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new Uy),i)try{o.k_=await n.onListen(r)}catch(e){const n=jy(e,"Initialization of query '".concat(hg(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,o),o.listeners.push(t),t.Q_(n.onlineState),o.k_&&t.K_(o.k_)&&Gy(n)}async function Hy(e,t){const n=nf(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.listeners.indexOf(t);e>=0&&(o.listeners.splice(e,1),i=0===o.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Wy(e,t){const n=nf(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.K_(i)&&(r=!0);t.k_=i}}r&&Gy(n)}function Ky(e,t,n){const r=nf(e),i=r.queries.get(t);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(t)}function Gy(e){e.q_.forEach((e=>{e.next()}))}class Yy{constructor(e,t,n){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new By(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){if(e.docChanges.length>0)return!0;const t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}H_(e){e=By.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class Qy{constructor(e){this.key=e}}class $y{constructor(e){this.key=e}}class Xy{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=Tg(),this.mutatedKeys=Tg(),this._a=pg(e),this.aa=new Fy(this._a)}get ua(){return this.ia}ca(e,t){const n=t?t.la:new qy,r=t?t.aa:this.aa;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=dg(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ha(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this._a(u,a)>0||l&&this._a(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(s=!0)),f&&(u?(o=o.add(u),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{aa:o,la:n,Zi:s,mutatedKeys:i}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const o=e.la.L_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ef()}};return n(e)-n(t)}(e.type,t.type)||this._a(e.doc,t.doc))),this.Pa(n),r=null!=r&&r;const s=t&&!r?this.Ia():[],a=0===this.oa.size&&this.current&&!r?1:0,l=a!==this.sa;return this.sa=a,0!==o.length||l?{snapshot:new By(this.query,e.aa,i,o,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:s}:{Ta:s}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new qy,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach((e=>this.ia=this.ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ia=this.ia.delete(e))),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=Tg(),this.aa.forEach((e=>{this.Ea(e.key)&&(this.oa=this.oa.add(e.key))}));const t=[];return e.forEach((e=>{this.oa.has(e)||t.push(new $y(e))})),this.oa.forEach((n=>{e.has(n)||t.push(new Qy(n))})),t}da(e){this.ia=e.ls,this.oa=Tg();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return By.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class Jy{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Zy{constructor(e){this.key=e,this.Ra=!1}}class eb{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Va={},this.ma=new mg((e=>ug(e)),cg),this.fa=new Map,this.ga=new Set,this.pa=new Kf(Ef.comparator),this.ya=new Map,this.wa=new _v,this.Sa={},this.ba=new Map,this.Da=gv.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function tb(e,t){const n=bb(e);let r,i;const o=n.ma.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Aa();else{const e=await qv(n.localStore,sg(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await nb(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&uy(n.remoteStore,e)}return i}async function nb(e,t,n,r,i){e.va=(t,n,r)=>async function(e,t,n,r){let i=t.view.ca(n);i.Zi&&(i=await Uv(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ca(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return fb(e,t.targetId,a.Ta),a.snapshot}(e,t,n,r);const o=await Uv(e.localStore,t,!0),s=new Xy(t,o.ls),a=s.ca(o.documents),l=km.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,l);fb(e,n,c.Ta);const u=new Jy(t,n,s);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),c.snapshot}async function rb(e,t){const n=nf(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter((e=>!cg(e,t)))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Bv(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),hy(n.remoteStore,r.targetId),hb(n,r.targetId)})).catch(Rf)):(hb(n,r.targetId),await Bv(n.localStore,r.targetId,!0))}async function ib(e,t){const n=nf(e);try{const e=await function(e,t){const n=nf(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const s=[];t.targetChanges.forEach(((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.qr.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,o.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Zf.EMPTY_BYTE_STRING,wf.min()).withLastLimboFreeSnapshotVersion(wf.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&s.push(n.qr.updateTargetData(e,c))}));let a=yg(),l=Tg();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(jv(e,o,t.documentUpdates).next((e=>{a=e.us,l=e.cs}))),!r.isEqual(wf.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return Df.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ya.get(t);r&&(tf(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ra=!0:e.modifiedDocuments.size>0?tf(r.Ra):e.removedDocuments.size>0&&(tf(r.Ra),r.Ra=!1))})),await mb(n,e,t)}catch(e){await Rf(e)}}function ob(e,t,n){const r=nf(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ma.forEach(((n,r)=>{const i=r.view.Q_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=nf(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Q_(t)&&(r=!0)})),r&&Gy(n)}(r.eventManager,t),e.length&&r.Va.a_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function sb(e,t,n){const r=nf(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),o=i&&i.key;if(o){let e=new Kf(Ef.comparator);e=e.insert(o,Cp.newNoDocument(o,wf.min()));const n=Tg().add(o),i=new xm(wf.min(),new Map,new Kf(vf),e,n);await ib(r,i),r.pa=r.pa.remove(o),r.ya.delete(t),gb(r)}else await Bv(r.localStore,t,!1).then((()=>hb(r,t,n))).catch(Rf)}async function ab(e,t){const n=nf(e),r=t.batch.batchId;try{const e=await function(e,t){const n=nf(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=Df.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);tf(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Tg();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);ub(n,r,null),cb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await mb(n,e)}catch(e){await Rf(e)}}async function lb(e,t,n){const r=nf(e);try{const e=await function(e,t){const n=nf(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(tf(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);ub(r,t,n),cb(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await mb(r,e)}catch(n){await Rf(n)}}function cb(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function ub(e,t,n){const r=nf(e);let i=r.Sa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function hb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((t=>{e.wa.containsKey(t)||db(e,t)}))}function db(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);null!==n&&(hy(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),gb(e))}function fb(e,t,n){for(const r of n)r instanceof Qy?(e.wa.addReference(r.key,t),pb(e,r)):r instanceof $y?($d("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||db(e,r.key)):ef()}function pb(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||($d("SyncEngine","New document in limbo: "+n),e.ga.add(r),gb(e))}function gb(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new Ef(xf.fromString(t)),r=e.Da.next();e.ya.set(r,new Zy(n)),e.pa=e.pa.insert(n,r),uy(e.remoteStore,new lv(sg(ng(n.path)),r,"TargetPurposeLimboResolution",Lf._e))}}async function mb(e,t,n){const r=nf(e),i=[],o=[],s=[];r.ma.isEmpty()||(r.ma.forEach(((e,a)=>{s.push(r.va(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Nv.Qi(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.Va.a_(i),await async function(e,t){const n=nf(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>Df.forEach(t,(t=>Df.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>Df.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Mf(e))throw e;$d("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,o))}async function vb(e,t){const n=nf(e);if(!n.currentUser.isEqual(t)){$d("SyncEngine","User change. New user:",t.toKey());const e=await Mv(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new of(rf.CANCELLED,t))}))})),e.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await mb(n,e._s)}}function yb(e,t){const n=nf(e),r=n.ya.get(t);if(r&&r.Ra)return Tg().add(r.key);{let e=Tg();const r=n.fa.get(t);if(!r)return e;for(const t of r){const r=n.ma.get(t);e=e.unionWith(r.view.ua)}return e}}function bb(e){const t=nf(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ib.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=yb.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sb.bind(null,t),t.Va.a_=Wy.bind(null,t.eventManager),t.Va.Fa=Ky.bind(null,t.eventManager),t}function wb(e){const t=nf(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ab.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=lb.bind(null,t),t}class _b{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ey(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Dv(this.persistence,new Pv,e.initialUser,this.serializer)}createPersistence(e){return new Tv(Av.jr,this.serializer)}createSharedClientState(e){return new Hv}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class xb{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ob(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=vb.bind(null,this.syncEngine),await Ry(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Vy}createDatastore(e){const t=ey(e.databaseInfo.databaseId),n=function(e){return new Jv(e)}(e.databaseInfo);return function(e,t,n,r){return new oy(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new ay(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>ob(this.syncEngine,e,0)),Kv.D()?new Kv:new Wv)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new eb(e,t,n,r,i,o);return s&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=nf(e);$d("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await cy(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}class kb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Xd("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Sb{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Kd.UNAUTHENTICATED,this.clientId=mf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{$d("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>($d("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new of(rf.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(dL){const n=jy(dL,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Eb(e,t){e.asyncQueue.verifyOperationInProgress(),$d("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Mv(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Cb(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ob(e);$d("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>Py(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Py(t.remoteStore,n))),e._onlineComponents=t}function Tb(e){return"FirebaseError"===e.name?e.code===rf.FAILED_PRECONDITION||e.code===rf.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Ob(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){$d("FirestoreClient","Using user provided OfflineComponentProvider");try{await Eb(e,e._uninitializedComponentsProvider._offline)}catch(dL){const n=dL;if(!Tb(n))throw n;Jd("Error using user provided cache. Falling back to memory cache: "+n),await Eb(e,new _b)}}else $d("FirestoreClient","Using default OfflineComponentProvider"),await Eb(e,new _b);return e._offlineComponents}async function Ab(e){return e._onlineComponents||(e._uninitializedComponentsProvider?($d("FirestoreClient","Using user provided OnlineComponentProvider"),await Cb(e,e._uninitializedComponentsProvider._online)):($d("FirestoreClient","Using default OnlineComponentProvider"),await Cb(e,new xb))),e._onlineComponents}function Nb(e){return Ab(e).then((e=>e.syncEngine))}async function Ib(e){const t=await Ab(e),n=t.eventManager;return n.onListen=tb.bind(null,t.syncEngine),n.onUnlisten=rb.bind(null,t.syncEngine),n}function Pb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new sf;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new kb({next:o=>{t.enqueueAndForget((()=>Hy(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new of(rf.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new of(rf.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new Yy(ng(n.path),o,{includeMetadataChanges:!0,J_:!0});return zy(e,s)}(await Ib(e),e.asyncQueue,t,n,r))),r.promise}function Rb(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Db=new Map;function Mb(e,t,n){if(!n)throw new of(rf.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Lb(e){if(!Ef.isDocumentKey(e))throw new of(rf.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function jb(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":ef()}function Fb(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new of(rf.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jb(e);throw new of(rf.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class qb{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new of(rf.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new of(rf.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new of(rf.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Rb(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new of(rf.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new of(rf.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new of(rf.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bb{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qb({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new of(rf.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new of(rf.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qb(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new lf;switch(e.type){case"firstParty":return new df(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new of(rf.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Db.get(e);t&&($d("ComponentProvider","Removing Datastore"),Db.delete(e),t.terminate())}(this),Promise.resolve()}}class Ub{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ub(this.firestore,e,this._query)}}class Vb{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zb(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vb(this.firestore,e,this._key)}}class zb extends Ub{constructor(e,t,n){super(e,t,ng(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vb(this.firestore,null,new Ef(e))}withConverter(e){return new zb(this.firestore,e,this._path)}}function Hb(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=di(e),1===arguments.length&&(t=mf.newId()),Mb("doc","path",t),e instanceof Bb){const n=xf.fromString(t,...r);return Lb(n),new Vb(e,null,new Ef(n))}{if(!(e instanceof Vb||e instanceof zb))throw new of(rf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(xf.fromString(t,...r));return Lb(n),new Vb(e.firestore,e instanceof zb?e.converter:null,new Ef(n))}}class Wb{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new ty(this,"async_queue_retry"),this.iu=()=>{const e=Zv();e&&$d("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=Zv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=Zv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new sf;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(GV){if(!Mf(GV))throw GV;$d("AsyncQueue","Operation failed with retryable error: "+GV)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Xd("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=Ly.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(r),r}su(){this.eu&&ef()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}class Kb extends Bb{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Wb,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Yb(this),this._firestoreClient.terminate()}}function Gb(e){return e._firestoreClient||Yb(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Yb(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new ap(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Rb(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Sb(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class Qb{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qb(Zf.fromBase64String(e))}catch(e){throw new of(rf.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Qb(Zf.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class $b{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new of(rf.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sf(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Xb{constructor(e){this._methodName=e}}class Jb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new of(rf.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new of(rf.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return vf(this._lat,e._lat)||vf(this._long,e._long)}}const Zb=/^__.*__$/;class ew{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new tm(e,this.data,this.fieldMask,t,this.fieldTransforms):new em(e,this.data,t,this.fieldTransforms)}}function tw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ef()}}class nw{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new nw(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return fw(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(tw(this.Iu)&&Zb.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class rw{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ey(e)}pu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new nw({Iu:e,methodName:t,gu:n,path:Sf.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iw(e){const t=e._freezeSettings(),n=ey(e._databaseId);return new rw(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ow(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.pu(o.merge||o.mergeFields?2:0,t,n,i);cw("Data must be an object, but it was:",s,r);const a=aw(r,s);let l,c;if(o.merge)l=new Xf(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=uw(t,r,n);if(!s.contains(i))throw new of(rf.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));pw(e,i)||e.push(i)}l=new Xf(e),c=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=s.fieldTransforms;return new ew(new Sp(a),l,c)}function sw(e,t){if(lw(e=di(e)))return cw("Unsupported field value:",t,e),aw(e,t);if(e instanceof Xb)return function(e,t){if(!tw(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=sw(i,t.Vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=di(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Pg(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=bf.fromDate(e);return{timestampValue:Lm(t.serializer,n)}}if(e instanceof bf){const n=new bf(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Lm(t.serializer,n)}}if(e instanceof Jb)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Qb)return{bytesValue:jm(t.serializer,e._byteString)};if(e instanceof Vb){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.mu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Bm(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(jb(e)))}(e,t)}function aw(e,t){const n={};return Wf(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Hf(e,((e,r)=>{const i=sw(r,t.Eu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function lw(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof bf||e instanceof Jb||e instanceof Qb||e instanceof Vb||e instanceof Xb)}function cw(e,t,n){if(!lw(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=jb(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function uw(e,t,n){if((t=di(t))instanceof $b)return t._internalPath;if("string"==typeof t)return dw(e,t);throw fw("Field path arguments must be of type string or ",e,!1,void 0,n)}const hw=new RegExp("[~\\*/\\[\\]]");function dw(e,t,n){if(t.search(hw)>=0)throw fw("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new $b(...t.split("."))._internalPath}catch(ql){throw fw("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function fw(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new of(rf.INVALID_ARGUMENT,a+e+l)}function pw(e,t){return e.some((e=>e.isEqual(t)))}class gw{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Vb(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new mw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vw("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class mw extends gw{data(){return super.data()}}function vw(e,t){return"string"==typeof t?dw(e,t):t instanceof $b?t._internalPath:t._delegate._internalPath}class yw{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(up(e)){case 0:return null;case 1:return e.booleanValue;case 2:return np(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ef()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Hf(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Jb(np(e.latitude),np(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=op(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(sp(e));default:return null}}convertTimestamp(e){const t=tp(e);return new bf(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=xf.fromString(e);tf(av(n));const r=new lp(n.get(1),n.get(3)),i=new Ef(n.popFirst(5));return r.isEqual(t)||Xd("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function bw(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ww{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class _w extends gw{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new xw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(vw("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class xw extends _w{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}function kw(e){e=Fb(e,Vb);const t=Fb(e.firestore,Kb);return Pb(Gb(t),e._key).then((n=>Tw(t,e,n)))}class Sw extends yw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qb(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vb(this.firestore,null,t)}}function Ew(e,t,n){e=Fb(e,Vb);const r=Fb(e.firestore,Kb),i=bw(e.converter,t,n);return Cw(r,[ow(iw(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Kg.none())])}function Cw(e,t){return function(e,t){const n=new sf;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=wb(e);try{const e=await function(e,t){const n=nf(e),r=bf.now(),i=t.reduce(((e,t)=>e.add(t.key)),Tg());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=yg(),l=Tg();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=Jg(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new tm(e.key,t,Ep(t.value.mapValue),Kg.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:_g(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Sa[e.currentUser.toKey()];r||(r=new Kf(vf)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(r,e.batchId,n),await mb(r,e.changes),await ky(r.remoteStore)}catch(e){const t=jy(e,"Failed to persist write");n.reject(t)}}(await Nb(e),t,n))),n.promise}(Gb(e),t)}function Tw(e,t,n){const r=n.docs.get(t._key),i=new Sw(e);return new _w(e,i,t._key,r,new ww(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Gd=e}(eo),$i(new fi("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new Kb(new uf(e.getProvider("auth-internal")),new pf(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new of(rf.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lp(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),ro(Wd,"4.4.0",e),ro(Wd,"4.4.0","esm2017")}();const Ow="@firebase/database",Aw="1.0.2";let Nw="";function Iw(e){Nw=e}class Pw{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),$r(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Qr(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Rw{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return Jr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Dw=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Pw(t)}}catch(GV){}return new Rw},Mw=Dw("localStorage"),Lw=Dw("sessionStorage"),jw=new ki("@firebase/database"),Fw=function(){let e=1;return function(){return e++}}(),qw=function(e){const t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);if(i>=55296&&i<=56319){const t=i-55296;r++,Sr(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(t<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new ai;n.update(t);const r=n.digest();return Tr.encodeByteArray(r)},Bw=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=Bw.apply(null,n):e+="object"===typeof n?$r(n):n,e+=" "}return e};let Uw=null,Vw=!0;const zw=function(e,t){Sr(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(jw.logLevel=yi.VERBOSE,Uw=jw.log.bind(jw),t&&Lw.set("logging_enabled",!0)):"function"===typeof e?Uw=e:(Uw=null,Lw.remove("logging_enabled"))},Hw=function(){if(!0===Vw&&(Vw=!1,null===Uw&&!0===Lw.get("logging_enabled")&&zw(!0)),Uw){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Bw.apply(null,t);Uw(r)}},Ww=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Hw(e,...n)}},Kw=function(){const e="FIREBASE INTERNAL ERROR: "+Bw(...arguments);jw.error(e)},Gw=function(){const e="FIREBASE FATAL ERROR: ".concat(Bw(...arguments));throw jw.error(e),new Error(e)},Yw=function(){const e="FIREBASE WARNING: "+Bw(...arguments);jw.warn(e)},Qw=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},$w="[MIN_NAME]",Xw="[MAX_NAME]",Jw=function(e,t){if(e===t)return 0;if(e===$w||t===Xw)return-1;if(t===$w||e===Xw)return 1;{const n=s_(e),r=s_(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},Zw=function(e,t){return e===t?0:e<t?-1:1},e_=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+$r(t))},t_=function(e){if("object"!==typeof e||null===e)return $r(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=$r(t[r]),n+=":",n+=t_(e[t[r]]);return n+="}",n},n_=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function r_(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const i_=function(e){Sr(!Qw(e),"Invalid JSON number");const t=1023;let n,r,i,o,s;0===e?(r=0,i=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(o=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=o+t,i=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(s=52;s;s-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(s=11;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(s=0;s<64;s+=8){let e=parseInt(l.substr(s,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const o_=new RegExp("^-?(0*)\\d{1,10}$"),s_=function(e){if(o_.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},a_=function(e){try{e()}catch(GV){setTimeout((()=>{const t=GV.stack||"";throw Yw("Exception was thrown by user callback.",t),GV}),Math.floor(0))}},l_=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class c_{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){Yw('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class u_{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(Hw("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Yw(e)}}class h_{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}h_.OWNER="owner";const d_="5",f_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,p_="ac",g_="websocket",m_="long_polling";class v_{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mw.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Mw.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function y_(e,t,n){let r;if(Sr("string"===typeof t,"typeof type must == string"),Sr("object"===typeof n,"typeof params must == object"),t===g_)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==m_)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return r_(n,((e,t)=>{i.push(e+"="+t)})),r+i.join("&")}class b_{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Jr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Pr(this.counters_)}}const w_={},__={};function x_(e){const t=e.toString();return w_[t]||(w_[t]=new b_),w_[t]}class k_{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&a_((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const S_="start";class E_{constructor(e,t,n,r,i,o,s){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ww(e),this.stats_=x_(t),this.urlFn=e=>(this.appCheckToken&&(e[p_]=this.appCheckToken),y_(t,m_,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new k_(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Wr()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((()=>{if(this.isClosed_)return;this.scriptTagHolder=new C_((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o,s,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===S_)n.id=o,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(()=>{n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];const[i,o]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[S_]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=d_,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[p_]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&f_.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){E_.forceAllow_=!0}static forceDisallow(){E_.forceDisallow_=!0}static isAvailable(){return!Wr()&&(!!E_.forceAllow_||!E_.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=$r(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Ar(t),r=n_(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Wr())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=$r(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class C_{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Wr())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Fw(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=C_.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(GV){Hw("frame writing exception"),GV.stack&&Hw(GV.stack),Hw(GV)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Hw("No IE domain setting required")}catch(GV){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,(()=>{clearTimeout(r),n()}))}addTag(e,t){Wr()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Hw("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(GV){}}),Math.floor(1))}}let T_=null;"undefined"!==typeof MozWebSocket?T_=MozWebSocket:"undefined"!==typeof WebSocket&&(T_=WebSocket);class O_{constructor(e,t,n,r,i,o,s){this.connId=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ww(this.connId),this.stats_=x_(t),this.connURL=O_.connectionURL_(t,o,s,r,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,r,i){const o={};return o.v=d_,!Wr()&&"undefined"!==typeof location&&location.hostname&&f_.test(location.hostname)&&(o.r="f"),t&&(o.s=t),n&&(o.ls=n),r&&(o[p_]=r),i&&(o.p=i),y_(e,g_,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mw.set("previous_websocket_failure",!0);try{let e;if(Wr()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(d_,"/").concat(Nw,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/roj",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBTVY40vxNb5Odkg7pCGq_qLXrcJ70Y4lQ",REACT_APP_AUTH_DOMAIN:"kimoj-778f5.firebaseapp.com",REACT_APP_PROJECT_ID:"kimoj-778f5",REACT_APP_STORAGE_BUCKET:"kimoj-778f5.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"650038740242",REACT_APP_APP_ID:"1:650038740242:web:d958dcc42de18e36469fcb",REACT_APP_DATABASE_URL:"https://kimoj-778f5-default-rtdb.firebaseio.com"},r=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;r&&(e.proxy={origin:r})}this.mySock=new T_(this.connURL,[],e)}catch(GV){this.log_("Error instantiating WebSocket.");const t=GV.message||GV.data;return t&&this.log_(t),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){O_.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==T_&&!O_.forceDisallow_}static previouslyFailed(){return Mw.isInMemoryStorage||!0===Mw.get("previous_websocket_failure")}markConnectionHealthy(){Mw.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=Qr(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Sr(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=$r(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=n_(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(GV){this.log_("Exception thrown from WebSocket.send():",GV.message||GV.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}O_.responsesRequiredToBeHealthy=2,O_.healthyTimeout=3e4;class A_{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[E_,O_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=O_&&O_.isAvailable();let n=t&&!O_.previouslyFailed();if(e.webSocketOnly&&(t||Yw("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[O_];else{const e=this.transports_=[];for(const t of A_.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);A_.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}A_.globalTransportInitialized_=!1;class N_{constructor(e,t,n,r,i,o,s,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ww("c:"+this.id+":"),this.transportManager_=new A_(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=l_((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=e_("t",e),n=e_("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=e_("t",e),n=e_("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=e_("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Kw("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Kw("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),d_!==n&&Yw("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),l_((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):l_((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mw.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class I_{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class P_{constructor(e){this.allowedEvents_=e,this.listeners_={},Sr(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0;e<i.length;e++)i[e].callback.apply(i[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){Sr(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}class R_ extends P_{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||zr()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new R_}getInitialEvent(e){return Sr("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const D_=32,M_=768;class L_{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function j_(){return new L_("")}function F_(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function q_(e){return e.pieces_.length-e.pieceNum_}function B_(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new L_(e.pieces_,t)}function U_(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function V_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function z_(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new L_(t,0)}function H_(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof L_)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new L_(n,0)}function W_(e){return e.pieceNum_>=e.pieces_.length}function K_(e,t){const n=F_(e),r=F_(t);if(null===n)return t;if(n===r)return K_(B_(e),B_(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function G_(e,t){const n=V_(e,0),r=V_(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=Jw(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function Y_(e,t){if(q_(e)!==q_(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Q_(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(q_(e)>q_(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class $_{constructor(e,t){this.errorPrefix_=t,this.parts_=V_(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=hi(this.parts_[n]);X_(this)}}function X_(e){if(e.byteLength_>M_)throw new Error(e.errorPrefix_+"has a key path longer than "+M_+" bytes ("+e.byteLength_+").");if(e.parts_.length>D_)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+D_+") or object contains a cycle "+J_(e))}function J_(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class Z_ extends P_{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new Z_}getInitialEvent(e){return Sr("visible"===e,"Unknown event type: "+e),[this.visible_]}}const ex=1e3;class tx extends I_{constructor(e,t,n,r,i,o,s,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=r,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=s,this.authOverride_=a,this.id=tx.nextPersistentConnectionId_++,this.log_=Ww("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ex,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!Wr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Z_.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&R_.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_($r(i)),Sr(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Br,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Sr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Sr(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+n+" for "+r);const i={p:n};e.tag&&(i.q=t._queryObject,i.t=e.tag),i.h=e.hashFn(),this.sendRequest("q",i,(i=>{const o=i.d,s=i.s;tx.warnOnListenWarnings_(o,t);(this.listens.get(n)&&this.listens.get(n).get(r))===e&&(this.log_("listen response",i),"ok"!==s&&this.removeListen_(n,r),e.onComplete&&e.onComplete(s,o))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&Jr(e,"w")){const n=Zr(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Yw("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=Xr(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=Xr(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Sr(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(e=>{r&&setTimeout((()=>{r(e.s,e.d)}),Math.floor(0))}))}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+$r(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Kw("Unrecognized action received from server: "+$r(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Sr(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ex,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ex,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ex),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+tx.nextConnectionId_++,i=this.lastSessionId;let o=!1,s=null;const a=function(){s?s.close():(o=!0,n())},l=function(e){Sr(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);o?Hw("getToken() completed but was canceled"):(Hw("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,s=new N_(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{Yw(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")}),i))}catch(Kw){this.log_("Failed to get token: "+Kw),o||(this.repoInfo_.nodeAdmin&&Yw(Kw),a())}}}interrupt(e){Hw("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Hw("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ei(this.interruptReasons_)&&(this.reconnectDelay_=ex,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>t_(e))).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new L_(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){Hw("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Hw("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";Wr()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Nw.replace(/\./g,"-")]=1,zr()?e["framework.cordova"]=1:Hr()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=R_.getInstance().currentlyOnline();return ei(this.interruptReasons_)&&e}}tx.nextPersistentConnectionId_=0,tx.nextConnectionId_=0;class nx{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new nx(e,t)}}class rx{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new nx($w,e),r=new nx($w,t);return 0!==this.compare(n,r)}minPost(){return nx.MIN}}let ix;class ox extends rx{static get __EMPTY_NODE(){return ix}static set __EMPTY_NODE(e){ix=e}compare(e,t){return Jw(e.name,t.name)}isDefinedOn(e){throw Er("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return nx.MIN}maxPost(){return new nx(Xw,ix)}makePost(e,t){return Sr("string"===typeof e,"KeyIndex indexValue must always be a string."),new nx(e,ix)}toString(){return".key"}}const sx=new ox;class ax{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class lx{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:lx.RED,this.left=null!=r?r:cx.EMPTY_NODE,this.right=null!=i?i:cx.EMPTY_NODE}copy(e,t,n,r,i){return new lx(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return cx.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return cx.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,lx.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,lx.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}lx.RED=!0,lx.BLACK=!1;class cx{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cx.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new cx(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,lx.BLACK,null,null))}remove(e){return new cx(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,lx.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ax(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ax(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ax(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ax(this.root_,null,this.comparator_,!0,e)}}function ux(e,t){return Jw(e.name,t.name)}function hx(e,t){return Jw(e,t)}let dx;cx.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new lx(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const fx=function(e){return"number"===typeof e?"number:"+i_(e):"string:"+e},px=function(e){if(e.isLeafNode()){const t=e.val();Sr("string"===typeof t||"number"===typeof t||"object"===typeof t&&Jr(t,".sv"),"Priority must be a string or number.")}else Sr(e===dx||e.isEmpty(),"priority of unexpected type.");Sr(e===dx||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let gx,mx,vx;class yx{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yx.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Sr(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),px(this.priorityNode_)}static set __childrenNodeConstructor(e){gx=e}static get __childrenNodeConstructor(){return gx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new yx(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:yx.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return W_(e)?this:".priority"===F_(e)?this.priorityNode_:yx.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:yx.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=F_(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Sr(".priority"!==n||1===q_(e),".priority must be the last token in a path"),this.updateImmediateChild(n,yx.__childrenNodeConstructor.EMPTY_NODE.updateChild(B_(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+fx(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?i_(this.value_):this.value_,this.lazyHash_=qw(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===yx.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof yx.__childrenNodeConstructor?-1:(Sr(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,r=yx.VALUE_TYPE_ORDER.indexOf(t),i=yx.VALUE_TYPE_ORDER.indexOf(n);return Sr(r>=0,"Unknown leaf type: "+t),Sr(i>=0,"Unknown leaf type: "+n),r===i?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}yx.VALUE_TYPE_ORDER=["object","boolean","number","string"];const bx=new class extends rx{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Jw(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return nx.MIN}maxPost(){return new nx(Xw,new yx("[PRIORITY-POST]",vx))}makePost(e,t){const n=mx(e);return new nx(t,new yx("[PRIORITY-POST]",n))}toString(){return".priority"}},wx=Math.log(2);class _x{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/wx,10)),this.current_=this.count-1;const n=(r=this.count,parseInt(Array(r+1).join("1"),2));var r;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const xx=function(e,t,n,r){e.sort(t);const i=function(t,r){const o=r-t;let s,a;if(0===o)return null;if(1===o)return s=e[t],a=n?n(s):s,new lx(a,s.node,lx.BLACK,null,null);{const l=parseInt(o/2,10)+t,c=i(t,l),u=i(l+1,r);return s=e[l],a=n?n(s):s,new lx(a,s.node,lx.BLACK,c,u)}},o=function(t){let r=null,o=null,s=e.length;const a=function(t,r){const o=s-t,a=s;s-=t;const c=i(o+1,a),u=e[o],h=n?n(u):u;l(new lx(h,u.node,r,null,c))},l=function(e){r?(r.left=e,r=e):(o=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,lx.BLACK):(a(r,lx.BLACK),a(r,lx.RED))}return o}(new _x(e.length));return new cx(r||t,o)};let kx;const Sx={};class Ex{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return Sr(Sx&&bx,"ChildrenNode.ts has not been loaded"),kx=kx||new Ex({".priority":Sx},{".priority":bx}),kx}get(e){const t=Zr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof cx?t:null}hasIndex(e){return Jr(this.indexSet_,e.toString())}addIndex(e,t){Sr(e!==sx,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(nx.Wrap);let o,s=i.getNext();for(;s;)r=r||e.isDefinedOn(s.node),n.push(s),s=i.getNext();o=r?xx(n,e.getCompare()):Sx;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=o,new Ex(c,l)}addToIndexes(e,t){const n=ti(this.indexes_,((n,r)=>{const i=Zr(this.indexSet_,r);if(Sr(i,"Missing index implementation for "+r),n===Sx){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(nx.Wrap);let o=r.getNext();for(;o;)o.name!==e.name&&n.push(o),o=r.getNext();return n.push(e),xx(n,i.getCompare())}return Sx}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new nx(e.name,r))),i.insert(e,e.node)}}));return new Ex(n,this.indexSet_)}removeFromIndexes(e,t){const n=ti(this.indexes_,(n=>{if(n===Sx)return n;{const r=t.get(e.name);return r?n.remove(new nx(e.name,r)):n}}));return new Ex(n,this.indexSet_)}}let Cx;class Tx{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&px(this.priorityNode_),this.children_.isEmpty()&&Sr(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Cx||(Cx=new Tx(new cx(hx),null,Ex.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Cx}updatePriority(e){return this.children_.isEmpty()?this:new Tx(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?Cx:t}}getChild(e){const t=F_(e);return null===t?this:this.getImmediateChild(t).getChild(B_(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Sr(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new nx(e,t);let r,i;t.isEmpty()?(r=this.children_.remove(e),i=this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),i=this.indexMap_.addToIndexes(n,this.children_));const o=r.isEmpty()?Cx:this.priorityNode_;return new Tx(r,o,i)}}updateChild(e,t){const n=F_(e);if(null===n)return t;{Sr(".priority"!==F_(e)||1===q_(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(B_(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,r=0,i=!0;if(this.forEachChild(bx,((o,s)=>{t[o]=s.val(e),n++,i&&Tx.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!e&&i&&r<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+fx(this.getPriority().val())+":"),this.forEachChild(bx,((t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":qw(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new nx(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new nx(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new nx(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,nx.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,nx.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Ox?-1:0}withIndex(e){if(e===sx||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Tx(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===sx||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(bx),n=t.getIterator(bx);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===sx?null:this.indexMap_.get(e.toString())}}Tx.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const Ox=new class extends Tx{constructor(){super(new cx(hx),Tx.EMPTY_NODE,Ex.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Tx.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(nx,{MIN:{value:new nx($w,Tx.EMPTY_NODE)},MAX:{value:new nx(Xw,Ox)}}),ox.__EMPTY_NODE=Tx.EMPTY_NODE,yx.__childrenNodeConstructor=Tx,dx=Ox,function(e){vx=e}(Ox);const Ax=!0;function Nx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Tx.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Sr(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new yx(e,Nx(t))}if(e instanceof Array||!Ax){let n=Tx.EMPTY_NODE;return r_(e,((t,r)=>{if(Jr(e,t)&&"."!==t.substring(0,1)){const e=Nx(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(Nx(t))}{const n=[];let r=!1;if(r_(e,((e,t)=>{if("."!==e.substring(0,1)){const i=Nx(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new nx(e,i)))}})),0===n.length)return Tx.EMPTY_NODE;const i=xx(n,ux,(e=>e.name),hx);if(r){const e=xx(n,bx.getCompare());return new Tx(i,Nx(t),new Ex({".priority":e},{".priority":bx}))}return new Tx(i,Nx(t),Ex.Default)}}!function(e){mx=e}(Nx);class Ix extends rx{constructor(e){super(),this.indexPath_=e,Sr(!W_(e)&&".priority"!==F_(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Jw(e.name,t.name):i}makePost(e,t){const n=Nx(e),r=Tx.EMPTY_NODE.updateChild(this.indexPath_,n);return new nx(t,r)}maxPost(){const e=Tx.EMPTY_NODE.updateChild(this.indexPath_,Ox);return new nx(Xw,e)}toString(){return V_(this.indexPath_,0).join("/")}}const Px=new class extends rx{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Jw(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return nx.MIN}maxPost(){return nx.MAX}makePost(e,t){const n=Nx(e);return new nx(t,n)}toString(){return".value"}};function Rx(e){return{type:"value",snapshotNode:e}}function Dx(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Mx(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Lx(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class jx{constructor(e){this.index_=e}updateChild(e,t,n,r,i,o){Sr(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(Mx(t,s)):Sr(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Dx(t,n)):o.trackChildChange(Lx(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(bx,((e,r)=>{t.hasChild(e)||n.trackChildChange(Mx(e,r))})),t.isLeafNode()||t.forEachChild(bx,((t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Lx(t,r,i))}else n.trackChildChange(Dx(t,r))}))),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Tx.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Fx{constructor(e){this.indexedFilter_=new jx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Fx.getStartPost_(e),this.endPost_=Fx.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,r,i,o){return this.matches(new nx(t,n))||(n=Tx.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)}updateFullNode(e,t,n){t.isLeafNode()&&(t=Tx.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Tx.EMPTY_NODE);const i=this;return t.forEachChild(bx,((e,t)=>{i.matches(new nx(e,t))||(r=r.updateImmediateChild(e,Tx.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class qx{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Fx(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,r,i,o){return this.rangedFilter_.matches(new nx(t,n))||(n=Tx.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=Tx.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=Tx.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;r=r.updateImmediateChild(t.name,t.node),n++}}}else{let e;r=t.withIndex(this.index_),r=r.updatePriority(Tx.EMPTY_NODE),e=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:r=r.updateImmediateChild(t.name,Tx.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let o;if(this.reverse_){const e=this.index_.getCompare();o=(t,n)=>e(n,t)}else o=this.index_.getCompare();const s=e;Sr(s.numChildren()===this.limit_,"");const a=new nx(t,n),l=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(s.hasChild(t)){const e=s.getImmediateChild(t);let u=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||s.hasChild(u.name));)u=r.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:o(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(Lx(t,n,e)),s.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(Mx(t,e));const n=s.updateImmediateChild(t,Tx.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=i&&i.trackChildChange(Dx(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&o(l,a)>=0?(null!=i&&(i.trackChildChange(Mx(l.name,l.node)),i.trackChildChange(Dx(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(l.name,Tx.EMPTY_NODE)):e}}class Bx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=bx}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Sr(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Sr(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:$w}hasEnd(){return this.endSet_}getIndexEndValue(){return Sr(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Sr(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Xw}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Sr(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===bx}copy(){const e=new Bx;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Ux(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Vx(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function zx(e,t){const n=e.copy();return n.index_=t,n}function Hx(e){const t={};if(e.isDefault())return t;let n;if(e.index_===bx?n="$priority":e.index_===Px?n="$value":e.index_===sx?n="$key":(Sr(e.index_ instanceof Ix,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=$r(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=$r(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+$r(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=$r(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+$r(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Wx(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==bx&&(t.i=e.index_.toString()),t}class Kx extends I_{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=Ww("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Sr(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Kx.getListenId_(e,n),s={};this.listens_[o]=s;const a=Hx(e._queryParams);this.restRequest_(i+".json",a,((e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),Zr(this.listens_,o)===s){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}}))}unlisten(e,t){const n=Kx.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Hx(e._queryParams),n=e._path.toString(),r=new Br;return this.restRequest_(n+".json",t,((e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))})),r.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((r=>{let[i,o]=r;i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ii(t);this.log_("Sending REST request for "+s);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let e=null;if(a.status>=200&&a.status<300){try{e=Qr(a.responseText)}catch(GV){Yw("Failed to parse JSON response for "+s+": "+a.responseText)}n(null,e)}else 401!==a.status&&404!==a.status&&Yw("Got unsuccessful REST response for "+s+" Status: "+a.status),n(a.status);n=null}},a.open("GET",s,!0),a.send()}))}}class Gx{constructor(){this.rootNode_=Tx.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Yx(){return{value:null,children:new Map}}function Qx(e,t,n){if(W_(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=F_(t);e.children.has(r)||e.children.set(r,Yx());Qx(e.children.get(r),t=B_(t),n)}}function $x(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}(e,((e,r)=>{$x(r,new L_(t.toString()+"/"+e),n)}))}class Xx{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&r_(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}class Jx{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Xx(e);const n=1e4+2e4*Math.random();l_(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;r_(e,((e,r)=>{r>0&&Jr(this.statsToReport_,e)&&(t[e]=r,n=!0)})),n&&this.server_.reportStats(t),l_(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Zx;function ek(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Zx||(Zx={}));class tk{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Zx.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(W_(this.path)){if(null!=this.affectedTree.value)return Sr(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new L_(e));return new tk(j_(),t,this.revert)}}return Sr(F_(this.path)===e,"operationForChild called for unrelated child."),new tk(B_(this.path),this.affectedTree,this.revert)}}class nk{constructor(e,t){this.source=e,this.path=t,this.type=Zx.LISTEN_COMPLETE}operationForChild(e){return W_(this.path)?new nk(this.source,j_()):new nk(this.source,B_(this.path))}}class rk{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Zx.OVERWRITE}operationForChild(e){return W_(this.path)?new rk(this.source,j_(),this.snap.getImmediateChild(e)):new rk(this.source,B_(this.path),this.snap)}}class ik{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Zx.MERGE}operationForChild(e){if(W_(this.path)){const t=this.children.subtree(new L_(e));return t.isEmpty()?null:t.value?new rk(this.source,j_(),t.value):new ik(this.source,j_(),t)}return Sr(F_(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new ik(this.source,B_(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ok{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(W_(e))return this.isFullyInitialized()&&!this.filtered_;const t=F_(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class sk{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ak(e,t,n,r,i,o){const s=r.filter((e=>e.type===n));s.sort(((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Er("Should only compare child_ events.");const r=new nx(t.childName,t.snapshotNode),i=new nx(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n))),s.forEach((n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach((i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function lk(e,t){return{eventCache:e,serverCache:t}}function ck(e,t,n,r){return lk(new ok(t,n,r),e.serverCache)}function uk(e,t,n,r){return lk(e.eventCache,new ok(t,n,r))}function hk(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function dk(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let fk;class pk{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(fk||(fk=new cx(Zw)),fk);this.value=e,this.children=t}static fromObject(e){let t=new pk(null);return r_(e,((e,n)=>{t=t.set(new L_(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:j_(),value:this.value};if(W_(e))return null;{const n=F_(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(B_(e),t);if(null!=i){return{path:H_(new L_(n),i.path),value:i.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(W_(e))return this;{const t=F_(e),n=this.children.get(t);return null!==n?n.subtree(B_(e)):new pk(null)}}set(e,t){if(W_(e))return new pk(t,this.children);{const n=F_(e),r=(this.children.get(n)||new pk(null)).set(B_(e),t),i=this.children.insert(n,r);return new pk(this.value,i)}}remove(e){if(W_(e))return this.children.isEmpty()?new pk(null):new pk(null,this.children);{const t=F_(e),n=this.children.get(t);if(n){const r=n.remove(B_(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new pk(null):new pk(this.value,i)}return this}}get(e){if(W_(e))return this.value;{const t=F_(e),n=this.children.get(t);return n?n.get(B_(e)):null}}setTree(e,t){if(W_(e))return t;{const n=F_(e),r=(this.children.get(n)||new pk(null)).setTree(B_(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new pk(this.value,i)}}fold(e){return this.fold_(j_(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((r,i)=>{n[r]=i.fold_(H_(e,r),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,j_(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(W_(e))return null;{const r=F_(e),i=this.children.get(r);return i?i.findOnPath_(B_(e),H_(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,j_(),t)}foreachOnPath_(e,t,n){if(W_(e))return this;{this.value&&n(t,this.value);const r=F_(e),i=this.children.get(r);return i?i.foreachOnPath_(B_(e),H_(t,r),n):new pk(null)}}foreach(e){this.foreach_(j_(),e)}foreach_(e,t){this.children.inorderTraversal(((n,r)=>{r.foreach_(H_(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}class gk{constructor(e){this.writeTree_=e}static empty(){return new gk(new pk(null))}}function mk(e,t,n){if(W_(t))return new gk(new pk(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let o=r.value;const s=K_(i,t);return o=o.updateChild(s,n),new gk(e.writeTree_.set(i,o))}{const r=new pk(n),i=e.writeTree_.setTree(t,r);return new gk(i)}}}function vk(e,t,n){let r=e;return r_(n,((e,n)=>{r=mk(r,H_(t,e),n)})),r}function yk(e,t){if(W_(t))return gk.empty();{const n=e.writeTree_.setTree(t,new pk(null));return new gk(n)}}function bk(e,t){return null!=wk(e,t)}function wk(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(K_(n.path,t)):null}function _k(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(bx,((e,n)=>{t.push(new nx(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new nx(e,n.value))})),t}function xk(e,t){if(W_(t))return e;{const n=wk(e,t);return new gk(null!=n?new pk(n):e.writeTree_.subtree(t))}}function kk(e){return e.writeTree_.isEmpty()}function Sk(e,t){return Ek(j_(),e.writeTree_,t)}function Ek(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal(((t,i)=>{".priority"===t?(Sr(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Ek(H_(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(H_(e,".priority"),r)),n}}function Ck(e,t){return qk(t,e)}function Tk(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));Sr(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,s=e.allWrites.length-1;for(;i&&s>=0;){const t=e.allWrites[s];t.visible&&(s>=n&&Ok(t,r.path)?i=!1:Q_(r.path,t.path)&&(o=!0)),s--}if(i){if(o)return function(e){e.visibleWrites=Nk(e.allWrites,Ak,j_()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(r.snap)e.visibleWrites=yk(e.visibleWrites,r.path);else{r_(r.children,(t=>{e.visibleWrites=yk(e.visibleWrites,H_(r.path,t))}))}return!0}return!1}function Ok(e,t){if(e.snap)return Q_(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Q_(H_(e.path,n),t))return!0;return!1}function Ak(e){return e.visible}function Nk(e,t,n){let r=gk.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const e=o.path;let t;if(o.snap)Q_(n,e)?(t=K_(n,e),r=mk(r,t,o.snap)):Q_(e,n)&&(t=K_(e,n),r=mk(r,j_(),o.snap.getChild(t)));else{if(!o.children)throw Er("WriteRecord should have .snap or .children");if(Q_(n,e))t=K_(n,e),r=vk(r,t,o.children);else if(Q_(e,n))if(t=K_(e,n),W_(t))r=vk(r,j_(),o.children);else{const e=Zr(o.children,F_(t));if(e){const n=e.getChild(B_(t));r=mk(r,j_(),n)}}}}}return r}function Ik(e,t,n,r,i){if(r||i){const o=xk(e.visibleWrites,t);if(!i&&kk(o))return n;if(i||null!=n||bk(o,j_())){const o=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Q_(e.path,t)||Q_(t,e.path))};return Sk(Nk(e.allWrites,o,t),n||Tx.EMPTY_NODE)}return null}{const r=wk(e.visibleWrites,t);if(null!=r)return r;{const r=xk(e.visibleWrites,t);if(kk(r))return n;if(null!=n||bk(r,j_())){return Sk(r,n||Tx.EMPTY_NODE)}return null}}}function Pk(e,t,n,r){return Ik(e.writeTree,e.treePath,t,n,r)}function Rk(e,t){return function(e,t,n){let r=Tx.EMPTY_NODE;const i=wk(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(bx,((e,t)=>{r=r.updateImmediateChild(e,t)})),r;if(n){const i=xk(e.visibleWrites,t);return n.forEachChild(bx,((e,t)=>{const n=Sk(xk(i,new L_(e)),t);r=r.updateImmediateChild(e,n)})),_k(i).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}return _k(xk(e.visibleWrites,t)).forEach((e=>{r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Dk(e,t,n,r){return function(e,t,n,r,i){Sr(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=H_(t,n);if(bk(e.visibleWrites,o))return null;{const t=xk(e.visibleWrites,o);return kk(t)?i.getChild(n):Sk(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function Mk(e,t){return function(e,t){return wk(e.visibleWrites,t)}(e.writeTree,H_(e.treePath,t))}function Lk(e,t,n,r,i,o){return function(e,t,n,r,i,o,s){let a;const l=xk(e.visibleWrites,t),c=wk(l,j_());if(null!=c)a=c;else{if(null==n)return[];a=Sk(l,n)}if(a=a.withIndex(s),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=s.getCompare(),n=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s);let l=n.getNext();for(;l&&e.length<i;)0!==t(l,r)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,o)}function jk(e,t,n){return function(e,t,n,r){const i=H_(t,n),o=wk(e.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n))return Sk(xk(e.visibleWrites,i),r.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function Fk(e,t){return qk(H_(e.treePath,t),e.writeTree)}function qk(e,t){return{treePath:e,writeTree:t}}class Bk{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Sr("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Sr(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Lx(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Mx(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Dx(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Er("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Lx(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Uk=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Vk{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new ok(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jk(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:dk(this.viewCache_),i=Lk(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function zk(e,t,n,r,i){const o=new Bk;let s,a;if(n.type===Zx.OVERWRITE){const l=n;l.source.fromUser?s=Kk(e,t,l.path,l.snap,r,i,o):(Sr(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!W_(l.path),s=Wk(e,t,l.path,l.snap,r,i,a,o))}else if(n.type===Zx.MERGE){const l=n;l.source.fromUser?s=function(e,t,n,r,i,o,s){let a=t;return r.foreach(((r,l)=>{const c=H_(n,r);Gk(t,F_(c))&&(a=Kk(e,a,c,l,i,o,s))})),r.foreach(((r,l)=>{const c=H_(n,r);Gk(t,F_(c))||(a=Kk(e,a,c,l,i,o,s))})),a}(e,t,l.path,l.children,r,i,o):(Sr(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),s=Qk(e,t,l.path,l.children,r,i,a,o))}else if(n.type===Zx.ACK_USER_WRITE){const a=n;s=a.revert?function(e,t,n,r,i,o){let s;if(null!=Mk(r,n))return t;{const a=new Vk(r,t,i),l=t.eventCache.getNode();let c;if(W_(n)||".priority"===F_(n)){let n;if(t.serverCache.isFullyInitialized())n=Pk(r,dk(t));else{const e=t.serverCache.getNode();Sr(e instanceof Tx,"serverChildren would be complete if leaf node"),n=Rk(r,e)}c=e.filter.updateFullNode(l,n,o)}else{const i=F_(n);let u=jk(r,i,t.serverCache);null==u&&t.serverCache.isCompleteForChild(i)&&(u=l.getImmediateChild(i)),c=null!=u?e.filter.updateChild(l,i,u,B_(n),a,o):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,Tx.EMPTY_NODE,B_(n),a,o):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=Pk(r,dk(t)),s.isLeafNode()&&(c=e.filter.updateFullNode(c,s,o)))}return s=t.serverCache.isFullyInitialized()||null!=Mk(r,j_()),ck(t,c,s,e.filter.filtersNodes())}}(e,t,a.path,r,i,o):function(e,t,n,r,i,o,s){if(null!=Mk(i,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=r.value){if(W_(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Wk(e,t,n,l.getNode().getChild(n),i,o,a,s);if(W_(n)){let r=new pk(null);return l.getNode().forEachChild(sx,((e,t)=>{r=r.set(new L_(e),t)})),Qk(e,t,n,r,i,o,a,s)}return t}{let c=new pk(null);return r.foreach(((e,t)=>{const r=H_(n,e);l.isCompleteForPath(r)&&(c=c.set(e,l.getNode().getChild(r)))})),Qk(e,t,n,c,i,o,a,s)}}(e,t,a.path,a.affectedTree,r,i,o)}else{if(n.type!==Zx.LISTEN_COMPLETE)throw Er("Unknown operation type: "+n.type);s=function(e,t,n,r,i){const o=t.serverCache,s=uk(t,o.getNode(),o.isFullyInitialized()||W_(n),o.isFiltered());return Hk(e,s,n,r,Uk,i)}(e,t,n.path,r,o)}const l=o.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=hk(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Rx(hk(t)))}}(t,s,l),{viewCache:s,changes:l}}function Hk(e,t,n,r,i,o){const s=t.eventCache;if(null!=Mk(r,n))return t;{let a,l;if(W_(n))if(Sr(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=dk(t),i=Rk(r,n instanceof Tx?n:Tx.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,o)}else{const n=Pk(r,dk(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}else{const c=F_(n);if(".priority"===c){Sr(1===q_(n),"Can't have a priority with additional path components");const i=s.getNode();l=t.serverCache.getNode();const o=Dk(r,n,i,l);a=null!=o?e.filter.updatePriority(i,o):s.getNode()}else{const u=B_(n);let h;if(s.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Dk(r,n,s.getNode(),l);h=null!=e?s.getNode().getImmediateChild(c).updateChild(u,e):s.getNode().getImmediateChild(c)}else h=jk(r,c,t.serverCache);a=null!=h?e.filter.updateChild(s.getNode(),c,h,u,i,o):s.getNode()}}return ck(t,a,s.isFullyInitialized()||W_(n),e.filter.filtersNodes())}}function Wk(e,t,n,r,i,o,s,a){const l=t.serverCache;let c;const u=s?e.filter:e.filter.getIndexedFilter();if(W_(n))c=u.updateFullNode(l.getNode(),r,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,r);c=u.updateFullNode(l.getNode(),e,null)}else{const e=F_(n);if(!l.isCompleteForPath(n)&&q_(n)>1)return t;const i=B_(n),o=l.getNode().getImmediateChild(e).updateChild(i,r);c=".priority"===e?u.updatePriority(l.getNode(),o):u.updateChild(l.getNode(),e,o,i,Uk,null)}const h=uk(t,c,l.isFullyInitialized()||W_(n),u.filtersNodes());return Hk(e,h,n,i,new Vk(i,h,o),a)}function Kk(e,t,n,r,i,o,s){const a=t.eventCache;let l,c;const u=new Vk(i,t,o);if(W_(n))c=e.filter.updateFullNode(t.eventCache.getNode(),r,s),l=ck(t,c,!0,e.filter.filtersNodes());else{const i=F_(n);if(".priority"===i)c=e.filter.updatePriority(t.eventCache.getNode(),r),l=ck(t,c,a.isFullyInitialized(),a.isFiltered());else{const o=B_(n),c=a.getNode().getImmediateChild(i);let h;if(W_(o))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===U_(o)&&e.getChild(z_(o)).isEmpty()?e:e.updateChild(o,r):Tx.EMPTY_NODE}if(c.equals(h))l=t;else{l=ck(t,e.filter.updateChild(a.getNode(),i,h,o,u,s),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function Gk(e,t){return e.eventCache.isCompleteForChild(t)}function Yk(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Qk(e,t,n,r,i,o,s,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=W_(n)?r:new pk(null).setTree(n,r);const u=t.serverCache.getNode();return l.children.inorderTraversal(((n,r)=>{if(u.hasChild(n)){const l=Yk(0,t.serverCache.getNode().getImmediateChild(n),r);c=Wk(e,c,new L_(n),l,i,o,s,a)}})),l.children.inorderTraversal(((n,r)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!u.hasChild(n)&&!l){const l=Yk(0,t.serverCache.getNode().getImmediateChild(n),r);c=Wk(e,c,new L_(n),l,i,o,s,a)}})),c}class $k{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new jx(n.getIndex()),i=(o=n).loadsAllData()?new jx(o.getIndex()):o.hasLimit()?new qx(o):new Fx(o);var o;this.processor_=function(e){return{filter:e}}(i);const s=t.serverCache,a=t.eventCache,l=r.updateFullNode(Tx.EMPTY_NODE,s.getNode(),null),c=i.updateFullNode(Tx.EMPTY_NODE,a.getNode(),null),u=new ok(l,s.isFullyInitialized(),r.filtersNodes()),h=new ok(c,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=lk(h,u),this.eventGenerator_=new sk(this.query_)}get query(){return this.query_}}function Xk(e,t){const n=dk(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!W_(t)&&!n.getImmediateChild(F_(t)).isEmpty())?n.getChild(t):null}function Jk(e){return 0===e.eventRegistrations_.length}function Zk(e,t,n){const r=[];if(n){Sr(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach((e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function eS(e,t,n,r){t.type===Zx.MERGE&&null!==t.source.queryId&&(Sr(dk(e.viewCache_),"We should always have a full cache before handling merges"),Sr(hk(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=zk(e.processor_,i,t,n,r);var s,a;return s=e.processor_,a=o.viewCache,Sr(a.eventCache.getNode().isIndexed(s.filter.getIndex()),"Event snap not indexed"),Sr(a.serverCache.getNode().isIndexed(s.filter.getIndex()),"Server snap not indexed"),Sr(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,tS(e,o.changes,o.viewCache.eventCache.getNode(),null)}function tS(e,t,n,r){const i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){const i=[],o=[];return t.forEach((t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),ak(e,i,"child_removed",t,r,n),ak(e,i,"child_added",t,r,n),ak(e,i,"child_moved",o,r,n),ak(e,i,"child_changed",t,r,n),ak(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}let nS,rS;class iS{constructor(){this.views=new Map}}function oS(e,t,n,r){const i=t.source.queryId;if(null!==i){const o=e.views.get(i);return Sr(null!=o,"SyncTree gave us an op for an invalid query."),eS(o,t,n,r)}{let i=[];for(const o of e.views.values())i=i.concat(eS(o,t,n,r));return i}}function sS(e,t,n,r,i){const o=t._queryIdentifier,s=e.views.get(o);if(!s){let e=Pk(n,i?r:null),o=!1;e?o=!0:r instanceof Tx?(e=Rk(n,r),o=!1):(e=Tx.EMPTY_NODE,o=!1);const s=lk(new ok(e,o,!1),new ok(r,i,!1));return new $k(t,s)}return s}function aS(e,t,n,r,i,o){const s=sS(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,s),function(e,t){e.eventRegistrations_.push(t)}(s,n),function(e,t){const n=e.viewCache_.eventCache,r=[];n.getNode().isLeafNode()||n.getNode().forEachChild(bx,((e,t)=>{r.push(Dx(e,t))}));return n.isFullyInitialized()&&r.push(Rx(n.getNode())),tS(e,r,n.getNode(),t)}(s,n)}function lS(e,t,n,r){const i=t._queryIdentifier,o=[];let s=[];const a=fS(e);if("default"===i)for(const[l,c]of e.views.entries())s=s.concat(Zk(c,n,r)),Jk(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||o.push(c.query));else{const t=e.views.get(i);t&&(s=s.concat(Zk(t,n,r)),Jk(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||o.push(t.query)))}return a&&!fS(e)&&o.push(new(Sr(nS,"Reference.ts has not been loaded"),nS)(t._repo,t._path)),{removed:o,events:s}}function cS(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function uS(e,t){let n=null;for(const r of e.views.values())n=n||Xk(r,t);return n}function hS(e,t){if(t._queryParams.loadsAllData())return pS(e);{const n=t._queryIdentifier;return e.views.get(n)}}function dS(e,t){return null!=hS(e,t)}function fS(e){return null!=pS(e)}function pS(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let gS=1;class mS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new pk(null),this.pendingWriteTree_={visibleWrites:gk.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function vS(e,t,n,r,i){return function(e,t,n,r,i){Sr(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=mk(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?ES(e,new rk({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function yS(e,t,n,r){!function(e,t,n,r){Sr(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=vk(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=pk.fromObject(n);return ES(e,new ik({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function bS(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Tk(e.pendingWriteTree_,t)){let t=new pk(null);return null!=r.snap?t=t.set(j_(),!0):r_(r.children,(e=>{t=t.set(new L_(e),!0)})),ES(e,new tk(r.path,t,n))}return[]}function wS(e,t,n){return ES(e,new rk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function _S(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=t._path,s=e.syncPointTree_.get(o);let a=[];if(s&&("default"===t._queryIdentifier||dS(s,t))){const l=lS(s,t,n,r);0===s.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(o));const c=l.removed;if(a=l.events,!i){const n=-1!==c.findIndex((e=>e._queryParams.loadsAllData())),i=e.syncPointTree_.findOnPath(o,((e,t)=>fS(t)));if(n&&!i){const t=e.syncPointTree_.subtree(o);if(!t.isEmpty()){const n=function(e){return e.fold(((e,t,n)=>{if(t&&fS(t)){return[pS(t)]}{let e=[];return t&&(e=cS(t)),r_(n,((t,n)=>{e=e.concat(n)})),e}}))}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,o=OS(e,r);e.listenProvider_.startListening(DS(i),AS(e,i),o.hashFn,o.onComplete)}}}if(!i&&c.length>0&&!r)if(n){const n=null;e.listenProvider_.stopListening(DS(t),n)}else c.forEach((t=>{const n=e.queryToTagMap.get(NS(t));e.listenProvider_.stopListening(DS(t),n)}))}!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=NS(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function xS(e,t,n,r){const i=IS(e,r);if(null!=i){const r=PS(i),o=r.path,s=r.queryId,a=K_(o,t);return RS(e,o,new rk(ek(s),a,n))}return[]}function kS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=t._path;let o=null,s=!1;e.syncPointTree_.foreachOnPath(i,((e,t)=>{const n=K_(e,i);o=o||uS(t,n),s=s||fS(t)}));let a,l=e.syncPointTree_.get(i);if(l?(s=s||fS(l),o=o||uS(l,j_())):(l=new iS,e.syncPointTree_=e.syncPointTree_.set(i,l)),null!=o)a=!0;else{a=!1,o=Tx.EMPTY_NODE;e.syncPointTree_.subtree(i).foreachChild(((e,t)=>{const n=uS(t,j_());n&&(o=o.updateImmediateChild(e,n))}))}const c=dS(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=NS(t);Sr(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=gS++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=aS(l,t,n,Ck(e.pendingWriteTree_,i),o,a);if(!c&&!s&&!r){const n=hS(l,t);u=u.concat(function(e,t,n){const r=t._path,i=AS(e,t),o=OS(e,n),s=e.listenProvider_.startListening(DS(t),i,o.hashFn,o.onComplete),a=e.syncPointTree_.subtree(r);if(i)Sr(!fS(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold(((e,t,n)=>{if(!W_(e)&&t&&fS(t))return[pS(t).query];{let e=[];return t&&(e=e.concat(cS(t).map((e=>e.query)))),r_(n,((t,n)=>{e=e.concat(n)})),e}}));for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(DS(r),AS(e,r))}}return s}(e,t,n))}return u}function SS(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,((e,n)=>{const r=uS(n,K_(e,t));if(r)return r}));return Ik(r,t,i,n,!0)}function ES(e,t){return CS(t,e.syncPointTree_,null,Ck(e.pendingWriteTree_,j_()))}function CS(e,t,n,r){if(W_(e.path))return TS(e,t,n,r);{const i=t.get(j_());null==n&&null!=i&&(n=uS(i,j_()));let o=[];const s=F_(e.path),a=e.operationForChild(s),l=t.children.get(s);if(l&&a){const e=n?n.getImmediateChild(s):null,t=Fk(r,s);o=o.concat(CS(a,l,e,t))}return i&&(o=o.concat(oS(i,e,r,n))),o}}function TS(e,t,n,r){const i=t.get(j_());null==n&&null!=i&&(n=uS(i,j_()));let o=[];return t.children.inorderTraversal(((t,i)=>{const s=n?n.getImmediateChild(t):null,a=Fk(r,t),l=e.operationForChild(t);l&&(o=o.concat(TS(l,i,s,a)))})),i&&(o=o.concat(oS(i,e,r,n))),o}function OS(e,t){const n=t.query,r=AS(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Tx.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=IS(e,n);if(r){const n=PS(r),i=n.path,o=n.queryId,s=K_(i,t);return RS(e,i,new nk(ek(o),s))}return[]}(e,n._path,r):function(e,t){return ES(e,new nk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return _S(e,n,null,r)}}}}function AS(e,t){const n=NS(t);return e.queryToTagMap.get(n)}function NS(e){return e._path.toString()+"$"+e._queryIdentifier}function IS(e,t){return e.tagToQueryMap.get(t)}function PS(e){const t=e.indexOf("$");return Sr(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new L_(e.substr(0,t))}}function RS(e,t,n){const r=e.syncPointTree_.get(t);Sr(r,"Missing sync point for query tag that we're tracking");return oS(r,n,Ck(e.pendingWriteTree_,t),null)}function DS(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Sr(rS,"Reference.ts has not been loaded"),rS)(e._repo,e._path):e}class MS{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new MS(t)}node(){return this.node_}}class LS{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=H_(this.path_,e);return new LS(this.syncTree_,t)}node(){return SS(this.syncTree_,this.path_)}}const jS=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},FS=function(e,t,n){return e&&"object"===typeof e?(Sr(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?qS(e[".sv"],t,n):"object"===typeof e[".sv"]?BS(e[".sv"],t):void Sr(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},qS=function(e,t,n){if("timestamp"===e)return n.timestamp;Sr(!1,"Unexpected server value: "+e)},BS=function(e,t,n){e.hasOwnProperty("increment")||Sr(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!==typeof r&&Sr(!1,"Unexpected increment value: "+r);const i=t.node();if(Sr(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!==typeof o?r:o+r},US=function(e,t,n,r){return zS(t,new LS(n,e),r)},VS=function(e,t,n){return zS(e,new MS(t),n)};function zS(e,t,n){const r=e.getPriority().val(),i=FS(r,t.getImmediateChild(".priority"),n);let o;if(e.isLeafNode()){const r=e,o=FS(r.getValue(),t,n);return o!==r.getValue()||i!==r.getPriority().val()?new yx(o,Nx(i)):e}{const r=e;return o=r,i!==r.getPriority().val()&&(o=o.updatePriority(new yx(i))),r.forEachChild(bx,((e,r)=>{const i=zS(r,t.getImmediateChild(e),n);i!==r&&(o=o.updateImmediateChild(e,i))})),o}}class HS{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function WS(e,t){let n=t instanceof L_?t:new L_(t),r=e,i=F_(n);for(;null!==i;){const e=Zr(r.node.children,i)||{children:{},childCount:0};r=new HS(i,r,e),n=B_(n),i=F_(n)}return r}function KS(e){return e.node.value}function GS(e,t){e.node.value=t,JS(e)}function YS(e){return e.node.childCount>0}function QS(e,t){r_(e.node.children,((n,r)=>{t(new HS(n,e,r))}))}function $S(e,t,n,r){n&&!r&&t(e),QS(e,(e=>{$S(e,t,!0,r)})),n&&r&&t(e)}function XS(e){return new L_(null===e.parent?e.name:XS(e.parent)+"/"+e.name)}function JS(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===KS(e)&&!YS(e)}(n),i=Jr(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,JS(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,JS(e))}(e.parent,e.name,e)}const ZS=/[\[\].#$\/\u0000-\u001F\u007F]/,eE=/[\[\].#$\u0000-\u001F\u007F]/,tE=10485760,nE=function(e){return"string"===typeof e&&0!==e.length&&!ZS.test(e)},rE=function(e){return"string"===typeof e&&0!==e.length&&!eE.test(e)},iE=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Qw(e)||e&&"object"===typeof e&&Jr(e,".sv")},oE=function(e,t,n,r){r&&void 0===t||sE(ui(e,"value"),t,n)},sE=function(e,t,n){const r=n instanceof L_?new $_(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+J_(r));if("function"===typeof t)throw new Error(e+"contains a function "+J_(r)+" with contents = "+t.toString());if(Qw(t))throw new Error(e+"contains "+t.toString()+" "+J_(r));if("string"===typeof t&&t.length>tE/3&&hi(t)>tE)throw new Error(e+"contains a string greater than "+tE+" utf8 bytes "+J_(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,i=!1;if(r_(t,((t,o)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!nE(t)))throw new Error(e+" contains an invalid key ("+t+") "+J_(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=hi(t),X_(e)}(r,t),sE(e,o,r),function(e){const t=e.parts_.pop();e.byteLength_-=hi(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)})),n&&i)throw new Error(e+' contains ".value" child '+J_(r)+" in addition to actual children.")}},aE=function(e,t,n,r){if(r&&void 0===t)return;const i=ui(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const o=[];r_(t,((e,t)=>{const r=new L_(e);if(sE(i,t,H_(n,r)),".priority"===U_(r)&&!iE(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=V_(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!nE(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(G_);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&Q_(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},lE=function(e,t,n,r){if((!r||void 0!==n)&&!nE(n))throw new Error(ui(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},cE=function(e,t,n,r){if((!r||void 0!==n)&&!rE(n))throw new Error(ui(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},uE=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),cE(e,t,n,r)},hE=function(e,t){if(".info"===F_(t))throw new Error(e+" failed = Can't modify data under /.info/")},dE=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!nE(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),rE(e)}(n))throw new Error(ui(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class fE{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function pE(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],o=i.getPath();null===n||Y_(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function gE(e,t,n){pE(e,n),vE(e,(e=>Y_(e,t)))}function mE(e,t,n){pE(e,n),vE(e,(e=>Q_(e,t)||Q_(t,e)))}function vE(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];if(i){t(i.path)?(yE(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function yE(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();Uw&&Hw("event: "+n.toString()),a_(r)}}}const bE="repo_interrupt",wE=25;class _E{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new fE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Yx(),this.transactionQueueTree_=new HS,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function xE(e,t,n){if(e.stats_=x_(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Kx(e.repoInfo_,((t,n,r,i)=>{EE(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>CE(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{$r(n)}catch(GV){throw new Error("Invalid authOverride provided: "+GV)}}e.persistentConnection_=new tx(e.repoInfo_,t,((t,n,r,i)=>{EE(e,t,n,r,i)}),(t=>{CE(e,t)}),(t=>{!function(e,t){r_(t,((t,n)=>{TE(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){const n=e.toString();return __[n]||(__[n]=t()),__[n]}(e.repoInfo_,(()=>new Jx(e.stats_,e.server_))),e.infoData_=new Gx,e.infoSyncTree_=new mS({startListening:(t,n,r,i)=>{let o=[];const s=e.infoData_.getNode(t._path);return s.isEmpty()||(o=wS(e.infoSyncTree_,t._path,s),setTimeout((()=>{i("ok")}),0)),o},stopListening:()=>{}}),TE(e,"connected",!1),e.serverSyncTree_=new mS({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,((n,r)=>{const o=i(n,r);mE(e.eventQueue_,t._path,o)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function kE(e){const t=e.infoData_.getNode(new L_(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function SE(e){return jS({timestamp:kE(e)})}function EE(e,t,n,r,i){e.dataUpdateCount++;const o=new L_(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let s=[];if(i)if(r){const t=ti(n,(e=>Nx(e)));s=function(e,t,n,r){const i=IS(e,r);if(i){const r=PS(i),o=r.path,s=r.queryId,a=K_(o,t),l=pk.fromObject(n);return RS(e,o,new ik(ek(s),a,l))}return[]}(e.serverSyncTree_,o,t,i)}else{const t=Nx(n);s=xS(e.serverSyncTree_,o,t,i)}else if(r){const t=ti(n,(e=>Nx(e)));s=function(e,t,n){const r=pk.fromObject(n);return ES(e,new ik({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,t)}else{const t=Nx(n);s=wS(e.serverSyncTree_,o,t)}let a=o;s.length>0&&(a=LE(e,o)),mE(e.eventQueue_,a,s)}function CE(e,t){TE(e,"connected",t),!1===t&&function(e){PE(e,"onDisconnectEvents");const t=SE(e),n=Yx();$x(e.onDisconnect_,j_(),((r,i)=>{const o=US(r,i,e.serverSyncTree_,t);Qx(n,r,o)}));let r=[];$x(n,j_(),((t,n)=>{r=r.concat(wS(e.serverSyncTree_,t,n));const i=UE(e,t);LE(e,i)})),e.onDisconnect_=Yx(),mE(e.eventQueue_,j_(),r)}(e)}function TE(e,t,n){const r=new L_("/.info/"+t),i=Nx(n);e.infoData_.updateSnapshot(r,i);const o=wS(e.infoSyncTree_,r,i);mE(e.eventQueue_,r,o)}function OE(e){return e.nextWriteId_++}function AE(e,t,n,r,i){PE(e,"set",{path:t.toString(),value:n,priority:r});const o=SE(e),s=Nx(n,r),a=SS(e.serverSyncTree_,t),l=VS(s,a,o),c=OE(e),u=vS(e.serverSyncTree_,t,l,c,!0);pE(e.eventQueue_,u),e.server_.put(t.toString(),s.val(!0),((n,r)=>{const o="ok"===n;o||Yw("set at "+t+" failed: "+n);const s=bS(e.serverSyncTree_,c,!o);mE(e.eventQueue_,t,s),RE(e,i,n,r)}));const h=UE(e,t);LE(e,h),mE(e.eventQueue_,h,[])}function NE(e,t,n){let r;r=".info"===F_(t._path)?_S(e.infoSyncTree_,t,n):_S(e.serverSyncTree_,t,n),gE(e.eventQueue_,t._path,r)}function IE(e){e.persistentConnection_&&e.persistentConnection_.interrupt(bE)}function PE(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Hw(t,...r)}function RE(e,t,n,r){t&&a_((()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const o=new Error(i);o.code=e,t(o)}}))}function DE(e,t,n){return SS(e.serverSyncTree_,t,n)||Tx.EMPTY_NODE}function ME(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||BE(e,t),KS(t)){const n=FE(e,t);Sr(n.length>0,"Sending zero length transaction queue");n.every((e=>0===e.status))&&function(e,t,n){const r=n.map((e=>e.currentWriteId)),i=DE(e,t,r);let o=i;const s=i.hash();for(let c=0;c<n.length;c++){const e=n[c];Sr(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=K_(t,e.path);o=o.updateChild(r,e.currentOutputSnapshotRaw)}const a=o.val(!0),l=t;e.server_.put(l.toString(),a,(r=>{PE(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(bS(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();BE(e,WS(e.transactionQueueTree_,t)),ME(e,e.transactionQueueTree_),mE(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)a_(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Yw("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}LE(e,t)}}),s)}(e,XS(t),n)}else YS(t)&&QS(t,(t=>{ME(e,t)}))}function LE(e,t){const n=jE(e,t),r=XS(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const o=t.filter((e=>0===e.status)),s=o.map((e=>e.currentWriteId));for(let l=0;l<t.length;l++){const o=t[l],c=K_(n,o.path);let u,h=!1;if(Sr(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status)h=!0,u=o.abortReason,i=i.concat(bS(e.serverSyncTree_,o.currentWriteId,!0));else if(0===o.status)if(o.retryCount>=wE)h=!0,u="maxretry",i=i.concat(bS(e.serverSyncTree_,o.currentWriteId,!0));else{const n=DE(e,o.path,s);o.currentInputSnapshot=n;const r=t[l].update(n.val());if(void 0!==r){sE("transaction failed: Data returned ",r,o.path);let t=Nx(r);"object"===typeof r&&null!=r&&Jr(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=o.currentWriteId,l=SE(e),c=VS(t,n,l);o.currentOutputSnapshotRaw=t,o.currentOutputSnapshotResolved=c,o.currentWriteId=OE(e),s.splice(s.indexOf(a),1),i=i.concat(vS(e.serverSyncTree_,o.path,c,o.currentWriteId,o.applyLocally)),i=i.concat(bS(e.serverSyncTree_,a,!0))}else h=!0,u="nodata",i=i.concat(bS(e.serverSyncTree_,o.currentWriteId,!0))}mE(e.eventQueue_,n,i),i=[],h&&(t[l].status=2,a=t[l].unwatcher,setTimeout(a,Math.floor(0)),t[l].onComplete&&("nodata"===u?r.push((()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot))):r.push((()=>t[l].onComplete(new Error(u),!1,null)))))}var a;BE(e,e.transactionQueueTree_);for(let l=0;l<r.length;l++)a_(r[l]);ME(e,e.transactionQueueTree_)}(e,FE(e,n),r),r}function jE(e,t){let n,r=e.transactionQueueTree_;for(n=F_(t);null!==n&&void 0===KS(r);)r=WS(r,n),n=F_(t=B_(t));return r}function FE(e,t){const n=[];return qE(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function qE(e,t,n){const r=KS(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);QS(t,(t=>{qE(e,t,n)}))}function BE(e,t){const n=KS(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,GS(t,n.length>0?n:void 0)}QS(t,(t=>{BE(e,t)}))}function UE(e,t){const n=XS(jE(e,t)),r=WS(e.transactionQueueTree_,t);return function(e,t,n){let r=n?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,(t=>{VE(e,t)})),VE(e,r),$S(r,(t=>{VE(e,t)})),n}function VE(e,t){const n=KS(t);if(n){const r=[];let i=[],o=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Sr(o===t-1,"All SENT items should be at beginning of queue."),o=t,n[t].status=3,n[t].abortReason="set"):(Sr(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(bS(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===o?GS(t,void 0):n.length=o+1,mE(e.eventQueue_,XS(t),i);for(let e=0;e<r.length;e++)a_(r[e])}}const zE=function(e,t){const n=HE(e),r=n.namespace;"firebase.com"===n.domain&&Gw(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Gw("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Yw("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new v_(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new L_(n.pathString)}},HE=function(e){let t="",n="",r="",i="",o="",s=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(GV){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Yw("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(s="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),o=r}"ns"in d&&(o=d.ns)}return{host:t,port:l,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},WE="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",KE=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const o=new Array(8);for(i=7;i>=0;i--)o[i]=WE.charAt(n%64),n=Math.floor(n/64);Sr(0===n,"Cannot push at time == 0");let s=o.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)s+=WE.charAt(t[i]);return Sr(20===s.length,"nextPushId: Length should be 20."),s}}();class GE{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+$r(this.snapshot.exportVal())}}class YE{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class QE{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Sr(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class $E{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return W_(this._path)?null:U_(this._path)}get ref(){return new eC(this._repo,this._path)}get _queryIdentifier(){const e=Wx(this._queryParams),t=t_(e);return"{}"===t?"default":t}get _queryObject(){return Wx(this._queryParams)}isEqual(e){if(!((e=di(e))instanceof $E))return!1;const t=this._repo===e._repo,n=Y_(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function XE(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function JE(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===sx){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==$w)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==Xw)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===bx){if(null!=t&&!iE(t)||null!=n&&!iE(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Sr(e.getIndex()instanceof Ix||e.getIndex()===Px,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ZE(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class eC extends $E{constructor(e,t){super(e,t,new Bx,!1)}get parent(){const e=z_(this._path);return null===e?null:new eC(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class tC{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new L_(e),n=rC(this.ref,e);return new tC(this._node.getChild(t),n,bx)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,((t,n)=>e(new tC(n,rC(this.ref,t),bx))))}hasChild(e){const t=new L_(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function nC(e,t){return(e=di(e))._checkNotDeleted("ref"),void 0!==t?rC(e._root,t):e._root}function rC(e,t){return null===F_((e=di(e))._path)?uE("child","path",t,!1):cE("child","path",t,!1),new eC(e._repo,H_(e._path,t))}function iC(e,t){e=di(e),hE("set",e._path),oE("set",t,e._path,!1);const n=new Br;return AE(e._repo,e._path,t,null,n.wrapCallback((()=>{}))),n.promise}function oC(e,t){aE("update",t,e._path,!1);const n=new Br;return function(e,t,n,r){PE(e,"update",{path:t.toString(),value:n});let i=!0;const o=SE(e),s={};if(r_(n,((n,r)=>{i=!1,s[n]=US(H_(t,n),Nx(r),e.serverSyncTree_,o)})),i)Hw("update() called with empty data.  Don't do anything."),RE(0,r,"ok",void 0);else{const i=OE(e),o=yS(e.serverSyncTree_,t,s,i);pE(e.eventQueue_,o),e.server_.merge(t.toString(),n,((n,o)=>{const s="ok"===n;s||Yw("update at "+t+" failed: "+n);const a=bS(e.serverSyncTree_,i,!s),l=a.length>0?LE(e,t):t;mE(e.eventQueue_,l,a),RE(0,r,n,o)})),r_(n,(n=>{const r=UE(e,H_(t,n));LE(e,r)})),mE(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((()=>{}))),n.promise}class sC{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new GE("value",this,new tC(e.snapshotNode,new eC(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new YE(this,e,t):null}matches(e){return e instanceof sC&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class aC{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new YE(this,e,t):null}createEvent(e,t){Sr(null!=e.childName,"Child events should have a childName.");const n=rC(new eC(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new GE(e.type,this,new tC(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof aC&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function lC(e,t,n,r,i){let o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{NE(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const s=new QE(n,o||void 0),a="value"===t?new sC(s):new aC(t,s);return function(e,t,n){let r;r=".info"===F_(t._path)?kS(e.infoSyncTree_,t,n):kS(e.serverSyncTree_,t,n),gE(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>NE(e._repo,e,a)}function cC(e,t,n,r){return lC(e,"value",t,n,r)}class uC{}class hC extends uC{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){oE("endAt",this._value,e._path,!0);const t=Vx(e._queryParams,this._value,this._key);if(ZE(t),JE(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $E(e._repo,e._path,t,e._orderByCalled)}}class dC extends uC{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){oE("startAt",this._value,e._path,!0);const t=Ux(e._queryParams,this._value,this._key);if(ZE(t),JE(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new $E(e._repo,e._path,t,e._orderByCalled)}}class fC extends uC{constructor(e){super(),this._path=e}_apply(e){XE(e,"orderByChild");const t=new L_(this._path);if(W_(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new Ix(t),r=zx(e._queryParams,n);return JE(r),new $E(e._repo,e._path,r,!0)}}function pC(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return cE("orderByChild","path",e,!1),new fC(e)}class gC extends uC{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(oE("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new hC(this._value,this._key)._apply(new dC(this._value,this._key)._apply(e))}}function mC(e,t){return lE("equalTo","key",t,!0),new gC(e,t)}function vC(e){let t=di(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(const o of r)t=o._apply(t);return t}!function(e){Sr(!nS,"__referenceConstructor has already been defined"),nS=e}(eC),function(e){Sr(!rS,"__referenceConstructor has already been defined"),rS=e}(eC);const yC="FIREBASE_DATABASE_EMULATOR_HOST",bC={};let wC=!1;function _C(e,t,n,r,i){let o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||Gw("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hw("Using default host for project ",e.options.projectId),o="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let s,a,l=zE(o,i),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"/roj",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBTVY40vxNb5Odkg7pCGq_qLXrcJ70Y4lQ",REACT_APP_AUTH_DOMAIN:"kimoj-778f5.firebaseapp.com",REACT_APP_PROJECT_ID:"kimoj-778f5",REACT_APP_STORAGE_BUCKET:"kimoj-778f5.appspot.com",REACT_APP_MESSAGING_SENDER_ID:"650038740242",REACT_APP_APP_ID:"1:650038740242:web:d958dcc42de18e36469fcb",REACT_APP_DATABASE_URL:"https://kimoj-778f5-default-rtdb.firebaseio.com"}[yC]),a?(s=!0,o="http://".concat(a,"?ns=").concat(c.namespace),l=zE(o,i),c=l.repoInfo):s=!l.repoInfo.secure;const u=i&&s?new h_(h_.OWNER):new u_(e.name,e.options,t);dE("Invalid Firebase Database URL",l),W_(l.path)||Gw("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=bC[t.name];i||(i={},bC[t.name]=i);let o=i[e.toURLString()];o&&Gw("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new _E(e,wC,n,r),i[e.toURLString()]=o,o}(c,e,u,new c_(e.name,n));return new xC(h,e)}class xC{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(xE(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new eC(this._repo,j_())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=bC[t];n&&n[e.key]===e||Gw("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),IE(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Gw("Cannot call "+e+" on a deleted database.")}}tx.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},tx.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Iw(eo),$i(new fi("database",((e,t)=>{let{instanceIdentifier:n}=t;return _C(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),ro(Ow,Aw,e),ro(Ow,Aw,"esm2017")}();const kC="firebasestorage.googleapis.com",SC="storageBucket";class EC extends Kr{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(OC(e),"Firebase Storage: ".concat(t," (").concat(OC(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,EC.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return OC(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var CC,TC;function OC(e){return"storage/"+e}function AC(){return new EC(CC.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function NC(){return new EC(CC.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function IC(){return new EC(CC.CANCELED,"User canceled the upload/download.")}function PC(e){return new EC(CC.INVALID_ARGUMENT,e)}function RC(){return new EC(CC.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(CC||(CC={}));class DC{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=DC.makeFromUrl(e,t)}catch(GV){return new DC(e,"")}if(""===n.path)return n;throw r=e,new EC(CC.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===kC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new DC(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new EC(CC.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class MC{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function LC(e,t,n,r){if(r<t)throw PC("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw PC("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function jC(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function FC(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(TC||(TC={}));class qC{constructor(e,t,n,r,i,o,s,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new BC(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===TC.NO_ERROR,i=n.getStatus();if(!t||FC(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===TC.ABORT;return void e(!1,new BC(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new BC(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(GV){r(GV)}else if(null!==i){const e=AC();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?RC():IC())}else{r(NC())}};this.canceled_?t(0,new BC(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){o&&clearTimeout(o)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||s)return d(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===a?(a=2,o=0):o=1e3*(r+Math.random()),h(o)}let p=!1;function g(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),o=setTimeout((()=>{s=!0,g(!0)}),n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class BC{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function UC(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class VC{constructor(e,t){this._service=e,this._location=t instanceof DC?t:DC.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new VC(e,t)}get root(){const e=new DC(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return UC(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new DC(this._location.bucket,e);return new VC(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new EC(CC.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function zC(e,t){const n=null===t||void 0===t?void 0:t[SC];return null==n?null:DC.makeFromBucketSpec(n,e)}class HC{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=kC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?DC.makeFromBucketSpec(r,this._host):zC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=DC.makeFromBucketSpec(this._url,e):this._bucket=zC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){LC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){LC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new VC(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new MC(RC());{const o=function(e,t,n,r,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=jC(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new qC(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const WC="@firebase/storage",KC="0.12.0",GC="storage";function YC(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new HC(r,i,o,n,eo)}$i(new fi(GC,YC,"PUBLIC").setMultipleInstances(!0)),ro(WC,KC,""),ro(WC,KC,"esm2017");const QC=to({apiKey:"AIzaSyBTVY40vxNb5Odkg7pCGq_qLXrcJ70Y4lQ",authDomain:"kimoj-778f5.firebaseapp.com",projectId:"kimoj-778f5",storageBucket:"kimoj-778f5.appspot.com",messagingSenderId:"650038740242",appId:"1:650038740242:web:d958dcc42de18e36469fcb",databaseURL:"https://kimoj-778f5-default-rtdb.firebaseio.com"}),$C=function(e,t){const n="string"==typeof e?e:t||"(default)",r=Xi("object"==typeof e?e:no(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=jr("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=Fb(e,Bb))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&Jd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Kd.MOCK_USER;else{t=Ur(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new of(rf.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Kd(o)}e._authCredentials=new cf(new af(t,n))}}(r,...e)}return r}(QC),XC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:no();const t=Xi(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Xi(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(ni(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;ko(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:bl,persistence:[Aa,da,pa]}),r=qr("authTokenSyncURL");if(r){const e=(i=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>kl)return;const r=null===t||void 0===t?void 0:t.token;Sl!==r&&(Sl=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){di(e).beforeAuthStateChanged(t,n)}(n,e,(()=>e(n.currentUser))),function(e,t,n,r){di(e).onIdTokenChanged(t,n,r)}(n,(t=>e(t)))}var i;const o=Lr("auth");return o&&Ds(n,"http://".concat(o)),n}(QC),JC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:no(),t=arguments.length>1?arguments[1]:void 0;const n=Xi(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=jr("database");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=di(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&Gw("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Gw('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new h_(h_.OWNER);else if(r.mockUserToken){const t="string"===typeof r.mockUserToken?r.mockUserToken:Ur(r.mockUserToken,e.app.options.projectId);o=new h_(t)}!function(e,t,n,r){e.repoInfo_=new v_("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),r&&(e.authTokenProvider_=r)}(i,t,n,o)}(n,...e)}return n}(QC);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:no(),t=arguments.length>1?arguments[1]:void 0;e=di(e);const n=Xi(e,GC).getImmediate({identifier:t}),r=jr("storage");r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Ur(i,e.app.options.projectId))}(e,t,n,r)}(n,...r)}();async function ZC(e,t){try{const n=await function(e,t,n){return aa(di(e),Ks.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&la(e),t}))}(XC,e,t);return console.log(n.user),!0}catch(Kw){return console.log(Kw.message),!1}}async function eT(e,t,n){await async function(e,t,n){const r=Ts(e),i=Rs(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Zs),o=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&la(e),t})),s=await ea._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}(XC,t,n),await Ew(Hb($C,"authority",t),{name:e,role:"user"})}async function tT(){var e;await(e=XC,di(e).signOut())}function nT(e){let t,{user:n}=e;return t=null==n?(0,Ie.jsx)(yr.Link,{href:"/login",children:"\ub85c\uadf8\uc778"}):(0,Ie.jsxs)(Ie.Fragment,{children:[(0,Ie.jsx)(yr.Link,{href:"/logout",children:"\ub85c\uadf8\uc544\uc6c3"})," ",(0,Ie.jsx)(yr.Link,{href:"/mypage",children:n.email})]}),(0,Ie.jsx)(Wn,{bg:"dark","data-bs-theme":"dark",children:(0,Ie.jsxs)(wr,{children:[(0,Ie.jsx)(Wn.Brand,{href:"/",children:"\ub9ac\ub9cc OJ"}),(0,Ie.jsxs)(yr,{className:"me-auto",children:[(0,Ie.jsx)(yr.Link,{href:"/",children:"\ud648"}),(0,Ie.jsx)(yr.Link,{href:"/contests",children:"\ub300\ud68c"}),(0,Ie.jsx)(yr.Link,{href:"/judgeboard",children:"\ucc44\uc810 \ud604\ud669"}),t]})]})})}function rT(){return(0,Ie.jsxs)("div",{children:[(0,Ie.jsx)("h1",{children:"\ub9ac\ub9cc Online Judge\uc5d0 \uc624\uc2e0\uac83\uc744 \ud658\uc601\ud569\ub2c8\ub2e4!"}),(0,Ie.jsx)("img",{src:"img/chcopa.png",style:{width:"500px",height:"800px"}})]})}const iT=kn("h4");iT.displayName="DivStyledAsH4";const oT=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=iT,...o}=e;return r=je(r,"alert-heading"),(0,Ie.jsx)(i,{ref:t,className:we()(n,r),...o})}));oT.displayName="AlertHeading";const sT=oT,aT=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i=pr,...o}=e;return r=je(r,"alert-link"),(0,Ie.jsx)(i,{ref:t,className:we()(n,r),...o})}));aT.displayName="AlertLink";const lT=aT,cT=t.forwardRef(((e,t)=>{const{bsPrefix:n,show:r=!0,closeLabel:i="Close alert",closeVariant:o,className:s,children:a,variant:l="primary",onClose:c,dismissible:u,transition:h=an,...d}=Te(e,{show:"onClose"}),f=je(n,"alert"),p=Nt((e=>{c&&c(!1,e)})),g=!0===h?an:h,m=(0,Ie.jsxs)("div",{role:"alert",...g?void 0:d,ref:t,className:we()(s,f,l&&"".concat(f,"-").concat(l),u&&"".concat(f,"-dismissible")),children:[u&&(0,Ie.jsx)(yn,{onClick:p,"aria-label":i,variant:o}),a]});return g?(0,Ie.jsx)(g,{unmountOnExit:!0,...d,ref:void 0,in:r,children:m}):r?m:null}));cT.displayName="Alert";const uT=Object.assign(cT,{Link:lT,Heading:sT});function hT(){return(0,Ie.jsxs)(Ie.Fragment,{children:[(0,Ie.jsxs)(uT,{variant:"danger",children:[(0,Ie.jsx)(uT.Heading,{children:"404 Not Found"}),(0,Ie.jsx)("p",{children:"\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ud398\uc774\uc9c0 \uc785\ub2c8\ub2e4!"})]}),(0,Ie.jsx)("img",{src:"img/kaguya.png",style:{width:"500px",height:"300px"}})]})}const dT={type:gn().string,tooltip:gn().bool,as:gn().elementType},fT=t.forwardRef(((e,t)=>{let{as:n="div",className:r,type:i="valid",tooltip:o=!1,...s}=e;return(0,Ie.jsx)(n,{...s,ref:t,className:we()(r,"".concat(i,"-").concat(o?"tooltip":"feedback"))})}));fT.displayName="Feedback",fT.propTypes=dT;const pT=fT,gT=t.createContext({}),mT=t.forwardRef(((e,n)=>{let{id:r,bsPrefix:i,className:o,type:s="checkbox",isValid:a=!1,isInvalid:l=!1,as:c="input",...u}=e;const{controlId:h}=(0,t.useContext)(gT);return i=je(i,"form-check-input"),(0,Ie.jsx)(c,{...u,ref:n,type:s,id:r||h,className:we()(o,i,a&&"is-valid",l&&"is-invalid")})}));mT.displayName="FormCheckInput";const vT=mT,yT=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:i,htmlFor:o,...s}=e;const{controlId:a}=(0,t.useContext)(gT);return r=je(r,"form-check-label"),(0,Ie.jsx)("label",{...s,ref:n,htmlFor:o||a,className:we()(i,r)})}));yT.displayName="FormCheckLabel";const bT=yT;const wT=t.forwardRef(((e,n)=>{let{id:r,bsPrefix:i,bsSwitchPrefix:o,inline:s=!1,reverse:a=!1,disabled:l=!1,isValid:c=!1,isInvalid:u=!1,feedbackTooltip:h=!1,feedback:d,feedbackType:f,className:p,style:g,title:m="",type:v="checkbox",label:y,children:b,as:w="input",..._}=e;i=je(i,"form-check"),o=je(o,"form-switch");const{controlId:x}=(0,t.useContext)(gT),k=(0,t.useMemo)((()=>({controlId:r||x})),[x,r]),S=!b&&null!=y&&!1!==y||function(e,n){return t.Children.toArray(e).some((e=>t.isValidElement(e)&&e.type===n))}(b,bT),E=(0,Ie.jsx)(vT,{..._,type:"switch"===v?"checkbox":v,ref:n,isValid:c,isInvalid:u,disabled:l,as:w});return(0,Ie.jsx)(gT.Provider,{value:k,children:(0,Ie.jsx)("div",{style:g,className:we()(p,S&&i,s&&"".concat(i,"-inline"),a&&"".concat(i,"-reverse"),"switch"===v&&o),children:b||(0,Ie.jsxs)(Ie.Fragment,{children:[E,S&&(0,Ie.jsx)(bT,{title:m,children:y}),d&&(0,Ie.jsx)(pT,{type:f,tooltip:h,children:d})]})})})}));wT.displayName="FormCheck";const _T=Object.assign(wT,{Input:vT,Label:bT});n(2391);const xT=t.forwardRef(((e,n)=>{let{bsPrefix:r,type:i,size:o,htmlSize:s,id:a,className:l,isValid:c=!1,isInvalid:u=!1,plaintext:h,readOnly:d,as:f="input",...p}=e;const{controlId:g}=(0,t.useContext)(gT);return r=je(r,"form-control"),(0,Ie.jsx)(f,{...p,type:i,size:s,ref:n,readOnly:d,id:a||g,className:we()(l,h?"".concat(r,"-plaintext"):r,o&&"".concat(r,"-").concat(o),"color"===i&&"".concat(r,"-color"),c&&"is-valid",u&&"is-invalid")})}));xT.displayName="FormControl";const kT=Object.assign(xT,{Feedback:pT}),ST=t.forwardRef(((e,t)=>{let{className:n,bsPrefix:r,as:i="div",...o}=e;return r=je(r,"form-floating"),(0,Ie.jsx)(i,{ref:t,className:we()(n,r),...o})}));ST.displayName="FormFloating";const ET=ST,CT=t.forwardRef(((e,n)=>{let{controlId:r,as:i="div",...o}=e;const s=(0,t.useMemo)((()=>({controlId:r})),[r]);return(0,Ie.jsx)(gT.Provider,{value:s,children:(0,Ie.jsx)(i,{...o,ref:n})})}));CT.displayName="FormGroup";const TT=CT;function OT(e){let{as:n,bsPrefix:r,className:i,...o}=e;r=je(r,"col");const s=function(){const{breakpoints:e}=(0,t.useContext)(De);return e}(),a=function(){const{minBreakpoint:e}=(0,t.useContext)(De);return e}(),l=[],c=[];return s.forEach((e=>{const t=o[e];let n,i,s;delete o[e],"object"===typeof t&&null!=t?({span:n,offset:i,order:s}=t):n=t;const u=e!==a?"-".concat(e):"";n&&l.push(!0===n?"".concat(r).concat(u):"".concat(r).concat(u,"-").concat(n)),null!=s&&c.push("order".concat(u,"-").concat(s)),null!=i&&c.push("offset".concat(u,"-").concat(i))})),[{...o,className:we()(i,...l,...c)},{as:n,bsPrefix:r,spans:l}]}const AT=t.forwardRef(((e,t)=>{const[{className:n,...r},{as:i="div",bsPrefix:o,spans:s}]=OT(e);return(0,Ie.jsx)(i,{...r,ref:t,className:we()(n,!s.length&&o)})}));AT.displayName="Col";const NT=AT,IT=t.forwardRef(((e,n)=>{let{as:r="label",bsPrefix:i,column:o=!1,visuallyHidden:s=!1,className:a,htmlFor:l,...c}=e;const{controlId:u}=(0,t.useContext)(gT);i=je(i,"form-label");let h="col-form-label";"string"===typeof o&&(h="".concat(h," ").concat(h,"-").concat(o));const d=we()(a,i,s&&"visually-hidden",o&&h);return l=l||u,o?(0,Ie.jsx)(NT,{ref:n,as:"label",className:d,htmlFor:l,...c}):(0,Ie.jsx)(r,{ref:n,className:d,htmlFor:l,...c})}));IT.displayName="FormLabel";const PT=IT,RT=t.forwardRef(((e,n)=>{let{bsPrefix:r,className:i,id:o,...s}=e;const{controlId:a}=(0,t.useContext)(gT);return r=je(r,"form-range"),(0,Ie.jsx)("input",{...s,type:"range",ref:n,className:we()(i,r),id:o||a})}));RT.displayName="FormRange";const DT=RT,MT=t.forwardRef(((e,n)=>{let{bsPrefix:r,size:i,htmlSize:o,className:s,isValid:a=!1,isInvalid:l=!1,id:c,...u}=e;const{controlId:h}=(0,t.useContext)(gT);return r=je(r,"form-select"),(0,Ie.jsx)("select",{...u,size:o,ref:n,className:we()(s,r,i&&"".concat(r,"-").concat(i),a&&"is-valid",l&&"is-invalid"),id:c||h})}));MT.displayName="FormSelect";const LT=MT,jT=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,as:i="small",muted:o,...s}=e;return n=je(n,"form-text"),(0,Ie.jsx)(i,{...s,ref:t,className:we()(r,n,o&&"text-muted")})}));jT.displayName="FormText";const FT=jT,qT=t.forwardRef(((e,t)=>(0,Ie.jsx)(_T,{...e,ref:t,type:"switch"})));qT.displayName="Switch";const BT=Object.assign(qT,{Input:_T.Input,Label:_T.Label}),UT=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,children:i,controlId:o,label:s,...a}=e;return n=je(n,"form-floating"),(0,Ie.jsxs)(TT,{ref:t,className:we()(r,n),controlId:o,...a,children:[i,(0,Ie.jsx)("label",{htmlFor:o,children:s})]})}));UT.displayName="FloatingLabel";const VT=UT,zT={_ref:gn().any,validated:gn().bool,as:gn().elementType},HT=t.forwardRef(((e,t)=>{let{className:n,validated:r,as:i="form",...o}=e;return(0,Ie.jsx)(i,{...o,ref:t,className:we()(n,r&&"was-validated")})}));HT.displayName="Form",HT.propTypes=zT;const WT=Object.assign(HT,{Group:TT,Control:kT,Floating:ET,Check:_T,Switch:BT,Label:PT,Text:FT,Range:DT,Select:LT,FloatingLabel:VT}),KT=t.forwardRef(((e,t)=>{let{as:n,bsPrefix:r,variant:i="primary",size:o,active:s=!1,disabled:a=!1,className:l,...c}=e;const u=je(r,"btn"),[h,{tagName:d}]=$n({tagName:n,disabled:a,...c}),f=d;return(0,Ie.jsx)(f,{...h,...c,ref:t,disabled:a,className:we()(l,u,s&&"active",i&&"".concat(u,"-").concat(i),o&&"".concat(u,"-").concat(o),c.href&&a&&"disabled")})}));KT.displayName="Button";const GT=KT;function YT(){const e=J(),[n,r]=(0,t.useState)(!1),[i,o]=(0,t.useState)(""),[s,a]=(0,t.useState)("");let l=(0,Ie.jsx)(Ie.Fragment,{});return n?(0,Ie.jsx)("h1",{children:"Loading.."}):(0,Ie.jsxs)("div",{children:[l,(0,Ie.jsxs)(WT,{children:[(0,Ie.jsx)(WT.Control,{id:"email","aria-describedby":"idHelpBlock",placeholder:"Email",onChange:function(e){o(e.currentTarget.value),console.log(e.currentTarget.value)}}),(0,Ie.jsx)(WT.Control,{type:"password",id:"password","aria-describedby":"passwordHelpBlock",placeholder:"PS(Problem Solving \uc774 \uc544\ub2d9\ub2c8\ub2e4!)",onChange:function(e){a(e.currentTarget.value),console.log(e.currentTarget.value)}}),(0,Ie.jsx)(GT,{variant:"primary",type:"submit",onClick:async function(){r(!0);let t=!1;t=await ZC(i,s),r(!1),t?e("/"):l=(0,Ie.jsx)(Ie.Fragment,{})},children:"Login"})]})]})}function QT(){return(0,Ie.jsxs)("div",{children:[(0,Ie.jsx)(WT.Control,{id:"inputId","aria-describedby":"idHelpBlock",placeholder:"ID"}),(0,Ie.jsx)(WT.Control,{type:"password",id:"inputPassword5","aria-describedby":"passwordHelpBlock",placeholder:"PS(Problem Solving \uc774 \uc544\ub2d9\ub2c8\ub2e4!)"}),(0,Ie.jsx)(GT,{variant:"primary",children:"\ud68c\uc6d0\uac00\uc785"})]})}function $T(){return tT(),(0,Ie.jsxs)(uT,{variant:"success",children:[(0,Ie.jsx)(uT.Heading,{children:"\ub85c\uadf8\uc544\uc6c3 \uc644\ub8cc"}),(0,Ie.jsx)("p",{children:"\ub85c\uadf8\uc544\uc6c3\uc5d0 \uc131\uacf5\ud588\uc5b4\uc694!"})]})}const XT="%[a-f0-9]{2}";new RegExp("("+XT+")|([^%]+?)","gi"),new RegExp("("+XT+")+","gi");Symbol("encodeFragmentIdentifier");async function JT(e){console.log("ID:"+e);const t=Hb($C,"problems",e),n=await kw(t);return n.exists()?(console.log(n.data()),n.data()):(console.log("No such problem"),null)}async function ZT(e,t,n,r,i){if(""!=n){let e=await eO(n);const t=(new Date).getTime();if(1e3*e.end.seconds<t)return alert("\ub300\ud68c\uac00 \uc885\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"),0}let o=await async function(){const e=Hb($C,"authority",XC.currentUser.email),t=await kw(e);return t.exists()?t.data().name:"noname"}();if(null!=XC.currentUser){const s={problemId:e.id,language:"cpp",code:t,user:o,memory:e.memory,time:e.time,contest:n,subtask:r,score:i},a=function(e,t){e=di(e),hE("push",e._path),oE("push",t,e._path,!0);const n=kE(e._repo),r=KE(n),i=rC(e,r),o=rC(e,r);let s;return s=null!=t?iC(o,t).then((()=>o)):Promise.resolve(o),i.then=s.then.bind(s),i.catch=s.then.bind(s,void 0),i}(rC(nC(JC),"judgequeue")).key,l={};l["/judgequeue/"+a]=s,oC(nC(JC),l)}else console.log("User must login to submit problem")}async function eO(e){console.log("ID:"+e);const t=Hb($C,"contests",e),n=await kw(t);return n.exists()?(console.log(n.data()),n.data()):(console.log("No such problem"),null)}class tO{lineAt(e){if(e<0||e>this.length)throw new RangeError("Invalid position ".concat(e," in document of length ").concat(this.length));return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError("Invalid line number ".concat(e," in ").concat(this.lines,"-line document"));return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=uO(this,e,t);let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),rO.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;[e,t]=uO(this,e,t);let n=[];return this.decompose(e,t,n,0),rO.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new sO(this),i=new sO(e);for(let o=t,s=t;;){if(r.next(o),i.next(o),o=0,r.lineBreak!=i.lineBreak||r.done!=i.done||r.value!=i.value)return!1;if(s+=r.value.length,r.done||s>=n)return!0}}iter(){return new sO(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)}iterRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;return new aO(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new lO(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new nO(e):rO.from(nO.split(e,[])):tO.empty}}class nO extends tO{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){let t=-1;for(let n of e)t+=n.length+1;return t}(e);super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.text[i],s=r+o.length;if((t?n:s)>=e)return new cO(r,s,n,o);r=s+1,n++}}decompose(e,t,n,r){let i=e<=0&&t>=this.length?this:new nO(oO(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=n.pop(),t=iO(i.text,e.text.slice(),0,i.length);if(t.length<=32)n.push(new nO(t,e.length+i.length));else{let e=t.length>>1;n.push(new nO(t.slice(0,e)),new nO(t.slice(e)))}}else n.push(i)}replace(e,t,n){if(!(n instanceof nO))return super.replace(e,t,n);[e,t]=uO(this,e,t);let r=iO(this.text,iO(n.text,oO(this.text,0,e)),t),i=this.length+n.length-(t-e);return r.length<=32?new nO(r,i):rO.from(nO.split(r,[]),i)}sliceString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";[e,t]=uO(this,e,t);let r="";for(let i=0,o=0;i<=t&&o<this.text.length;o++){let s=this.text[o],a=i+s.length;i>e&&o&&(r+=n),e<a&&t>i&&(r+=s.slice(Math.max(0,e-i),t-i)),i=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let i of e)n.push(i),r+=i.length+1,32==n.length&&(t.push(new nO(n,r)),n=[],r=-1);return r>-1&&t.push(new nO(n,r)),t}}class rO extends tO{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.children[i],s=r+o.length,a=n+o.lines-1;if((t?a:s)>=e)return o.lineInner(e,t,n,r);r=s+1,n=a+1}}decompose(e,t,n,r){for(let i=0,o=0;o<=t&&i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(e<=a&&t>=o){let i=r&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!i?n.push(s):s.decompose(e-o,t-o,n,i)}o=a+1}}replace(e,t,n){if([e,t]=uO(this,e,t),n.lines<this.lines)for(let r=0,i=0;r<this.children.length;r++){let o=this.children[r],s=i+o.length;if(e>=i&&t<=s){let a=o.replace(e-i,t-i,n),l=this.lines-o.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let i=this.children.slice();return i[r]=a,new rO(i,this.length-(t-e)+n.length)}return super.replace(i,s,a)}i=s+1}return super.replace(e,t,n)}sliceString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";[e,t]=uO(this,e,t);let r="";for(let i=0,o=0;i<this.children.length&&o<=t;i++){let s=this.children[i],a=o+s.length;o>e&&i&&(r+=n),e<a&&t>o&&(r+=s.sliceString(e-o,t-o,n)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof rO))return 0;let n=0,[r,i,o,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,i+=t){if(r==o||i==s)return n;let a=this.children[r],l=e.children[i];if(a!=l)return n+a.scanIdentical(l,t);n+=a.length+1}}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.reduce(((e,t)=>e+t.length+1),-1),n=0;for(let d of e)n+=d.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new nO(n,t)}let r=Math.max(32,n>>5),i=r<<1,o=r>>1,s=[],a=0,l=-1,c=[];function u(e){let t;if(e.lines>i&&e instanceof rO)for(let n of e.children)u(n);else e.lines>o&&(a>o||!a)?(h(),s.push(e)):e instanceof nO&&a&&(t=c[c.length-1])instanceof nO&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,c[c.length-1]=new nO(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>r&&h(),a+=e.lines,l+=e.length+1,c.push(e))}function h(){0!=a&&(s.push(1==c.length?c[0]:rO.from(c,l)),l=-1,a=c.length=0)}for(let d of e)u(d);return h(),1==s.length?s[0]:new rO(s,t)}}function iO(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e9;for(let i=0,o=0,s=!0;o<e.length&&i<=r;o++){let a=e[o],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),s?(t[t.length-1]+=a,s=!1):t.push(a)),i=l+1}return t}function oO(e,t,n){return iO(e,[""],t,n)}tO.empty=new nO([""],0);class sO{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof nO?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],o=i>>1,s=r instanceof nO?r.text.length:r.children.length;if(o==(t>0?s:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof nO){let i=r.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,i.length>Math.max(0,e))return this.value=0==e?i:t>0?i.slice(e):i.slice(0,i.length-e),this;e-=i.length}else{let i=r.children[o+(t<0?-1:0)];e>i.length?(e-=i.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(t>0?1:(i instanceof nO?i.text.length:i.children.length)<<1))}}}next(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class aO{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new sO(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class lO{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,{done:t,lineBreak:n,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(tO.prototype[Symbol.iterator]=function(){return this.iter()},sO.prototype[Symbol.iterator]=aO.prototype[Symbol.iterator]=lO.prototype[Symbol.iterator]=function(){return this});class cO{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}function uO(e,t,n){return[t=Math.max(0,Math.min(e.length,t)),Math.max(t,Math.min(e.length,n))]}let hO="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let n=1;n<hO.length;n++)hO[n]+=hO[n-1];function dO(e){for(let t=1;t<hO.length;t+=2)if(hO[t]>e)return hO[t-1]<=e;return!1}function fO(e){return e>=127462&&e<=127487}const pO=8205;function gO(e,t){return(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?mO:vO)(e,t,!(arguments.length>3&&void 0!==arguments[3])||arguments[3])}function mO(e,t,n){if(t==e.length)return t;t&&yO(e.charCodeAt(t))&&bO(e.charCodeAt(t-1))&&t--;let r=wO(e,t);for(t+=xO(r);t<e.length;){let i=wO(e,t);if(r==pO||i==pO||n&&dO(i))t+=xO(i),r=i;else{if(!fO(i))break;{let n=0,r=t-2;for(;r>=0&&fO(wO(e,r));)n++,r-=2;if(n%2==0)break;t+=2}}}return t}function vO(e,t,n){for(;t>0;){let r=mO(e,t-2,n);if(r<t)return r;t--}return 0}function yO(e){return e>=56320&&e<57344}function bO(e){return e>=55296&&e<56320}function wO(e,t){let n=e.charCodeAt(t);if(!bO(n)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return yO(r)?r-56320+(n-55296<<10)+65536:n}function _O(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function xO(e){return e<65536?1:2}const kO=/\r\n?|\n/;var SO=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}(SO||(SO={}));class EO{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];o<0?(e(n,r,i),r+=i):r+=o,n+=i}}iterChangedRanges(e){AO(this,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new EO(e)}composeDesc(e){return this.empty?e:e.empty?this:IO(this,e)}mapDesc(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.empty?this:NO(this,e,t)}mapPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:SO.Simple,r=0,i=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],a=this.sections[o++],l=r+s;if(a<0){if(l>e)return i+(e-r);i+=s}else{if(n!=SO.Simple&&l>=e&&(n==SO.TrackDel&&r<e&&l>e||n==SO.TrackBefore&&r<e||n==SO.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!s)return e==r||t<0?i:i+a;i+=a}r=l}if(e>r)throw new RangeError("Position ".concat(e," is out of range for changeset of length ").concat(r));return i}touchesRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;for(let n=0,r=0;n<this.sections.length&&r<=t;){let i=r+this.sections[n++];if(this.sections[n++]>=0&&r<=t&&i>=e)return!(r<e&&i>t)||"cover";r=i}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new EO(e)}static create(e){return new EO(e)}}class CO extends EO{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return AO(this,((t,n,r,i,o)=>e=e.replace(r,r+(n-t),o)),!1),e}mapDesc(e){return NO(this,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1],!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,i=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s>=0){t[r]=s,t[r+1]=o;let a=r>>1;for(;n.length<a;)n.push(tO.empty);n.push(o?e.slice(i,i+o):tO.empty)}i+=o}return new CO(t,n)}compose(e){return this.empty?e:e.empty?this:IO(this,e,!0)}map(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.empty?this:NO(this,e,t,!0)}iterChanges(e){AO(this,e,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}get desc(){return EO.create(this.sections)}filter(e){let t=[],n=[],r=[],i=new PO(this);e:for(let o=0,s=0;;){let a=o==e.length?1e9:e[o++];for(;s<a||s==a&&0==i.len;){if(i.done)break e;let e=Math.min(i.len,a-s);TO(r,e,-1);let o=-1==i.ins?-1:0==i.off?i.ins:0;TO(t,e,o),o>0&&OO(n,t,i.text),i.forward(e),s+=e}let l=e[o++];for(;s<l;){if(i.done)break e;let e=Math.min(i.len,l-s);TO(t,e,-1),TO(r,e,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(e),s+=e}}return{changes:new CO(t,n),filtered:EO.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],i=[],o=0,s=null;function a(){if(!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&!r.length)return;o<t&&TO(r,t-o,-1);let e=new CO(r,i);s=s?s.compose(e.map(s)):e,r=[],i=[],o=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof CO){if(l.length!=t)throw new RangeError("Mismatched change set length (got ".concat(l.length,", expected ").concat(t,")"));a(),s=s?s.compose(l.map(s)):l}else{let{from:e,to:s=e,insert:c}=l;if(e>s||e<0||s>t)throw new RangeError("Invalid change range ".concat(e," to ").concat(s," (in doc of length ").concat(t,")"));let u=c?"string"==typeof c?tO.of(c.split(n||kO)):c:tO.empty,h=u.length;if(e==s&&0==h)return;e<o&&a(),e>o&&TO(r,e-o,-1),TO(r,s-e,h),OO(i,r,u),o=s}}(e),a(!s),s}static empty(e){return new CO(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let i=e[r];if("number"==typeof i)t.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)t.push(i[0],0);else{for(;n.length<r;)n.push(tO.empty);n[r]=tO.of(i.slice(1)),t.push(i[0],n[r].length)}}}return new CO(t,n)}static createSet(e,t){return new CO(e,t)}}function TO(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(0==t&&n<=0)return;let i=e.length-2;i>=0&&n<=0&&n==e[i+1]?e[i]+=t:0==t&&0==e[i]?e[i+1]+=n:r?(e[i]+=t,e[i+1]+=n):e.push(t,n)}function OO(e,t,n){if(0==n.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(n);else{for(;e.length<r;)e.push(tO.empty);e.push(n)}}function AO(e,t,n){let r=e.inserted;for(let i=0,o=0,s=0;s<e.sections.length;){let a=e.sections[s++],l=e.sections[s++];if(l<0)i+=a,o+=a;else{let c=i,u=o,h=tO.empty;for(;c+=a,u+=l,l&&r&&(h=h.append(r[s-2>>1])),!(n||s==e.sections.length||e.sections[s+1]<0);)a=e.sections[s++],l=e.sections[s++];t(i,c,o,u,h),i=c,o=u}}}function NO(e,t,n){let r=[],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3]?[]:null,o=new PO(e),s=new PO(t);for(let a=-1;;)if(-1==o.ins&&-1==s.ins){let e=Math.min(o.len,s.len);TO(r,e,-1),o.forward(e),s.forward(e)}else if(s.ins>=0&&(o.ins<0||a==o.i||0==o.off&&(s.len<o.len||s.len==o.len&&!n))){let e=s.len;for(TO(r,s.ins,-1);e;){let t=Math.min(o.len,e);o.ins>=0&&a<o.i&&o.len<=t&&(TO(r,0,o.ins),i&&OO(i,r,o.text),a=o.i),o.forward(t),e-=t}s.next()}else{if(!(o.ins>=0)){if(o.done&&s.done)return i?CO.createSet(r,i):EO.create(r);throw new Error("Mismatched change set lengths")}{let e=0,t=o.len;for(;t;)if(-1==s.ins){let n=Math.min(t,s.len);e+=n,t-=n,s.forward(n)}else{if(!(0==s.ins&&s.len<t))break;t-=s.len,s.next()}TO(r,e,a<o.i?o.ins:0),i&&a<o.i&&OO(i,r,o.text),a=o.i,o.forward(o.len-t)}}}function IO(e,t){let n=[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?[]:null,i=new PO(e),o=new PO(t);for(let s=!1;;){if(i.done&&o.done)return r?CO.createSet(n,r):EO.create(n);if(0==i.ins)TO(n,i.len,0,s),i.next();else if(0!=o.len||o.done){if(i.done||o.done)throw new Error("Mismatched change set lengths");{let e=Math.min(i.len2,o.len),t=n.length;if(-1==i.ins){let t=-1==o.ins?-1:o.off?0:o.ins;TO(n,e,t,s),r&&t&&OO(r,n,o.text)}else-1==o.ins?(TO(n,i.off?0:i.len,e,s),r&&OO(r,n,i.textBit(e))):(TO(n,i.off?0:i.len,o.off?0:o.ins,s),r&&!o.off&&OO(r,n,o.text));s=(i.ins>e||o.ins>=0&&o.len>e)&&(s||n.length>t),i.forward2(e),o.forward(e)}}else TO(n,0,o.ins,s),r&&OO(r,n,o.text),o.next()}}class PO{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?tO.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?tO.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class RO{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 16777215==e?void 0:e}map(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return this.empty?t=n=e.mapPos(this.from,r):(t=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),t==this.from&&n==this.to?this:new RO(t,n,this.flags)}extend(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(e<=this.anchor&&t>=this.anchor)return DO.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return DO.range(this.anchor,n)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return DO.range(e.anchor,e.head)}static create(e,t,n){return new RO(e,t,n)}}class DO{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return e.empty?this:DO.create(this.ranges.map((n=>n.map(e,t))),this.mainIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new DO([this.main],0)}addRange(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return DO.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.mainIndex,n=this.ranges.slice();return n[t]=e,DO.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new DO(e.ranges.map((e=>RO.fromJSON(e))),e.main)}static single(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return new DO([DO.range(e,t)],0)}static create(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let i=e[r];if(i.empty?i.from<=n:i.from<n)return DO.normalized(e.slice(),t);n=i.to}return new DO(e,t)}static cursor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return RO.create(e,e,(0==t?0:t<0?8:16)|(null==n?7:Math.min(6,n))|(null!==r&&void 0!==r?r:16777215)<<6)}static range(e,t,n,r){let i=(null!==n&&void 0!==n?n:16777215)<<6|(null==r?7:Math.min(6,r));return t<e?RO.create(t,e,48|i):RO.create(e,t,(t>e?8:0)|i)}static normalized(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(n);for(let r=1;r<e.length;r++){let n=e[r],i=e[r-1];if(n.empty?n.from<=i.to:n.from<i.to){let o=i.from,s=Math.max(n.to,i.to);r<=t&&t--,e.splice(--r,2,n.anchor>n.head?DO.range(s,o):DO.range(o,s))}}return new DO(e,t)}}function MO(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let LO=0;class jO{constructor(e,t,n,r,i){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=LO++,this.default=e([]),this.extensions="function"==typeof i?i(this):i}get reader(){return this}static define(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new jO(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:FO),!!e.static,e.enables)}of(e){return new qO([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new qO(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new qO(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(n=>t(n.field(e))))}}function FO(e,t){return e==t||e.length==t.length&&e.every(((e,n)=>e===t[n]))}class qO{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=LO++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,i=this.id,o=e[i]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let u of this.dependencies)"doc"==u?a=!0:"selection"==u?l=!0:0==(1&(null!==(t=e[u.id])&&void 0!==t?t:1))&&c.push(e[u.id]);return{create:e=>(e.values[o]=n(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||UO(e,c)){let t=n(e);if(s?!BO(t,e.values[o],r):!r(t,e.values[o]))return e.values[o]=t,1}return 0},reconfigure:(e,t)=>{let a,l=t.config.address[i];if(null!=l){let i=nA(t,l);if(this.dependencies.every((n=>n instanceof jO?t.facet(n)===e.facet(n):!(n instanceof HO)||t.field(n,!1)==e.field(n,!1)))||(s?BO(a=n(e),i,r):r(a=n(e),i)))return e.values[o]=i,0}else a=n(e);return e.values[o]=a,1}}}}function BO(e,t,n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function UO(e,t){let n=!1;for(let r of t)1&tA(e,r)&&(n=!0);return n}function VO(e,t,n){let r=n.map((t=>e[t.id])),i=n.map((e=>e.type)),o=r.filter((e=>!(1&e))),s=e[t.id]>>1;function a(e){let n=[];for(let t=0;t<r.length;t++){let o=nA(e,r[t]);if(2==i[t])for(let e of o)n.push(e);else n.push(o)}return t.combine(n)}return{create(e){for(let t of r)tA(e,t);return e.values[s]=a(e),1},update(e,n){if(!UO(e,o))return 0;let r=a(e);return t.compare(r,e.values[s])?0:(e.values[s]=r,1)},reconfigure(e,i){let o=UO(e,r),l=i.config.facets[t.id],c=i.facet(t);if(l&&!o&&FO(n,l))return e.values[s]=c,0;let u=a(e);return t.compare(u,c)?(e.values[s]=c,0):(e.values[s]=u,1)}}}const zO=jO.define({static:!0});class HO{constructor(e,t,n,r,i){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=i,this.provides=void 0}static define(e){let t=new HO(LO++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(zO).find((e=>e.field==this));return((null===t||void 0===t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let r=e.values[t],i=this.updateF(r,n);return this.compareF(r,i)?0:(e.values[t]=i,1)},reconfigure:(e,n)=>null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,zO.of({field:this,create:e})]}get extension(){return this}}const WO=4,KO=3,GO=2,YO=1;function QO(e){return t=>new XO(t,e)}const $O={highest:QO(0),high:QO(YO),default:QO(GO),low:QO(KO),lowest:QO(WO)};class XO{constructor(e,t){this.inner=e,this.prec=t}}class JO{of(e){return new ZO(this,e)}reconfigure(e){return JO.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class ZO{constructor(e,t){this.compartment=e,this.inner=t}}class eA{constructor(e,t,n,r,i,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=i,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],i=Object.create(null),o=new Map;for(let h of function(e,t,n){let r=[[],[],[],[],[]],i=new Map;function o(e,s){let a=i.get(e);if(null!=a){if(a<=s)return;let t=r[a].indexOf(e);t>-1&&r[a].splice(t,1),e instanceof ZO&&n.delete(e.compartment)}if(i.set(e,s),Array.isArray(e))for(let t of e)o(t,s);else if(e instanceof ZO){if(n.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=t.get(e.compartment)||e.inner;n.set(e.compartment,r),o(r,s)}else if(e instanceof XO)o(e.inner,e.prec);else if(e instanceof HO)r[s].push(e),e.provides&&o(e.provides,s);else if(e instanceof qO)r[s].push(e),e.facet.extensions&&o(e.facet.extensions,GO);else{let t=e.extension;if(!t)throw new Error("Unrecognized extension value in extension set (".concat(e,"). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks."));o(t,s)}}return o(e,GO),r.reduce(((e,t)=>e.concat(t)))}(e,t,o))h instanceof HO?r.push(h):(i[h.facet.id]||(i[h.facet.id]=[])).push(h);let s=Object.create(null),a=[],l=[];for(let h of r)s[h.id]=l.length<<1,l.push((e=>h.slot(e)));let c=null===n||void 0===n?void 0:n.config.facets;for(let h in i){let e=i[h],t=e[0].facet,r=c&&c[h]||[];if(e.every((e=>0==e.type)))if(s[t.id]=a.length<<1|1,FO(r,e))a.push(n.facet(t));else{let r=t.combine(e.map((e=>e.value)));a.push(n&&t.compare(r,n.facet(t))?n.facet(t):r)}else{for(let t of e)0==t.type?(s[t.id]=a.length<<1|1,a.push(t.value)):(s[t.id]=l.length<<1,l.push((e=>t.dynamicSlot(e))));s[t.id]=l.length<<1,l.push((n=>VO(n,t,e)))}}let u=l.map((e=>e(s)));return new eA(e,o,u,s,a,i)}}function tA(e,t){if(1&t)return 2;let n=t>>1,r=e.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;let i=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|i}function nA(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const rA=jO.define(),iA=jO.define({combine:e=>e.some((e=>e)),static:!0}),oA=jO.define({combine:e=>e.length?e[0]:void 0,static:!0}),sA=jO.define(),aA=jO.define(),lA=jO.define(),cA=jO.define({combine:e=>!!e.length&&e[0]});class uA{constructor(e,t){this.type=e,this.value=t}static define(){return new hA}}class hA{of(e){return new uA(this,e)}}class dA{constructor(e){this.map=e}of(e){return new fA(this,e)}}class fA{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new fA(this.type,t)}is(e){return this.type==e}static define(){return new dA((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let e=r.map(t);e&&n.push(e)}return n}}fA.reconfigure=fA.define(),fA.appendConfig=fA.define();class pA{constructor(e,t,n,r,i,o){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,n&&MO(n,t.newLength),i.some((e=>e.type==pA.time))||(this.annotations=i.concat(pA.time.of(Date.now())))}static create(e,t,n,r,i,o){return new pA(e,t,n,r,i,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(pA.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function gA(e,t){let n=[];for(let r=0,i=0;;){let o,s;if(r<e.length&&(i==t.length||t[i]>=e[r]))o=e[r++],s=e[r++];else{if(!(i<t.length))return n;o=t[i++],s=t[i++]}!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function mA(e,t,n){var r;let i,o,s;return n?(i=t.changes,o=CO.empty(t.changes.length),s=e.changes.compose(t.changes)):(i=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(i)),{changes:s,selection:t.selection?t.selection.map(o):null===(r=e.selection)||void 0===r?void 0:r.map(i),effects:fA.mapEffects(e.effects,i).concat(fA.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function vA(e,t,n){let r=t.selection,i=wA(t.annotations);return t.userEvent&&(i=i.concat(pA.userEvent.of(t.userEvent))),{changes:t.changes instanceof CO?t.changes:CO.of(t.changes||[],n,e.facet(oA)),selection:r&&(r instanceof DO?r:DO.single(r.anchor,r.head)),effects:wA(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}function yA(e,t,n){let r=vA(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let o=1;o<t.length;o++){!1===t[o].filter&&(n=!1);let i=!!t[o].sequential;r=mA(r,vA(e,t[o],i?r.changes.newLength:e.doc.length),i)}let i=pA.create(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return function(e){let t=e.startState,n=t.facet(lA),r=e;for(let i=n.length-1;i>=0;i--){let o=n[i](e);o&&Object.keys(o).length&&(r=mA(r,vA(t,o,e.changes.newLength),!0))}return r==e?e:pA.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}(n?function(e){let t=e.startState,n=!0;for(let i of t.facet(sA)){let t=i(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:gA(n,t))}if(!0!==n){let r,i;if(!1===n)i=e.changes.invertedDesc,r=CO.empty(t.doc.length);else{let t=e.changes.filter(n);r=t.changes,i=t.filtered.mapDesc(t.changes).invertedDesc}e=pA.create(t,r,e.selection&&e.selection.map(i),fA.mapEffects(e.effects,i),e.annotations,e.scrollIntoView)}let r=t.facet(aA);for(let i=r.length-1;i>=0;i--){let n=r[i](e);e=n instanceof pA?n:Array.isArray(n)&&1==n.length&&n[0]instanceof pA?n[0]:yA(t,wA(n),!1)}return e}(i):i)}pA.time=uA.define(),pA.userEvent=uA.define(),pA.addToHistory=uA.define(),pA.remote=uA.define();const bA=[];function wA(e){return null==e?bA:Array.isArray(e)?e:[e]}var _A=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(_A||(_A={}));const xA=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let kA;try{kA=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(YV){}function SA(e){return t=>{if(!/\S/.test(t))return _A.Space;if(function(e){if(kA)return kA.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>"\x80"&&(n.toUpperCase()!=n.toLowerCase()||xA.test(n)))return!0}return!1}(t))return _A.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return _A.Word;return _A.Other}}class EA{constructor(e,t,n,r,i,o){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let s=0;s<this.config.dynamicSlots.length;s++)tA(this,s<<1);this.computeSlot=null}field(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.config.address[e.id];if(null!=n)return tA(this,n),nA(this,n);if(t)throw new RangeError("Field is not present in this state")}update(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return yA(this,t,!0)}applyTransaction(e){let t,n=this.config,{base:r,compartments:i}=n;for(let s of e.effects)s.is(JO.reconfigure)?(n&&(i=new Map,n.compartments.forEach(((e,t)=>i.set(t,e))),n=null),i.set(s.value.compartment,s.value.extension)):s.is(fA.reconfigure)?(n=null,r=s.value):s.is(fA.appendConfig)&&(n=null,r=wA(r).concat(s.value));if(n)t=e.startState.values.slice();else{n=eA.resolve(r,i,this),t=new EA(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values}let o=e.startState.facet(iA)?e.newSelection:e.newSelection.asSingle();new EA(n,e.newDoc,o,t,((t,n)=>n.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:DO.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),i=[n.range],o=wA(n.effects);for(let s=1;s<t.ranges.length;s++){let n=e(t.ranges[s]),a=this.changes(n.changes),l=a.map(r);for(let e=0;e<s;e++)i[e]=i[e].map(l);let c=r.mapDesc(a,!0);i.push(n.range.map(c)),r=r.compose(l),o=fA.mapEffects(o,l).concat(fA.mapEffects(wA(n.effects),c))}return{changes:r,selection:DO.create(i,t.mainIndex),effects:o}}changes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e instanceof CO?e:CO.of(e,this.doc.length,this.facet(EA.lineSeparator))}toText(e){return tO.of(e.split(this.facet(EA.lineSeparator)||kO))}sliceDoc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.doc.length;return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(tA(this,t),nA(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof HO&&null!=this.config.address[r.id]&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n)for(let i in n)if(Object.prototype.hasOwnProperty.call(e,i)){let t=n[i],o=e[i];r.push(t.init((e=>t.spec.fromJSON(o,e))))}return EA.create({doc:e.doc,selection:DO.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=eA.resolve(e.extensions||[],new Map),n=e.doc instanceof tO?e.doc:tO.of((e.doc||"").split(t.staticFacet(EA.lineSeparator)||kO)),r=e.selection?e.selection instanceof DO?e.selection:DO.single(e.selection.anchor,e.selection.head):DO.single(0);return MO(r,n.length),t.staticFacet(iA)||(r=r.asSingle()),new EA(t,n,r,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(EA.tabSize)}get lineBreak(){return this.facet(EA.lineSeparator)||"\n"}get readOnly(){return this.facet(cA)}phrase(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let i of this.facet(EA.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,((e,t)=>{if("$"==t)return"$";let r=+(t||1);return!r||r>n.length?e:n[r-1]}))),e}languageDataAt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=[];for(let i of this.facet(rA))for(let o of i(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return SA(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),i=this.charCategorizer(e),o=e-n,s=e-n;for(;o>0;){let e=gO(t,o,!1);if(i(t.slice(e,o))!=_A.Word)break;o=e}for(;s<r;){let e=gO(t,s);if(i(t.slice(s,e))!=_A.Word)break;s=e}return o==s?null:DO.range(o+n,s+n)}}function CA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={};for(let i of e)for(let e of Object.keys(i)){let t=i[e],o=r[e];if(void 0===o)r[e]=t;else if(o===t||void 0===t);else{if(!Object.hasOwnProperty.call(n,e))throw new Error("Config merge conflict for field "+e);r[e]=n[e](o,t)}}for(let i in t)void 0===r[i]&&(r[i]=t[i]);return r}EA.allowMultipleSelections=iA,EA.tabSize=jO.define({combine:e=>e.length?e[0]:4}),EA.lineSeparator=oA,EA.readOnly=cA,EA.phrases=jO.define({compare(e,t){let n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every((n=>e[n]==t[n]))}}),EA.languageData=rA,EA.changeFilter=sA,EA.transactionFilter=aA,EA.transactionExtender=lA,JO.reconfigure=fA.define();class TA{eq(e){return this==e}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return OA.create(e,t,this)}}TA.prototype.startSide=TA.prototype.endSide=0,TA.prototype.point=!1,TA.prototype.mapMode=SO.TrackDel;class OA{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new OA(e,t,n)}}function AA(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class NA{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=n?this.to:this.from;for(let o=r,s=i.length;;){if(o==s)return o;let r=o+s>>1,a=i[r]-e||(n?this.value[r].endSide:this.value[r].startSide)-t;if(r==o)return a>=0?o:s;a>=0?s=r:o=r+1}}between(e,t,n,r){for(let i=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,i);i<o;i++)if(!1===r(this.from[i]+e,this.to[i]+e,this.value[i]))return!1}map(e,t){let n=[],r=[],i=[],o=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,c,u=this.value[a],h=this.from[a]+e,d=this.to[a]+e;if(h==d){let e=t.mapPos(h,u.startSide,u.mapMode);if(null==e)continue;if(l=c=e,u.startSide!=u.endSide&&(c=t.mapPos(h,u.endSide),c<l))continue}else if(l=t.mapPos(h,u.startSide),c=t.mapPos(d,u.endSide),l>c||l==c&&u.startSide>0&&u.endSide<=0)continue;(c-l||u.endSide-u.startSide)<0||(o<0&&(o=l),u.point&&(s=Math.max(s,c-l)),n.push(u),r.push(l-o),i.push(c-o))}return{mapped:n.length?new NA(r,i,n,s):null,pos:o}}}class IA{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new IA(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:i=this.length}=e,o=e.filter;if(0==t.length&&!o)return this;if(n&&(t=t.slice().sort(AA)),this.isEmpty)return t.length?IA.of(t):this;let s=new DA(this,null,-1).goto(0),a=0,l=[],c=new PA;for(;s.value||a<t.length;)if(a<t.length&&(s.from-t[a].from||s.startSide-t[a].value.startSide)>=0){let e=t[a++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(s.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(s.chunkIndex)||i<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||r>s.to||i<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(OA.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?IA.empty:this.nextLayer.update({add:l,filter:o,filterFrom:r,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let o=0;o<this.chunk.length;o++){let i=this.chunkPos[o],s=this.chunk[o],a=e.touchesRange(i,i+s.length);if(!1===a)r=Math.max(r,s.maxPoint),t.push(s),n.push(e.mapPos(i));else if(!0===a){let{mapped:o,pos:a}=s.map(i,e);o&&(r=Math.max(r,o.maxPoint),t.push(o),n.push(a))}}let i=this.nextLayer.map(e);return 0==t.length?i:new IA(n,t,i||IA.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let i=this.chunkPos[r],o=this.chunk[r];if(t>=i&&e<=i+o.length&&!1===o.between(i,e-i,t-i,n))return}this.nextLayer.between(e,t,n)}}iter(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return MA.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return MA.from(e).goto(t)}static compare(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,o=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),s=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),a=RA(o,s,n),l=new jA(o,a,i),c=new jA(s,a,i);n.iterGaps(((e,t,n)=>FA(l,e,c,t,n,r))),n.empty&&0==n.length&&FA(l,0,c,0,0,r)}static eq(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0;null==r&&(r=999999999);let i=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),o=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(i.length!=o.length)return!1;if(!i.length)return!0;let s=RA(i,o),a=new jA(i,s,0).goto(n),l=new jA(o,s,0).goto(n);for(;;){if(a.to!=l.to||!qA(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>r)return!0;a.next(),l.next()}}static spans(e,t,n,r){let i=new jA(e,null,arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1).goto(t),o=t,s=i.openStart;for(;;){let e=Math.min(i.to,n);if(i.point){let n=i.activeForPoint(i.to),a=i.pointFrom<t?n.length+1:Math.min(n.length,s);r.point(o,e,i.point,n,a,i.pointRank),s=Math.min(i.openEnd(e),n.length)}else e>o&&(r.span(o,e,i.active,s),s=i.openEnd(e));if(i.to>n)return s+(i.point&&i.to>n?1:0);o=i.to,i.next()}}static of(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new PA;for(let r of e instanceof OA?[e]:t?function(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let r=e[n];if(AA(t,r)>0)return e.slice().sort(AA);t=r}return e}(e):e)n.add(r.from,r.to,r.value);return n.finish()}}IA.empty=new IA([],[],null,-1),IA.empty.nextLayer=IA.empty;class PA{finishChunk(e){this.chunks.push(new NA(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new PA)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(IA.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=IA.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function RA(e,t,n){let r=new Map;for(let o of e)for(let e=0;e<o.chunk.length;e++)o.chunk[e].maxPoint<=0&&r.set(o.chunk[e],o.chunkPos[e]);let i=new Set;for(let o of t)for(let e=0;e<o.chunk.length;e++){let t=r.get(o.chunk[e]);null==t||(n?n.mapPos(t):t)!=o.chunkPos[e]||(null===n||void 0===n?void 0:n.touchesRange(t,t+o.chunk[e].length))||i.add(o.chunk[e])}return i}class DA{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class MA{constructor(e){this.heap=e}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=[];for(let i=0;i<e.length;i++)for(let o=e[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new DA(o,t,n,i));return 1==r.length?r[0]:new MA(r)}get startSide(){return this.value?this.value.startSide:0}goto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)LA(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)LA(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),LA(this.heap,0)}}}function LA(e,t){for(let n=e[t];;){let r=1+(t<<1);if(r>=e.length)break;let i=e[r];if(r+1<e.length&&i.compare(e[r+1])>=0&&(i=e[r+1],r++),n.compare(i)<0)break;e[r]=n,e[t]=i,t=r}}class jA{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=MA.from(e,t,n)}goto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1e9;return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){BA(this.active,e),BA(this.activeTo,e),BA(this.activeRank,e),this.minActive=VA(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:i}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=i;)t++;UA(this.active,t,n),UA(this.activeTo,t,r),UA(this.activeRank,t,i),e&&UA(e,t,this.cursor.from),this.minActive=VA(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&BA(n,r)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let t=n.length-1;t>=0&&n[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function FA(e,t,n,r,i,o){e.goto(t),n.goto(r);let s=r+i,a=r,l=r-t;for(;;){let t=e.to+l-n.to||e.endSide-n.endSide,r=t<0?e.to+l:n.to,i=Math.min(r,s);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&qA(e.activeForPoint(e.to),n.activeForPoint(n.to))||o.comparePoint(a,i,e.point,n.point):i>a&&!qA(e.active,n.active)&&o.compareRange(a,i,e.active,n.active),r>s)break;a=r,t<=0&&e.next(),t>=0&&n.next()}}function qA(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function BA(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function UA(e,t,n){for(let r=e.length-1;r>=t;r--)e[r+1]=e[r];e[t]=n}function VA(e,t){let n=-1,r=1e9;for(let i=0;i<t.length;i++)(t[i]-r||e[i].endSide-e[n].endSide)<0&&(n=i,r=t[i]);return n}function zA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=0;for(let i=0;i<n;)9==e.charCodeAt(i)?(r+=t-r%t,i++):(r++,i=gO(e,i));return r}function HA(e,t,n,r){for(let i=0,o=0;;){if(o>=t)return i;if(i==e.length)break;o+=9==e.charCodeAt(i)?n-o%n:1,i=gO(e,i)}return!0===r?-1:e.length}const WA="undefined"==typeof Symbol?"__\u037c":Symbol.for("\u037c"),KA="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),GA="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class YA{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function i(e,t,o,s){let a=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return o.push(e[0]+";");for(let n in t){let s=t[n];if(/&/.test(n))i(n.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),s,o);else if(s&&"object"==typeof s){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");i(r(n),s,a,c)}else null!=s&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+s+";")}(a.length||c)&&o.push((!n||l||s?e:e.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let o in e)i(r(o),e[o],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=GA[WA]||1;return GA[WA]=e+1,"\u037c"+e.toString(36)}static mount(e,t,n){let r=e[KA],i=n&&n.nonce;r?i&&r.setNonce(i):r=new $A(e,i),r.mount(Array.isArray(t)?t:[t])}}let QA=new Map;class $A{constructor(e,t){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let t=QA.get(n);if(t)return e.adoptedStyleSheets=[t.sheet,...e.adoptedStyleSheets],e[KA]=t;this.sheet=new r.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet,...e.adoptedStyleSheets],QA.set(n,this)}else{this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);let r=e.head||e;r.insertBefore(this.styleTag,r.firstChild)}this.modules=[],e[KA]=this}mount(e){let t=this.sheet,n=0,r=0;for(let i=0;i<e.length;i++){let o=e[i],s=this.modules.indexOf(o);if(s<r&&s>-1&&(this.modules.splice(s,1),r--,s=-1),-1==s){if(this.modules.splice(r++,0,o),t)for(let e=0;e<o.rules.length;e++)t.insertRule(o.rules[e],n++)}else{for(;r<s;)n+=this.modules[r++].rules.length;n+=o.rules.length,r++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var XA={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},JA={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},ZA="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),eN="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),tN=0;tN<10;tN++)XA[48+tN]=XA[96+tN]=String(tN);for(tN=1;tN<=24;tN++)XA[tN+111]="F"+tN;for(tN=65;tN<=90;tN++)XA[tN]=String.fromCharCode(tN+32),JA[tN]=String.fromCharCode(tN);for(var nN in XA)JA.hasOwnProperty(nN)||(JA[nN]=XA[nN]);function rN(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function iN(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function oN(e,t){if(!t.anchorNode)return!1;try{return iN(e,t.anchorNode)}catch(YV){return!1}}function sN(e){return 3==e.nodeType?yN(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function aN(e,t,n,r){return!!n&&(cN(e,t,n,r,-1)||cN(e,t,n,r,1))}function lN(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function cN(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:uN(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=lN(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(i<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=i<0?uN(e):0}}}function uN(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function hN(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function dN(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function fN(e,t){let n=t.width/e.offsetWidth,r=t.height/e.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(t.width-e.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(t.height-e.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}class pN{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?uN(t):0),n,Math.min(e.focusOffset,n?uN(n):0))}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let gN,mN=null;function vN(e){if(e.setActive)return e.setActive();if(mN)return e.focus(mN);let t=[];for(let n=e;n&&(t.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(e.focus(null==mN?{get preventScroll(){return mN={preventScroll:!0},!0}}:void 0),!mN){mN=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],i=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=i&&(n.scrollLeft=i)}}}function yN(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=gN||(gN=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function bN(e,t,n){let r={key:t,code:t,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",r);i.synthetic=!0,e.dispatchEvent(i);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,e.dispatchEvent(o),i.defaultPrevented||o.defaultPrevented}function wN(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function _N(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}class xN{constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.node=e,this.offset=t,this.precise=n}static before(e,t){return new xN(e.parentNode,lN(e),t)}static after(e,t){return new xN(e.parentNode,lN(e)+1,t)}}const kN=[];class SN{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.flags){let n,r=this.dom,i=null;for(let o of this.children){if(7&o.flags){if(!o.dom&&(n=i?i.nextSibling:r.firstChild)){let e=SN.get(n);(!e||!e.parent&&e.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(e,t),o.flags&=-8}if(n=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&n!=o.dom&&(t.written=!0),o.dom.parentNode==r)for(;n&&n!=o.dom;)n=EN(n);else r.insertBefore(o.dom,n);i=o.dom}for(n=i?i.nextSibling:r.firstChild,n&&t&&t.node==r&&(t.written=!0);n;)n=EN(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=0==uN(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}n=r<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!SN.get(n);)n=n.nextSibling;if(!n)return this.length;for(let r=0,i=0;;r++){let e=this.children[r];if(e.dom==n)return i;i+=e.length+e.breakAfter}}domBoundsAround(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=-1,i=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],u=l+n.length;if(l<e&&u>t)return n.domBoundsAround(e,t,l);if(u>=e&&-1==r&&(r=a,i=l),l>t&&n.dom.parentNode==this.dom){o=a,s=c;break}c=u,l=u+n.breakAfter}return{from:i,to:s<0?n+this.length:s,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),1&t.flags)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kN;this.markDirty();for(let r=e;r<t;r++){let e=this.children[r];e.parent==this&&n.indexOf(e)<0&&e.destroy()}this.children.splice(e,t-e,...n);for(let r=0;r<n.length;r++)n[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length;return new CN(this.children,e,this.children.length)}childPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,r,i,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!(8&(this.flags|e.flags))}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}function EN(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}SN.prototype.breakAfter=0;class CN{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function TN(e,t,n,r,i,o,s,a,l){let{children:c}=e,u=c.length?c[t]:null,h=o.length?o[o.length-1]:null,d=h?h.breakAfter:s;if(!(t==r&&u&&!s&&!d&&o.length<2&&u.merge(n,i,o.length?h:null,0==n,a,l))){if(r<c.length){let e=c[r];e&&(i<e.length||e.breakAfter&&(null===h||void 0===h?void 0:h.breakAfter))?(t==r&&(e=e.split(i),i=0),!d&&h&&e.merge(0,i,h,!0,0,l)?o[o.length-1]=e:((i||e.children.length&&!e.children[0].length)&&e.merge(0,i,null,!1,0,l),o.push(e))):(null===e||void 0===e?void 0:e.breakAfter)&&(h?h.breakAfter=1:s=1),r++}for(u&&(u.breakAfter=s,n>0&&(!s&&o.length&&u.merge(n,u.length,o[0],!1,a,0)?u.breakAfter=o.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,a,0),t++));t<r&&o.length;)if(c[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:a;else{if(!c[t].become(o[0]))break;t++,o.shift(),a=o.length?0:l}!o.length&&t&&r<c.length&&!c[t-1].breakAfter&&c[r].merge(0,0,c[t-1],!1,a,l)&&t--,(t<r||o.length)&&e.replaceChildren(t,r,o)}}function ON(e,t,n,r,i,o){let s=e.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:u}=s.findPos(t,-1),h=t-n;for(let d of r)h+=d.length;e.length+=h,TN(e,c,u,a,l,r,0,i,o)}let AN="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},NN="undefined"!=typeof document?document:{documentElement:{style:{}}};const IN=/Edge\/(\d+)/.exec(AN.userAgent),PN=/MSIE \d/.test(AN.userAgent),RN=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(AN.userAgent),DN=!!(PN||RN||IN),MN=!DN&&/gecko\/(\d+)/i.test(AN.userAgent),LN=!DN&&/Chrome\/(\d+)/.exec(AN.userAgent),jN="webkitFontSmoothing"in NN.documentElement.style,FN=!DN&&/Apple Computer/.test(AN.vendor),qN=FN&&(/Mobile\/\w+/.test(AN.userAgent)||AN.maxTouchPoints>2);var BN={mac:qN||/Mac/.test(AN.platform),windows:/Win/.test(AN.platform),linux:/Linux|X11/.test(AN.platform),ie:DN,ie_version:PN?NN.documentMode||6:RN?+RN[1]:IN?+IN[1]:0,gecko:MN,gecko_version:MN?+(/Firefox\/(\d+)/.exec(AN.userAgent)||[0,0])[1]:0,chrome:!!LN,chrome_version:LN?+LN[1]:0,ios:qN,android:/Android\b/.test(AN.userAgent),webkit:jN,safari:FN,webkit_version:jN?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=NN.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class UN extends SN{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return!(8&this.flags||n&&(!(n instanceof UN)||this.length-(t-e)+n.length>256||8&n.flags))&&(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new UN(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=8&this.flags,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new xN(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return function(e,t,n){let r=e.nodeValue.length;t>r&&(t=r);let i=t,o=t,s=0;0==t&&n<0||t==r&&n>=0?BN.chrome||BN.gecko||(t?(i--,s=1):o<r&&(o++,s=-1)):n<0?i--:o<r&&o++;let a=yN(e,i,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:n>=0)?0:a.length-1];BN.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(e=>e.width))||l);return s?hN(l,s<0):l||null}(this.dom,e,t)}}class VN extends SN{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(),this.mark=e,this.children=t,this.length=n;for(let r of t)r.setParent(this)}setAttrs(e){if(wN(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!(8&(this.flags|e.flags))}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,r,i,o){return(!n||!(!(n instanceof VN&&n.mark.eq(this.mark))||e&&i<=0||t<this.length&&o<=0))&&(ON(this,e,t,n?n.children.slice():[],i-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,i=0;for(let s of this.children){let o=n+s.length;o>e&&t.push(n<e?s.split(e-n):s),r<0&&n>=e&&(r=i),n=o,i++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new VN(this.mark,t,o)}domAtPos(e){return WN(this,e)}coordsAt(e,t){return GN(this,e,t)}}class zN extends SN{static create(e,t,n){return new zN(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=zN.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof zN&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof zN&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return tO.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):tO.empty}domAtPos(e){return(this.length?0==e:this.side>0)?xN.before(this.dom):xN.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let r=this.dom.getClientRects(),i=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let s=o?r.length-1:0;i=r[s],!(e>0?0==s:s==r.length-1||i.top<i.bottom);s+=o?-1:1);return hN(i,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class HN extends SN{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof HN&&e.side==this.side}split(){return new HN(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?xN.before(this.dom):xN.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return tO.empty}get isHidden(){return!0}}function WN(e,t){let n=e.dom,{children:r}=e,i=0;for(let o=0;i<r.length;i++){let e=r[i],s=o+e.length;if(!(s==o&&e.getSide()<=0)){if(t>o&&t<s&&e.dom.parentNode==n)return e.domAtPos(t-o);if(t<=o)break;o=s}}for(let o=i;o>0;o--){let e=r[o-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let o=i;o<r.length;o++){let e=r[o];if(e.dom.parentNode==n)return e.domAtPos(0)}return new xN(n,0)}function KN(e,t,n){let r,{children:i}=e;n>0&&t instanceof VN&&i.length&&(r=i[i.length-1])instanceof VN&&r.mark.eq(t.mark)?KN(r,t.children[0],n-1):(i.push(t),t.setParent(e)),e.length+=t.length}function GN(e,t,n){let r=null,i=-1,o=null,s=-1;!function e(t,a){for(let l=0,c=0;l<t.children.length&&c<=a;l++){let u=t.children[l],h=c+u.length;h>=a&&(u.children.length?e(u,a-c):(!o||o.isHidden&&n>0)&&(h>a||c==h&&u.getSide()>0)?(o=u,s=a-c):(c<a||c==h&&u.getSide()<0&&!u.isHidden)&&(r=u,i=a-c)),c=h}}(e,t);let a=(n<0?r:o)||r||o;return a?a.coordsAt(Math.max(0,a==r?i:s),n):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let n=sN(t);return n[n.length-1]||null}(e)}function YN(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}UN.prototype.children=zN.prototype.children=HN.prototype.children=kN;const QN=Object.create(null);function $N(e,t,n){if(e==t)return!0;e||(e=QN),t||(t=QN);let r=Object.keys(e),i=Object.keys(t);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let o of r)if(o!=n&&(-1==i.indexOf(o)||e[o]!==t[o]))return!1;return!0}function XN(e,t,n){let r=!1;if(t)for(let i in t)n&&i in n||(r=!0,"style"==i?e.style.cssText="":e.removeAttribute(i));if(n)for(let i in n)t&&t[i]==n[i]||(r=!0,"style"==i?e.style.cssText=n[i]:e.setAttribute(i,n[i]));return r}function JN(e){let t=Object.create(null);for(let n=0;n<e.attributes.length;n++){let r=e.attributes[n];t[r.name]=r.value}return t}class ZN extends SN{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,i,o){if(n){if(!(n instanceof ZN))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),ON(this,e,t,n?n.children.slice():[],i,o),!0}split(e){let t=new ZN;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let i=n;i<this.children.length;i++)t.append(this.children[i],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){$N(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){KN(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=YN(t,this.attrs||{})),n&&(this.attrs=YN({class:n},this.attrs||{}))}domAtPos(e){return WN(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?4&this.flags&&(wN(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(XN(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;for(;r&&SN.get(r)instanceof VN;)r=r.lastChild;if(!r||!this.length||"BR"!=r.nodeName&&0==(null===(n=SN.get(r))||void 0===n?void 0:n.isEditable)&&(!BN.ios||!this.children.some((e=>e instanceof UN)))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e,t=0;for(let n of this.children){if(!(n instanceof UN)||/[^ -~]/.test(n.text))return null;let r=sN(n.dom);if(1!=r.length)return null;t+=r[0].width,e=r[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(e,t){let n=GN(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=n.bottom-n.top;if(Math.abs(t-e.lineHeight)<2&&e.textHeight<t){let r=(t-e.textHeight)/2;return{top:n.top+r,bottom:n.bottom-r,left:n.left,right:n.left}}}return n}become(e){return!1}covers(){return!0}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let i=e.children[n],o=r+i.length;if(o>=t){if(i instanceof ZN)return i;if(o>t)break}r=o+i.breakAfter}return null}}class eI extends SN{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof eI&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?xN.before(this.dom):xN.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new eI(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return kN}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):tO.empty}domBoundsAround(){return null}become(e){return e instanceof eI&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t!=n&&(e<0?t<0:n>0)}}class tI{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}destroy(e){}}var nI=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(nI||(nI={}));class rI extends TA{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new iI(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new sI(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,r=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{let{start:i,end:o}=aI(e,r);t=(i?r?-3e8:-1:5e8)-1,n=1+(o?r?2e8:1:-6e8)}return new sI(e,t,n,r,e.widget||null,!0)}static line(e){return new oI(e)}static set(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return IA.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}rI.none=IA.empty;class iI extends rI{constructor(e){let{start:t,end:n}=aI(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof iI&&this.tagName==e.tagName&&(this.class||(null===(t=this.attrs)||void 0===t?void 0:t.class))==(e.class||(null===(n=e.attrs)||void 0===n?void 0:n.class))&&$N(this.attrs,e.attrs,"class")}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}iI.prototype.point=!1;class oI extends rI{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof oI&&this.spec.class==e.spec.class&&$N(this.spec.attributes,e.spec.attributes)}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}oI.prototype.mapMode=SO.TrackBefore,oI.prototype.point=!0;class sI extends rI{constructor(e,t,n,r,i,o){super(t,n,i,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?SO.TrackBefore:SO.TrackAfter:SO.TrackDel}get type(){return this.startSide!=this.endSide?nI.WidgetRange:this.startSide<=0?nI.WidgetBefore:nI.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof sI&&function(e,t){return e==t||!!(e&&t&&e.compare(t))}(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function aI(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{inclusiveStart:n,inclusiveEnd:r}=e;return null==n&&(n=e.inclusive),null==r&&(r=e.inclusive),{start:null!==n&&void 0!==n?n:t,end:null!==r&&void 0!==r?r:t}}function lI(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=n.length-1;i>=0&&n[i]+r>=e?n[i]=Math.max(n[i],t):n.push(e,t)}sI.prototype.point=!0;class cI{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof eI&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ZN),this.atCursorPos=!0),this.curLine}flushBuffer(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.bufferMarks;this.pendingBuffer&&(this.curLine.append(uI(new HN(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||e&&this.content.length&&this.content[this.content.length-1]instanceof eI||this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(uI(new UN(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,i,o){if(this.disallowBlockEffectsFor[o]&&n instanceof sI){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=t-e;if(n instanceof sI)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new eI(n.widget||new hI("div"),s,n));else{let o=zN.create(n.widget||new hI("span"),s,s?0:n.startSide),a=this.atCursorPos&&!o.isEditable&&i<=r.length&&(e<t||n.startSide>0),l=!o.isEditable&&(e<t||i>r.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(r),a&&(c.append(uI(new HN(1),r),i),i=r.length+Math.max(0,i-r.length)),c.append(uI(o,r),i),this.atCursorPos=l,this.pendingBuffer=l?e<t||i>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=i)}static build(e,t,n,r,i){let o=new cI(e,t,n,i);return o.openEnd=IA.spans(r,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function uI(e,t){for(let n of t)e=new VN(n,[e],e.length);return e}class hI extends tI{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const dI=jO.define(),fI=jO.define(),pI=jO.define(),gI=jO.define(),mI=jO.define(),vI=jO.define(),yI=jO.define(),bI=jO.define({combine:e=>e.some((e=>e))}),wI=jO.define({combine:e=>e.some((e=>e))});class _I{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nearest",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=i,this.isSnapshot=o}map(e){return e.empty?this:new _I(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new _I(DO.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const xI=fA.define({map:(e,t)=>e.map(t)});function kI(e,t,n){let r=e.facet(gI);r.length?r[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}const SI=jO.define({combine:e=>!e.length||e[0]});let EI=0;const CI=jO.define();class TI{constructor(e,t,n,r,i){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=r,this.extension=i(this)}static define(e,t){const{eventHandlers:n,eventObservers:r,provide:i,decorations:o}=t||{};return new TI(EI++,e,n,r,(e=>{let t=[CI.of(e)];return o&&t.push(II.of((t=>{let n=t.plugin(e);return n?o(n):rI.none}))),i&&t.push(i(e)),t}))}static fromClass(e,t){return TI.define((t=>new e(t)),t)}}class OI{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(GV){if(kI(e.state,GV,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(YV){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(GV){kI(e.state,GV,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(GV){kI(e.state,GV,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const AI=jO.define(),NI=jO.define(),II=jO.define(),PI=jO.define(),RI=jO.define();function DI(e,t,n){let r=e.state.facet(RI);if(!r.length)return r;let i=r.map((t=>t instanceof Function?t(e):t)),o=[];return IA.spans(i,t,n,{point(){},span(e,t,n,r){let i=o;for(let o=n.length-1;o>=0;o--,r--){let s,a=n[o].spec.bidiIsolate;if(null!=a)if(r>0&&i.length&&(s=i[i.length-1]).to==e&&s.direction==a)s.to=t,i=s.inner;else{let n={from:e,to:t,direction:a,inner:[]};i.push(n),i=n.inner}}}}),o}const MI=jO.define();function LI(e){let t=0,n=0,r=0,i=0;for(let o of e.state.facet(MI)){let s=o(e);s&&(null!=s.left&&(t=Math.max(t,s.left)),null!=s.right&&(n=Math.max(n,s.right)),null!=s.top&&(r=Math.max(r,s.top)),null!=s.bottom&&(i=Math.max(i,s.bottom)))}return{left:t,right:n,top:r,bottom:i}}const jI=jO.define();class FI{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new FI(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let r=0,i=0,o=0,s=0;;r++){let a=r==e.length?null:e[r],l=o-s,c=a?a.fromB:1e9;for(;i<t.length&&t[i]<c;){let e=t[i],r=t[i+1],o=Math.max(s,e),a=Math.min(c,r);if(o<=a&&new FI(o+l,a+l,o,a).addToSet(n),r>c)break;i+=2}if(!a)return n;new FI(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class qI{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=CO.empty(this.startState.doc.length);for(let i of n)this.changes=this.changes.compose(i.changes);let r=[];this.changes.iterChangedRanges(((e,t,n,i)=>r.push(new FI(e,t,n,i)))),this.changedRanges=r}static create(e,t,n){return new qI(e,t,n)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var BI=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(BI||(BI={}));const UI=BI.LTR,VI=BI.RTL;function zI(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const HI=zI("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),WI=zI("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),KI=Object.create(null),GI=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);KI[e]=t,KI[t]=-e}const YI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class QI{get dir(){return this.level%2?VI:UI}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,n,r){let i=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==n)return o;(i<0||(0!=r?r<0?s.from<t:s.to>t:e[i].level>s.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}function $I(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],i=t[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!$I(r.inner,i.inner))return!1}return!0}const XI=[];function JI(e,t,n,r,i,o,s){let a=r%2?2:1;if(r%2==i%2)for(let l=t,c=0;l<n;){let t=!0,u=!1;if(c==o.length||l<o[c].from){let e=XI[l];e!=a&&(t=!1,u=16==e)}let h=t||1!=a?null:[],d=t?r:r+1,f=l;e:for(;;)if(c<o.length&&f==o[c].from){if(u)break e;let p=o[c];if(!t)for(let e=p.to,t=c+1;;){if(e==n)break e;if(!(t<o.length&&o[t].from==e)){if(XI[e]==a)break e;break}e=o[t++].to}if(c++,h)h.push(p);else{p.from>l&&s.push(new QI(l,p.from,d)),ZI(e,p.direction==UI!=!(d%2)?r+1:r,i,p.inner,p.from,p.to,s),l=p.to}f=p.to}else{if(f==n||(t?XI[f]!=a:XI[f]==a))break;f++}h?JI(e,l,f,r+1,i,h,s):l<f&&s.push(new QI(l,f,d)),l=f}else for(let l=n,c=o.length;l>t;){let n=!0,u=!1;if(!c||l>o[c-1].to){let e=XI[l-1];e!=a&&(n=!1,u=16==e)}let h=n||1!=a?null:[],d=n?r:r+1,f=l;e:for(;;)if(c&&f==o[c-1].to){if(u)break e;let p=o[--c];if(!n)for(let e=p.from,n=c;;){if(e==t)break e;if(!n||o[n-1].to!=e){if(XI[e-1]==a)break e;break}e=o[--n].from}if(h)h.push(p);else{p.to<l&&s.push(new QI(p.to,l,d)),ZI(e,p.direction==UI!=!(d%2)?r+1:r,i,p.inner,p.from,p.to,s),l=p.from}f=p.from}else{if(f==t||(n?XI[f-1]!=a:XI[f-1]==a))break;f--}h?JI(e,f,l,r+1,i,h,s):f<l&&s.push(new QI(f,l,d)),l=f}}function ZI(e,t,n,r,i,o,s){let a=t%2?2:1;!function(e,t,n,r,i){for(let s=0;s<=r.length;s++){let a=s?r[s-1].to:t,l=s<r.length?r[s].from:n,c=s?256:i;for(let t=a,n=c,r=c;t<l;t++){let i=(o=e.charCodeAt(t))<=247?HI[o]:1424<=o&&o<=1524?2:1536<=o&&o<=1785?WI[o-1536]:1774<=o&&o<=2220?4:8192<=o&&o<=8204?256:64336<=o&&o<=65023?4:1;512==i?i=n:8==i&&4==r&&(i=16),XI[t]=4==i?2:i,7&i&&(r=i),n=i}for(let e=a,t=c,r=c;e<l;e++){let i=XI[e];if(128==i)e<l-1&&t==XI[e+1]&&24&t?i=XI[e]=t:XI[e]=256;else if(64==i){let i=e+1;for(;i<l&&64==XI[i];)i++;let o=e&&8==t||i<n&&8==XI[i]?1==r?1:8:256;for(let t=e;t<i;t++)XI[t]=o;e=i-1}else 8==i&&1==r&&(XI[e]=1);t=i,7&i&&(r=i)}}var o}(e,i,o,r,a),function(e,t,n,r,i){let o=1==i?2:1;for(let s=0,a=0,l=0;s<=r.length;s++){let c=s?r[s-1].to:t,u=s<r.length?r[s].from:n;for(let t,n,r,s=c;s<u;s++)if(n=KI[t=e.charCodeAt(s)])if(n<0){for(let e=a-3;e>=0;e-=3)if(GI[e+1]==-n){let t=GI[e+2],n=2&t?i:4&t?1&t?o:i:0;n&&(XI[s]=XI[GI[e]]=n),a=e;break}}else{if(189==GI.length)break;GI[a++]=s,GI[a++]=t,GI[a++]=l}else if(2==(r=XI[s])||1==r){let e=r==i;l=e?0:1;for(let t=a-3;t>=0;t-=3){let n=GI[t+2];if(2&n)break;if(e)GI[t+2]|=2;else{if(4&n)break;GI[t+2]|=4}}}}}(e,i,o,r,a),function(e,t,n,r){for(let i=0,o=r;i<=n.length;i++){let s=i?n[i-1].to:e,a=i<n.length?n[i].from:t;for(let l=s;l<a;){let s=XI[l];if(256==s){let s=l+1;for(;;)if(s==a){if(i==n.length)break;s=n[i++].to,a=i<n.length?n[i].from:t}else{if(256!=XI[s])break;s++}let c=1==o,u=c==(1==(s<t?XI[s]:r))?c?1:2:r;for(let t=s,r=i,o=r?n[r-1].to:e;t>l;)t==o&&(t=n[--r].from,o=r?n[r-1].to:e),XI[--t]=u;l=s}else o=s,l++}}}(i,o,r,a),JI(e,i,o,t,n,r,s)}function eP(e,t,n){if(!e)return[new QI(0,0,t==VI?1:0)];if(t==UI&&!n.length&&!YI.test(e))return tP(e.length);if(n.length)for(;e.length>XI.length;)XI[XI.length]=256;let r=[],i=t==UI?0:1;return ZI(e,i,i,n,0,e.length,r),r}function tP(e){return[new QI(0,e,0)]}let nP="";function rP(e,t,n,r,i){var o;let s=r.head-e.from,a=-1;if(0==s){if(!i||!e.length)return null;t[0].level!=n&&(s=t[0].side(!1,n),a=0)}else if(s==e.length){if(i)return null;let e=t[t.length-1];e.level!=n&&(s=e.side(!0,n),a=t.length-1)}a<0&&(a=QI.find(t,s,null!==(o=r.bidiLevel)&&void 0!==o?o:-1,r.assoc));let l=t[a];s==l.side(i,n)&&(l=t[a+=i?1:-1],s=l.side(!i,n));let c=i==(l.dir==n),u=gO(e.text,s,c);if(nP=e.text.slice(Math.min(s,u),Math.max(s,u)),u>l.from&&u<l.to)return DO.cursor(u+e.from,c?-1:1,l.level);let h=a==(i?t.length-1:0)?null:t[a+(i?1:-1)];return h||l.level==n?h&&h.level<l.level?DO.cursor(h.side(!i,n)+e.from,i?1:-1,h.level):DO.cursor(u+e.from,i?-1:1,l.level):DO.cursor(i?e.to:e.from,i?-1:1,n)}class iP extends SN{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ZN],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new FI(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every((e=>{let{fromA:t,toA:n}=e;return n<this.minWidthFrom||t>this.minWidthTo}))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let r=-1;this.view.inputState.composing>=0&&((null===(t=this.domChanged)||void 0===t?void 0:t.newSel)?r=this.domChanged.newSel.head:function(e,t){let n=!1;t&&e.iterChangedRanges(((e,r)=>{e<t.to&&r>t.from&&(n=!0)}));return n}(e.changes,this.hasComposition)||e.selectionSet||(r=e.state.selection.main.head));let i=r>-1?function(e,t,n){let r=sP(e,n);if(!r)return null;let{node:i,from:o,to:s}=r,a=i.nodeValue;if(/[\n\r]/.test(a))return null;if(e.state.doc.sliceString(r.from,r.to)!=a)return null;let l=t.invertedDesc,c=new FI(l.mapPos(o),l.mapPos(s),o,s),u=[];for(let h=i.parentNode;;h=h.parentNode){let t=SN.get(h);if(t instanceof VN)u.push({node:h,deco:t.mark});else{if(t instanceof ZN||"DIV"==h.nodeName&&h.parentNode==e.contentDOM)return{range:c,text:i,marks:u,line:h};if(h==e.contentDOM)return null;u.push({node:h,deco:new iI({inclusive:!0,attributes:JN(h),tagName:h.tagName.toLowerCase()})})}}}(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:t,to:r}=this.hasComposition;n=new FI(t,r,e.changes.mapPos(t,-1),e.changes.mapPos(r,1)).addToSet(n.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(BN.ie||BN.chrome)&&!i&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=function(e,t,n){let r=new lP;return IA.compare(e,t,n,r),r.changes}(this.decorations,this.updateDeco(),e.changes);return n=FI.extendWithRanges(n,o),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,e.startState.doc.length,i),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:r}=this.view;r.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=BN.chrome||BN.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.flags&=-8,e&&(e.written||r.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((e=>e.flags&=-9));let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof eI&&o.widget instanceof oP&&i.push(o.dom);r.updateGaps(i)}updateChildren(e,t,n){let r=n?n.range.addToSet(e.slice()):e,i=this.childCursor(t);for(let o=r.length-1;;o--){let e=o>=0?r[o]:null;if(!e)break;let t,s,a,l,{fromA:c,toA:u,fromB:h,toB:d}=e;if(n&&n.range.fromB<d&&n.range.toB>h){let e=cI.build(this.view.state.doc,h,n.range.fromB,this.decorations,this.dynamicDecorationMap),r=cI.build(this.view.state.doc,n.range.toB,d,this.decorations,this.dynamicDecorationMap);s=e.breakAtStart,a=e.openStart,l=r.openEnd;let i=this.compositionView(n);r.breakAtStart?i.breakAfter=1:r.content.length&&i.merge(i.length,i.length,r.content[0],!1,r.openStart,0)&&(i.breakAfter=r.content[0].breakAfter,r.content.shift()),e.content.length&&i.merge(0,0,e.content[e.content.length-1],!0,0,e.openEnd)&&e.content.pop(),t=e.content.concat(i).concat(r.content)}else({content:t,breakAtStart:s,openStart:a,openEnd:l}=cI.build(this.view.state.doc,h,d,this.decorations,this.dynamicDecorationMap));let{i:f,off:p}=i.findPos(u,1),{i:g,off:m}=i.findPos(c,-1);TN(this,g,m,f,p,t,s,a,l)}n&&this.fixCompositionDOM(n)}compositionView(e){let t=new UN(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new VN(r,[t],t.length);let n=new ZN;return n.append(t,0),n}fixCompositionDOM(e){let t=(e,t)=>{t.flags|=8|(t.children.some((e=>7&e.flags))?1:0),this.markedForComposition.add(t);let n=SN.get(e);n&&n!=t&&(n.dom=null),t.setDOM(e)},n=this.childPos(e.range.fromB,1),r=this.children[n.i];t(e.line,r);for(let i=e.marks.length-1;i>=-1;i--)n=r.childPos(n.off,1),r=r.children[n.i],t(i>=0?e.marks[i].node:e.text,r)}updateSelection(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let t=this.view.root.activeElement,n=t==this.dom,r=!n&&oN(this.dom,this.view.observer.selectionRange)&&!(t&&this.dom.contains(t));if(!(n||e||r))return;let i=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,s=this.moveToLine(this.domAtPos(o.anchor)),a=o.empty?s:this.moveToLine(this.domAtPos(o.head));if(BN.gecko&&o.empty&&!this.hasComposition&&(1==(l=s).node.nodeType&&l.node.firstChild&&(0==l.offset||"false"==l.node.childNodes[l.offset-1].contentEditable)&&(l.offset==l.node.childNodes.length||"false"==l.node.childNodes[l.offset].contentEditable))){let e=document.createTextNode("");this.view.observer.ignore((()=>s.node.insertBefore(e,s.node.childNodes[s.offset]||null))),s=a=new xN(e,0),i=!0}var l;let c=this.view.observer.selectionRange;!i&&c.focusNode&&aN(s.node,s.offset,c.anchorNode,c.anchorOffset)&&aN(a.node,a.offset,c.focusNode,c.focusOffset)||(this.view.observer.ignore((()=>{BN.android&&BN.chrome&&this.dom.contains(c.focusNode)&&function(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=rN(this.view.root);if(e)if(o.empty){if(BN.gecko){let e=(n=s.node,i=s.offset,1!=n.nodeType?0:(i&&"false"==n.childNodes[i-1].contentEditable?1:0)|(i<n.childNodes.length&&"false"==n.childNodes[i].contentEditable?2:0));if(e&&3!=e){let t=aP(s.node,s.offset,1==e?1:-1);t&&(s=new xN(t.node,t.offset))}}e.collapse(s.node,s.offset),null!=o.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=o.bidiLevel)}else if(e.extend){e.collapse(s.node,s.offset);try{e.extend(a.node,a.offset)}catch(YV){}}else{let t=document.createRange();o.anchor>o.head&&([s,a]=[a,s]),t.setEnd(a.node,a.offset),t.setStart(s.node,s.offset),e.removeAllRanges(),e.addRange(t)}else;var n,i;r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),t&&t.focus())})),this.view.observer.setSelectionRange(s,a)),this.impreciseAnchor=s.precise?null:new xN(c.anchorNode,c.anchorOffset),this.impreciseHead=a.precise?null:new xN(c.focusNode,c.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=rN(e.root),{anchorNode:r,anchorOffset:i}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let o=ZN.find(this,t.head);if(!o)return;let s=o.posAtStart;if(t.head==s||t.head==s+o.length)return;let a=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(t.head+t.assoc);n.collapse(c.node,c.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&n.collapse(r,i)}moveToLine(e){let t,n=this.dom;if(e.node!=n)return e;for(let r=e.offset;!t&&r<n.childNodes.length;r++){let e=SN.get(n.childNodes[r]);e instanceof ZN&&(t=e.domAtPos(0))}for(let r=e.offset-1;!t&&r>=0;r--){let e=SN.get(n.childNodes[r]);e instanceof ZN&&(t=e.domAtPos(e.length))}return t?new xN(t.node,t.offset,!0):e}nearest(e){for(let t=e;t;){let e=SN.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof ZN)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,r=0;for(let i=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],a=i-s.breakAfter,l=a-s.length;if(a<e)break;l<=e&&(l<e||s.covers(-1))&&(a>e||s.covers(1))&&(!n||s instanceof ZN&&!(n instanceof ZN&&t>=0))&&(n=s,r=l),i=l}return n?n.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),r=this.children[t];if(!(r instanceof ZN))return null;for(;r.children.length;){let{i:e,off:t}=r.childPos(n,1);for(;;e++){if(e==r.children.length)return null;if((r=r.children[e]).length)break}n=t}if(!(r instanceof UN))return null;let i=gO(r.text,n);if(i==n)return null;let o=yN(r.dom,n,i).getClientRects();for(let s=0;s<o.length;s++){let e=o[s];if(s==o.length-1||e.top<e.bottom&&e.left<e.right)return e}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,i=this.view.contentDOM.clientWidth,o=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==BI.LTR;for(let l=0,c=0;c<this.children.length;c++){let e=this.children[c],u=l+e.length;if(u>r)break;if(l>=n){let n=e.dom.getBoundingClientRect();if(t.push(n.height),o){let t=e.dom.lastChild,r=t?sN(t):[];if(r.length){let e=r[r.length-1],t=a?e.right-n.left:n.right-e.left;t>s&&(s=t,this.minWidth=i,this.minWidthFrom=l,this.minWidthTo=u)}}}l=u+e.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?BI.RTL:BI.LTR}measureTextSize(){for(let i of this.children)if(i instanceof ZN){let e=i.measureTextSize();if(e)return e}let e,t,n,r=document.createElement("div");return r.className="cm-line",r.style.width="99999px",r.style.position="absolute",r.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(r);let i=sN(r.firstChild)[0];e=r.getBoundingClientRect().height,t=i?i.width/27:7,n=i?i.height:e,r.remove()})),{lineHeight:e,charWidth:t,textHeight:n}}childCursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.length,t=this.children.length;return t&&(e-=this.children[--t].length),new CN(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let i=r==t.viewports.length?null:t.viewports[r],o=i?i.from-1:this.length;if(o>n){let r=(t.lineBlockAt(o).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(rI.replace({widget:new oP(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!i)break;n=i.to+1}return rI.set(e)}updateDeco(){let e=this.view.state.facet(II).map(((e,t)=>(this.dynamicDecorationMap[t]="function"==typeof e)?e(this.view):e));for(let t=e.length;t<e.length+3;t++)this.dynamicDecorationMap[t]=!1;return this.decorations=[...e,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){if(e.isSnapshot){let t=this.view.viewState.lineBlockAt(e.range.head);return this.view.scrollDOM.scrollTop=t.top-e.yMargin,void(this.view.scrollDOM.scrollLeft=e.xMargin)}let t,{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!r)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});let i=LI(this.view),o={left:r.left-i.left,top:r.top-i.top,right:r.right+i.right,bottom:r.bottom+i.bottom},{offsetWidth:s,offsetHeight:a}=this.view.scrollDOM;!function(e,t,n,r,i,o,s,a){let l=e.ownerDocument,c=l.defaultView||window;for(let u=e,h=!1;u&&!h;)if(1==u.nodeType){let e,d=u==l.body,f=1,p=1;if(d)e=dN(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(h=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let t=u.getBoundingClientRect();({scaleX:f,scaleY:p}=fN(u,t)),e={left:t.left,right:t.left+u.clientWidth*f,top:t.top,bottom:t.top+u.clientHeight*p}}let g=0,m=0;if("nearest"==i)t.top<e.top?(m=-(e.top-t.top+s),n>0&&t.bottom>e.bottom+m&&(m=t.bottom-e.bottom+m+s)):t.bottom>e.bottom&&(m=t.bottom-e.bottom+s,n<0&&t.top-m<e.top&&(m=-(e.top+m-t.top+s)));else{let r=t.bottom-t.top,o=e.bottom-e.top;m=("center"==i&&r<=o?t.top+r/2-o/2:"start"==i||"center"==i&&n<0?t.top-s:t.bottom-o+s)-e.top}if("nearest"==r?t.left<e.left?(g=-(e.left-t.left+o),n>0&&t.right>e.right+g&&(g=t.right-e.right+g+o)):t.right>e.right&&(g=t.right-e.right+o,n<0&&t.left<e.left+g&&(g=-(e.left+g-t.left+o))):g=("center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==a?t.left-o:t.right-(e.right-e.left)+o)-e.left,g||m)if(d)c.scrollBy(g,m);else{let e=0,n=0;if(m){let e=u.scrollTop;u.scrollTop+=m/p,n=(u.scrollTop-e)*p}if(g){let t=u.scrollLeft;u.scrollLeft+=g/f,e=(u.scrollLeft-t)*f}t={left:t.left-e,top:t.top-n,right:t.right-e,bottom:t.bottom-n},e&&Math.abs(e-g)<1&&(r="nearest"),n&&Math.abs(n-m)<1&&(i="nearest")}if(d)break;u=u.assignedSlot||u.parentNode}else{if(11!=u.nodeType)break;u=u.host}}(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,s),-s),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==BI.LTR)}}class oP extends tI{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function sP(e,t){let n=e.observer.selectionRange,r=n.focusNode&&aP(n.focusNode,n.focusOffset,0);if(!r)return null;let i=t-r.offset;return{from:i,to:i+r.node.nodeValue.length,node:r.node}}function aP(e,t,n){if(n<=0)for(let r=e,i=t;;){if(3==r.nodeType)return{node:r,offset:i};if(!(1==r.nodeType&&i>0))break;r=r.childNodes[i-1],i=uN(r)}if(n>=0)for(let r=e,i=t;;){if(3==r.nodeType)return{node:r,offset:i};if(!(1==r.nodeType&&i<r.childNodes.length&&n>=0))break;r=r.childNodes[i],i=0}return null}let lP=class{constructor(){this.changes=[]}compareRange(e,t){lI(e,t,this.changes)}comparePoint(e,t){lI(e,t,this.changes)}};function cP(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function uP(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function hP(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function dP(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function fP(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function pP(e,t,n){let r,i,o,s,a,l,c,u,h=!1;for(let f=e.firstChild;f;f=f.nextSibling){let e=sN(f);for(let d=0;d<e.length;d++){let p=e[d];i&&hP(i,p)&&(p=dP(fP(p,i.bottom),i.top));let g=cP(t,p),m=uP(n,p);if(0==g&&0==m)return 3==f.nodeType?gP(f,t,n):pP(f,t,n);if(!r||s>m||s==m&&o>g){r=f,i=p,o=g,s=m;let a=m?n<p.top?-1:1:g?t<p.left?-1:1:0;h=!a||(a>0?d<e.length-1:d>0)}0==g?n>p.bottom&&(!c||c.bottom<p.bottom)?(a=f,c=p):n<p.top&&(!u||u.top>p.top)&&(l=f,u=p):c&&hP(c,p)?c=fP(c,p.bottom):u&&hP(u,p)&&(u=dP(u,p.top))}}if(c&&c.bottom>=n?(r=a,i=c):u&&u.top<=n&&(r=l,i=u),!r)return{node:e,offset:0};let d=Math.max(i.left,Math.min(i.right,t));return 3==r.nodeType?gP(r,d,n):h&&"false"!=r.contentEditable?pP(r,d,n):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,r)+(t>=(i.left+i.right)/2?1:0)}}function gP(e,t,n){let r=e.nodeValue.length,i=-1,o=1e9,s=0;for(let a=0;a<r;a++){let r=yN(e,a,a+1).getClientRects();for(let l=0;l<r.length;l++){let c=r[l];if(c.top==c.bottom)continue;s||(s=t-c.left);let u=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&u<o){let n=t>=(c.left+c.right)/2,r=n;if(BN.chrome||BN.gecko){yN(e,a).getBoundingClientRect().left==c.right&&(r=!n)}if(u<=0)return{node:e,offset:a+(r?1:0)};i=a+(r?1:0),o=u}}}return{node:e,offset:i>-1?i:s>0?e.nodeValue.length:0}}function mP(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;var i,o;let s,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:c}=e.viewState,{x:u,y:h}=t,d=h-l;if(d<0)return 0;if(d>c)return e.state.doc.length;for(let w=e.viewState.heightOracle.textHeight/2,_=!1;s=e.elementAtHeight(d),s.type!=nI.Text;)for(;d=r>0?s.bottom+w:s.top-w,!(d>=0&&d<=c);){if(_)return n?null:0;_=!0,r=-r}h=l+d;let f=s.from;if(f<e.viewport.from)return 0==e.viewport.from?0:n?null:vP(e,a,s,u,h);if(f>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:vP(e,a,s,u,h);let p=e.dom.ownerDocument,g=e.root.elementFromPoint?e.root:p,m=g.elementFromPoint(u,h);m&&!e.contentDOM.contains(m)&&(m=null),m||(u=Math.max(a.left+1,Math.min(a.right-1,u)),m=g.elementFromPoint(u,h),m&&!e.contentDOM.contains(m)&&(m=null));let v,y=-1;if(m&&0!=(null===(i=e.docView.nearest(m))||void 0===i?void 0:i.isEditable))if(p.caretPositionFromPoint){let e=p.caretPositionFromPoint(u,h);e&&({offsetNode:v,offset:y}=e)}else if(p.caretRangeFromPoint){let t=p.caretRangeFromPoint(u,h);t&&(({startContainer:v,startOffset:y}=t),(!e.contentDOM.contains(v)||BN.safari&&function(e,t,n){let r;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(let i=e.nextSibling;i;i=i.nextSibling)if(1!=i.nodeType||"BR"!=i.nodeName)return!1;return yN(e,r-1,r).getBoundingClientRect().left>n}(v,y,u)||BN.chrome&&function(e,t,n){if(0!=t)return!1;for(let i=e;;){let e=i.parentNode;if(!e||1!=e.nodeType||e.firstChild!=i)return!1;if(e.classList.contains("cm-line"))break;i=e}let r=1==e.nodeType?e.getBoundingClientRect():yN(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}(v,y,u))&&(v=void 0))}if(!v||!e.docView.dom.contains(v)){let t=ZN.find(e.docView,f);if(!t)return d>s.top+s.height/2?s.to:s.from;({node:v,offset:y}=pP(t.dom,u,h))}let b=e.docView.nearest(v);if(!b)return null;if(b.isWidget&&1==(null===(o=b.dom)||void 0===o?void 0:o.nodeType)){let e=b.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?b.posAtStart:b.posAtEnd}return b.localPosFromDOM(v,y)+b.posAtStart}function vP(e,t,n,r,i){let o=Math.round((r-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight;o+=Math.floor((i-n.top-.5*(e.defaultLineHeight-t))/t)*e.viewState.heightOracle.lineLength}let s=e.state.sliceDoc(n.from,n.to);return n.from+HA(s,o,e.state.tabSize)}function yP(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type))for(let r of n.type)if(r.to>t||r.to==t&&(r.to==n.to||r.type==nI.Text))return r;return n}function bP(e,t,n,r){let i=e.state.doc.lineAt(t.head),o=e.bidiSpans(i),s=e.textDirectionAt(i.from);for(let a=t,l=null;;){let t=rP(i,o,s,a,n),c=nP;if(!t){if(i.number==(n?e.state.doc.lines:1))return a;c="\n",i=e.state.doc.line(i.number+(n?1:-1)),o=e.bidiSpans(i),t=DO.cursor(n?i.from:i.to)}if(l){if(!l(c))return a}else{if(!r)return t;l=r(c)}a=t}}function wP(e,t,n){for(;;){let r=0;for(let i of e)i.between(t-1,t+1,((e,i,o)=>{if(t>e&&t<i){let o=r||n||(t-e<i-t?-1:1);t=o<0?e:i,r=o}}));if(!r)return t}}function _P(e,t,n){let r=wP(e.state.facet(PI).map((t=>t(e))),n.from,t.head>n.from?-1:1);return r==n.from?n:DO.cursor(r,r<n.from?1:-1)}class xP{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,BN.safari&&e.contentDOM.addEventListener("input",(()=>null)),BN.gecko&&function(e){QP.has(e)||(QP.add(e),e.addEventListener("copy",(()=>{})),e.addEventListener("cut",(()=>{})))}(e.contentDOM.ownerDocument)}handleEvent(e){(function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=SN.get(r))&&n.ignoreEvent(t))return!1;return!0})(this.view,e)&&!this.ignoreDuringComposition(e)&&("keydown"==e.type&&this.keydown(e)||this.runHandlers(e.type,e))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let e of n.observers)e(this.view,t);for(let e of n.handlers){if(t.defaultPrevented)break;if(e(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=SP(e),n=this.handlers,r=this.view.contentDOM;for(let i in t)if("scroll"!=i){let e=!t[i].handlers.length,o=n[i];o&&e!=!o.handlers.length&&(r.removeEventListener(i,this.handleEvent),o=null),o||r.addEventListener(i,this.handleEvent,{passive:e})}for(let i in n)"scroll"==i||t[i]||r.removeEventListener(i,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),9==e.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(27!=e.keyCode&&TP.indexOf(e.keyCode)<0&&(this.view.inputState.lastEscPress=0),BN.android&&BN.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return!BN.ios||e.synthetic||e.altKey||e.metaKey||!((t=EP.find((t=>t.keyCode==e.keyCode)))&&!e.ctrlKey||CP.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(229!=e.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=t||e,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(){let e=this.pendingIOSKey;return!!e&&(this.pendingIOSKey=void 0,bN(this.view.contentDOM,e.key,e.keyCode))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(BN.safari&&!BN.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function kP(e,t){return(n,r)=>{try{return t.call(e,r,n)}catch(GV){kI(n.state,GV)}}}function SP(e){let t=Object.create(null);function n(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(let r of e){let e=r.spec;if(e&&e.domEventHandlers)for(let t in e.domEventHandlers){let i=e.domEventHandlers[t];i&&n(t).handlers.push(kP(r.value,i))}if(e&&e.domEventObservers)for(let t in e.domEventObservers){let i=e.domEventObservers[t];i&&n(t).observers.push(kP(r.value,i))}}for(let r in NP)n(r).handlers.push(NP[r]);for(let r in IP)n(r).observers.push(IP[r]);return t}const EP=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],CP="dthko",TP=[16,17,18,20,91,92,224,225];function OP(e){return.7*Math.max(0,e)+8}class AP{constructor(e,t,n,r){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParent=function(e){let t=e.ownerDocument;for(let n=e.parentNode;n&&n!=t.body;)if(1==n.nodeType){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else{if(11!=n.nodeType)break;n=n.host}return null}(e.contentDOM),this.atoms=e.state.facet(PI).map((t=>t(e)));let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(EA.allowMultipleSelections)&&function(e,t){let n=e.state.facet(dI);return n.length?n[0](t):BN.mac?t.metaKey:t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let r=rN(e.root);if(!r||0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let e=i[o];if(e.left<=t.clientX&&e.right>=t.clientX&&e.top<=t.clientY&&e.bottom>=t.clientY)return!0}return!1}(e,t)||1!=zP(t))&&null}start(e){!1===this.dragging&&this.select(e)}move(e){var t;if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&function(e,t){return Math.max(Math.abs(e.clientX-t.clientX),Math.abs(e.clientY-t.clientY))}(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,r=0,i=(null===(t=this.scrollParent)||void 0===t?void 0:t.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},o=LI(this.view);e.clientX-o.left<=i.left+6?n=-OP(i.left-e.clientX):e.clientX+o.right>=i.right-6&&(n=OP(e.clientX-i.right)),e.clientY-o.top<=i.top+6?r=-OP(i.top-e.clientY):e.clientY+o.bottom>=i.bottom-6&&(r=OP(e.clientY-i.bottom)),this.setScrollSpeed(n,r)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let r=e.ranges[n],i=null;if(r.empty){let e=wP(this.atoms,r.from,0);e!=r.from&&(i=DO.cursor(e,-1))}else{let e=wP(this.atoms,r.from,-1),t=wP(this.atoms,r.to,1);e==r.from&&t==r.to||(i=DO.range(r.from==r.anchor?e:t,r.from==r.head?e:t))}i&&(t||(t=e.ranges.slice()),t[n]=i)}return t?DO.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection)||n.main.assoc!=t.state.selection.main.assoc&&!1===this.dragging)&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const NP=Object.create(null),IP=Object.create(null),PP=BN.ie&&BN.ie_version<15||BN.ios&&BN.webkit_version<604;function RP(e,t){let n,{state:r}=e,i=1,o=r.toText(t),s=o.lines==r.selection.ranges.length,a=null!=WP&&r.selection.ranges.every((e=>e.empty))&&WP==o.toString();if(a){let e=-1;n=r.changeByRange((n=>{let a=r.doc.lineAt(n.from);if(a.from==e)return{range:n};e=a.from;let l=r.toText((s?o.line(i++).text:t)+r.lineBreak);return{changes:{from:a.from,insert:l},range:DO.cursor(n.from+l.length)}}))}else n=s?r.changeByRange((e=>{let t=o.line(i++);return{changes:{from:e.from,to:e.to,insert:t.text},range:DO.cursor(e.from+t.length)}})):r.replaceSelection(o);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function DP(e,t,n,r){if(1==r)return DO.cursor(t,n);if(2==r)return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e.charCategorizer(t),i=e.doc.lineAt(t),o=t-i.from;if(0==i.length)return DO.cursor(t);0==o?n=1:o==i.length&&(n=-1);let s=o,a=o;n<0?s=gO(i.text,o,!1):a=gO(i.text,o);let l=r(i.text.slice(s,a));for(;s>0;){let e=gO(i.text,s,!1);if(r(i.text.slice(e,s))!=l)break;s=e}for(;a<i.length;){let e=gO(i.text,a);if(r(i.text.slice(a,e))!=l)break;a=e}return DO.range(s+i.from,a+i.from)}(e.state,t,n);{let n=ZN.find(e.docView,t),r=e.state.doc.lineAt(n?n.posAtEnd:t),i=n?n.posAtStart:r.from,o=n?n.posAtEnd:r.to;return o<e.state.doc.length&&o==r.to&&o++,DO.range(i,o)}}IP.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},NP.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),27==t.keyCode&&(e.inputState.lastEscPress=Date.now()),!1),IP.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},IP.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},NP.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of e.state.facet(pI))if(n=r(e,t),n)break;if(n||0!=t.button||(n=function(e,t){let n=FP(e,t),r=zP(t),i=e.state.selection;return{update(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),i=i.map(e.changes))},get(t,o,s){let a,l=FP(e,t),c=DP(e,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let t=DP(e,n.pos,n.bias,r),i=Math.min(t.from,c.from),o=Math.max(t.to,c.to);c=i<c.from?DO.range(i,o):DO.range(o,i)}return o?i.replaceRange(i.main.extend(c.from,c.to)):s&&1==r&&i.ranges.length>1&&(a=function(e,t){for(let n=0;n<e.ranges.length;n++){let{from:r,to:i}=e.ranges[n];if(r<=t&&i>=t)return DO.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}return null}(i,l.pos))?a:s?i.addRange(c):DO.create([c])}}}(e,t)),n){let r=!e.hasFocus;e.inputState.startMouseSelection(new AP(e,t,n,r)),r&&e.observer.ignore((()=>vN(e.contentDOM)));let i=e.inputState.mouseSelection;if(i)return i.start(t),!1===i.dragging}return!1};let MP=(e,t)=>e>=t.top&&e<=t.bottom,LP=(e,t,n)=>MP(t,n)&&e>=n.left&&e<=n.right;function jP(e,t,n,r){let i=ZN.find(e.docView,t);if(!i)return 1;let o=t-i.posAtStart;if(0==o)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&LP(n,r,s))return-1;let a=i.coordsAt(o,1);return a&&LP(n,r,a)?1:s&&MP(r,s)?-1:1}function FP(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:jP(e,n,t.clientX,t.clientY)}}const qP=BN.ie&&BN.ie_version<=11;let BP=null,UP=0,VP=0;function zP(e){if(!qP)return e.detail;let t=BP,n=VP;return BP=e,VP=Date.now(),UP=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(UP+1)%3:1}function HP(e,t,n,r){if(!n)return;let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:o}=e.inputState,s=r&&o&&function(e,t){let n=e.state.facet(fI);return n.length?n[0](t):BN.mac?!t.altKey:!t.ctrlKey}(e,t)?{from:o.from,to:o.to}:null,a={from:i,insert:n},l=e.state.changes(s?[s,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"}),e.inputState.draggedContent=null}NP.dragstart=(e,t)=>{let{selection:{main:n}}=e.state;if(t.target.draggable){let r=e.docView.nearest(t.target);if(r&&r.isWidget){let e=r.posAtStart,t=e+r.length;(e>=n.to||t<=n.from)&&(n=DO.range(e,t))}}let{inputState:r}=e;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(n.from,n.to)),t.dataTransfer.effectAllowed="copyMove"),!1},NP.dragend=e=>(e.inputState.draggedContent=null,!1),NP.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let n=t.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,o=()=>{++i==n.length&&HP(e,t,r.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=o,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),o()},t.readAsText(n[e])}return!0}{let n=t.dataTransfer.getData("Text");if(n)return HP(e,t,n,!0),!0}return!1},NP.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let n=PP?null:t.clipboardData;return n?(RP(e,n.getData("text/plain")||n.getData("text/uri-text")),!0):(function(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{e.focus(),n.remove(),RP(e,n.value)}),50)}(e),!1)};let WP=null;NP.copy=NP.cut=(e,t)=>{let{text:n,ranges:r,linewise:i}=function(e){let t=[],n=[],r=!1;for(let i of e.selection.ranges)i.empty||(t.push(e.sliceDoc(i.from,i.to)),n.push(i));if(!t.length){let i=-1;for(let{from:r}of e.selection.ranges){let o=e.doc.lineAt(r);o.number>i&&(t.push(o.text),n.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),i=o.number}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}(e.state);if(!n&&!i)return!1;WP=i?n:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let o=PP?null:t.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(function(e,t){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout((()=>{r.remove(),e.focus()}),50)}(e,n),!1)};const KP=uA.define();function GP(e,t){let n=[];for(let r of e.facet(yI)){let i=r(e,t);i&&n.push(i)}return n?e.update({effects:n,annotations:KP.of(!0)}):null}function YP(e){setTimeout((()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let n=GP(e.state,t);n?e.dispatch(n):e.update([])}}),10)}IP.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),YP(e)},IP.blur=e=>{e.observer.clearSelectionRange(),YP(e)},IP.compositionstart=IP.compositionupdate=e=>{null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0)},IP.compositionend=e=>{e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,BN.chrome&&BN.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then((()=>e.observer.flush())):setTimeout((()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])}),50)},IP.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},NP.beforeinput=(e,t)=>{var n;let r;if(BN.chrome&&BN.android&&(r=EP.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let t=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}return!1};const QP=new Set;const $P=["pre-wrap","normal","pre-line","break-spaces"];class XP{constructor(e){this.lineWrapping=e,this.doc=tO.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return $P.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,n,r,i,o){let s=$P.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=t,this.charWidth=n,this.textHeight=r,this.lineLength=i,a){this.heightSamples={};for(let e=0;e<o.length;e++){let t=o[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return a}}class JP{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ZP{constructor(e,t,n,r,i){this.from=e,this.length=t,this.top=n,this.height=r,this._content=i}get type(){return"number"==typeof this._content?nI.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof sI?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ZP(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var eR=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(eR||(eR={}));const tR=.001;class nR{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>tR&&(e.heightChanged=!0),this.height=t)}replace(e,t,n){return nR.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let i=this,o=n.doc;for(let s=r.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:u}=r[s],h=i.lineAt(a,eR.ByPosNoHeight,n.setDoc(t),0,0),d=h.to>=l?h:i.lineAt(l,eR.ByPosNoHeight,n,0,0);for(u+=d.to-l,l=d.to;s>0&&h.from<=r[s-1].toA;)a=r[s-1].fromA,c=r[s-1].fromB,s--,a<h.from&&(h=i.lineAt(a,eR.ByPosNoHeight,n,0,0));c+=h.from-a,a=h.from;let f=lR.build(n.setDoc(o),e,c,u);i=i.replace(a,l,f)}return i.updateHeight(n,0)}static empty(){return new iR(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,r=0,i=0;for(;;)if(t==n)if(r>2*i){let i=e[t-1];i.break?e.splice(--t,1,i.left,null,i.right):e.splice(--t,1,i.left,i.right),n+=1+i.break,r-=i.size}else{if(!(i>2*r))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,i-=t.size}}else if(r<i){let n=e[t++];n&&(r+=n.size)}else{let t=e[--n];t&&(i+=t.size)}let o=0;return null==e[t-1]?(o=1,t--):null==e[t]&&(o=1,n++),new sR(nR.of(e.slice(0,t)),o,nR.of(e.slice(n)))}}nR.prototype.size=1;class rR extends nR{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,r){return new ZP(r,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,r,i){return this.blockAt(0,n,r,i)}forEachLine(e,t,n,r,i,o){e<=i+this.length&&t>=i&&o(this.blockAt(0,n,r,i))}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>3?arguments[3]:void 0;return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return"block(".concat(this.length,")")}}class iR extends rR{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,r){return new ZP(r,this.length,n,this.height,this.breaks)}replace(e,t,n){let r=n[0];return 1==n.length&&(r instanceof iR||r instanceof oR&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof oR?r=new iR(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):nR.of(n)}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return r&&r.from<=t&&r.more?this.setHeight(e,r.heights[r.index++]):(n||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return"line(".concat(this.length).concat(this.collapsed?-this.collapsed:"").concat(this.widgetHeight?":"+this.widgetHeight:"",")")}}class oR extends nR{constructor(e){super(e,0)}heightMetrics(e,t){let n,r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,o=i-r+1,s=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*o);n=t/o,this.length>o+1&&(s=(this.height-t)/(this.length-o-1))}else n=this.height/o;return{firstLine:r,lastLine:i,perLine:n,perChar:s}}blockAt(e,t,n,r){let{firstLine:i,lastLine:o,perLine:s,perChar:a}=this.heightMetrics(t,r);if(t.lineWrapping){let i=r+Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length),o=t.doc.lineAt(i),l=s+o.length*a,c=Math.max(n,e-l/2);return new ZP(o.from,o.length,c,l,0)}{let r=Math.max(0,Math.min(o-i,Math.floor((e-n)/s))),{from:a,length:l}=t.doc.line(i+r);return new ZP(a,l,n+s*r,s,0)}}lineAt(e,t,n,r,i){if(t==eR.ByHeight)return this.blockAt(e,n,r,i);if(t==eR.ByPosNoHeight){let{from:t,to:r}=n.doc.lineAt(e);return new ZP(t,r-t,0,0,0)}let{firstLine:o,perLine:s,perChar:a}=this.heightMetrics(n,i),l=n.doc.lineAt(e),c=s+l.length*a,u=l.number-o,h=r+s*u+a*(l.from-i-u);return new ZP(l.from,l.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,t,n,r,i,o){e=Math.max(e,i),t=Math.min(t,i+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(n,i);for(let c=e,u=r;c<=t;){let t=n.doc.lineAt(c);if(c==e){let n=t.number-s;u+=a*n+l*(e-i-n)}let r=a+l*t.length;o(new ZP(t.from,t.length,u,r,0)),u+=r,c=t.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let e=n[n.length-1];e instanceof oR?n[n.length-1]=new oR(e.length+r):n.push(null,new oR(r-1))}if(e>0){let t=n[0];t instanceof oR?n[0]=new oR(e+t.length):n.unshift(new oR(e-1),null)}return nR.of(n)}decomposeLeft(e,t){t.push(new oR(e-1),null)}decomposeRight(e,t){t.push(null,new oR(this.length-e-1))}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=t+this.length;if(r&&r.from<=t+this.length&&r.more){let n=[],o=Math.max(t,r.from),s=-1;for(r.from>t&&n.push(new oR(r.from-t-1).updateHeight(e,t));o<=i&&r.more;){let t=e.doc.lineAt(o).length;n.length&&n.push(null);let i=r.heights[r.index++];-1==s?s=i:Math.abs(i-s)>=tR&&(s=-2);let a=new iR(t,i);a.outdated=!1,n.push(a),o+=t+1}o<=i&&n.push(null,new oR(i-o).updateHeight(e,o));let a=nR.of(n);return(s<0||Math.abs(a.height-this.height)>=tR||Math.abs(s-this.heightMetrics(e,t).perLine)>=tR)&&(e.heightChanged=!0),a}return(n||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return"gap(".concat(this.length,")")}}class sR extends nR{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,r){let i=n+this.left.height;return e<i?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,i,r+this.left.length+this.break)}lineAt(e,t,n,r,i){let o=r+this.left.height,s=i+this.left.length+this.break,a=t==eR.ByHeight?e<o:e<s,l=a?this.left.lineAt(e,t,n,r,i):this.right.lineAt(e,t,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=t==eR.ByPosNoHeight?eR.ByPosNoHeight:eR.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,r,i).join(l)}forEachLine(e,t,n,r,i,o){let s=r+this.left.height,a=i+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,r,i,o),t>=a&&this.right.forEachLine(e,t,n,s,a,o);else{let l=this.lineAt(a,eR.ByPos,n,r,i);e<l.from&&this.left.forEachLine(e,l.from-1,n,r,i,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,s,a,o)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let i=[];e>0&&this.decomposeLeft(e,i);let o=i.length;for(let s of n)i.push(s);if(e>0&&aR(i,o-1),t<this.length){let e=i.length;this.decomposeRight(t,i),aR(i,e)}return nR.of(i)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?nR.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,{left:i,right:o}=this,s=t+i.length+this.break,a=null;return r&&r.from<=t+i.length&&r.more?a=i=i.updateHeight(e,t,n,r):i.updateHeight(e,t,n),r&&r.from<=s+o.length&&r.more?a=o=o.updateHeight(e,s,n,r):o.updateHeight(e,s,n),a?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function aR(e,t){let n,r;null==e[t]&&(n=e[t-1])instanceof oR&&(r=e[t+1])instanceof oR&&e.splice(t-1,3,new oR(n.length+1+r.length))}class lR{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof iR?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new iR(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0,i=n.widget?n.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=t-e;n.block?this.addBlock(new rR(o,r,n)):(o||i||r>=5)&&this.addLineDeco(r,i,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new iR(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new oR(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof iR)return e;let t=new iR(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof iR||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new iR(0,-1));let n=e;for(let r of this.nodes)r instanceof iR&&r.updateHeight(this.oracle,n),n+=r?r.length:1;return this.nodes}static build(e,t,n,r){let i=new lR(n,e);return IA.spans(t,n,r,i,0),i.finish(n)}}class cR{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&lI(e,t,this.changes,5)}}function uR(e,t){let n=e.getBoundingClientRect(),r=e.ownerDocument,i=r.defaultView||window,o=Math.max(0,n.left),s=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let c=e.parentNode;c&&c!=r.body;)if(1==c.nodeType){let t=c,n=window.getComputedStyle(t);if((t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)&&"visible"!=n.overflow){let n=t.getBoundingClientRect();o=Math.max(o,n.left),s=Math.min(s,n.right),a=Math.max(a,n.top),l=c==e.parentNode?n.bottom:Math.min(l,n.bottom)}c="absolute"==n.position||"fixed"==n.position?t.offsetParent:t.parentNode}else{if(11!=c.nodeType)break;c=c.host}return{left:o-n.left,right:Math.max(o,s)-n.left,top:a-(n.top+t),bottom:Math.max(a,l)-(n.top+t)}}function hR(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class dR{constructor(e,t,n){this.from=e,this.to=t,this.size=n}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],i=t[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}draw(e,t){return rI.replace({widget:new fR(this.size*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class fR extends tI{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class pR{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=bR,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=BI.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(NI).some((e=>"function"!=typeof e&&"cm-lineWrapping"==e.class));this.heightOracle=new XP(t),this.stateDeco=e.facet(II).filter((e=>"function"!=typeof e)),this.heightMap=nR.empty().applyChanges(this.stateDeco,tO.empty,this.heightOracle.setDoc(e.doc),[new FI(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=rI.set(this.lineGaps.map((e=>e.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some((e=>{let{from:t,to:n}=e;return r>=t&&r<=n}))){let{from:t,to:n}=this.lineBlockAt(r);e.push(new gR(t,n))}}this.viewports=e.sort(((e,t)=>e.from-t.from)),this.scaler=this.heightMap.height<=7e6?bR:new wR(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(e=>{this.viewportLines.push(1==this.scaler.scale?e:_R(e,this.scaler))}))}update(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(II).filter((e=>"function"!=typeof e));let r=e.changedRanges,i=FI.extendWithRanges(r,function(e,t,n){let r=new cR;return IA.compare(e,t,n,r,0),r.changes}(n,this.stateDeco,e?e.changes:CO.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),i),this.heightMap.height!=o&&(e.flags|=2),s?(this.scrollAnchorPos=e.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=i.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=!e.changes.empty||2&e.flags||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(wI)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,i=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?BI.RTL:BI.LTR;let o=this.heightOracle.mustRefreshForWrapping(i),s=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let l=0,c=0;if(s.width&&s.height){let{scaleX:e,scaleY:n}=fN(t,s);this.scaleX==e&&this.scaleY==n||(this.scaleX=e,this.scaleY=n,l|=8,o=a=!0)}let u=(parseInt(n.paddingTop)||0)*this.scaleY,h=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==u&&this.paddingBottom==h||(this.paddingTop=u,this.paddingBottom=h,l|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=_N(e.scrollDOM);let f=(this.printing?hR:uR)(t,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let v=s.width;if(this.contentDOMWidth==v&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,l|=8),a){let t=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(t)&&(o=!0),o||r.lineWrapping&&Math.abs(v-this.contentDOMWidth)>r.charWidth){let{lineHeight:n,charWidth:s,textHeight:a}=e.docView.measureTextSize();o=n>0&&r.refresh(i,n,s,a,v/s,t),o&&(e.docView.minWidth=0,l|=8)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),r.heightChanged=!1;for(let n of this.viewports){let i=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=(o?nR.empty().applyChanges(this.stateDeco,tO.empty,this.heightOracle,[new FI(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new JP(n.from,i))}r.heightChanged&&(l|=2)}let y=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(2&l||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,i=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,a=new gR(r.lineAt(o-1e3*n,eR.ByHeight,i,0,0).from,r.lineAt(s+1e3*(1-n),eR.ByHeight,i,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=r.lineAt(e,eR.ByPos,i,0,0);n="center"==t.y?(s.top+s.bottom)/2-o/2:"start"==t.y||"nearest"==t.y&&e<a.from?s.top:s.bottom-o,a=new gR(r.lineAt(n-500,eR.ByHeight,i,0,0).from,r.lineAt(n+o+500,eR.ByHeight,i,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new gR(this.heightMap.lineAt(n,eR.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,eR.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate(e){let{from:t,to:n}=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(t,eR.ByPos,this.heightOracle,0,0),{bottom:o}=this.heightMap.lineAt(n,eR.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:a}=this;return(0==t||i<=s-Math.max(10,Math.min(-r,250)))&&(n==this.state.doc.length||o>=a+Math.max(10,Math.min(r,250)))&&i>s-2e3&&o<a+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new dR(t.mapPos(r.from),t.mapPos(r.to),r.size));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,i=r>>1,o=r<<1;if(this.defaultTextDirection!=BI.LTR&&!n)return[];let s=[],a=(r,o,l,c)=>{if(o-r<i)return;let u=this.state.selection.main,h=[u.from];u.empty||h.push(u.to);for(let e of h)if(e>r&&e<o)return a(r,e-10,l,c),void a(e+10,o,l,c);let d=function(e,t){for(let n of e)if(t(n))return n;return}(e,(e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-r)<i&&Math.abs(e.to-o)<i&&!h.some((t=>e.from<t&&e.to>t))));if(!d){if(o<l.to&&t&&n&&t.visibleRanges.some((e=>e.from<=o&&e.to>=o))){let e=t.moveToLineBoundary(DO.cursor(o),!1,!0).head;e>r&&(o=e)}d=new dR(r,o,this.gapSize(l,r,o,c))}s.push(d)};for(let l of this.viewportLines){if(l.length<o)continue;let e=mR(l.from,l.to,this.stateDeco);if(e.total<o)continue;let t,i,s=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let n,o,a=r/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=s){let t=yR(e,s),r=((this.visibleBottom-this.visibleTop)/2+a)/l.height;n=t-r,o=t+r}else n=(this.visibleTop-l.top-a)/l.height,o=(this.visibleBottom-l.top+a)/l.height;t=vR(e,n),i=vR(e,o)}else{let n,o,a=e.total*this.heightOracle.charWidth,l=r*this.heightOracle.charWidth;if(null!=s){let t=yR(e,s),r=((this.pixelViewport.right-this.pixelViewport.left)/2+l)/a;n=t-r,o=t+r}else n=(this.pixelViewport.left-l)/a,o=(this.pixelViewport.right+l)/a;t=vR(e,n),i=vR(e,o)}t>l.from&&a(l.from,t,l,e),i<l.to&&a(i,l.to,l,e)}return s}gapSize(e,t,n,r){let i=yR(r,n)-yR(r,t);return this.heightOracle.lineWrapping?e.height*i:r.total*this.heightOracle.charWidth*i}updateLineGaps(e){dR.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=rI.set(e.map((e=>e.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];IA.spans(e,this.viewport.from,this.viewport.to,{span(e,n){t.push({from:e,to:n})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,n)=>e.from!=t[n].from||e.to!=t[n].to));return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||_R(this.heightMap.lineAt(e,eR.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return _R(this.heightMap.lineAt(this.scaler.fromDOM(e),eR.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return _R(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class gR{constructor(e,t){this.from=e,this.to=t}}function mR(e,t,n){let r=[],i=e,o=0;return IA.spans(n,e,t,{span(){},point(e,t){e>i&&(r.push({from:i,to:e}),o+=e-i),i=t}},20),i<t&&(r.push({from:i,to:t}),o+=t-i),{total:o,ranges:r}}function vR(e,t){let{total:n,ranges:r}=e;if(t<=0)return r[0].from;if(t>=1)return r[r.length-1].to;let i=Math.floor(n*t);for(let o=0;;o++){let{from:e,to:t}=r[o],n=t-e;if(i<=n)return e+i;i-=n}}function yR(e,t){let n=0;for(let{from:r,to:i}of e.ranges){if(t<=i){n+=t-r;break}n+=i-r}return n/e.total}const bR={toDOM:e=>e,fromDOM:e=>e,scale:1};class wR{constructor(e,t,n){let r=0,i=0,o=0;this.viewports=n.map((n=>{let{from:i,to:o}=n,s=t.lineAt(i,eR.ByPos,e,0,0).top,a=t.lineAt(o,eR.ByPos,e,0,0).bottom;return r+=a-s,{from:i,to:o,top:s,bottom:a,domTop:0,domBottom:0}})),this.scale=(7e6-r)/(t.height-r);for(let s of this.viewports)s.domTop=o+(s.top-i)*this.scale,o=s.domBottom=s.domTop+(s.bottom-s.top),i=s.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.top)return r+(e-n)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);n=i.bottom,r=i.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.domTop)return n+(e-r)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);n=i.bottom,r=i.domBottom}}}function _R(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),r=t.toDOM(e.bottom);return new ZP(e.from,e.length,n,r-n,Array.isArray(e._content)?e._content.map((e=>_R(e,t))):e._content)}const xR=jO.define({combine:e=>e.join(" ")}),kR=jO.define({combine:e=>e.indexOf(!0)>-1}),SR=YA.newName(),ER=YA.newName(),CR=YA.newName(),TR={"&light":"."+ER,"&dark":"."+CR};function OR(e,t,n){return new YA(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError("Unsupported selector: ".concat(t));return n[t]})):e+" "+t})}const AR=OR("."+SR,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},TR),NR="\uffff";class IR{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(EA.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=NR}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r);let e=this.text.length;this.readNode(r);let i=r.nextSibling;if(i==t)break;let o=SN.get(r),s=SN.get(i);(o&&s?o.breakAfter:(o?o.breakAfter:RR(r))||RR(i)&&("BR"!=r.nodeName||r.cmIgnore)&&this.text.length>e)&&this.lineBreak(),r=i}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let i,o=-1,s=1;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(i=r.exec(t))&&(o=i.index,s=i[0].length),this.append(t.slice(n,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=s-1);n=o+s}}readNode(e){if(e.cmIgnore)return;let t=SN.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(PR(e,n.node,n.offset)?t:0))}}function PR(e,t,n){for(;;){if(!t||n<uN(t))return!1;if(t==e)return!0;n=lN(t)+1,t=t.parentNode}}function RR(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class DR{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class MR{constructor(e,t,n,r){this.typeOver=r,this.bounds=null,this.text="";let{impreciseHead:i,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let t=i||o?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=e.observer.selectionRange;n&&(t.push(new DR(n,r)),i==n&&o==r||t.push(new DR(i,o)));return t}(e),n=new IR(t,e.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(e,t){if(0==e.length)return null;let n=e[0].pos,r=2==e.length?e[1].pos:n;return n>-1&&r>-1?DO.single(n+t,r+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,n=i&&i.node==t.focusNode&&i.offset==t.focusOffset||!iN(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),r=o&&o.node==t.anchorNode&&o.offset==t.anchorOffset||!iN(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset);this.newSel=DO.single(r,n)}}}function LR(e,t){let n,{newSel:r}=t,i=e.state.selection.main,o=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:r,to:s}=t.bounds,a=i.from,l=null;(8===o||BN.android&&t.text.length<s-r)&&(a=i.to,l="end");let c=function(e,t,n,r){let i=Math.min(e.length,t.length),o=0;for(;o<i&&e.charCodeAt(o)==t.charCodeAt(o);)o++;if(o==i&&e.length==t.length)return null;let s=e.length,a=t.length;for(;s>0&&a>0&&e.charCodeAt(s-1)==t.charCodeAt(a-1);)s--,a--;if("end"==r){n-=s+Math.max(0,o-Math.min(s,a))-o}if(s<o&&e.length<t.length){o-=n<=o&&n>=s?o-n:0,a=o+(a-s),s=o}else if(a<o){o-=n<=o&&n>=a?o-n:0,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}(e.state.doc.sliceString(r,s,NR),t.text,a-r,l);c&&(BN.chrome&&13==o&&c.toB==c.from+2&&t.text.slice(c.from,c.toB)==NR+NR&&c.toB--,n={from:r+c.from,to:r+c.toA,insert:tO.of(t.text.slice(c.from,c.toB).split(NR))})}else r&&(!e.hasFocus&&e.state.facet(SI)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&t.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,i.to))}:(BN.mac||BN.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(r&&2==n.insert.length&&(r=DO.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:tO.of([" "])}):BN.chrome&&n&&n.from==n.to&&n.from==i.head&&"\n "==n.insert.toString()&&e.lineWrapping&&(r&&(r=DO.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:tO.of([" "])}),n){if(BN.ios&&e.inputState.flushIOSKey())return!0;if(BN.android&&(n.from==i.from&&n.to==i.to&&1==n.insert.length&&2==n.insert.lines&&bN(e.contentDOM,"Enter",13)||(n.from==i.from-1&&n.to==i.to&&0==n.insert.length||8==o&&n.insert.length<n.to-n.from&&n.to>i.head)&&bN(e.contentDOM,"Backspace",8)||n.from==i.from&&n.to==i.to+1&&0==n.insert.length&&bN(e.contentDOM,"Delete",46)))return!0;let t,s=n.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let a=()=>t||(t=function(e,t,n){let r,i=e.state,o=i.selection.main;if(t.from>=o.from&&t.to<=o.to&&t.to-t.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let n=o.from<t.from?i.sliceDoc(o.from,t.from):"",s=o.to>t.to?i.sliceDoc(t.to,o.to):"";r=i.replaceSelection(e.state.toText(n+t.insert.sliceString(0,void 0,e.state.lineBreak)+s))}else{let s=i.changes(t),a=n&&n.main.to<=s.newLength?n.main:void 0;if(i.selection.ranges.length>1&&e.inputState.composing>=0&&t.to<=o.to&&t.to>=o.to-10){let l,c=e.state.sliceDoc(t.from,t.to),u=n&&sP(e,n.main.head);if(u){let e=t.insert.length-(t.to-t.from);l={from:u.from,to:u.to-e}}else l=e.state.doc.lineAt(o.head);let h=o.to-t.to,d=o.to-o.from;r=i.changeByRange((n=>{if(n.from==o.from&&n.to==o.to)return{changes:s,range:a||n.map(s)};let r=n.to-h,u=r-c.length;if(n.to-n.from!=d||e.state.sliceDoc(u,r)!=c||n.to>=l.from&&n.from<=l.to)return{range:n};let f=i.changes({from:u,to:r,insert:t.insert}),p=n.to-o.to;return{changes:f,range:a?DO.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):n.map(f)}}))}else r={changes:s,selection:a&&i.selection.replaceRange(a)}}let s="input.type";(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,s+=".compose",e.inputState.compositionFirstChange&&(s+=".start",e.inputState.compositionFirstChange=!1));return i.update(r,{userEvent:s,scrollIntoView:!0})}(e,n,r));return e.state.facet(vI).some((t=>t(e,n.from,n.to,s,a)))||e.dispatch(a()),!0}if(r&&!r.main.eq(i)){let t=!1,n="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin),e.dispatch({selection:r,scrollIntoView:t,userEvent:n}),!0}return!1}const jR={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},FR=BN.ie&&BN.ie_version<=11;class qR{constructor(e){this.view=e,this.active=!1,this.selectionRange=new pN,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(BN.ie&&BN.ie_version<=11||BN.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),FR&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,n)=>t!=e[n])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(SI)?n.root.activeElement!=this.dom:!oN(n.dom,r))return;let i=r.anchorNode&&n.docView.nearest(r.anchorNode);i&&i.ignoreEvent(e)?t||(this.selectionChanged=!1):(BN.ie&&BN.ie_version<=11||BN.android&&BN.chrome)&&!n.state.selection.main.empty&&r.focusNode&&aN(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=BN.safari&&11==e.root.nodeType&&function(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}(this.dom.ownerDocument)==this.dom&&function(e){let t=null;function n(e){e.preventDefault(),e.stopImmediatePropagation(),t=e.getTargetRanges()[0]}if(e.contentDOM.addEventListener("beforeinput",n,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),!t)return null;let r=t.startContainer,i=t.startOffset,o=t.endContainer,s=t.endOffset,a=e.docView.domAtPos(e.state.selection.main.anchor);aN(a.node,a.offset,o,s)&&([r,i,o,s]=[o,s,r,i]);return{anchorNode:r,anchorOffset:i,focusNode:o,focusOffset:s}}(this.view)||rN(e.root);if(!t||this.selectionRange.eq(t))return!1;let n=oN(this.dom,t);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let n=t.focusNode,r=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=r)return!1;for(r=Math.min(r,uN(n));;)if(r){if(1!=n.nodeType)return!1;let e=n.childNodes[r-1];"false"==e.contentEditable?r--:(n=e,r=uN(n))}else{if(n==e)return!0;r=lN(n),n=n.parentNode}}(this.dom,t)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(t),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,jR),FR&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),FR&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;if(e){this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&bN(this.dom,e.key,e.keyCode)}};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let i of e){let e=this.readMutation(i);e&&(e.typeOver&&(r=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:r}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),r=this.selectionChanged&&oN(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let i=new MR(this.view,e,t,n);return this.view.docView.domChanged={newSel:i.newSel?i.newSel.main:null},i}flush(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,r=LR(this.view,t);return this.view.state==n&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.flags|=4),"childList"==e.type){let n=BR(t,e.previousSibling||e.target.previousSibling,-1),r=BR(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var e,t,n;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function BR(e,t,n){for(;t;){let r=SN.get(t);if(r&&r.parent==e)return r;let i=t.parentNode;t=i!=e.dom?i:n>0?t.nextSibling:t.previousSibling}return null}class UR{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM);let{dispatch:t}=e;this.dispatchTransactions=e.dispatchTransactions||t&&(e=>e.forEach((e=>t(e,this))))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new pR(e.state||EA.create(e)),e.scrollTo&&e.scrollTo.is(xI)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(CI).map((e=>new OI(e)));for(let n of this.plugins)n.update(this);this.observer=new qR(this),this.inputState=new xP(this),this.inputState.ensureHandlers(this.plugins),this.docView=new iP(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}dispatch(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=1==t.length&&t[0]instanceof pA?t:1==t.length&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(r,this)}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,r=!1,i=this.state;for(let h of e){if(h.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=h.state}if(this.destroyed)return void(this.viewState.state=i);let o=this.hasFocus,s=0,a=null;e.some((e=>e.annotation(KP)))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=GP(i,o),a||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(i.doc)||!this.state.selection.eq(i.selection))&&(c=null)):this.observer.clear(),i.facet(EA.phrases)!=this.state.facet(EA.phrases))return this.setState(i);t=qI.create(this,i,e),t.flags|=s;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(u&&(u=u.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;u=new _I(e.empty?e:DO.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(xI)&&(u=e.value.clip(this.state))}this.viewState.update(t,u),this.bidiCache=HR.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(jI)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(xR)!=t.state.facet(xR)&&(this.viewState.mustMeasureContent=!0),(n||r||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!t.empty)for(let h of this.state.facet(mI))try{h(t)}catch(GV){kI(this.state,GV,"update listener")}(a||c)&&Promise.resolve().then((()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!LR(this,c)&&l.force&&bN(this.contentDOM,l.key,l.keyCode)}))}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new pR(e),this.plugins=e.facet(CI).map((e=>new OI(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView.destroy(),this.docView=new iP(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(CI),n=e.state.facet(CI);if(t!=n){let r=[];for(let i of n){let n=t.indexOf(i);if(n<0)r.push(new OI(i));else{let t=this.plugins[n];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,r=n.scrollTop*this.scaleY,{scrollAnchorPos:i,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(o<0)if(_N(n))i=-1,o=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(r);i=e.from,o=e.top}this.updateState=1;let s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&s||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map((e=>{try{return e.read(this)}catch(GV){return kI(this.state,GV),zR}})),c=qI.create(this,this.state,[]),u=!1;c.flags|=s,t?t.flags|=s:t=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),u=this.docView.update(c));for(let e=0;e<a.length;e++)if(l[e]!=zR)try{let t=a[e];t.write&&t.write(l[e],this)}catch(GV){kI(this.state,GV)}if(u&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}{let e=(i<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(i).top)-o;if(e>1||e<-1){r+=e,n.scrollTop=r/this.scaleY,o=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let s of this.state.facet(mI))s(t)}get themeClasses(){return SR+" "+(this.state.facet(kR)?CR:ER)+" "+this.state.facet(xR)}updateAttrs(){let e=WR(this,AI,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(SI)?"true":"false",class:"cm-content",style:"".concat(BN.tabSize,": ").concat(this.state.tabSize),role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),WR(this,NI,t);let n=this.observer.ignore((()=>{let n=XN(this.contentDOM,this.contentAttrs,t),r=XN(this.dom,this.editorAttrs,e);return n||r}));return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)if(e.is(UR.announce)){t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(jI);let e=this.state.facet(UR.cspNonce);YA.mount(this.root,this.styleModules.concat(AR).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return _P(this,e,bP(this,e,t,n))}moveByGroup(e,t){return _P(this,e,bP(this,e,t,(t=>function(e,t,n){let r=e.state.charCategorizer(t),i=r(n);return e=>{let t=r(e);return i==_A.Space&&(i=t),i==t}}(this,e.head,t))))}moveToLineBoundary(e,t){return function(e,t,n,r){let i=yP(e,t.head),o=r&&i.type==nI.Text&&(e.lineWrapping||i.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>i.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),r=e.textDirectionAt(i.from),s=e.posAtCoords({x:n==(r==BI.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=s)return DO.cursor(s,n?-1:1)}return DO.cursor(n?i.to:i.from,n?-1:1)}(this,e,t,!(arguments.length>2&&void 0!==arguments[2])||arguments[2])}moveVertically(e,t,n){return _P(this,e,function(e,t,n,r){let i=t.head,o=n?1:-1;if(i==(n?e.state.doc.length:0))return DO.cursor(i,t.assoc);let s,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(i,t.assoc||-1),u=e.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(i);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(i-t.from))),s=(o<0?t.top:t.bottom)+u}let h=l.left+a,d=null!==r&&void 0!==r?r:e.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let t=s+(d+f)*o,n=mP(e,{x:h,y:t},!1,o);if(t<l.top||t>l.bottom||(o<0?n<i:n>i)){let r=e.docView.coordsForChar(n),i=!r||t<r.top?-1:1;return DO.cursor(n,i,void 0,a)}}}(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.docView.posFromDOM(e,t)}posAtCoords(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.readMeasured(),mP(this,e,t)}coordsAtPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),i=this.bidiSpans(r);return hN(n,i[QI.find(i,e-r.from,-1,t)].dir==BI.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(bI)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>VR)return tP(e.length);let t,n=this.textDirectionAt(e.from);for(let i of this.bidiCache)if(i.from==e.from&&i.dir==n&&(i.fresh||$I(i.isolates,t=DI(this,e.from,e.to))))return i.order;t||(t=DI(this,e.from,e.to));let r=eP(e.text,n,t);return this.bidiCache.push(new HR(e.from,e.to,n,t,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||BN.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{vN(this.contentDOM),this.docView.updateSelection()}))}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return xI.of(new _I("number"==typeof e?DO.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return xI.of(new _I(DO.cursor(n.from),"start","start",n.top-e,t,!0))}static domEventHandlers(e){return TI.define((()=>({})),{eventHandlers:e})}static domEventObservers(e){return TI.define((()=>({})),{eventObservers:e})}static theme(e,t){let n=YA.newName(),r=[xR.of(n),jI.of(OR(".".concat(n),e))];return t&&t.dark&&r.push(kR.of(!0)),r}static baseTheme(e){return $O.lowest(jI.of(OR("."+SR,e,TR)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&SN.get(n)||SN.get(e);return(null===(t=null===r||void 0===r?void 0:r.rootView)||void 0===t?void 0:t.view)||null}}UR.styleModule=jI,UR.inputHandler=vI,UR.focusChangeEffect=yI,UR.perLineTextDirection=bI,UR.exceptionSink=gI,UR.updateListener=mI,UR.editable=SI,UR.mouseSelectionStyle=pI,UR.dragMovesSelection=fI,UR.clickAddsSelectionRange=dI,UR.decorations=II,UR.atomicRanges=PI,UR.bidiIsolatedRanges=RI,UR.scrollMargins=MI,UR.darkTheme=kR,UR.cspNonce=jO.define({combine:e=>e.length?e[0]:""}),UR.contentAttributes=NI,UR.editorAttributes=AI,UR.lineWrapping=UR.contentAttributes.of({class:"cm-lineWrapping"}),UR.announce=fA.define();const VR=4096,zR={};class HR{constructor(e,t,n,r,i,o){this.from=e,this.to=t,this.dir=n,this.isolates=r,this.fresh=i,this.order=o}static update(e,t){if(t.empty&&!e.some((e=>e.fresh)))return e;let n=[],r=e.length?e[e.length-1].dir:BI.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let o=e[i];o.dir!=r||t.touchesRange(o.from,o.to)||n.push(new HR(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function WR(e,t,n){for(let r=e.state.facet(t),i=r.length-1;i>=0;i--){let t=r[i],o="function"==typeof t?t(e):t;o&&YN(o,n)}return n}const KR=BN.mac?"mac":BN.windows?"win":BN.linux?"linux":"key";function GR(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}const YR=jO.define({enables:$O.default(UR.domEventHandlers({keydown:(e,t)=>ZR($R(t.state),e,t,"editor")}))}),QR=new WeakMap;function $R(e){let t=e.facet(YR),n=QR.get(t);return n||QR.set(t,n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:KR,n=Object.create(null),r=Object.create(null),i=(e,t)=>{let n=r[e];if(null==n)r[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=(e,r,o,s,a)=>{var l,c;let u=n[e]||(n[e]=Object.create(null)),h=r.split(/ (?!$)/).map((e=>function(e,t){const n=e.split(/-(?!$)/);let r,i,o,s,a=n[n.length-1];"Space"==a&&(a=" ");for(let l=0;l<n.length-1;++l){const e=n[l];if(/^(cmd|meta|m)$/i.test(e))s=!0;else if(/^a(lt)?$/i.test(e))r=!0;else if(/^(c|ctrl|control)$/i.test(e))i=!0;else if(/^s(hift)?$/i.test(e))o=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);"mac"==t?s=!0:i=!0}}return r&&(a="Alt-"+a),i&&(a="Ctrl-"+a),s&&(a="Meta-"+a),o&&(a="Shift-"+a),a}(e,t)));for(let t=1;t<h.length;t++){let n=h.slice(0,t).join(" ");i(n,!0),u[n]||(u[n]={preventDefault:!0,stopPropagation:!1,run:[t=>{let r=XR={view:t,prefix:n,scope:e};return setTimeout((()=>{XR==r&&(XR=null)}),JR),!0}]})}let d=h.join(" ");i(d,!1);let f=u[d]||(u[d]={preventDefault:!1,stopPropagation:!1,run:(null===(c=null===(l=u._any)||void 0===l?void 0:l.run)||void 0===c?void 0:c.slice())||[]});o&&f.run.push(o),s&&(f.preventDefault=!0),a&&(f.stopPropagation=!0)};for(let s of e){let e=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let t of e){let e=n[t]||(n[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let t in e)e[t].run.push(s.any)}let r=s[t]||s.key;if(r)for(let t of e)o(t,r,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(t,"Shift-"+r,s.shift,s.preventDefault,s.stopPropagation)}return n}(t.reduce(((e,t)=>e.concat(t)),[]))),n}let XR=null;const JR=4e3;function ZR(e,t,n,r){let i=function(e){var t=!(ZA&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||eN&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key)&&e.key||(e.shiftKey?JA:XA)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),o=xO(wO(i,0))==i.length&&" "!=i,s="",a=!1,l=!1,c=!1;XR&&XR.view==n&&XR.scope==r&&(s=XR.prefix+" ",TP.indexOf(t.keyCode)<0&&(l=!0,XR=null));let u,h,d=new Set,f=e=>{if(e){for(let r of e.run)if(!d.has(r)&&(d.add(r),r(n,t)))return e.stopPropagation&&(c=!0),!0;e.preventDefault&&(e.stopPropagation&&(c=!0),l=!0)}return!1},p=e[r];return p&&(f(p[s+GR(i,t,!o)])?a=!0:o&&(t.altKey||t.metaKey||t.ctrlKey)&&!(BN.windows&&t.ctrlKey&&t.altKey)&&(u=XA[t.keyCode])&&u!=i?(f(p[s+GR(u,t,!0)])||t.shiftKey&&(h=JA[t.keyCode])!=i&&h!=u&&f(p[s+GR(h,t,!1)]))&&(a=!0):o&&t.shiftKey&&f(p[s+GR(i,t,!0)])&&(a=!0),!a&&f(p._any)&&(a=!0)),l&&(a=!0),a&&c&&t.stopPropagation(),a}class eD{constructor(e,t,n,r,i){this.className=e,this.left=t,this.top=n,this.width=r,this.height=i}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let r=e.coordsAtPos(n.head,n.assoc||1);if(!r)return[];let i=tD(e);return[new eD(t,r.left-i.left,r.top-i.top,null,r.bottom-r.top)]}return function(e,t,n){if(n.to<=e.viewport.from||n.from>=e.viewport.to)return[];let r=Math.max(n.from,e.viewport.from),i=Math.min(n.to,e.viewport.to),o=e.textDirection==BI.LTR,s=e.contentDOM,a=s.getBoundingClientRect(),l=tD(e),c=s.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),h=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),d=a.right-(u?parseInt(u.paddingRight):0),f=yP(e,r),p=yP(e,i),g=f.type==nI.Text?f:null,m=p.type==nI.Text?p:null;g&&(e.lineWrapping||f.widgetLineBreaks)&&(g=nD(e,r,g));m&&(e.lineWrapping||p.widgetLineBreaks)&&(m=nD(e,i,m));if(g&&m&&g.from==m.from)return y(b(n.from,n.to,g));{let t=g?b(n.from,null,g):w(f,!1),r=m?b(null,n.to,m):w(p,!0),i=[];return(g||f).to<(m||p).from-(g&&m?1:0)||f.widgetLineBreaks>1&&t.bottom+e.defaultLineHeight/2<r.top?i.push(v(h,t.bottom,d,r.top)):t.bottom<r.top&&e.elementAtHeight((t.bottom+r.top)/2).type==nI.Text&&(t.bottom=r.top=(t.bottom+r.top)/2),y(t).concat(i).concat(y(r))}function v(e,n,r,i){return new eD(t,e-l.left,n-l.top-.01,r-e,i-n+.01)}function y(e){let{top:t,bottom:n,horizontal:r}=e,i=[];for(let o=0;o<r.length;o+=2)i.push(v(r[o],t,r[o+1],n));return i}function b(t,n,r){let i=1e9,s=-1e9,a=[];function l(t,n,l,c,u){let f=e.coordsAtPos(t,t==r.to?-2:2),p=e.coordsAtPos(l,l==r.from?2:-2);f&&p&&(i=Math.min(f.top,p.top,i),s=Math.max(f.bottom,p.bottom,s),u==BI.LTR?a.push(o&&n?h:f.left,o&&c?d:p.right):a.push(!o&&c?h:p.left,!o&&n?d:f.right))}let c=null!==t&&void 0!==t?t:r.from,u=null!==n&&void 0!==n?n:r.to;for(let o of e.visibleRanges)if(o.to>c&&o.from<u)for(let r=Math.max(o.from,c),i=Math.min(o.to,u);;){let o=e.state.doc.lineAt(r);for(let s of e.bidiSpans(o)){let e=s.from+o.from,a=s.to+o.from;if(e>=i)break;a>r&&l(Math.max(e,r),null==t&&e<=c,Math.min(a,i),null==n&&a>=u,s.dir)}if(r=o.to+1,r>=i)break}return 0==a.length&&l(c,null==t,u,null==n,e.textDirection),{top:i,bottom:s,horizontal:a}}function w(e,t){let n=a.top+(t?e.top:e.bottom);return{top:n,bottom:n,horizontal:[]}}}(e,t,n)}}function tD(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==BI.LTR?t.left:t.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:t.top-e.scrollDOM.scrollTop*e.scaleY}}function nD(e,t,n){let r=DO.cursor(t);return{from:Math.max(n.from,e.moveToLineBoundary(r,!1,!0).from),to:Math.min(n.to,e.moveToLineBoundary(r,!0,!0).from),type:nI.Text}}class rD{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(iD)!=e.state.facet(iD)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}setOrder(e){let t=0,n=e.facet(iD);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;e==this.scaleX&&t==this.scaleY||(this.scaleX=e,this.scaleY=t,this.dom.style.transform="scale(".concat(1/e,", ").concat(1/t,")"))}draw(e){if(e.length!=this.drawn.length||e.some(((e,t)=>!function(e,t){return e.constructor==t.constructor&&e.eq(t)}(e,this.drawn[t])))){let t=this.dom.firstChild,n=0;for(let r of e)r.update&&t&&r.constructor&&this.drawn[n].constructor&&r.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(r.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const iD=jO.define();function oD(e){return[TI.define((t=>new rD(t,e))),iD.of(e)]}const sD=!BN.ios,aD=jO.define({combine:e=>CA(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function lD(e){return e.startState.facet(aD)!=e.state.facet(aD)}const cD=oD({above:!0,markers(e){let{state:t}=e,n=t.facet(aD),r=[];for(let i of t.selection.ranges){let o=i==t.selection.main;if(i.empty?!o||sD:n.drawRangeCursor){let t=o?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",n=i.empty?i:DO.cursor(i.head,i.head>i.anchor?-1:1);for(let i of eD.forRange(e,t,n))r.push(i)}}return r},update(e,t){e.transactions.some((e=>e.selection))&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let n=lD(e);return n&&uD(e.state,t),e.docChanged||e.selectionSet||n},mount(e,t){uD(t.state,e)},class:"cm-cursorLayer"});function uD(e,t){t.style.animationDuration=e.facet(aD).cursorBlinkRate+"ms"}const hD=oD({above:!1,markers:e=>e.state.selection.ranges.map((t=>t.empty?[]:eD.forRange(e,"cm-selectionBackground",t))).reduce(((e,t)=>e.concat(t))),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||lD(e),class:"cm-selectionLayer"}),dD={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};sD&&(dD[".cm-line"].caretColor="transparent !important",dD[".cm-content"]={caretColor:"transparent !important"});const fD=$O.highest(UR.theme(dD)),pD=fA.define({map:(e,t)=>null==e?null:t.mapPos(e)}),gD=HO.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce(((e,t)=>t.is(pD)?t.value:e),e))}),mD=TI.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let n=e.state.field(gD);null==n?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(gD)!=n||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:e}=this,t=e.state.field(gD),n=null!=t&&e.coordsAtPos(t);if(!n)return null;let r=e.scrollDOM.getBoundingClientRect();return{left:n.left-r.left+e.scrollDOM.scrollLeft*e.scaleX,top:n.top-r.top+e.scrollDOM.scrollTop*e.scaleY,height:n.bottom-n.top}}drawCursor(e){if(this.cursor){let{scaleX:t,scaleY:n}=this.view;e?(this.cursor.style.left=e.left/t+"px",this.cursor.style.top=e.top/n+"px",this.cursor.style.height=e.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(gD)!=e&&this.view.dispatch({effects:pD.of(e)})}},{eventObservers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function vD(e,t,n,r,i){t.lastIndex=0;for(let o,s=e.iterRange(n,r),a=n;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=t.exec(s.value);)i(a+o.index,o)}class yD{constructor(e){const{regexp:t,decoration:n,decorate:r,boundary:i,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,r)this.addMatch=(e,t,n,i)=>r(i,n,n+e[0].length,e,t);else if("function"==typeof n)this.addMatch=(e,t,r,i)=>{let o=n(e,t,r);o&&i(r,r+e[0].length,o)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(e,t,r,i)=>i(r,r+e[0].length,n)}this.boundary=i,this.maxLength=o}createDeco(e){let t=new PA,n=t.add.bind(t);for(let{from:r,to:i}of function(e,t){let n=e.visibleRanges;if(1==n.length&&n[0].from==e.viewport.from&&n[0].to==e.viewport.to)return n;let r=[];for(let{from:i,to:o}of n)i=Math.max(e.state.doc.lineAt(i).from,i-t),o=Math.min(e.state.doc.lineAt(o).to,o+t),r.length&&r[r.length-1].to>=i?r[r.length-1].to=o:r.push({from:i,to:o});return r}(e,this.maxLength))vD(e.state.doc,this.regexp,r,i,((t,r)=>this.addMatch(r,e,t,n)));return t.finish()}updateDeco(e,t){let n=1e9,r=-1;return e.docChanged&&e.changes.iterChanges(((t,i,o,s)=>{s>e.view.viewport.from&&o<e.view.viewport.to&&(n=Math.min(o,n),r=Math.max(s,r))})),e.viewportChanged||r-n>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,t.map(e.changes),n,r):t}updateRange(e,t,n,r){for(let i of e.visibleRanges){let o=Math.max(i.from,n),s=Math.min(i.to,r);if(s>o){let n=e.state.doc.lineAt(o),r=n.to<s?e.state.doc.lineAt(s):n,a=Math.max(i.from,n.from),l=Math.min(i.to,r.to);if(this.boundary){for(;o>n.from;o--)if(this.boundary.test(n.text[o-1-n.from])){a=o;break}for(;s<r.to;s++)if(this.boundary.test(r.text[s-r.from])){l=s;break}}let c,u=[],h=(e,t,n)=>u.push(n.range(e,t));if(n==r)for(this.regexp.lastIndex=a-n.from;(c=this.regexp.exec(n.text))&&c.index<l-n.from;)this.addMatch(c,e,c.index+n.from,h);else vD(e.state.doc,this.regexp,a,l,((t,n)=>this.addMatch(n,e,t,h)));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:u})}}return t}}const bD=null!=/x/.unicode?"gu":"g",wD=new RegExp("[\0-\b\n-\x1f\x7f-\x9f\xad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]",bD),_D={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let xD=null;const kD=jO.define({combine(e){let t=CA(e,{render:null,specialChars:wD,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==xD&&"undefined"!=typeof document&&document.body){let t=document.body.style;xD=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return xD||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,bD)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,bD)),t}});let SD=null;class ED extends tI{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"\u2022":10==e?"\u2424":String.fromCharCode(9216+e)}(this.code),n=e.state.phrase("Control character")+" "+(_D[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,n,t);if(r)return r;let i=document.createElement("span");return i.textContent=t,i.title=n,i.setAttribute("aria-label",n),i.className="cm-specialChar",i}ignoreEvent(){return!1}}class CD extends tI{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const TD=rI.line({class:"cm-activeLine"}),OD=TI.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,n=[];for(let r of e.state.selection.ranges){let i=e.lineBlockAt(r.head);i.from>t&&(n.push(TD.range(i.from)),t=i.from)}return rI.set(n)}},{decorations:e=>e.decorations});class AD extends tI{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content),"string"==typeof this.content?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}coordsAt(e){let t=e.firstChild?sN(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),r=hN(t[0],"rtl"!=n.direction),i=parseInt(n.lineHeight);return r.bottom-r.top>1.5*i?{left:r.left,right:r.right,top:r.top,bottom:r.top+i}:r}ignoreEvent(){return!1}}const ND=2e3;function ID(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1),r=e.state.doc.lineAt(n),i=n-r.from,o=i>ND?-1:i==r.length?function(e,t){let n=e.coordsAtPos(e.viewport.from);return n?Math.round(Math.abs((n.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):zA(r.text,e.state.tabSize,n-r.from);return{line:r.number,col:o,off:i}}function PD(e,t){let n=ID(e,t),r=e.state.selection;return n?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(n.line).from),i=e.state.doc.lineAt(t);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},r=r.map(e.changes)}},get(t,i,o){let s=ID(e,t);if(!s)return r;let a=function(e,t,n){let r=Math.min(t.line,n.line),i=Math.max(t.line,n.line),o=[];if(t.off>ND||n.off>ND||t.col<0||n.col<0){let s=Math.min(t.off,n.off),a=Math.max(t.off,n.off);for(let t=r;t<=i;t++){let n=e.doc.line(t);n.length<=a&&o.push(DO.range(n.from+s,n.to+a))}}else{let s=Math.min(t.col,n.col),a=Math.max(t.col,n.col);for(let t=r;t<=i;t++){let n=e.doc.line(t),r=HA(n.text,s,e.tabSize,!0);if(r<0)o.push(DO.cursor(n.to));else{let t=HA(n.text,a,e.tabSize);o.push(DO.range(n.from+r,n.from+t))}}}return o}(e.state,n,s);return a.length?o?DO.create(a.concat(r.ranges)):DO.create(a):r}}:null}const RD={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},DD={style:"cursor: crosshair"};const MD="-10000px";class LD{constructor(e,t,n){this.facet=t,this.createTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e)),this.tooltipViews=this.tooltips.map(n)}update(e,t){var n;let r=e.state.facet(this.facet),i=r.filter((e=>e));if(r===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let o=[],s=t?[]:null;for(let a=0;a<i.length;a++){let n=i[a],r=-1;if(n){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==n.create&&(r=e)}if(r<0)o[a]=this.createTooltipView(n),s&&(s[a]=!!n.above);else{let n=o[a]=this.tooltipViews[r];s&&(s[a]=t[r]),n.update&&n.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(a.dom.remove(),null===(n=a.destroy)||void 0===n||n.call(a));return t&&(s.forEach(((e,n)=>t[n]=e)),t.length=s.length),this.input=r,this.tooltips=i,this.tooltipViews=o,!0}}function jD(e){let{win:t}=e;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const FD=jO.define({combine:e=>{var t,n,r;return{position:BN.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find((e=>e.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=e.find((e=>e.tooltipSpace)))||void 0===r?void 0:r.tooltipSpace)||jD}}}),qD=new WeakMap,BD=TI.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(FD);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new LD(e,zD,(e=>this.createTooltip(e))),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let n=t||e.geometryChanged,r=e.state.facet(FD);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e){let t=e.create(this.view);if(t.dom.classList.add("cm-tooltip"),e.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",t.dom.appendChild(e)}return t.dom.style.position=this.position,t.dom.style.top=MD,t.dom.style.left="0px",this.container.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){var e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),null===(e=n.destroy)||void 0===e||e.call(n);this.parent&&this.container.remove(),null===(t=this.intersectionObserver)||void 0===t||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=this.view.dom.getBoundingClientRect(),t=1,n=1,r=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:e}=this.manager.tooltipViews[0];if(BN.gecko)r=e.offsetParent!=this.container.ownerDocument.body;else if(1!=this.view.scaleX||1!=this.view.scaleY)r=!0;else if(e.style.top==MD&&"0px"==e.style.left){let t=e.getBoundingClientRect();r=Math.abs(t.top+1e4)>1||Math.abs(t.left)>1}}if(r||"absolute"==this.position)if(this.parent){let e=this.parent.getBoundingClientRect();e.width&&e.height&&(t=e.width/this.parent.offsetWidth,n=e.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:n}=this.view.viewState);return{editor:e,parent:this.parent?this.container.getBoundingClientRect():e,pos:this.manager.tooltips.map(((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((e=>{let{dom:t}=e;return t.getBoundingClientRect()})),space:this.view.state.facet(FD).tooltipSpace(this.view),scaleX:t,scaleY:n,makeAbsolute:r}}writeMeasure(e){var t;if(e.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let e of this.manager.tooltipViews)e.dom.style.position="absolute"}let{editor:n,space:r,scaleX:i,scaleY:o}=e,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,h=e.pos[a],d=e.size[a];if(!h||h.bottom<=Math.max(n.top,r.top)||h.top>=Math.min(n.bottom,r.bottom)||h.right<Math.max(n.left,r.left)-.1||h.left>Math.min(n.right,r.right)+.1){u.style.top=MD;continue}let f=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,g=d.right-d.left,m=null!==(t=qD.get(c))&&void 0!==t?t:d.bottom-d.top,v=c.offset||VD,y=this.view.textDirection==BI.LTR,b=d.width>r.right-r.left?y?r.left:r.right-d.width:y?Math.min(h.left-(f?14:0)+v.x,r.right-g):Math.max(r.left,h.left-g+(f?14:0)-v.x),w=this.above[a];!l.strictSide&&(w?h.top-(d.bottom-d.top)-v.y<r.top:h.bottom+(d.bottom-d.top)+v.y>r.bottom)&&w==r.bottom-h.bottom>h.top-r.top&&(w=this.above[a]=!w);let _=(w?h.top-r.top:r.bottom-h.bottom)-p;if(_<m&&!1!==c.resize){if(_<this.view.defaultLineHeight){u.style.top=MD;continue}qD.set(c,m),u.style.height=(m=_)/o+"px"}else u.style.height&&(u.style.height="");let x=w?h.top-m-p-v.y:h.bottom+p+v.y,k=b+g;if(!0!==c.overlap)for(let e of s)e.left<k&&e.right>b&&e.top<x+m&&e.bottom>x&&(x=w?e.top-m-2-p:e.bottom+p+2);if("absolute"==this.position?(u.style.top=(x-e.parent.top)/o+"px",u.style.left=(b-e.parent.left)/i+"px"):(u.style.top=x/o+"px",u.style.left=b/i+"px"),f){let e=h.left+(y?v.x:-v.x)-(b+14-7);f.style.left=e/i+"px"}!0!==c.overlap&&s.push({left:b,top:x,right:k,bottom:x+m}),u.classList.toggle("cm-tooltip-above",w),u.classList.toggle("cm-tooltip-below",!w),c.positioned&&c.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=MD}},{eventObservers:{scroll(){this.maybeMeasure()}}}),UD=UR.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"".concat(7,"px"),width:"".concat(14,"px"),position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"".concat(7,"px solid transparent"),borderRight:"".concat(7,"px solid transparent")},".cm-tooltip-above &":{bottom:"-".concat(7,"px"),"&:before":{borderTop:"".concat(7,"px solid #bbb")},"&:after":{borderTop:"".concat(7,"px solid #f5f5f5"),bottom:"1px"}},".cm-tooltip-below &":{top:"-".concat(7,"px"),"&:before":{borderBottom:"".concat(7,"px solid #bbb")},"&:after":{borderBottom:"".concat(7,"px solid #f5f5f5"),top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),VD={x:0,y:0},zD=jO.define({enables:[BD,UD]}),HD=jO.define();class WD{static create(e){return new WD(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new LD(e,HD,(e=>this.createHostedView(e)))}createHostedView(e){let t=e.create(this.view);return t.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(t.dom),this.mounted&&t.mount&&t.mount(this.view),t}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)null===(e=t.destroy)||void 0===e||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let r=n[e];if(void 0!==r)if(void 0===t)t=r;else if(t!==r)return}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const KD=zD.compute([HD],(e=>{let t=e.facet(HD).filter((e=>e));return 0===t.length?null:{pos:Math.min(...t.map((e=>e.pos))),end:Math.max(...t.map((e=>{var t;return null!==(t=e.end)&&void 0!==t?t:e.pos}))),create:WD.create,above:t[0].above,arrow:t.some((e=>e.arrow))}}));class GD{constructor(e,t,n,r,i){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=i,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let r,i=1;if(n instanceof zN)r=n.posAtStart;else{if(r=e.posAtCoords(t),null==r)return;let n=e.coordsAtPos(r);if(!n||t.y<n.top||t.y>n.bottom||t.x<n.left-e.defaultCharacterWidth||t.x>n.right+e.defaultCharacterWidth)return;let o=e.bidiSpans(e.state.doc.lineAt(r)).find((e=>e.from<=r&&e.to>=r)),s=o&&o.dir==BI.RTL?-1:1;i=t.x<n.left?-s:s}let o=this.source(e,r,i);if(null===o||void 0===o?void 0:o.then){let t=this.pending={pos:r};o.then((n=>{this.pending==t&&(this.pending=null,n&&e.dispatch({effects:this.setHover.of(n)}))}),(t=>kI(e.state,t,"hover tooltip")))}else o&&e.dispatch({effects:this.setHover.of(o)})}get tooltip(){let e=this.view.plugin(BD),t=e?e.manager.tooltips.findIndex((e=>e.create==WD.create)):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:r}=this;if(n&&r&&!function(e,t){let n=e.getBoundingClientRect();return t.clientX>=n.left-YD&&t.clientX<=n.right+YD&&t.clientY>=n.top-YD&&t.clientY<=n.bottom+YD}(r.dom,e)||this.pending){let{pos:r}=n||this.pending,i=null!==(t=null===n||void 0===n?void 0:n.end)&&void 0!==t?t:r;(r==i?this.view.posAtCoords(this.lastMove)==r:function(e,t,n,r,i,o){let s=e.scrollDOM.getBoundingClientRect(),a=e.documentTop+e.documentPadding.top+e.contentHeight;if(s.left>r||s.right<r||s.top>i||Math.min(s.bottom,a)<i)return!1;let l=e.posAtCoords({x:r,y:i},!1);return l>=t&&l<=n}(this.view,r,i,e.clientX,e.clientY))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t){let{tooltip:t}=this;t&&t.dom.contains(e.relatedTarget)?this.watchTooltipLeave(t.dom):this.view.dispatch({effects:this.setHover.of(null)})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const YD=4;function QD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=fA.define(),r=HO.define({create:()=>null,update(e,r){if(e&&(t.hideOnChange&&(r.docChanged||r.selection)||t.hideOn&&t.hideOn(r,e)))return null;if(e&&r.docChanged){let t=r.changes.mapPos(e.pos,-1,SO.TrackDel);if(null==t)return null;let n=Object.assign(Object.create(null),e);n.pos=t,null!=e.end&&(n.end=r.changes.mapPos(e.end)),e=n}for(let t of r.effects)t.is(n)&&(e=t.value),t.is(XD)&&(e=null);return e},provide:e=>HD.from(e)});return[r,TI.define((i=>new GD(i,e,r,n,t.hoverTime||300))),KD]}function $D(e,t){let n=e.plugin(BD);if(!n)return null;let r=n.manager.tooltips.indexOf(t);return r<0?null:n.manager.tooltipViews[r]}const XD=fA.define();const JD=jO.define({combine(e){let t,n;for(let r of e)t=t||r.topContainer,n=n||r.bottomContainer;return{topContainer:t,bottomContainer:n}}});function ZD(e,t){let n=e.plugin(eM),r=n?n.specs.indexOf(t):-1;return r>-1?n.panels[r]:null}const eM=TI.fromClass(class{constructor(e){this.input=e.state.facet(rM),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(JD);this.top=new tM(e,!0,t.topContainer),this.bottom=new tM(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(e){let t=e.state.facet(JD);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new tM(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new tM(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(rM);if(n!=this.input){let t=n.filter((e=>e)),r=[],i=[],o=[],s=[];for(let n of t){let t,a=this.specs.indexOf(n);a<0?(t=n(e.view),s.push(t)):(t=this.panels[a],t.update&&t.update(e)),r.push(t),(t.top?i:o).push(t)}this.specs=t,this.panels=r,this.top.sync(i),this.bottom.sync(o);for(let e of s)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let r of this.panels)r.update&&r.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>UR.scrollMargins.of((t=>{let n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))});class tM{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=nM(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=nM(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function nM(e){let t=e.nextSibling;return e.remove(),t}const rM=jO.define({enables:eM});class iM extends TA{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}iM.prototype.elementClass="",iM.prototype.toDOM=void 0,iM.prototype.mapMode=SO.TrackBefore,iM.prototype.startSide=iM.prototype.endSide=-1,iM.prototype.point=!0;const oM=jO.define(),sM={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>IA.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},aM=jO.define();function lM(e){return[uM(),aM.of(Object.assign(Object.assign({},sM),e))]}const cM=jO.define({combine:e=>e.some((e=>e))});function uM(e){let t=[hM];return e&&!1===e.fixed&&t.push(cM.of(!0)),t}const hM=TI.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(aM).map((t=>new gM(e,t)));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!e.state.facet(cM),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(cM)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let n=IA.iter(this.view.state.facet(oM),this.view.viewport.from),r=[],i=this.gutters.map((e=>new pM(e,this.view.viewport,-this.view.documentPadding.top)));for(let o of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(o.type)){let e=!0;for(let t of o.type)if(t.type==nI.Text&&e){fM(n,r,t.from);for(let e of i)e.line(this.view,t,r);e=!1}else if(t.widget)for(let e of i)e.widget(this.view,t)}else if(o.type==nI.Text){fM(n,r,o.from);for(let e of i)e.line(this.view,o,r)}else if(o.widget)for(let e of i)e.widget(this.view,o);for(let o of i)o.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(aM),n=e.state.facet(aM),r=e.docChanged||e.heightChanged||e.viewportChanged||!IA.eq(e.startState.facet(oM),e.state.facet(oM),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let i of this.gutters)i.update(e)&&(r=!0);else{r=!0;let i=[];for(let r of n){let n=t.indexOf(r);n<0?i.push(new gM(this.view,r)):(this.gutters[n].update(e),i.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove(),i.indexOf(e)<0&&e.destroy();for(let e of i)this.dom.appendChild(e.dom);this.gutters=i}return r}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>UR.scrollMargins.of((t=>{let n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==BI.LTR?{left:n.dom.offsetWidth*t.scaleX}:{right:n.dom.offsetWidth*t.scaleX}:null}))});function dM(e){return Array.isArray(e)?e:[e]}function fM(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}class pM{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=IA.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:r}=this,i=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==r.elements.length){let t=new mM(e,o,i,n);r.elements.push(t),r.dom.appendChild(t.dom)}else r.elements[this.i].update(e,o,i,n);this.height=t.bottom,this.i++}line(e,t,n){let r=[];fM(this.cursor,r,t.from),n.length&&(r=r.concat(n));let i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);let o=this.gutter;(0!=r.length||o.config.renderEmptyElements)&&this.addElement(e,t,r)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t);n&&this.addElement(e,t,[n])}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class gM{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,(r=>{let i,o=r.target;if(o!=this.dom&&this.dom.contains(o)){for(;o.parentNode!=this.dom;)o=o.parentNode;let e=o.getBoundingClientRect();i=(e.top+e.bottom)/2}else i=r.clientY;let s=e.lineBlockAtHeight(i-e.documentTop);t.domEventHandlers[n](e,s,r)&&r.preventDefault()}));this.markers=dM(t.markers(e)),t.initialSpacer&&(this.spacer=new mM(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=dM(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let n=e.view.viewport;return!IA.eq(this.markers,t,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class mM{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let i=0,o=0;;){let s=o,a=i<t.length?t[i++]:null,l=!1;if(a){let e=a.elementClass;e&&(n+=" "+e);for(let t=o;t<this.markers.length;t++)if(this.markers[t].compare(a)){s=t,l=!0;break}}else s=this.markers.length;for(;o<s;){let e=this.markers[o++];if(e.toDOM){e.destroy(r);let t=r.nextSibling;r.remove(),r=t}}if(!a)break;a.toDOM&&(l?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),l&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}const vM=jO.define(),yM=jO.define({combine:e=>CA(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let r in t){let e=n[r],i=t[r];n[r]=e?(t,n,r)=>e(t,n,r)||i(t,n,r):i}return n}})});class bM extends iM{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function wM(e,t){return e.state.facet(yM).formatNumber(t,e.state)}const _M=aM.compute([yM],(e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(vM),lineMarker:(e,t,n)=>n.some((e=>e.toDOM))?null:new bM(wM(e,e.state.doc.lineAt(t.from).number)),widgetMarker:()=>null,lineMarkerChange:e=>e.startState.facet(yM)!=e.state.facet(yM),initialSpacer:e=>new bM(wM(e,xM(e.state.doc.lines))),updateSpacer(e,t){let n=wM(t.view,xM(t.view.state.doc.lines));return n==e.number?e:new bM(n)},domEventHandlers:e.facet(yM).domEventHandlers})));function xM(e){let t=9;for(;t<e;)t=10*t+9;return t}const kM=new class extends iM{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},SM=oM.compute(["selection"],(e=>{let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.head).from;i>n&&(n=i,t.push(kM.range(i)))}return IA.of(t)}));const EM=1024;let CM=0;class TM{constructor(e,t){this.from=e,this.to=t}}class OM{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.id=CM++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=IM.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}OM.closedBy=new OM({deserialize:e=>e.split(" ")}),OM.openedBy=new OM({deserialize:e=>e.split(" ")}),OM.group=new OM({deserialize:e=>e.split(" ")}),OM.contextHash=new OM({perNode:!0}),OM.lookAhead=new OM({perNode:!0}),OM.mounted=new OM({perNode:!0});class AM{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[OM.mounted.id]}}const NM=Object.create(null);class IM{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):NM,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new IM(e.name||"",t,e.id,n);if(e.props)for(let i of e.props)if(Array.isArray(i)||(i=i(r)),i){if(i[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[i[0].id]=i[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(OM.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(OM.group),r=-1;r<(n?n.length:0);r++){let i=t[r<0?e.name:n[r]];if(i)return i}}}}IM.none=new IM("",Object.create(null),0,8);const PM=new WeakMap,RM=new WeakMap;var DM;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(DM||(DM={}));class MM{constructor(e,t,n,r,i){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,i&&i.length){this.props=Object.create(null);for(let[e,t]of i)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=AM.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let e=n.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new YM(this.topNode,e)}cursorAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=PM.get(this)||this.topNode,r=new YM(n);return r.moveTo(e,t),PM.set(this,r._tree),r}get topNode(){return new UM(this,0,0,null)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=qM(PM.get(this)||this.topNode,e,t,!1);return PM.set(this,n),n}resolveInner(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=qM(RM.get(this)||this.topNode,e,t,!0);return RM.set(this,n),n}resolveStack(e){return function(e,t,n){let r=e.resolveInner(t,n),i=null;for(let o=r instanceof UM?r:r.context.parent;o;o=o.parent)if(o.index<0){let e=o.parent;(i||(i=[r])).push(e.resolve(t,n)),o=e}else{let e=AM.get(o.tree);if(e&&e.overlay&&e.overlay[0].from<=t&&e.overlay[e.overlay.length-1].to>=t){let s=new UM(e.tree,e.overlay[0].from+o.from,-1,o);(i||(i=[r])).push(qM(s,t,n,!1))}}return i?KM(i):r}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0)}iterate(e){let{enter:t,leave:n,from:r=0,to:i=this.length}=e,o=e.mode||0,s=(o&DM.IncludeAnonymous)>0;for(let a=this.cursor(o|DM.IncludeAnonymous);;){let e=!1;if(a.from<=i&&a.to>=r&&(!s&&a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;e=!0}for(;e&&n&&(s||!a.type.isAnonymous)&&n(a),!a.nextSibling();){if(!a.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.children.length<=8?this:JM(IM.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new MM(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new MM(IM.none,e,t,n)))}static build(e){return function(e){var t;let{buffer:n,nodeSet:r,maxBufferLength:i=EM,reused:o=[],minRepeatType:s=r.types.length}=e,a=Array.isArray(n)?new LM(n,n.length):n,l=r.types,c=0,u=0;function h(e,t,n,y,b,w){let{id:_,start:x,end:k,size:S}=a,E=u;for(;S<0;){if(a.next(),-1==S){let t=o[_];return n.push(t),void y.push(x-e)}if(-3==S)return void(c=_);if(-4==S)return void(u=_);throw new RangeError("Unrecognized record size: ".concat(S))}let C,T,O=l[_],A=x-e;if(k-x<=i&&(T=m(a.pos-t,b))){let t=new Uint16Array(T.size-T.skip),n=a.pos-T.size,i=t.length;for(;a.pos>n;)i=v(T.start,t,i);C=new jM(t,k-T.start,r),A=T.start-e}else{let e=a.pos-S;a.next();let t=[],n=[],r=_>=s?_:-1,o=0,l=k;for(;a.pos>e;)r>=0&&a.id==r&&a.size>=0?(a.end<=l-i&&(p(t,n,x,o,a.end,l,r,E),o=t.length,l=a.end),a.next()):w>2500?d(x,e,t,n):h(x,e,t,n,r,w+1);if(r>=0&&o>0&&o<t.length&&p(t,n,x,o,x,l,r,E),t.reverse(),n.reverse(),r>-1&&o>0){let e=f(O);C=JM(O,t,n,0,t.length,0,k-x,e,e)}else C=g(O,t,n,k-x,E-k)}n.push(C),y.push(A)}function d(e,t,n,o){let s=[],l=0,c=-1;for(;a.pos>t;){let{id:e,start:t,end:n,size:r}=a;if(r>4)a.next();else{if(c>-1&&t<c)break;c<0&&(c=n-i),s.push(e,t,n),l++,a.next()}}if(l){let t=new Uint16Array(4*l),i=s[s.length-2];for(let e=s.length-3,n=0;e>=0;e-=3)t[n++]=s[e],t[n++]=s[e+1]-i,t[n++]=s[e+2]-i,t[n++]=n;n.push(new jM(t,s[2]-i,r)),o.push(i-e)}}function f(e){return(t,n,r)=>{let i,o,s=0,a=t.length-1;if(a>=0&&(i=t[a])instanceof MM){if(!a&&i.type==e&&i.length==r)return i;(o=i.prop(OM.lookAhead))&&(s=n[a]+i.length+o)}return g(e,t,n,r,s)}}function p(e,t,n,i,o,s,a,l){let c=[],u=[];for(;e.length>i;)c.push(e.pop()),u.push(t.pop()+n-o);e.push(g(r.types[a],c,u,s-o,l-s)),t.push(o-n)}function g(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;if(c){let e=[OM.contextHash,c];o=o?[e].concat(o):[e]}if(i>25){let e=[OM.lookAhead,i];o=o?[e].concat(o):[e]}return new MM(e,t,n,r,o)}function m(e,t){let n=a.fork(),r=0,o=0,l=0,c=n.end-i,u={size:0,start:0,skip:0};e:for(let i=n.pos-e;n.pos>i;){let e=n.size;if(n.id==t&&e>=0){u.size=r,u.start=o,u.skip=l,l+=4,r+=4,n.next();continue}let a=n.pos-e;if(e<0||a<i||n.start<c)break;let h=n.id>=s?4:0,d=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break e;h+=4}else n.id>=s&&(h+=4);n.next()}o=d,r+=e,l+=h}return(t<0||r==e)&&(u.size=r,u.start=o,u.skip=l),u.size>4?u:void 0}function v(e,t,n){let{id:r,start:i,end:o,size:l}=a;if(a.next(),l>=0&&r<s){let s=n;if(l>4){let r=a.pos-(l-4);for(;a.pos>r;)n=v(e,t,n)}t[--n]=s,t[--n]=o-e,t[--n]=i-e,t[--n]=r}else-3==l?c=r:-4==l&&(u=r);return n}let y=[],b=[];for(;a.pos>0;)h(e.start||0,e.bufferStart||0,y,b,-1,0);let w=null!==(t=e.length)&&void 0!==t?t:y.length?b[0]+y[0].length:0;return new MM(l[e.topID],y.reverse(),b.reverse(),w)}(e)}}MM.empty=new MM(IM.none,[],[],0);class LM{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new LM(this.buffer,this.index)}}class jM{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return IM.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),n==(e+=4))return i;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,t,n,r,i){let{buffer:o}=this,s=-1;for(let a=e;a!=t&&!(FM(i,r,o[a+1],o[a+2])&&(s=a,n>0));a=o[a+3]);return s}slice(e,t,n){let r=this.buffer,i=new Uint16Array(t-e),o=0;for(let s=e,a=0;s<t;){i[a++]=r[s++],i[a++]=r[s++]-n;let t=i[a++]=r[s++]-n;i[a++]=r[s++]-e,o=Math.max(o,t)}return new jM(i,o,this.set)}}function FM(e,t,n,r){switch(e){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function qM(e,t,n,r){for(var i;e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t);){let t=!r&&e instanceof UM&&e.index<0?null:e.parent;if(!t)return e;e=t}let o=r?0:DM.IgnoreOverlays;if(r)for(let s=e,a=s.parent;a;s=a,a=s.parent)s instanceof UM&&s.index<0&&(null===(i=a.enter(t,n,o))||void 0===i?void 0:i.from)!=s.from&&(e=a);for(;;){let r=e.enter(t,n,o);if(!r)return e;e=r}}class BM{cursor(){return new YM(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)}getChild(e){let t=VM(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null);return t.length?t[0]:null}getChildren(e){return VM(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}resolve(e){return qM(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!1)}resolveInner(e){return qM(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,!0)}matchContext(e){return zM(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class UM extends BM{constructor(e,t,n,r){super(),this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;for(let o=this;;){for(let{children:s,positions:a}=o._tree,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],c=a[e]+o.from;if(FM(r,n,c,c+l.length))if(l instanceof jM){if(i&DM.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,t,n-c,r);if(s>-1)return new WM(new HM(o,l,e,c),null,s)}else if(i&DM.IncludeAnonymous||!l.type.isAnonymous||QM(l)){let s;if(!(i&DM.IgnoreMounts)&&(s=AM.get(l))&&!s.overlay)return new UM(s.tree,c,e,o);let a=new UM(l,c,e,o);return i&DM.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,r)}}if(i&DM.IncludeAnonymous||!o.type.isAnonymous)return null;if(e=o.index>=0?o.index+t:t<0?-1:o._parent._tree.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!(r&DM.IgnoreOverlays)&&(n=AM.get(this._tree))&&n.overlay){let r=e-this.from;for(let{from:e,to:i}of n.overlay)if((t>0?e<=r:e<r)&&(t<0?i>=r:i>r))return new UM(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function VM(e,t,n,r){let i=e.cursor(),o=[];if(!i.firstChild())return o;if(null!=n)for(;!i.type.is(n);)if(!i.nextSibling())return o;for(;;){if(null!=r&&i.type.is(r))return o;if(i.type.is(t)&&o.push(i.node),!i.nextSibling())return null==r?o:[]}}function zM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;for(let r=e.parent;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class HM{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class WM extends BM{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return i<0?null:new WM(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t){if((arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)&DM.ExcludeBuffers)return null;let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new WM(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new WM(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new WM(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,i=n.buffer[this.index+3];if(i>r){let o=n.buffer[this.index+1];e.push(n.slice(r,i,o)),t.push(0)}return new MM(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function KM(e){if(!e.length)return null;let t=0,n=e[0];for(let o=1;o<e.length;o++){let r=e[o];(r.from>n.from||r.to<n.to)&&(n=r,t=o)}let r=n instanceof UM&&n.index<0?null:n.parent,i=e.slice();return r?i[t]=r:i.splice(t,1),new GM(i,n)}class GM{constructor(e,t){this.heads=e,this.node=t}get next(){return KM(this.heads)}}class YM{get name(){return this.type.name}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof UM)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof UM?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.mode;return this.buffer?!(n&DM.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&DM.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&DM.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let r=t+e,i=e<0?-1:n._tree.children.length;r!=i;r+=e){let e=n._tree.children[r];if(this.mode&DM.IncludeAnonymous||e instanceof jM||!e.type.isAnonymous||QM(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(1,e)}prev(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.move(-1,e)}moveTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=i+1;break e}r=this.stack[--i]}for(let r=n;r<this.stack.length;r++)t=new WM(this.buffer,t,this.stack[r]);return this.bufferNode=new WM(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;r&&t&&t(this),r=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return zM(this.node,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,i=this.stack.length-1;r>=0;i--){if(i<0)return zM(this.node,e,r);let o=n[t.buffer[this.stack[i]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function QM(e){return e.children.some((e=>e instanceof jM||!e.type.isAnonymous||QM(e)))}const $M=new WeakMap;function XM(e,t){if(!e.isAnonymous||t instanceof jM||t.type!=e)return 1;let n=$M.get(t);if(null==n){n=1;for(let r of t.children){if(r.type!=e||!(r instanceof MM)){n=1;break}n+=XM(e,r)}$M.set(t,n)}return n}function JM(e,t,n,r,i,o,s,a,l){let c=0;for(let f=r;f<i;f++)c+=XM(e,t[f]);let u=Math.ceil(1.5*c/8),h=[],d=[];return function t(n,r,i,s,a){for(let c=i;c<s;){let i=c,f=r[c],p=XM(e,n[c]);for(c++;c<s;c++){let t=XM(e,n[c]);if(p+t>=u)break;p+=t}if(c==i+1){if(p>u){let e=n[i];t(e.children,e.positions,0,e.children.length,r[i]+a);continue}h.push(n[i])}else{let t=r[c-1]+n[c-1].length-f;h.push(JM(e,n,r,i,c,f,t,null,l))}d.push(f+a-o)}}(t,n,r,i,0),(a||l)(h,d,s)}class ZM{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(i?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[new ZM(0,e.length,e,0,!1,n)];for(let i of t)i.to>e.length&&r.push(i);return r}static applyChanges(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;if(!t.length)return e;let r=[],i=1,o=e.length?e[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<t.length?t[s]:null,u=c?c.fromA:1e9;if(u-a>=n)for(;o&&o.from<u;){let t=o;if(a>=t.from||u<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,u)-l;t=e>=n?null:new ZM(e,n,t.tree,t.offset+l,s>0,!!c)}if(t&&r.push(t),o.to>u)break;o=i<e.length?e[i++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return r}}class eL{startParse(e,t,n){return"string"==typeof e&&(e=new tL(e)),n=n?n.length?n.map((e=>new TM(e.from,e.to))):[new TM(0,0)]:[new TM(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let e=r.advance();if(e)return e}}}class tL{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new OM({perNode:!0});let nL=0;class rL{constructor(e,t,n){this.set=e,this.base=t,this.modified=n,this.id=nL++}static define(e){if(null===e||void 0===e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new rL([],null,[]);if(t.set.push(t),e)for(let n of e.set)t.set.push(n);return t}static defineModifier(){let e=new oL;return t=>t.modified.indexOf(e)>-1?t:oL.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let iL=0;class oL{constructor(){this.instances=[],this.id=iL++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>n.base==e&&function(e,t){return e.length==t.length&&e.every(((e,n)=>e==t[n]))}(t,n.modified)));if(n)return n;let r=[],i=new rL(r,e,t);for(let s of t)s.instances.push(i);let o=function(e){let t=[[]];for(let n=0;n<e.length;n++)for(let r=0,i=t.length;r<i;r++)t.push(t[r].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let s of e.set)if(!s.modified.length)for(let e of o)r.push(oL.get(s,e));return i}}function sL(e){let t=Object.create(null);for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]);for(let e of n.split(" "))if(e){let n=[],i=2,o=e;for(let t=0;;){if("..."==o&&t>0&&t+3==e.length){i=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw new RangeError("Invalid path: "+e);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),t+=r[0].length,t==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){i=0;break}if("/"!=s)throw new RangeError("Invalid path: "+e);o=e.slice(t)}let s=n.length-1,a=n[s];if(!a)throw new RangeError("Invalid path: "+e);let l=new lL(r,i,s>0?n.slice(0,s):null);t[a]=l.sort(t[a])}}return aL.add(t)}const aL=new OM;class lL{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function cL(e,t){let n=Object.create(null);for(let o of e)if(Array.isArray(o.tag))for(let e of o.tag)n[e.id]=o.class;else n[o.tag.id]=o.class;let{scope:r,all:i=null}=t||{};return{style:e=>{let t=i;for(let r of e)for(let e of r.set){let r=n[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}function uL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length,o=new hL(r,Array.isArray(t)?t:[t],n);o.highlightRange(e.cursor(),r,i,"",o.highlighters),o.flush(i)}lL.empty=new lL([],2,null);class hL{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,i){let{type:o,from:s,to:a}=e;if(s>=n||a<=t)return;o.isTop&&(i=this.highlighters.filter((e=>!e.scope||e.scope(o))));let l=r,c=function(e){let t=e.type.prop(aL);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||lL.empty,u=function(e,t){let n=null;for(let r of e){let e=r.style(t);e&&(n=n?n+" "+e:e)}return n}(i,c.tags);if(u&&(l&&(l+=" "),l+=u,1==c.mode&&(r+=(r?" ":"")+u)),this.startSpan(Math.max(t,s),l),c.opaque)return;let h=e.tree&&e.tree.prop(OM.mounted);if(h&&h.overlay){let o=e.node.enter(h.overlay[0].from+s,1),c=this.highlighters.filter((e=>!e.scope||e.scope(h.tree.type))),u=e.firstChild();for(let d=0,f=s;;d++){let p=d<h.overlay.length?h.overlay[d]:null,g=p?p.from+s:a,m=Math.max(t,f),v=Math.min(n,g);if(m<v&&u)for(;e.from<v&&(this.highlightRange(e,m,v,r,i),this.startSpan(Math.min(v,e.to),l),!(e.to>=g)&&e.nextSibling()););if(!p||g>n)break;f=p.to+s,f>t&&(this.highlightRange(o.cursor(),Math.max(t,p.from+s),Math.min(n,f),"",c),this.startSpan(Math.min(n,f),l))}u&&e.parent()}else if(e.firstChild()){h&&(r="");do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,i),this.startSpan(Math.min(n,e.to),l)}}while(e.nextSibling());e.parent()}}}const dL=rL.define,fL=dL(),pL=dL(),gL=dL(pL),mL=dL(pL),vL=dL(),yL=dL(vL),bL=dL(vL),wL=dL(),_L=dL(wL),xL=dL(),kL=dL(),SL=dL(),EL=dL(SL),CL=dL(),TL={comment:fL,lineComment:dL(fL),blockComment:dL(fL),docComment:dL(fL),name:pL,variableName:dL(pL),typeName:gL,tagName:dL(gL),propertyName:mL,attributeName:dL(mL),className:dL(pL),labelName:dL(pL),namespace:dL(pL),macroName:dL(pL),literal:vL,string:yL,docString:dL(yL),character:dL(yL),attributeValue:dL(yL),number:bL,integer:dL(bL),float:dL(bL),bool:dL(vL),regexp:dL(vL),escape:dL(vL),color:dL(vL),url:dL(vL),keyword:xL,self:dL(xL),null:dL(xL),atom:dL(xL),unit:dL(xL),modifier:dL(xL),operatorKeyword:dL(xL),controlKeyword:dL(xL),definitionKeyword:dL(xL),moduleKeyword:dL(xL),operator:kL,derefOperator:dL(kL),arithmeticOperator:dL(kL),logicOperator:dL(kL),bitwiseOperator:dL(kL),compareOperator:dL(kL),updateOperator:dL(kL),definitionOperator:dL(kL),typeOperator:dL(kL),controlOperator:dL(kL),punctuation:SL,separator:dL(SL),bracket:EL,angleBracket:dL(EL),squareBracket:dL(EL),paren:dL(EL),brace:dL(EL),content:wL,heading:_L,heading1:dL(_L),heading2:dL(_L),heading3:dL(_L),heading4:dL(_L),heading5:dL(_L),heading6:dL(_L),contentSeparator:dL(wL),list:dL(wL),quote:dL(wL),emphasis:dL(wL),strong:dL(wL),link:dL(wL),monospace:dL(wL),strikethrough:dL(wL),inserted:dL(),deleted:dL(),changed:dL(),invalid:dL(),meta:CL,documentMeta:dL(CL),annotation:dL(CL),processingInstruction:dL(CL),definition:rL.defineModifier(),constant:rL.defineModifier(),function:rL.defineModifier(),standard:rL.defineModifier(),local:rL.defineModifier(),special:rL.defineModifier()};cL([{tag:TL.link,class:"tok-link"},{tag:TL.heading,class:"tok-heading"},{tag:TL.emphasis,class:"tok-emphasis"},{tag:TL.strong,class:"tok-strong"},{tag:TL.keyword,class:"tok-keyword"},{tag:TL.atom,class:"tok-atom"},{tag:TL.bool,class:"tok-bool"},{tag:TL.url,class:"tok-url"},{tag:TL.labelName,class:"tok-labelName"},{tag:TL.inserted,class:"tok-inserted"},{tag:TL.deleted,class:"tok-deleted"},{tag:TL.literal,class:"tok-literal"},{tag:TL.string,class:"tok-string"},{tag:TL.number,class:"tok-number"},{tag:[TL.regexp,TL.escape,TL.special(TL.string)],class:"tok-string2"},{tag:TL.variableName,class:"tok-variableName"},{tag:TL.local(TL.variableName),class:"tok-variableName tok-local"},{tag:TL.definition(TL.variableName),class:"tok-variableName tok-definition"},{tag:TL.special(TL.variableName),class:"tok-variableName2"},{tag:TL.definition(TL.propertyName),class:"tok-propertyName tok-definition"},{tag:TL.typeName,class:"tok-typeName"},{tag:TL.namespace,class:"tok-namespace"},{tag:TL.className,class:"tok-className"},{tag:TL.macroName,class:"tok-macroName"},{tag:TL.propertyName,class:"tok-propertyName"},{tag:TL.operator,class:"tok-operator"},{tag:TL.comment,class:"tok-comment"},{tag:TL.meta,class:"tok-meta"},{tag:TL.invalid,class:"tok-invalid"},{tag:TL.punctuation,class:"tok-punctuation"}]);var OL;const AL=new OM;const NL=new OM;class IL{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";this.data=e,this.name=r,EA.prototype.hasOwnProperty("tree")||Object.defineProperty(EA.prototype,"tree",{get(){return RL(this)}}),this.parser=t,this.extension=[VL.of(this),EA.languageData.of(((e,t,n)=>{let r=PL(e,t,n),i=r.type.prop(AL);if(!i)return[];let o=e.facet(i),s=r.type.prop(NL);if(s){let i=r.resolve(t-r.from,n);for(let t of s)if(t.test(i,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(o)}}return o}))].concat(n)}isActiveAt(e,t){return PL(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1).type.prop(AL)==this.data}findRegions(e){let t=e.facet(VL);if((null===t||void 0===t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(e,t)=>{if(e.prop(AL)==this.data)return void n.push({from:t,to:t+e.length});let i=e.prop(OM.mounted);if(i){if(i.tree.prop(AL)==this.data){if(i.overlay)for(let e of i.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(i.overlay){let e=n.length;if(r(i.tree,i.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let i=e.children[n];i instanceof MM&&r(i,e.positions[n]+t)}};return r(RL(e),0),n}get allowsNesting(){return!0}}function PL(e,t,n){let r=e.facet(VL),i=RL(e).topNode;if(!r||r.allowsNesting)for(let o=i;o;o=o.enter(t,n,DM.ExcludeBuffers))o.type.isTop&&(i=o);return i}IL.setState=fA.define();function RL(e){let t=e.field(IL.state,!1);return t?t.tree:MM.empty}class DL{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let ML=null;class LL{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,a=arguments.length>7?arguments[7]:void 0;this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=i,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new LL(e,t,[],MM.empty,0,n,[],null)}startParse(){return this.parser.startParse(new DL(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=MM.empty&&this.isDone(null!==t&&void 0!==t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(ZM.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!==t&&void 0!==t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(ZM.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=ML;ML=this;try{return e()}finally{ML=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=jL(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:i,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,r,i)=>t.push({fromA:e,toA:n,fromB:r,toB:i}))),n=ZM.applyChanges(n,t),r=MM.empty,i=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){s=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);n<r&&s.push({from:n,to:r})}}}return new LL(this.parser,t,n,r,i,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:t,to:r}=this.skipped[n];t<e.to&&r>e.from&&(this.fragments=jL(this.fragments,t,r),this.skipped.splice(n--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends eL{createParse(t,n,r){let i=r[0].from,o=r[r.length-1].to,s={parsedPos:i,advance(){let t=ML;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new MM(IM.none,[],[],o-i)},stoppedAt:null,stopAt(){}};return s}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return ML}}function jL(e,t,n){return ZM.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class FL{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new FL(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=LL.create(e.facet(VL).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new FL(n)}}IL.state=HO.define({create:FL.init,update(e,t){for(let n of t.effects)if(n.is(IL.setState))return n.value;return t.startState.facet(VL)!=t.state.facet(VL)?FL.init(t.state):e.apply(t)}});let qL=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(qL=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const BL="undefined"!=typeof navigator&&(null===(OL=navigator.scheduling)||void 0===OL?void 0:OL.isInputPending)?()=>navigator.scheduling.isInputPending():null,UL=TI.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(IL.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(IL.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=qL(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,i=n.field(IL.state);if(i.tree==i.context.tree&&i.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!BL?Math.max(25,e.timeRemaining()-5):1e9),s=i.context.treeLen<r&&n.doc.length>r+1e3,a=i.context.work((()=>BL&&BL()||Date.now()>o),r+(s?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:IL.setState.of(new FL(i.context))})),this.chunkBudget>0&&(!a||s)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>kI(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),VL=jO.define({combine:e=>e.length?e[0]:null,enables:e=>[IL.state,UL,UR.contentAttributes.compute([e],(t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]});const zL=jO.define(),HL=jO.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some((e=>e!=t[0])))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function WL(e){let t=e.facet(HL);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function KL(e,t){let n="",r=e.tabSize,i=e.facet(HL)[0];if("\t"==i){for(;t>=r;)n+="\t",t-=r;i=" "}for(let o=0;o<t;o++)n+=i;return n}function GL(e,t){e instanceof EA&&(e=new YL(e));for(let r of e.state.facet(zL)){let n=r(e,t);if(void 0!==n)return n}let n=RL(e.state);return n.length>=t?function(e,t,n){let r=t.resolveStack(n),i=r.node.enterUnfinishedNodesBefore(n);if(i!=r.node){let e=[];for(let t=i;t!=r.node;t=t.parent)e.push(t);for(let t=e.length-1;t>=0;t--)r={node:e[t],next:r}}return $L(r,e,n)}(e,n,t):null}class YL{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.state=e,this.options=t,this.unit=WL(e)}lineAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:i}=this.options;return null!=r&&r>=n.from&&r<=n.to?i&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{text:n,from:r}=this.lineAt(e,t),i=this.countColumn(n,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(i+=o-this.countColumn(n,n.search(/\S|$/))),i}countColumn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length;return zA(e,this.state.tabSize,t)}lineIndent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,{text:n,from:r}=this.lineAt(e,t),i=this.options.overrideIndentation;if(i){let e=i(r);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const QL=new OM;function $L(e,t,n){for(let r=e;r;r=r.next){let e=XL(r.node);if(e)return e(ZL.create(t,n,r))}return 0}function XL(e){let t=e.type.prop(QL);if(t)return t;let n,r=e.firstChild;if(r&&(n=r.type.prop(OM.closedBy))){let t=e.lastChild,r=t&&n.indexOf(t.name)>-1;return e=>tj(e,!0,1,void 0,r&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?JL:null}function JL(){return 0}class ZL extends YL{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new ZL(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(ej(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return $L(this.context.next,this.base,this.pos)}}function ej(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}function tj(e,t,n,r,i){let o=e.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||i==e.pos+s,l=t?function(e){let t=e.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let i=e.options.simulateBreak,o=e.state.doc.lineAt(n.from),s=null==i||i<=o.from?o.to:Math.min(o.to,i);for(let a=n.to;;){let e=t.childAfter(a);if(!e||e==r)return null;if(!e.type.isSkipped)return e.from<s?n:null;a=e.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}const nj=jO.define(),rj=new OM;function ij(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function oj(e,t,n){for(let r of e.facet(nj)){let i=r(e,t,n);if(i)return i}return function(e,t,n){let r=RL(e);if(r.length<n)return null;let i=null;for(let o=r.resolveStack(n,1);o;o=o.next){let s=o.node;if(s.to<=n||s.from>n)continue;if(i&&s.from<t)break;let a=s.type.prop(rj);if(a&&(s.to<r.length-50||r.length==e.doc.length||!ij(s))){let r=a(s,e);r&&r.from<=n&&r.from>=t&&r.to>n&&(i=r)}}return i}(e,t,n)}function sj(e,t){let n=t.mapPos(e.from,1),r=t.mapPos(e.to,-1);return n>=r?void 0:{from:n,to:r}}const aj=fA.define({map:sj}),lj=fA.define({map:sj});function cj(e){let t=[];for(let{head:n}of e.state.selection.ranges)t.some((e=>e.from<=n&&e.to>=n))||t.push(e.lineBlockAt(n));return t}const uj=HO.define({create:()=>rI.none,update(e,t){e=e.map(t.changes);for(let n of t.effects)if(n.is(aj)&&!dj(e,n.value.from,n.value.to)){let{preparePlaceholder:r}=t.state.facet(vj),i=r?rI.replace({widget:new _j(r(t.state,n.value))}):wj;e=e.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(lj)&&(e=e.update({filter:(e,t)=>n.value.from!=e||n.value.to!=t,filterFrom:n.value.from,filterTo:n.value.to}));if(t.selection){let n=!1,{head:r}=t.selection.main;e.between(r,r,((e,t)=>{e<r&&t>r&&(n=!0)})),n&&(e=e.update({filterFrom:r,filterTo:r,filter:(e,t)=>t<=r||e>=r}))}return e},provide:e=>UR.decorations.from(e),toJSON(e,t){let n=[];return e.between(0,t.doc.length,((e,t)=>{n.push(e,t)})),n},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let n=0;n<e.length;){let r=e[n++],i=e[n++];if("number"!=typeof r||"number"!=typeof i)throw new RangeError("Invalid JSON for fold state");t.push(wj.range(r,i))}return rI.set(t,!0)}});function hj(e,t,n){var r;let i=null;return null===(r=e.field(uj,!1))||void 0===r||r.between(t,n,((e,t)=>{(!i||i.from>e)&&(i={from:e,to:t})})),i}function dj(e,t,n){let r=!1;return e.between(t,t,((e,i)=>{e==t&&i==n&&(r=!0)})),r}function fj(e,t){return e.field(uj,!1)?t:t.concat(fA.appendConfig.of(yj()))}function pj(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e.state.doc.lineAt(t.from).number,i=e.state.doc.lineAt(t.to).number;return UR.announce.of("".concat(e.state.phrase(n?"Folded lines":"Unfolded lines")," ").concat(r," ").concat(e.state.phrase("to")," ").concat(i,"."))}const gj=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of cj(e)){let n=oj(e.state,t.from,t.to);if(n)return e.dispatch({effects:fj(e.state,[aj.of(n),pj(e,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(uj,!1))return!1;let t=[];for(let n of cj(e)){let r=hj(e.state,n.from,n.to);r&&t.push(lj.of(r),pj(e,r,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,n=[];for(let r=0;r<t.doc.length;){let i=e.lineBlockAt(r),o=oj(t,i.from,i.to);o&&n.push(aj.of(o)),r=(o?e.lineBlockAt(o.to):i).to+1}return n.length&&e.dispatch({effects:fj(e.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(uj,!1);if(!t||!t.size)return!1;let n=[];return t.between(0,e.state.doc.length,((e,t)=>{n.push(lj.of({from:e,to:t}))})),e.dispatch({effects:n}),!0}}],mj={placeholderDOM:null,preparePlaceholder:null,placeholderText:"\u2026"},vj=jO.define({combine:e=>CA(e,mj)});function yj(e){let t=[uj,Sj];return e&&t.push(vj.of(e)),t}function bj(e,t){let{state:n}=e,r=n.facet(vj),i=t=>{let n=e.lineBlockAt(e.posAtDOM(t.target)),r=hj(e.state,n.from,n.to);r&&e.dispatch({effects:lj.of(r)}),t.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(e,i,t);let o=document.createElement("span");return o.textContent=r.placeholderText,o.setAttribute("aria-label",n.phrase("folded code")),o.title=n.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=i,o}const wj=rI.replace({widget:new class extends tI{toDOM(e){return bj(e,null)}}});class _j extends tI{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return bj(e,this.value)}}const xj={openText:"\u2304",closedText:"\u203a",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class kj extends iM{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}const Sj=UR.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Ej{constructor(e,t){let n;function r(e){let t=YA.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;const i="string"==typeof t.all?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof IL?e=>e.prop(AL)==o.data:o?e=>e==o:void 0,this.style=cL(e.map((e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))}))),{all:i}).style,this.module=n?new YA(n):null,this.themeType=t.themeType}static define(e,t){return new Ej(e,t||{})}}const Cj=jO.define(),Tj=jO.define({combine:e=>e.length?[e[0]]:null});function Oj(e){let t=e.facet(Cj);return t.length?t:e.facet(Tj)}function Aj(e,t){let n,r=[Ij];return e instanceof Ej&&(e.module&&r.push(UR.styleModule.of(e.module)),n=e.themeType),(null===t||void 0===t?void 0:t.fallback)?r.push(Tj.of(e)):n?r.push(Cj.computeN([UR.darkTheme],(t=>t.facet(UR.darkTheme)==("dark"==n)?[e]:[]))):r.push(Cj.of(e)),r}class Nj{constructor(e){this.markCache=Object.create(null),this.tree=RL(e.state),this.decorations=this.buildDeco(e,Oj(e.state))}update(e){let t=RL(e.state),n=Oj(e.state),r=n!=Oj(e.startState);t.length<e.view.viewport.to&&!r&&t.type==this.tree.type?this.decorations=this.decorations.map(e.changes):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n))}buildDeco(e,t){if(!t||!this.tree.length)return rI.none;let n=new PA;for(let{from:r,to:i}of e.visibleRanges)uL(this.tree,t,((e,t,r)=>{n.add(e,t,this.markCache[r]||(this.markCache[r]=rI.mark({class:r})))}),r,i);return n.finish()}}const Ij=$O.high(TI.fromClass(Nj,{decorations:e=>e.decorations})),Pj=Ej.define([{tag:TL.meta,color:"#404740"},{tag:TL.link,textDecoration:"underline"},{tag:TL.heading,textDecoration:"underline",fontWeight:"bold"},{tag:TL.emphasis,fontStyle:"italic"},{tag:TL.strong,fontWeight:"bold"},{tag:TL.strikethrough,textDecoration:"line-through"},{tag:TL.keyword,color:"#708"},{tag:[TL.atom,TL.bool,TL.url,TL.contentSeparator,TL.labelName],color:"#219"},{tag:[TL.literal,TL.inserted],color:"#164"},{tag:[TL.string,TL.deleted],color:"#a11"},{tag:[TL.regexp,TL.escape,TL.special(TL.string)],color:"#e40"},{tag:TL.definition(TL.variableName),color:"#00f"},{tag:TL.local(TL.variableName),color:"#30a"},{tag:[TL.typeName,TL.namespace],color:"#085"},{tag:TL.className,color:"#167"},{tag:[TL.special(TL.variableName),TL.macroName],color:"#256"},{tag:TL.definition(TL.propertyName),color:"#00c"},{tag:TL.comment,color:"#940"},{tag:TL.invalid,color:"#f00"}]),Rj=UR.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Dj=1e4,Mj="()[]{}",Lj=jO.define({combine:e=>CA(e,{afterCursor:!0,brackets:Mj,maxScanDistance:Dj,renderMatch:qj})}),jj=rI.mark({class:"cm-matchingBracket"}),Fj=rI.mark({class:"cm-nonmatchingBracket"});function qj(e){let t=[],n=e.matched?jj:Fj;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}const Bj=HO.define({create:()=>rI.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],r=t.state.facet(Lj);for(let i of t.state.selection.ranges){if(!i.empty)continue;let e=Wj(t.state,i.head,-1,r)||i.head>0&&Wj(t.state,i.head-1,1,r)||r.afterCursor&&(Wj(t.state,i.head,1,r)||i.head<t.state.doc.length&&Wj(t.state,i.head+1,-1,r));e&&(n=n.concat(r.renderMatch(e,t.state)))}return rI.set(n,!0)},provide:e=>UR.decorations.from(e)}),Uj=[Bj,Rj];const Vj=new OM;function zj(e,t,n){let r=e.prop(t<0?OM.openedBy:OM.closedBy);if(r)return r;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function Hj(e){let t=e.type.prop(Vj);return t?t(e.node):e}function Wj(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.maxScanDistance||Dj,o=r.brackets||Mj,s=RL(e),a=s.resolveInner(t,n);for(let l=a;l;l=l.parent){let r=zj(l.type,n,o);if(r&&l.from<l.to){let i=Hj(l);if(i&&(n>0?t>=i.from&&t<i.to:t>i.from&&t<=i.to))return Kj(e,t,n,l,i,r,o)}}return function(e,t,n,r,i,o,s){let a=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?t-1:t,to:n>0?t+1:t},u=e.doc.iterRange(t,n>0?e.doc.length:0),h=0;for(let d=0;!u.next().done&&d<=o;){let e=u.value;n<0&&(d+=e.length);let o=t+d*n;for(let t=n>0?0:e.length-1,a=n>0?e.length:-1;t!=a;t+=n){let a=s.indexOf(e[t]);if(!(a<0||r.resolveInner(o+t,1).type!=i))if(a%2==0==n>0)h++;else{if(1==h)return{start:c,end:{from:o+t,to:o+t+1},matched:a>>1==l>>1};h--}}n>0&&(d+=e.length)}return u.done?{start:c,matched:!1}:null}(e,t,n,s,a.type,i,o)}function Kj(e,t,n,r,i,o,s){let a=r.parent,l={from:i.from,to:i.to},c=0,u=null===a||void 0===a?void 0:a.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do{if(n<0?u.to<=r.from:u.from>=r.to){if(0==c&&o.indexOf(u.type.name)>-1&&u.from<u.to){let e=Hj(u);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(zj(u.type,n,s))c++;else if(zj(u.type,-n,s)){if(0==c){let e=Hj(u);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}c--}}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}const Gj=Object.create(null),Yj=[IM.none],Qj=[],$j=Object.create(null),Xj=Object.create(null);for(let[n,QV]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Xj[n]=Zj(Gj,QV);function Jj(e,t){Qj.indexOf(e)>-1||(Qj.push(e),console.warn(t))}function Zj(e,t){let n=[];for(let a of t.split(" ")){let t=[];for(let n of a.split(".")){let r=e[n]||TL[n];r?"function"==typeof r?t.length?t=t.map(r):Jj(n,"Modifier ".concat(n," used at start of tag")):t.length?Jj(n,"Tag ".concat(n," used as modifier")):t=Array.isArray(r)?r:[r]:Jj(n,"Unknown highlighting tag ".concat(n))}for(let e of t)n.push(e)}if(!n.length)return 0;let r=t.replace(/ /g,"_"),i=r+" "+n.map((e=>e.id)),o=$j[i];if(o)return o.id;let s=$j[i]=IM.define({id:Yj.length,name:r,props:[sL({[r]:n})]});return Yj.push(s),s.id}function eF(e,t){return n=>{let{state:r,dispatch:i}=n;if(r.readOnly)return!1;let o=e(t,r);return!!o&&(i(r.update(o)),!0)}}const tF=eF(aF,0),nF=eF(sF,0),rF=eF(((e,t)=>sF(e,t,function(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),i=n.to<=r.to?r:e.doc.lineAt(n.to),o=t.length-1;o>=0&&t[o].to>r.from?t[o].to=i.to:t.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return t}(t))),0);function iF(e,t){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}const oF=50;function sF(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.selection.ranges,r=n.map((e=>iF(t,e.from).block));if(!r.every((e=>e)))return null;let i=n.map(((e,n)=>function(e,t,n,r){let i,o,{open:s,close:a}=t,l=e.sliceDoc(n-oF,n),c=e.sliceDoc(r,r+oF),u=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(c)[0].length,d=l.length-u;if(l.slice(d-s.length,d)==s&&c.slice(h,h+a.length)==a)return{open:{pos:n-u,margin:u&&1},close:{pos:r+h,margin:h&&1}};r-n<=2*oF?i=o=e.sliceDoc(n,r):(i=e.sliceDoc(n,n+oF),o=e.sliceDoc(r-oF,r));let f=/^\s*/.exec(i)[0].length,p=/\s*$/.exec(o)[0].length,g=o.length-p-a.length;return i.slice(f,f+s.length)==s&&o.slice(g,g+a.length)==a?{open:{pos:n+f+s.length,margin:/\s/.test(i.charAt(f+s.length))?1:0},close:{pos:r-p-a.length,margin:/\s/.test(o.charAt(g-1))?1:0}}:null}(t,r[n],e.from,e.to)));if(2!=e&&!i.every((e=>e)))return{changes:t.changes(n.map(((e,t)=>i[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}])))};if(1!=e&&i.some((e=>e))){let e=[];for(let t,n=0;n<i.length;n++)if(t=i[n]){let i=r[n],{open:o,close:s}=t;e.push({from:o.pos-i.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+i.close.length})}return{changes:e}}return null}function aF(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.selection.ranges,r=[],i=-1;for(let{from:o,to:s}of n){let e=r.length,n=1e9,a=iF(t,o).line;if(a){for(let e=o;e<=s;){let l=t.doc.lineAt(e);if(l.from>i&&(o==s||s>l.from)){i=l.from;let e=/^\s*/.exec(l.text)[0].length,t=e==l.length,o=l.text.slice(e,e+a.length)==a?e:-1;e<l.text.length&&e<n&&(n=e),r.push({line:l,comment:o,token:a,indent:e,empty:t,single:!1})}e=l.to+1}if(n<1e9)for(let t=e;t<r.length;t++)r[t].indent<r[t].line.text.length&&(r[t].indent=n);r.length==e+1&&(r[e].single=!0)}}if(2!=e&&r.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:i,indent:o,empty:s,single:a}of r)!a&&s||e.push({from:t.from+o,insert:i+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&r.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:n,token:i}of r)if(n>=0){let r=t.from+n,o=r+i.length;" "==t.text[o-t.from]&&o++,e.push({from:r,to:o})}return{changes:e}}return null}const lF=uA.define(),cF=uA.define(),uF=jO.define(),hF=jO.define({combine:e=>CA(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,r)=>e(n,r)||t(n,r)})}),dF=HO.define({create:()=>OF.empty,update(e,t){let n=t.state.facet(hF),r=t.annotation(lF);if(r){let i=yF.fromTransaction(t,r.selection),o=r.side,s=0==o?e.undone:e.done;return s=i?bF(s,s.length,n.minDepth,i):kF(s,t.startState.selection),new OF(0==o?r.rest:s,0==o?s:r.rest)}let i=t.annotation(cF);if("full"!=i&&"before"!=i||(e=e.isolate()),!1===t.annotation(pA.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let o=yF.fromTransaction(t),s=t.annotation(pA.time),a=t.annotation(pA.userEvent);return o?e=e.addChanges(o,s,a,n,t):t.selection&&(e=e.addSelection(t.startState.selection,s,a,n.newGroupDelay)),"full"!=i&&"after"!=i||(e=e.isolate()),e},toJSON:e=>({done:e.done.map((e=>e.toJSON())),undone:e.undone.map((e=>e.toJSON()))}),fromJSON:e=>new OF(e.done.map(yF.fromJSON),e.undone.map(yF.fromJSON))});function fF(e,t){return function(n){let{state:r,dispatch:i}=n;if(!t&&r.readOnly)return!1;let o=r.field(dF,!1);if(!o)return!1;let s=o.pop(e,r,t);return!!s&&(i(s),!0)}}const pF=fF(0,!1),gF=fF(1,!1),mF=fF(0,!0),vF=fF(1,!0);class yF{constructor(e,t,n,r,i){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=i}setSelAfter(e){return new yF(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new yF(e.changes&&CO.fromJSON(e.changes),[],e.mapped&&EO.fromJSON(e.mapped),e.startSelection&&DO.fromJSON(e.startSelection),e.selectionsAfter.map(DO.fromJSON))}static fromTransaction(e,t){let n=_F;for(let r of e.startState.facet(uF)){let t=r(e);t.length&&(n=n.concat(t))}return!n.length&&e.changes.empty?null:new yF(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,_F)}static selection(e){return new yF(void 0,_F,void 0,void 0,e)}}function bF(e,t,n,r){let i=t+1>n+20?t-n-1:0,o=e.slice(i,t);return o.push(r),o}function wF(e,t){return e.length?t.length?e.concat(t):e:t}const _F=[],xF=200;function kF(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-xF));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),bF(e,e.length-1,1e9,n.setSelAfter(r)))}return[yF.selection([t])]}function SF(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function EF(e,t){if(!e.length)return e;let n=e.length,r=_F;for(;n;){let i=CF(e[n-1],t,r);if(i.changes&&!i.changes.empty||i.effects.length){let t=e.slice(0,n);return t[n-1]=i,t}t=i.mapped,n--,r=i.selectionsAfter}return r.length?[yF.selection(r)]:_F}function CF(e,t,n){let r=wF(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):_F,n);if(!e.changes)return yF.selection(r);let i=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new yF(i,fA.mapEffects(e.effects,t),s,e.startSelection.map(o),r)}const TF=/^(input\.type|delete)($|\.)/;class OF{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new OF(this.done,this.undone):this}addChanges(e,t,n,r,i){let o=this.done,s=o[o.length-1];return o=s&&s.changes&&!s.changes.empty&&e.changes&&(!n||TF.test(n))&&(!s.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(i,function(e,t){let n=[],r=!1;return e.iterChangedRanges(((e,t)=>n.push(e,t))),t.iterChangedRanges(((e,t,i,o)=>{for(let s=0;s<n.length;){let e=n[s++],t=n[s++];o>=e&&i<=t&&(r=!0)}})),r}(s.changes,e.changes))||"input.type.compose"==n)?bF(o,o.length-1,r.minDepth,new yF(e.changes.compose(s.changes),wF(e.effects,s.effects),s.mapped,s.startSelection,_F)):bF(o,o.length,r.minDepth,e),new OF(o,_F,t,n)}addSelection(e,t,n,r){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:_F;return i.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&function(e,t){return e.ranges.length==t.ranges.length&&0===e.ranges.filter(((e,n)=>e.empty!=t.ranges[n].empty)).length}(i[i.length-1],e)?this:new OF(kF(this.done,e),this.undone,t,n)}addMapping(e){return new OF(EF(this.done,e),EF(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=0==e?this.done:this.undone;if(0==r.length)return null;let i=r[r.length-1],o=i.selectionsAfter[0]||t.selection;if(n&&i.selectionsAfter.length)return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:lF.of({side:e,rest:SF(r),selection:o}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let n=1==r.length?_F:r.slice(0,r.length-1);return i.mapped&&(n=EF(n,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:lF.of({side:e,rest:n,selection:o}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}OF.empty=new OF(_F,_F);const AF=[{key:"Mod-z",run:pF,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:gF,preventDefault:!0},{linux:"Ctrl-Shift-z",run:gF,preventDefault:!0},{key:"Mod-u",run:mF,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:vF,preventDefault:!0}];function NF(e,t){return DO.create(e.ranges.map(t),e.mainIndex)}function IF(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function PF(e,t){let{state:n,dispatch:r}=e,i=NF(n.selection,t);return!i.eq(n.selection)&&(r(IF(n,i)),!0)}function RF(e,t){return DO.cursor(t?e.to:e.from)}function DF(e,t){return PF(e,(n=>n.empty?e.moveByChar(n,t):RF(n,t)))}function MF(e){return e.textDirectionAt(e.state.selection.main.head)==BI.LTR}const LF=e=>DF(e,!MF(e)),jF=e=>DF(e,MF(e));function FF(e,t){return PF(e,(n=>n.empty?e.moveByGroup(n,t):RF(n,t)))}"undefined"!=typeof Intl&&Intl.Segmenter;function qF(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function BF(e,t,n){let r,i,o=RL(e).resolveInner(t.head),s=n?OM.closedBy:OM.openedBy;for(let a=t.head;;){let t=n?o.childAfter(a):o.childBefore(a);if(!t)break;qF(e,t,s)?o=t:a=n?t.to:t.from}return i=o.type.prop(s)&&(r=n?Wj(e,o.from,1):Wj(e,o.to,-1))&&r.matched?n?r.end.to:r.end.from:n?o.to:o.from,DO.cursor(i,n?-1:1)}function UF(e,t){return PF(e,(n=>{if(!n.empty)return RF(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)}))}const VF=e=>UF(e,!1),zF=e=>UF(e,!0);function HF(e){let t,n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,r=0,i=0;if(n){for(let t of e.state.facet(UR.scrollMargins)){let n=t(e);(null===n||void 0===n?void 0:n.top)&&(r=Math.max(null===n||void 0===n?void 0:n.top,r)),(null===n||void 0===n?void 0:n.bottom)&&(i=Math.max(null===n||void 0===n?void 0:n.bottom,i))}t=e.scrollDOM.clientHeight-r-i}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:i,selfScroll:n,height:Math.max(e.defaultLineHeight,t-5)}}function WF(e,t){let n,r=HF(e),{state:i}=e,o=NF(i.selection,(n=>n.empty?e.moveVertically(n,t,r.height):RF(n,t)));if(o.eq(i.selection))return!1;if(r.selfScroll){let t=e.coordsAtPos(i.selection.main.head),s=e.scrollDOM.getBoundingClientRect(),a=s.top+r.marginTop,l=s.bottom-r.marginBottom;t&&t.top>a&&t.bottom<l&&(n=UR.scrollIntoView(o.main.head,{y:"start",yMargin:t.top-a}))}return e.dispatch(IF(i,o),{effects:n}),!0}const KF=e=>WF(e,!1),GF=e=>WF(e,!0);function YF(e,t,n){let r=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,n);if(i.head==t.head&&i.head!=(n?r.to:r.from)&&(i=e.moveToLineBoundary(t,n,!1)),!n&&i.head==r.from&&r.length){let n=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&t.head!=r.from+n&&(i=DO.cursor(r.from+n))}return i}function QF(e,t,n){let r=!1,i=NF(e.selection,(t=>{let i=Wj(e,t.head,-1)||Wj(e,t.head,1)||t.head>0&&Wj(e,t.head-1,1)||t.head<e.doc.length&&Wj(e,t.head+1,-1);if(!i||!i.end)return t;r=!0;let o=i.start.from==t.head?i.end.to:i.end.from;return n?DO.range(t.anchor,o):DO.cursor(o)}));return!!r&&(t(IF(e,i)),!0)}function $F(e,t){let n=NF(e.state.selection,(e=>{let n=t(e);return DO.range(e.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)}));return!n.eq(e.state.selection)&&(e.dispatch(IF(e.state,n)),!0)}function XF(e,t){return $F(e,(n=>e.moveByChar(n,t)))}const JF=e=>XF(e,!MF(e)),ZF=e=>XF(e,MF(e));function eq(e,t){return $F(e,(n=>e.moveByGroup(n,t)))}function tq(e,t){return $F(e,(n=>e.moveVertically(n,t)))}const nq=e=>tq(e,!1),rq=e=>tq(e,!0);function iq(e,t){return $F(e,(n=>e.moveVertically(n,t,HF(e).height)))}const oq=e=>iq(e,!1),sq=e=>iq(e,!0),aq=e=>{let{state:t,dispatch:n}=e;return n(IF(t,{anchor:0})),!0},lq=e=>{let{state:t,dispatch:n}=e;return n(IF(t,{anchor:t.doc.length})),!0},cq=e=>{let{state:t,dispatch:n}=e;return n(IF(t,{anchor:t.selection.main.anchor,head:0})),!0},uq=e=>{let{state:t,dispatch:n}=e;return n(IF(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0};function hq(e,t){if(e.state.readOnly)return!1;let n="delete.selection",{state:r}=e,i=r.changeByRange((r=>{let{from:i,to:o}=r;if(i==o){let s=t(r);s<i?(n="delete.backward",s=dq(e,s,!1)):s>i&&(n="delete.forward",s=dq(e,s,!0)),i=Math.min(i,s),o=Math.max(o,s)}else i=dq(e,i,!1),o=dq(e,o,!0);return i==o?{range:r}:{changes:{from:i,to:o},range:DO.cursor(i,i<r.head?-1:1)}}));return!i.changes.empty&&(e.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?UR.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function dq(e,t,n){if(e instanceof UR)for(let r of e.state.facet(UR.atomicRanges).map((t=>t(e))))r.between(t,t,((e,r)=>{e<t&&r>t&&(t=n?r:e)}));return t}const fq=(e,t)=>hq(e,(n=>{let r,i,o=n.from,{state:s}=e,a=s.doc.lineAt(o);if(!t&&o>a.from&&o<a.from+200&&!/[^ \t]/.test(r=a.text.slice(0,o-a.from))){if("\t"==r[r.length-1])return o-1;let e=zA(r,s.tabSize)%WL(s)||WL(s);for(let t=0;t<e&&" "==r[r.length-1-t];t++)o--;i=o}else i=gO(a.text,o-a.from,t,t)+a.from,i==o&&a.number!=(t?s.doc.lines:1)?i+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(a.text.slice(i-a.from,o-a.from))&&(i=gO(a.text,i-a.from,!1,!1)+a.from);return i})),pq=e=>fq(e,!1),gq=e=>fq(e,!0),mq=(e,t)=>hq(e,(n=>{let r=n.head,{state:i}=e,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let e=null;;){if(r==(t?o.to:o.from)){r==n.head&&o.number!=(t?i.doc.lines:1)&&(r+=t?1:-1);break}let a=gO(o.text,r-o.from,t)+o.from,l=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),c=s(l);if(null!=e&&c!=e)break;" "==l&&r==n.head||(e=c),r=a}return r})),vq=e=>mq(e,!1);function yq(e){let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.from),o=e.doc.lineAt(r.to);if(r.empty||r.to!=o.from||(o=e.doc.lineAt(r.to-1)),n>=i.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(r)}else t.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return t}function bq(e,t,n){if(e.readOnly)return!1;let r=[],i=[];for(let o of yq(e)){if(n?o.to==e.doc.length:0==o.from)continue;let t=e.doc.lineAt(n?o.to+1:o.from-1),s=t.length+1;if(n){r.push({from:o.to,to:t.to},{from:o.from,insert:t.text+e.lineBreak});for(let t of o.ranges)i.push(DO.range(Math.min(e.doc.length,t.anchor+s),Math.min(e.doc.length,t.head+s)))}else{r.push({from:t.from,to:o.from},{from:o.to,insert:e.lineBreak+t.text});for(let e of o.ranges)i.push(DO.range(e.anchor-s,e.head-s))}}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:DO.create(i,e.selection.mainIndex),userEvent:"move.line"})),!0)}function wq(e,t,n){if(e.readOnly)return!1;let r=[];for(let i of yq(e))n?r.push({from:i.from,insert:e.doc.slice(i.from,i.to)+e.lineBreak}):r.push({from:i.to,insert:e.lineBreak+e.doc.slice(i.from,i.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const _q=kq(!1),xq=kq(!0);function kq(e){return t=>{let{state:n,dispatch:r}=t;if(n.readOnly)return!1;let i=n.changeByRange((t=>{let{from:r,to:i}=t,o=n.doc.lineAt(r),s=!e&&r==i&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,r=RL(e).resolveInner(t),i=r.childBefore(t),o=r.childAfter(t);return i&&o&&i.to<=t&&o.from>=t&&(n=i.type.prop(OM.closedBy))&&n.indexOf(o.name)>-1&&e.doc.lineAt(i.to).from==e.doc.lineAt(o.from).from&&!/\S/.test(e.sliceDoc(i.to,o.from))?{from:i.to,to:o.from}:null}(n,r);e&&(r=i=(i<=o.to?o:n.doc.lineAt(i)).to);let a=new YL(n,{simulateBreak:r,simulateDoubleBreak:!!s}),l=GL(a,r);for(null==l&&(l=zA(/^\s*/.exec(n.doc.lineAt(r).text)[0],n.tabSize));i<o.to&&/\s/.test(o.text[i-o.from]);)i++;s?({from:r,to:i}=s):r>o.from&&r<o.from+100&&!/\S/.test(o.text.slice(0,r))&&(r=o.from);let c=["",KL(n,l)];return s&&c.push(KL(n,a.lineIndent(o.from,-1))),{changes:{from:r,to:i,insert:tO.of(c)},range:DO.cursor(r+1+c[1].length)}}));return r(n.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Sq(e,t){let n=-1;return e.changeByRange((r=>{let i=[];for(let s=r.from;s<=r.to;){let o=e.doc.lineAt(s);o.number>n&&(r.empty||r.to>o.from)&&(t(o,i,r),n=o.number),s=o.to+1}let o=e.changes(i);return{changes:i,range:DO.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}}))}const Eq=e=>{let{state:t,dispatch:n}=e;return!t.readOnly&&(n(t.update(Sq(t,((e,n)=>{n.push({from:e.from,insert:t.facet(HL)})})),{userEvent:"input.indent"})),!0)},Cq=e=>{let{state:t,dispatch:n}=e;return!t.readOnly&&(n(t.update(Sq(t,((e,n)=>{let r=/^\s*/.exec(e.text)[0];if(!r)return;let i=zA(r,t.tabSize),o=0,s=KL(t,Math.max(0,i-WL(t)));for(;o<r.length&&o<s.length&&r.charCodeAt(o)==s.charCodeAt(o);)o++;n.push({from:e.from+o,to:e.from+r.length,insert:s.slice(o)})})),{userEvent:"delete.dedent"})),!0)},Tq=[{key:"ArrowLeft",run:LF,shift:JF,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>FF(e,!MF(e)),shift:e=>eq(e,!MF(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>PF(e,(t=>YF(e,t,!MF(e)))),shift:e=>$F(e,(t=>YF(e,t,!MF(e)))),preventDefault:!0},{key:"ArrowRight",run:jF,shift:ZF,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>FF(e,MF(e)),shift:e=>eq(e,MF(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>PF(e,(t=>YF(e,t,MF(e)))),shift:e=>$F(e,(t=>YF(e,t,MF(e)))),preventDefault:!0},{key:"ArrowUp",run:VF,shift:nq,preventDefault:!0},{mac:"Cmd-ArrowUp",run:aq,shift:cq},{mac:"Ctrl-ArrowUp",run:KF,shift:oq},{key:"ArrowDown",run:zF,shift:rq,preventDefault:!0},{mac:"Cmd-ArrowDown",run:lq,shift:uq},{mac:"Ctrl-ArrowDown",run:GF,shift:sq},{key:"PageUp",run:KF,shift:oq},{key:"PageDown",run:GF,shift:sq},{key:"Home",run:e=>PF(e,(t=>YF(e,t,!1))),shift:e=>$F(e,(t=>YF(e,t,!1))),preventDefault:!0},{key:"Mod-Home",run:aq,shift:cq},{key:"End",run:e=>PF(e,(t=>YF(e,t,!0))),shift:e=>$F(e,(t=>YF(e,t,!0))),preventDefault:!0},{key:"Mod-End",run:lq,shift:uq},{key:"Enter",run:_q},{key:"Mod-a",run:e=>{let{state:t,dispatch:n}=e;return n(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0}},{key:"Backspace",run:pq,shift:pq},{key:"Delete",run:gq},{key:"Mod-Backspace",mac:"Alt-Backspace",run:vq},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>mq(e,!0)},{mac:"Mod-Backspace",run:e=>hq(e,(t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)}))},{mac:"Mod-Delete",run:e=>hq(e,(t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}))}].concat([{key:"Ctrl-b",run:LF,shift:JF,preventDefault:!0},{key:"Ctrl-f",run:jF,shift:ZF},{key:"Ctrl-p",run:VF,shift:nq},{key:"Ctrl-n",run:zF,shift:rq},{key:"Ctrl-a",run:e=>PF(e,(t=>DO.cursor(e.lineBlockAt(t.head).from,1))),shift:e=>$F(e,(t=>DO.cursor(e.lineBlockAt(t.head).from)))},{key:"Ctrl-e",run:e=>PF(e,(t=>DO.cursor(e.lineBlockAt(t.head).to,-1))),shift:e=>$F(e,(t=>DO.cursor(e.lineBlockAt(t.head).to)))},{key:"Ctrl-d",run:gq},{key:"Ctrl-h",run:pq},{key:"Ctrl-k",run:e=>hq(e,(t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)}))},{key:"Ctrl-Alt-h",run:vq},{key:"Ctrl-o",run:e=>{let{state:t,dispatch:n}=e;if(t.readOnly)return!1;let r=t.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:tO.of(["",""])},range:DO.cursor(e.from)})));return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:e=>{let{state:t,dispatch:n}=e;if(t.readOnly)return!1;let r=t.changeByRange((e=>{if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};let n=e.from,r=t.doc.lineAt(n),i=n==r.from?n-1:gO(r.text,n-r.from,!1)+r.from,o=n==r.to?n+1:gO(r.text,n-r.from,!0)+r.from;return{changes:{from:i,to:o,insert:t.doc.slice(n,o).append(t.doc.slice(i,n))},range:DO.cursor(o)}}));return!r.changes.empty&&(n(t.update(r,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:GF}].map((e=>({mac:e.key,run:e.run,shift:e.shift})))),Oq=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>PF(e,(t=>BF(e.state,t,!MF(e)))),shift:e=>$F(e,(t=>BF(e.state,t,!MF(e))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>PF(e,(t=>BF(e.state,t,MF(e)))),shift:e=>$F(e,(t=>BF(e.state,t,MF(e))))},{key:"Alt-ArrowUp",run:e=>{let{state:t,dispatch:n}=e;return bq(t,n,!1)}},{key:"Shift-Alt-ArrowUp",run:e=>{let{state:t,dispatch:n}=e;return wq(t,n,!1)}},{key:"Alt-ArrowDown",run:e=>{let{state:t,dispatch:n}=e;return bq(t,n,!0)}},{key:"Shift-Alt-ArrowDown",run:e=>{let{state:t,dispatch:n}=e;return wq(t,n,!0)}},{key:"Escape",run:e=>{let{state:t,dispatch:n}=e,r=t.selection,i=null;return r.ranges.length>1?i=DO.create([r.main]):r.main.empty||(i=DO.create([DO.cursor(r.main.head)])),!!i&&(n(IF(t,i)),!0)}},{key:"Mod-Enter",run:xq},{key:"Alt-l",mac:"Ctrl-l",run:e=>{let{state:t,dispatch:n}=e,r=yq(t).map((e=>{let{from:n,to:r}=e;return DO.range(n,Math.min(r+1,t.doc.length))}));return n(t.update({selection:DO.create(r),userEvent:"select"})),!0}},{key:"Mod-i",run:e=>{let{state:t,dispatch:n}=e,r=NF(t.selection,(e=>{var n;for(let r=RL(t).resolveStack(e.from,1);r;r=r.next){let{node:t}=r;if((t.from<e.from&&t.to>=e.to||t.to>e.to&&t.from<=e.from)&&(null===(n=t.parent)||void 0===n?void 0:n.parent))return DO.range(t.to,t.from)}return e}));return n(IF(t,r)),!0},preventDefault:!0},{key:"Mod-[",run:Cq},{key:"Mod-]",run:Eq},{key:"Mod-Alt-\\",run:e=>{let{state:t,dispatch:n}=e;if(t.readOnly)return!1;let r=Object.create(null),i=new YL(t,{overrideIndentation:e=>{let t=r[e];return null==t?-1:t}}),o=Sq(t,((e,n,o)=>{let s=GL(i,e.from);if(null==s)return;/\S/.test(e.text)||(s=0);let a=/^\s*/.exec(e.text)[0],l=KL(t,s);(a!=l||o.from<e.from+a.length)&&(r[e.from]=s,n.push({from:e.from,to:e.from+a.length,insert:l}))}));return o.changes.empty||n(t.update(o,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(yq(t).map((e=>{let{from:n,to:r}=e;return n>0?n--:r<t.doc.length&&r++,{from:n,to:r}}))),r=NF(t.selection,(t=>e.moveVertically(t,!0))).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:e=>{let{state:t,dispatch:n}=e;return QF(t,n,!1)}},{key:"Mod-/",run:e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.from),r=iF(e.state,n.from);return r.line?tF(e):!!r.block&&rF(e)}},{key:"Alt-A",run:nF}].concat(Tq),Aq={key:"Tab",run:Eq,shift:Cq};function Nq(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];"string"==typeof i?e.setAttribute(r,i):null!=i&&(e[r]=i)}t++}for(;t<arguments.length;t++)Iq(e,arguments[t]);return e}function Iq(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)Iq(e,t[n])}}const Pq="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class Rq{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,r),this.bufferStart=n,this.normalize=i?e=>i(Pq(e)):Pq,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return wO(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=_O(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=xO(e);let r=this.normalize(t);for(let i=0,o=n;;i++){let e=r.charCodeAt(i),s=this.match(e,o);if(i==r.length-1){if(s)return this.value=s,this;break}o==n&&i<t.length&&t.charCodeAt(i)==e&&o++}}}match(e,t){let n=null;for(let r=0;r<this.matches.length;r+=2){let i=this.matches[r],o=!1;this.query.charCodeAt(i)==e&&(i==this.query.length-1?n={from:this.matches[r+1],to:t+1}:(this.matches[r]++,o=!0)),o||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?n={from:t,to:t+1}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}"undefined"!=typeof Symbol&&(Rq.prototype[Symbol.iterator]=function(){return this});const Dq={from:-1,to:-1,match:/.*/.exec("")},Mq="gm"+(null==/x/.unicode?"":"u");class Lq{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length;if(this.text=e,this.to=i,this.curLine="",this.done=!1,this.value=Dq,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new qq(e,t,n,r,i);this.re=new RegExp(t,Mq+((null===n||void 0===n?void 0:n.ignoreCase)?"i":"")),this.test=null===n||void 0===n?void 0:n.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=Bq(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,r=n+t[0].length;if(this.matchPos=Bq(this.text,r+(n==r?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<r||n>this.value.to)&&(!this.test||this.test(n,r,t)))return this.value={from:n,to:r,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const jq=new WeakMap;class Fq{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let r=jq.get(e);if(!r||r.from>=n||r.to<=t){let r=new Fq(t,e.sliceString(t,n));return jq.set(e,r),r}if(r.from==t&&r.to==n)return r;let{text:i,from:o}=r;return o>t&&(i=e.sliceString(t,o)+i,o=t),r.to<n&&(i+=e.sliceString(r.to,n)),jq.set(e,new Fq(o,i)),new Fq(t,i.slice(t-o,n-o))}}class qq{constructor(e,t,n,r,i){this.text=e,this.to=i,this.done=!1,this.value=Dq,this.matchPos=Bq(e,r),this.re=new RegExp(t,Mq+((null===n||void 0===n?void 0:n.ignoreCase)?"i":"")),this.test=null===n||void 0===n?void 0:n.test,this.flat=Fq.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,n=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,n,t)))return this.value={from:e,to:n,match:t},this.matchPos=Bq(this.text,n+(e==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Fq.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function Bq(e,t){if(t>=e.length)return t;let n,r=e.lineAt(t);for(;t<r.to&&(n=r.text.charCodeAt(t-r.from))>=56320&&n<57344;)t++;return t}function Uq(e){let t=Nq("input",{class:"cm-textfield",name:"line",value:String(e.state.doc.lineAt(e.state.selection.main.head).number)});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!n)return;let{state:r}=e,i=r.doc.lineAt(r.selection.main.head),[,o,s,a,l]=n,c=a?+a.slice(1):0,u=s?+s:i.number;if(s&&l){let e=u/100;o&&(e=e*("-"==o?-1:1)+i.number/r.doc.lines),u=Math.round(r.doc.lines*e)}else s&&o&&(u=u*("-"==o?-1:1)+i.number);let h=r.doc.line(Math.max(1,Math.min(r.doc.lines,u))),d=DO.cursor(h.from+Math.max(0,Math.min(c,h.length)));e.dispatch({effects:[Vq.of(!1),UR.scrollIntoView(d.from,{y:"center"})],selection:d}),e.focus()}return{dom:Nq("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:Vq.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),n())},onsubmit:e=>{e.preventDefault(),n()}},Nq("label",e.state.phrase("Go to line"),": ",t)," ",Nq("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}}"undefined"!=typeof Symbol&&(Lq.prototype[Symbol.iterator]=qq.prototype[Symbol.iterator]=function(){return this});const Vq=fA.define(),zq=HO.define({create:()=>!0,update(e,t){for(let n of t.effects)n.is(Vq)&&(e=n.value);return e},provide:e=>rM.from(e,(e=>e?Uq:null))}),Hq=UR.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Wq={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Kq=jO.define({combine:e=>CA(e,Wq,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});const Gq=rI.mark({class:"cm-selectionMatch"}),Yq=rI.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Qq(e,t,n,r){return(0==n||e(t.sliceDoc(n-1,n))!=_A.Word)&&(r==t.doc.length||e(t.sliceDoc(r,r+1))!=_A.Word)}const $q=TI.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(Kq),{state:n}=e,r=n.selection;if(r.ranges.length>1)return rI.none;let i,o=r.main,s=null;if(o.empty){if(!t.highlightWordAroundCursor)return rI.none;let e=n.wordAt(o.head);if(!e)return rI.none;s=n.charCategorizer(o.head),i=n.sliceDoc(e.from,e.to)}else{let e=o.to-o.from;if(e<t.minSelectionLength||e>200)return rI.none;if(t.wholeWords){if(i=n.sliceDoc(o.from,o.to),s=n.charCategorizer(o.head),!Qq(s,n,o.from,o.to)||!function(e,t,n,r){return e(t.sliceDoc(n,n+1))==_A.Word&&e(t.sliceDoc(r-1,r))==_A.Word}(s,n,o.from,o.to))return rI.none}else if(i=n.sliceDoc(o.from,o.to).trim(),!i)return rI.none}let a=[];for(let l of e.visibleRanges){let e=new Rq(n.doc,i,l.from,l.to);for(;!e.next().done;){let{from:r,to:i}=e.value;if((!s||Qq(s,n,r,i))&&(o.empty&&r<=o.from&&i>=o.to?a.push(Yq.range(r,i)):(r>=o.to||i<=o.from)&&a.push(Gq.range(r,i)),a.length>t.maxMatches))return rI.none}}return rI.set(a)}},{decorations:e=>e.decorations}),Xq=UR.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const Jq=jO.define({combine:e=>CA(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new TB(e),scrollToMatch:e=>UR.scrollIntoView(e)})});class Zq{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,Mq),!0}catch(OL){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,((e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"))}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new sB(this):new nB(this)}getCursor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=e.doc?e:EA.create({doc:e});return null==n&&(n=r.doc.length),this.regexp?rB(this,r,t,n):tB(this,r,t,n)}}class eB{constructor(e){this.spec=e}}function tB(e,t,n,r){return new Rq(t.doc,e.unquoted,n,r,e.caseSensitive?void 0:e=>e.toLowerCase(),e.wholeWord?function(e,t){return(n,r,i,o)=>((o>n||o+i.length<r)&&(o=Math.max(0,n-2),i=e.sliceString(o,Math.min(e.length,r+2))),(t(iB(i,n-o))!=_A.Word||t(oB(i,n-o))!=_A.Word)&&(t(oB(i,r-o))!=_A.Word||t(iB(i,r-o))!=_A.Word))}(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}class nB extends eB{constructor(e){super(e)}nextMatch(e,t,n){let r=tB(this.spec,e,n,e.doc.length).nextOverlapping();return r.done&&(r=tB(this.spec,e,0,t).nextOverlapping()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=n;;){let n=Math.max(t,r-1e4-this.spec.unquoted.length),i=tB(this.spec,e,n,r),o=null;for(;!i.nextOverlapping().done;)o=i.value;if(o)return o;if(n==t)return null;r-=1e4}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=tB(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=tB(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}function rB(e,t,n,r){return new Lq(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(i=t.charCategorizer(t.selection.main.head),(e,t,n)=>!n[0].length||(i(iB(n.input,n.index))!=_A.Word||i(oB(n.input,n.index))!=_A.Word)&&(i(oB(n.input,n.index+n[0].length))!=_A.Word||i(iB(n.input,n.index+n[0].length))!=_A.Word)):void 0},n,r);var i}function iB(e,t){return e.slice(gO(e,t,!1),t)}function oB(e,t){return e.slice(t,gO(e,t))}class sB extends eB{nextMatch(e,t,n){let r=rB(this.spec,e,n,e.doc.length).next();return r.done&&(r=rB(this.spec,e,0,t).next()),r.done?null:r.value}prevMatchInRange(e,t,n){for(let r=1;;r++){let i=Math.max(t,n-1e4*r),o=rB(this.spec,e,i,n),s=null;for(;!o.next().done;)s=o.value;if(s&&(i==t||s.from>i+10))return s;if(i==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,((t,n)=>"$"==n?"$":"&"==n?e.match[0]:"0"!=n&&+n<e.match.length?e.match[n]:t))}matchAll(e,t){let n=rB(this.spec,e,0,e.doc.length),r=[];for(;!n.next().done;){if(r.length>=t)return null;r.push(n.value)}return r}highlight(e,t,n,r){let i=rB(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!i.next().done;)r(i.value.from,i.value.to)}}const aB=fA.define(),lB=fA.define(),cB=HO.define({create:e=>new uB(_B(e).create(),null),update(e,t){for(let n of t.effects)n.is(aB)?e=new uB(n.value.create(),e.panel):n.is(lB)&&(e=new uB(e.query,n.value?wB:null));return e},provide:e=>rM.from(e,(e=>e.panel))});class uB{constructor(e,t){this.query=e,this.panel=t}}const hB=rI.mark({class:"cm-searchMatch"}),dB=rI.mark({class:"cm-searchMatch cm-searchMatch-selected"}),fB=TI.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(cB))}update(e){let t=e.state.field(cB);(t!=e.startState.field(cB)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight(e){let{query:t,panel:n}=e;if(!n||!t.spec.valid)return rI.none;let{view:r}=this,i=new PA;for(let o=0,s=r.visibleRanges,a=s.length;o<a;o++){let{from:e,to:n}=s[o];for(;o<a-1&&n>s[o+1].from-500;)n=s[++o].to;t.highlight(r.state,e,n,((e,t)=>{let n=r.state.selection.ranges.some((n=>n.from==e&&n.to==t));i.add(e,t,n?dB:hB)}))}return i.finish()}},{decorations:e=>e.decorations});function pB(e){return t=>{let n=t.state.field(cB,!1);return n&&n.query.spec.valid?e(t,n):SB(t)}}const gB=pB(((e,t)=>{let{query:n}=t,{to:r}=e.state.selection.main,i=n.nextMatch(e.state,r,r);if(!i)return!1;let o=DO.single(i.from,i.to),s=e.state.facet(Jq);return e.dispatch({selection:o,effects:[IB(e,i),s.scrollToMatch(o.main,e)],userEvent:"select.search"}),kB(e),!0})),mB=pB(((e,t)=>{let{query:n}=t,{state:r}=e,{from:i}=r.selection.main,o=n.prevMatch(r,i,i);if(!o)return!1;let s=DO.single(o.from,o.to),a=e.state.facet(Jq);return e.dispatch({selection:s,effects:[IB(e,o),a.scrollToMatch(s.main,e)],userEvent:"select.search"}),kB(e),!0})),vB=pB(((e,t)=>{let{query:n}=t,r=n.matchAll(e.state,1e3);return!(!r||!r.length)&&(e.dispatch({selection:DO.create(r.map((e=>DO.range(e.from,e.to)))),userEvent:"select.search.matches"}),!0)})),yB=pB(((e,t)=>{let{query:n}=t,{state:r}=e,{from:i,to:o}=r.selection.main;if(r.readOnly)return!1;let s=n.nextMatch(r,i,i);if(!s)return!1;let a,l,c=[],u=[];if(s.from==i&&s.to==o&&(l=r.toText(n.getReplacement(s)),c.push({from:s.from,to:s.to,insert:l}),s=n.nextMatch(r,s.from,s.to),u.push(UR.announce.of(r.phrase("replaced match on line $",r.doc.lineAt(i).number)+"."))),s){let t=0==c.length||c[0].from>=s.to?0:s.to-s.from-l.length;a=DO.single(s.from-t,s.to-t),u.push(IB(e,s)),u.push(r.facet(Jq).scrollToMatch(a.main,e))}return e.dispatch({changes:c,selection:a,effects:u,userEvent:"input.replace"}),!0})),bB=pB(((e,t)=>{let{query:n}=t;if(e.state.readOnly)return!1;let r=n.matchAll(e.state,1e9).map((e=>{let{from:t,to:r}=e;return{from:t,to:r,insert:n.getReplacement(e)}}));if(!r.length)return!1;let i=e.state.phrase("replaced $ matches",r.length)+".";return e.dispatch({changes:r,effects:UR.announce.of(i),userEvent:"input.replace.all"}),!0}));function wB(e){return e.state.facet(Jq).createPanel(e)}function _B(e,t){var n,r,i,o,s;let a=e.selection.main,l=a.empty||a.to>a.from+100?"":e.sliceDoc(a.from,a.to);if(t&&!l)return t;let c=e.facet(Jq);return new Zq({search:(null!==(n=null===t||void 0===t?void 0:t.literal)&&void 0!==n?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(r=null===t||void 0===t?void 0:t.caseSensitive)&&void 0!==r?r:c.caseSensitive,literal:null!==(i=null===t||void 0===t?void 0:t.literal)&&void 0!==i?i:c.literal,regexp:null!==(o=null===t||void 0===t?void 0:t.regexp)&&void 0!==o?o:c.regexp,wholeWord:null!==(s=null===t||void 0===t?void 0:t.wholeWord)&&void 0!==s?s:c.wholeWord})}function xB(e){let t=ZD(e,wB);return t&&t.dom.querySelector("[main-field]")}function kB(e){let t=xB(e);t&&t==e.root.activeElement&&t.select()}const SB=e=>{let t=e.state.field(cB,!1);if(t&&t.panel){let n=xB(e);if(n&&n!=e.root.activeElement){let r=_B(e.state,t.query.spec);r.valid&&e.dispatch({effects:aB.of(r)}),n.focus(),n.select()}}else e.dispatch({effects:[lB.of(!0),t?aB.of(_B(e.state,t.query.spec)):fA.appendConfig.of(RB)]});return!0},EB=e=>{let t=e.state.field(cB,!1);if(!t||!t.panel)return!1;let n=ZD(e,wB);return n&&n.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:lB.of(!1)}),!0},CB=[{key:"Mod-f",run:SB,scope:"editor search-panel"},{key:"F3",run:gB,shift:mB,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:gB,shift:mB,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:EB,scope:"editor search-panel"},{key:"Mod-Shift-l",run:e=>{let{state:t,dispatch:n}=e,r=t.selection;if(r.ranges.length>1||r.main.empty)return!1;let{from:i,to:o}=r.main,s=[],a=0;for(let l=new Rq(t.doc,t.sliceDoc(i,o));!l.next().done;){if(s.length>1e3)return!1;l.value.from==i&&(a=s.length),s.push(DO.range(l.value.from,l.value.to))}return n(t.update({selection:DO.create(s,a),userEvent:"select.search.matches"})),!0}},{key:"Mod-Alt-g",run:e=>{let t=ZD(e,Uq);if(!t){let n=[Vq.of(!0)];null==e.state.field(zq,!1)&&n.push(fA.appendConfig.of([zq,Hq])),e.dispatch({effects:n}),t=ZD(e,Uq)}return t&&t.dom.querySelector("input").select(),!0}},{key:"Mod-d",run:e=>{let{state:t,dispatch:n}=e,{ranges:r}=t.selection;if(r.some((e=>e.from===e.to)))return(e=>{let{state:t,dispatch:n}=e,{selection:r}=t,i=DO.create(r.ranges.map((e=>t.wordAt(e.head)||DO.cursor(e.head))),r.mainIndex);return!i.eq(r)&&(n(t.update({selection:i})),!0)})({state:t,dispatch:n});let i=t.sliceDoc(r[0].from,r[0].to);if(t.selection.ranges.some((e=>t.sliceDoc(e.from,e.to)!=i)))return!1;let o=function(e,t){let{main:n,ranges:r}=e.selection,i=e.wordAt(n.head),o=i&&i.from==n.from&&i.to==n.to;for(let s=!1,a=new Rq(e.doc,t,r[r.length-1].to);;){if(a.next(),!a.done){if(s&&r.some((e=>e.from==a.value.from)))continue;if(o){let t=e.wordAt(a.value.from);if(!t||t.from!=a.value.from||t.to!=a.value.to)continue}return a.value}if(s)return null;a=new Rq(e.doc,t,0,Math.max(0,r[r.length-1].from-1)),s=!0}}(t,i);return!!o&&(n(t.update({selection:t.selection.addRange(DO.range(o.from,o.to),!1),effects:UR.scrollIntoView(o.to)})),!0)},preventDefault:!0}];class TB{constructor(e){this.view=e;let t=this.query=e.state.field(cB).query.spec;function n(e,t,n){return Nq("button",{class:"cm-button",name:e,onclick:t,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=Nq("input",{value:t.search,placeholder:OB(e,"Find"),"aria-label":OB(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Nq("input",{value:t.replace,placeholder:OB(e,"Replace"),"aria-label":OB(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Nq("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Nq("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Nq("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=Nq("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,n("next",(()=>gB(e)),[OB(e,"next")]),n("prev",(()=>mB(e)),[OB(e,"previous")]),n("select",(()=>vB(e)),[OB(e,"all")]),Nq("label",null,[this.caseField,OB(e,"match case")]),Nq("label",null,[this.reField,OB(e,"regexp")]),Nq("label",null,[this.wordField,OB(e,"by word")]),...e.state.readOnly?[]:[Nq("br"),this.replaceField,n("replace",(()=>yB(e)),[OB(e,"replace")]),n("replaceAll",(()=>bB(e)),[OB(e,"replace all")])],Nq("button",{name:"close",onclick:()=>EB(e),"aria-label":OB(e,"close"),type:"button"},["\xd7"])])}commit(){let e=new Zq({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:aB.of(e)}))}keydown(e){var t,n,r;t=this.view,n=e,r="search-panel",ZR($R(t.state),n,t,r)?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?mB:gB)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),yB(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(aB)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Jq).top}}function OB(e,t){return e.state.phrase(t)}const AB=30,NB=/[\s\.,:;?!]/;function IB(e,t){let{from:n,to:r}=t,i=e.state.doc.lineAt(n),o=e.state.doc.lineAt(r).to,s=Math.max(i.from,n-AB),a=Math.min(o,r+AB),l=e.state.sliceDoc(s,a);if(s!=i.from)for(let c=0;c<AB;c++)if(!NB.test(l[c+1])&&NB.test(l[c])){l=l.slice(c);break}if(a!=o)for(let c=l.length-1;c>l.length-AB;c--)if(!NB.test(l[c-1])&&NB.test(l[c])){l=l.slice(0,c);break}return UR.announce.of("".concat(e.state.phrase("current match"),". ").concat(l," ").concat(e.state.phrase("on line")," ").concat(i.number,"."))}const PB=UR.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),RB=[cB,$O.low(fB),PB];class DB{constructor(e,t,n){this.state=e,this.pos=t,this.explicit=n,this.abortListeners=[]}tokenBefore(e){let t=RL(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),i=r.search(qB(e,!1));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){"abort"==e&&this.abortListeners&&this.abortListeners.push(t)}}function MB(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(/[^\w\s]/g,"\\$&"),"]")}function LB(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[n,r]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),n=Object.create(null);for(let{label:i}of e){t[i[0]]=!0;for(let e=1;e<i.length;e++)n[i[e]]=!0}let r=MB(t)+MB(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}(t);return e=>{let i=e.matchBefore(r);return i||e.explicit?{from:i?i.from:e.pos,options:t,validFor:n}:null}}class jB{constructor(e,t,n,r){this.completion=e,this.source=t,this.match=n,this.score=r}}function FB(e){return e.selection.main.from}function qB(e,t){var n;let{source:r}=e,i=t&&"^"!=r[0],o="$"!=r[r.length-1];return i||o?new RegExp("".concat(i?"^":"","(?:").concat(r,")").concat(o?"$":""),null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}const BB=uA.define();const UB=new WeakMap;function VB(e){if(!Array.isArray(e))return e;let t=UB.get(e);return t||UB.set(e,t=LB(e)),t}const zB=fA.define(),HB=fA.define();class WB{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=wO(e,t),r=xO(n);this.chars.push(n);let i=e.slice(t,t+r),o=i.toUpperCase();this.folded.push(wO(o==i?i.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,!0}match(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return!1;let{chars:t,folded:n,any:r,precise:i,byWord:o}=this;if(1==t.length){let r=wO(e,0),i=xO(r),o=i==e.length?0:-100;if(r==t[0]);else{if(r!=n[0])return!1;o+=-200}return this.ret(o,[0,i])}let s=e.indexOf(this.pattern);if(0==s)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,l=0;if(s<0){for(let i=0,o=Math.min(e.length,200);i<o&&l<a;){let o=wO(e,i);o!=t[l]&&o!=n[l]||(r[l++]=i),i+=xO(o)}if(l<a)return!1}let c=0,u=0,h=!1,d=0,f=-1,p=-1,g=/[a-z]/.test(e),m=!0;for(let v=0,y=Math.min(e.length,200),b=0;v<y&&u<a;){let r=wO(e,v);s<0&&(c<a&&r==t[c]&&(i[c++]=v),d<a&&(r==t[d]||r==n[d]?(0==d&&(f=v),p=v+1,d++):d=0));let l,y=r<255?r>=48&&r<=57||r>=97&&r<=122?2:r>=65&&r<=90?1:0:(l=_O(r))!=l.toLowerCase()?1:l!=l.toUpperCase()?2:0;(!v||1==y&&g||0==b&&0!=y)&&(t[u]==r||n[u]==r&&(h=!0)?o[u++]=v:o.length&&(m=!1)),b=y,v+=xO(r)}return u==a&&0==o[0]&&m?this.result((h?-200:0)-100,o,e):d==a&&0==f?this.ret(-200-e.length+(p==e.length?0:-100),[0,p]):s>-1?this.ret(-700-e.length,[s,s+this.pattern.length]):d==a?this.ret(-900-e.length,[f,p]):u==a?this.result((h?-200:0)-100-700+(m?0:-1100),o,e):2!=t.length&&this.result((r[0]?-700:0)-200-1100,r,e)}result(e,t,n){let r=[],i=0;for(let o of t){let e=o+(this.astral?xO(wO(n,o)):1);i&&r[i-1]==o?r[i-1]=e:(r[i++]=o,r[i++]=e)}return this.ret(e-n.length,r)}}const KB=jO.define({combine:e=>CA(e,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:YB,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>GB(e(n),t(n)),optionClass:(e,t)=>n=>GB(e(n),t(n)),addToOptions:(e,t)=>e.concat(t)})});function GB(e,t){return e?t?e+" "+t:e:t}function YB(e,t,n,r,i,o){let s,a,l=e.textDirection==BI.RTL,c=l,u=!1,h="top",d=t.left-i.left,f=i.right-t.right,p=r.right-r.left,g=r.bottom-r.top;if(c&&d<Math.min(p,f)?c=!1:!c&&f<Math.min(p,d)&&(c=!0),p<=(c?d:f))s=Math.max(i.top,Math.min(n.top,i.bottom-g))-t.top,a=Math.min(400,c?d:f);else{u=!0,a=Math.min(400,(l?t.right:i.right-t.left)-30);let e=i.bottom-t.bottom;e>=g||e>t.top?s=n.bottom-t.top:(h="bottom",s=t.bottom-n.top)}let m=(t.bottom-t.top)/o.offsetHeight,v=(t.right-t.left)/o.offsetWidth;return{style:"".concat(h,": ").concat(s/m,"px; max-width: ").concat(a/v,"px"),class:"cm-completionInfo-"+(u?l?"left-narrow":"right-narrow":c?"left":"right")}}function QB(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}class $B{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:i,selected:o}=r.open,s=e.state.facet(KB);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,n,r){let i=document.createElement("span");i.className="cm-completionLabel";let o=e.displayLabel||e.label,s=0;for(let a=0;a<r.length;){let e=r[a++],t=r[a++];e>s&&i.appendChild(document.createTextNode(o.slice(s,e)));let n=i.appendChild(document.createElement("span"));n.appendChild(document.createTextNode(o.slice(e,t))),n.className="cm-completionMatchedText",s=t}return s<o.length&&i.appendChild(document.createTextNode(o.slice(s))),i},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=QB(i.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",(n=>{let{options:r}=e.state.field(t).open;for(let t,i=n.target;i&&i!=this.dom;i=i.parentNode)if("LI"==i.nodeName&&(t=/-(\d+)$/.exec(i.id))&&+t[1]<r.length)return this.applyCompletion(e,r[+t[1]]),void n.preventDefault()})),this.dom.addEventListener("focusout",(t=>{let n=e.state.field(this.stateField,!1);n&&n.tooltip&&e.state.facet(KB).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:HB.of(null)})})),this.showOptions(i,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))}update(e){var t;let n=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=r){let{options:i,selected:o,disabled:s}=n.open;r.open&&r.open.options==i||(this.range=QB(i.length,o,e.state.facet(KB).maxRenderedOptions),this.showOptions(i,n.id)),this.updateSel(),s!=(null===(t=r.open)||void 0===t?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=QB(t.options.length,t.selected,this.view.state.facet(KB).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let i="string"===typeof r?document.createTextNode(r):r(n);if(!i)return;"then"in i?i.then((t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t,n)})).catch((e=>kI(this.view.state,e,"completion info"))):this.addInfoPane(i,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",null!=e.nodeType)n.appendChild(e),this.infoDestroy=null;else{let{dom:t,destroy:r}=e;n.appendChild(t),this.infoDestroy=r||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)"LI"==n.nodeName&&n.id?r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected"):r--;return t&&function(e,t){let n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=n.height/e.offsetHeight;r.top<n.top?e.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(e.scrollTop+=(r.bottom-n.bottom)/i)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),i=this.space;if(!i){let e=this.dom.ownerDocument.defaultView||window;i={left:0,top:0,right:e.innerWidth,bottom:e.innerHeight}}return r.top>Math.min(i.bottom,t.bottom)-10||r.bottom<Math.max(i.top,t.top)+10?null:this.view.state.facet(KB).positionInfo(this.view,t,r,n,i,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let i=null;for(let o=n.from;o<n.to;o++){let{completion:s,match:a}=e[o],{section:l}=s;if(l){let e="string"==typeof l?l:l.name;if(e!=i&&(o>n.from||0==n.from))if(i=e,"string"!=typeof l&&l.header)r.appendChild(l.header(l));else{r.appendChild(document.createElement("completion-section")).textContent=e}}const c=r.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let u=this.optionClass(s);u&&(c.className=u);for(let e of this.optionContent){let t=e(s,this.view.state,this.view,a);t&&c.appendChild(t)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function XB(e,t){return n=>new $B(n,e,t)}function JB(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class ZB{constructor(e,t,n,r,i,o){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=i,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new ZB(this.options,nU(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,r,i){let o=function(e,t){let n=[],r=null,i=e=>{n.push(e);let{section:t}=e.completion;if(t){r||(r=[]);let e="string"==typeof t?t:t.name;r.some((t=>t.name==e))||r.push("string"==typeof t?{name:e}:t)}};for(let l of e)if(l.hasResult()){let e=l.result.getMatch;if(!1===l.result.filter)for(let t of l.result.options)i(new jB(t,l.source,e?e(t):[],1e9-n.length));else{let n=new WB(t.sliceDoc(l.from,l.to));for(let t of l.result.options)if(n.match(t.label)){let r=t.displayLabel?e?e(t,n.matched):[]:n.matched;i(new jB(t,l.source,r,n.score+(t.boost||0)))}}}if(r){let e=Object.create(null),t=0,i=(e,t)=>{var n,r;return(null!==(n=e.rank)&&void 0!==n?n:1e9)-(null!==(r=t.rank)&&void 0!==r?r:1e9)||(e.name<t.name?-1:1)};for(let n of r.sort(i))t-=1e5,e[n.name]=t;for(let r of n){let{section:t}=r.completion;t&&(r.score+=e["string"==typeof t?t:t.name])}}let o=[],s=null,a=t.facet(KB).compareCompletions;for(let l of n.sort(((e,t)=>t.score-e.score||a(e.completion,t.completion)))){let e=l.completion;!s||s.label!=e.label||s.detail!=e.detail||null!=s.type&&null!=e.type&&s.type!=e.type||s.apply!=e.apply||s.boost!=e.boost?o.push(l):JB(l.completion)>JB(s)&&(o[o.length-1]=l),s=l.completion}return o}(e,t);if(!o.length)return r&&e.some((e=>1==e.state))?new ZB(r.options,r.attrs,r.tooltip,r.timestamp,r.selected,!0):null;let s=t.facet(KB).selectOnOpen?0:-1;if(r&&r.selected!=s&&-1!=r.selected){let e=r.options[r.selected].completion;for(let t=0;t<o.length;t++)if(o[t].completion==e){s=t;break}}return new ZB(o,nU(n,s),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:hU,above:i.aboveCursor},r?r.timestamp:Date.now(),s,!1)}map(e){return new ZB(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class eU{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new eU(rU,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(KB),r=(n.override||t.languageDataAt("autocomplete",FB(t)).map(VB)).map((t=>{let r=this.active.find((e=>e.source==t))||new oU(t,this.active.some((e=>0!=e.state))?1:0);return r.update(e,n)}));r.length==this.active.length&&r.every(((e,t)=>e==this.active[t]))&&(r=this.active);let i=this.open;i&&e.docChanged&&(i=i.map(e.changes)),e.selection||r.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let n=0,r=0;;){for(;n<e.length&&!e[n].hasResult;)n++;for(;r<t.length&&!t[r].hasResult;)r++;let i=n==e.length,o=r==t.length;if(i||o)return i==o;if(e[n++].result!=t[r++].result)return!1}}(r,this.active)?i=ZB.build(r,t,this.id,i,n):i&&i.disabled&&!r.some((e=>1==e.state))&&(i=null),!i&&r.every((e=>1!=e.state))&&r.some((e=>e.hasResult()))&&(r=r.map((e=>e.hasResult()?new oU(e.source,0):e)));for(let o of e.effects)o.is(lU)&&(i=i&&i.setSelected(o.value,this.id));return r==this.active&&i==this.open?this:new eU(r,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:tU}}const tU={"aria-autocomplete":"list"};function nU(e,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}const rU=[];function iU(e){return e.isUserEvent("input.type")?"input":e.isUserEvent("delete.backward")?"delete":null}class oU{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this.source=e,this.state=t,this.explicitPos=n}hasResult(){return!1}update(e,t){let n=iU(e),r=this;n?r=r.handleUserEvent(e,n,t):e.docChanged?r=r.handleChange(e):e.selection&&0!=r.state&&(r=new oU(r.source,0));for(let i of e.effects)if(i.is(zB))r=new oU(r.source,1,i.value?FB(e.state):-1);else if(i.is(HB))r=new oU(r.source,0);else if(i.is(aU))for(let e of i.value)e.source==r.source&&(r=e);return r}handleUserEvent(e,t,n){return"delete"!=t&&n.activateOnTyping?new oU(this.source,1):this.map(e.changes)}handleChange(e){return e.changes.touchesRange(FB(e.startState))?new oU(this.source,0):this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new oU(this.source,this.state,e.mapPos(this.explicitPos))}}class sU extends oU{constructor(e,t,n,r,i){super(e,2,t),this.result=n,this.from=r,this.to=i}hasResult(){return!0}handleUserEvent(e,t,n){var r;let i=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),s=FB(e.state);if((this.explicitPos<0?s<=i:s<this.from)||s>o||"delete"==t&&FB(e.startState)==this.from)return new oU(this.source,"input"==t&&n.activateOnTyping?1:0);let a,l=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return function(e,t,n,r){if(!e)return!1;let i=t.sliceDoc(n,r);return"function"==typeof e?e(i,n,r,t):qB(e,!0).test(i)}(this.result.validFor,e.state,i,o)?new sU(this.source,l,this.result,i,o):this.result.update&&(a=this.result.update(this.result,i,o,new DB(e.state,s,l>=0)))?new sU(this.source,l,a,a.from,null!==(r=a.to)&&void 0!==r?r:FB(e.state)):new oU(this.source,1,l)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new oU(this.source,0):this.map(e.changes)}map(e){return e.empty?this:new sU(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1))}}const aU=fA.define({map:(e,t)=>e.map((e=>e.map(t)))}),lU=fA.define(),cU=HO.define({create:()=>eU.start(),update:(e,t)=>e.update(t),provide:e=>[zD.from(e,(e=>e.tooltip)),UR.contentAttributes.from(e,(e=>e.attrs))]});function uU(e,t){const n=t.completion.apply||t.completion.label;let r=e.state.field(cU).active.find((e=>e.source==t.source));return r instanceof sU&&("string"==typeof n?e.dispatch(Object.assign(Object.assign({},function(e,t,n,r){let{main:i}=e.selection,o=n-i.from,s=r-i.from;return Object.assign(Object.assign({},e.changeByRange((a=>a!=i&&n!=r&&e.sliceDoc(a.from+o,a.from+s)!=e.sliceDoc(n,r)?{range:a}:{changes:{from:a.from+o,to:r==i.from?a.to:a.from+s,insert:t},range:DO.cursor(a.from+o+t.length)}))),{scrollIntoView:!0,userEvent:"input.complete"})}(e.state,n,r.from,r.to)),{annotations:BB.of(t.completion)})):n(e,t.completion,r.from,r.to),!0)}const hU=XB(cU,uU);function dU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"option";return n=>{let r=n.state.field(cU,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(KB).interactionDelay)return!1;let i,o=1;"page"==t&&(i=$D(n,r.open.tooltip))&&(o=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,a=r.open.selected>-1?r.open.selected+o*(e?1:-1):e?0:s-1;return a<0?a="page"==t?0:s-1:a>=s&&(a="page"==t?s-1:0),n.dispatch({effects:lU.of(a)}),!0}}class fU{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const pU=TI.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(cU).active)1==t.state&&this.startQuery(t)}update(e){let t=e.state.field(cU);if(!e.selectionSet&&!e.docChanged&&e.startState.field(cU)==t)return;let n=e.transactions.some((e=>(e.selection||e.docChanged)&&!iU(e)));for(let r=0;r<this.running.length;r++){let t=this.running[r];if(n||t.updates.length+e.transactions.length>50&&Date.now()-t.time>1e3){for(let e of t.context.abortListeners)try{e()}catch(GV){kI(this.view.state,GV)}t.context.abortListeners=null,this.running.splice(r--,1)}else t.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some((e=>1==e.state&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let r of e.transactions)"input"==iU(r)?this.composing=2:2==this.composing&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(cU);for(let n of t.active)1!=n.state||this.running.some((e=>e.active.source==n.source))||this.startQuery(n)}startQuery(e){let{state:t}=this.view,n=FB(t),r=new DB(t,n,e.explicitPos==n),i=new fU(e,r);this.running.push(i),Promise.resolve(e.source(r)).then((e=>{i.context.aborted||(i.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:HB.of(null)}),kI(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),this.view.state.facet(KB).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(KB);for(let r=0;r<this.running.length;r++){let i=this.running[r];if(void 0===i.done)continue;if(this.running.splice(r--,1),i.done){let r=new sU(i.active.source,i.active.explicitPos,i.done,i.done.from,null!==(e=i.done.to)&&void 0!==e?e:FB(i.updates.length?i.updates[0].startState:this.view.state));for(let e of i.updates)r=r.update(e,n);if(r.hasResult()){t.push(r);continue}}let o=this.view.state.field(cU).active.find((e=>e.source==i.active.source));if(o&&1==o.state)if(null==i.done){let e=new oU(i.active.source,0);for(let t of i.updates)e=e.update(t,n);1!=e.state&&t.push(e)}else this.startQuery(o)}t.length&&this.view.dispatch({effects:aU.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(cU,!1);if(t&&t.tooltip&&this.view.state.facet(KB).closeOnBlur){let n=t.open&&$D(this.view,t.open.tooltip);n&&n.dom.contains(e.relatedTarget)||this.view.dispatch({effects:HB.of(null)})}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:zB.of(!1)})),20),this.composing=0}}}),gU=UR.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"".concat(400,"px"),boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"".concat(30,"px")},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"".concat(30,"px")},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25cb'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25cc'"}},".cm-completionIcon-variable":{"&:after":{content:"'\ud835\udc65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\ud835\udc36'"}},".cm-completionIcon-type":{"&:after":{content:"'\ud835\udc61'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222a'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25a1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\ud83d\udd11\ufe0e'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25a2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});const mU={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},vU=fA.define({map(e,t){let n=t.mapPos(e,-1,SO.TrackAfter);return null==n?void 0:n}}),yU=new class extends TA{};yU.startSide=1,yU.endSide=-1;const bU=HO.define({create:()=>IA.empty,update(e,t){if(e=e.map(t.changes),t.selection){let n=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:e=>e>=n.from&&e<=n.to})}for(let n of t.effects)n.is(vU)&&(e=e.update({add:[yU.range(n.value,n.value+1)]}));return e}});const wU="()[]{}<>";function _U(e){for(let t=0;t<wU.length;t+=2)if(wU.charCodeAt(t)==e)return wU.charAt(t+1);return _O(e<128?e:e+1)}function xU(e,t){return e.languageDataAt("closeBrackets",t)[0]||mU}const kU="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),SU=UR.inputHandler.of(((e,t,n,r)=>{if((kU?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let i=e.state.selection.main;if(r.length>2||2==r.length&&1==xO(wO(r,0))||t!=i.from||n!=i.to)return!1;let o=function(e,t){let n=xU(e,e.selection.main.head),r=n.brackets||mU.brackets;for(let i of r){let o=_U(wO(i,0));if(t==i)return o==i?NU(e,i,r.indexOf(i+i+i)>-1,n):OU(e,i,o,n.before||mU.before);if(t==o&&CU(e,e.selection.main.from))return AU(e,i,o)}return null}(e.state,r);return!!o&&(e.dispatch(o),!0)})),EU=[{key:"Backspace",run:e=>{let{state:t,dispatch:n}=e;if(t.readOnly)return!1;let r=xU(t,t.selection.main.head).brackets||mU.brackets,i=null,o=t.changeByRange((e=>{if(e.empty){let n=function(e,t){let n=e.sliceString(t-2,t);return xO(wO(n,0))==n.length?n:n.slice(1)}(t.doc,e.head);for(let i of r)if(i==n&&TU(t.doc,e.head)==_U(wO(i,0)))return{changes:{from:e.head-i.length,to:e.head+i.length},range:DO.cursor(e.head-i.length)}}return{range:i=e}}));return i||n(t.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!i}}];function CU(e,t){let n=!1;return e.field(bU).between(0,e.doc.length,(e=>{e==t&&(n=!0)})),n}function TU(e,t){let n=e.sliceString(t,t+2);return n.slice(0,xO(wO(n,0)))}function OU(e,t,n,r){let i=null,o=e.changeByRange((o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:vU.of(o.to+t.length),range:DO.range(o.anchor+t.length,o.head+t.length)};let s=TU(e.doc,o.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:t+n,from:o.head},effects:vU.of(o.head+t.length),range:DO.cursor(o.head+t.length)}:{range:i=o}}));return i?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function AU(e,t,n){let r=null,i=e.changeByRange((t=>t.empty&&TU(e.doc,t.head)==n?{changes:{from:t.head,to:t.head+n.length,insert:n},range:DO.cursor(t.head+n.length)}:r={range:t}));return r?null:e.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function NU(e,t,n,r){let i=r.stringPrefixes||mU.stringPrefixes,o=null,s=e.changeByRange((r=>{if(!r.empty)return{changes:[{insert:t,from:r.from},{insert:t,from:r.to}],effects:vU.of(r.to+t.length),range:DO.range(r.anchor+t.length,r.head+t.length)};let s,a=r.head,l=TU(e.doc,a);if(l==t){if(IU(e,a))return{changes:{insert:t+t,from:a},effects:vU.of(a+t.length),range:DO.cursor(a+t.length)};if(CU(e,a)){let r=n&&e.sliceDoc(a,a+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:a,to:a+r.length,insert:r},range:DO.cursor(a+r.length)}}}else{if(n&&e.sliceDoc(a-2*t.length,a)==t+t&&(s=PU(e,a-2*t.length,i))>-1&&IU(e,s))return{changes:{insert:t+t+t+t,from:a},effects:vU.of(a+t.length),range:DO.cursor(a+t.length)};if(e.charCategorizer(a)(l)!=_A.Word&&PU(e,a,i)>-1&&!function(e,t,n,r){let i=RL(e).resolveInner(t,-1),o=r.reduce(((e,t)=>Math.max(e,t.length)),0);for(let s=0;s<5;s++){let s=e.sliceDoc(i.from,Math.min(i.to,i.from+n.length+o)),a=s.indexOf(n);if(!a||a>-1&&r.indexOf(s.slice(0,a))>-1){let t=i.firstChild;for(;t&&t.from==i.from&&t.to-t.from>n.length+a;){if(e.sliceDoc(t.to-n.length,t.to)==n)return!1;t=t.firstChild}return!0}let l=i.to==t&&i.parent;if(!l)break;i=l}return!1}(e,a,t,i))return{changes:{insert:t+t,from:a},effects:vU.of(a+t.length),range:DO.cursor(a+t.length)}}return{range:o=r}}));return o?null:e.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function IU(e,t){let n=RL(e).resolveInner(t+1);return n.parent&&n.from==t}function PU(e,t,n){let r=e.charCategorizer(t);if(r(e.sliceDoc(t-1,t))!=_A.Word)return t;for(let i of n){let n=t-i.length;if(e.sliceDoc(n,t)==i&&r(e.sliceDoc(n-1,n))!=_A.Word)return n}return-1}const RU=[{key:"Ctrl-Space",run:e=>!!e.state.field(cU,!1)&&(e.dispatch({effects:zB.of(!0)}),!0)},{key:"Escape",run:e=>{let t=e.state.field(cU,!1);return!(!t||!t.active.some((e=>0!=e.state)))&&(e.dispatch({effects:HB.of(null)}),!0)}},{key:"ArrowDown",run:dU(!0)},{key:"ArrowUp",run:dU(!1)},{key:"PageDown",run:dU(!0,"page")},{key:"PageUp",run:dU(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(cU,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(KB).interactionDelay)&&uU(e,t.open.options[t.open.selected])}}],DU=$O.highest(YR.computeN([KB],(e=>e.facet(KB).defaultKeymap?[RU]:[])));class MU{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class LU{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let r=e,i=n.facet(QU).markerFilter;i&&(r=i(r));let o=rI.set(r.map((e=>e.from==e.to||e.from==e.to-1&&n.doc.lineAt(e.from).to==e.from?rI.widget({widget:new JU(e),diagnostic:e}).range(e.from):rI.mark({attributes:{class:"cm-lintRange cm-lintRange-"+e.severity+(e.markClass?" "+e.markClass:"")},diagnostic:e}).range(e.from,e.to))),!0);return new LU(o,t,jU(o))}}function jU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=null;return e.between(n,1e9,((e,n,i)=>{let{spec:o}=i;if(!t||o.diagnostic==t)return r=new MU(e,n,o.diagnostic),!1})),r}function FU(e,t){let n=e.startState.doc.lineAt(t.pos);return!(!e.effects.some((e=>e.is(BU)))&&!e.changes.touchesRange(n.from,n.to))}function qU(e,t){return e.field(zU,!1)?t:t.concat(fA.appendConfig.of(iV))}const BU=fA.define(),UU=fA.define(),VU=fA.define(),zU=HO.define({create:()=>new LU(rI.none,null,null),update(e,t){if(t.docChanged){let n=e.diagnostics.map(t.changes),r=null;if(e.selected){let i=t.changes.mapPos(e.selected.from,1);r=jU(n,e.selected.diagnostic,i)||jU(n,null,i)}e=new LU(n,e.panel,r)}for(let n of t.effects)n.is(BU)?e=LU.init(n.value,e.panel,t.state):n.is(UU)?e=new LU(e.diagnostics,n.value?eV.open:null,e.selected):n.is(VU)&&(e=new LU(e.diagnostics,e.panel,n.value));return e},provide:e=>[rM.from(e,(e=>e.panel)),UR.decorations.from(e,(e=>e.diagnostics))]});const HU=rI.mark({class:"cm-lintRange cm-lintRange-active"});function WU(e,t,n){let{diagnostics:r}=e.state.field(zU),i=[],o=2e8,s=0;r.between(t-(n<0?1:0),t+(n>0?1:0),((e,r,a)=>{let{spec:l}=a;t>=e&&t<=r&&(e==r||(t>e||n>0)&&(t<r||n<0))&&(i.push(l.diagnostic),o=Math.min(e,o),s=Math.max(r,s))}));let a=e.state.facet(QU).tooltipFilter;return a&&(i=a(i)),i.length?{pos:o,end:s,above:e.state.doc.lineAt(o).to<s,create:()=>({dom:KU(e,i)})}:null}function KU(e,t){return Nq("ul",{class:"cm-tooltip-lint"},t.map((t=>XU(e,t,!1))))}const GU=e=>{let t=e.state.field(zU,!1);return!(!t||!t.panel)&&(e.dispatch({effects:UU.of(!1)}),!0)},YU=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(zU,!1);t&&t.panel||e.dispatch({effects:qU(e.state,[UU.of(!0)])});let n=ZD(e,eV.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:e=>{let t=e.state.field(zU,!1);if(!t)return!1;let n=e.state.selection.main,r=t.diagnostics.iter(n.to+1);return!(!r.value&&(r=t.diagnostics.iter(0),!r.value||r.from==n.from&&r.to==n.to))&&(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),!0)}}],QU=jO.define({combine:e=>Object.assign({sources:e.map((e=>e.source))},CA(e.map((e=>e.config)),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t}))});function $U(e){let t=[];if(e)e:for(let{name:n}of e){for(let e=0;e<n.length;e++){let r=n[e];if(/[a-zA-Z]/.test(r)&&!t.some((e=>e.toLowerCase()==r.toLowerCase()))){t.push(r);continue e}}t.push("")}return t}function XU(e,t,n){var r;let i=n?$U(t.actions):[];return Nq("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},Nq("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage():t.message),null===(r=t.actions)||void 0===r?void 0:r.map(((n,r)=>{let o=!1,s=r=>{if(r.preventDefault(),o)return;o=!0;let i=jU(e.state.field(zU).diagnostics,t);i&&n.apply(e,i.from,i.to)},{name:a}=n,l=i[r]?a.indexOf(i[r]):-1,c=l<0?a:[a.slice(0,l),Nq("u",a.slice(l,l+1)),a.slice(l+1)];return Nq("button",{type:"button",class:"cm-diagnosticAction",onclick:s,onmousedown:s,"aria-label":" Action: ".concat(a).concat(l<0?"":' (access key "'.concat(i[r],')"'),".")},c)})),t.source&&Nq("div",{class:"cm-diagnosticSource"},t.source))}class JU extends tI{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return Nq("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class ZU{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=XU(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class eV{constructor(e){this.view=e,this.items=[];this.list=Nq("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)GU(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],r=$U(n.actions);for(let i=0;i<r.length;i++)if(r[i].toUpperCase().charCodeAt(0)==t.keyCode){let t=jU(this.view.state.field(zU).diagnostics,n);t&&n.actions[i].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=Nq("div",{class:"cm-panel-lint"},this.list,Nq("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>GU(this.view)},"\xd7")),this.update()}get selectedIndex(){let e=this.view.state.field(zU).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(zU),n=0,r=!1,i=null;for(e.between(0,this.view.state.doc.length,((e,o,s)=>{let a,{spec:l}=s,c=-1;for(let t=n;t<this.items.length;t++)if(this.items[t].diagnostic==l.diagnostic){c=t;break}c<0?(a=new ZU(this.view,l.diagnostic),this.items.splice(n,0,a),r=!0):(a=this.items[c],c>n&&(this.items.splice(n,c-n),r=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),i=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}));n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();0==this.items.length&&(this.items.push(new ZU(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:e=>{let{sel:t,panel:n}=e,r=n.height/this.list.offsetHeight;t.top<n.top?this.list.scrollTop-=(n.top-t.top)/r:t.bottom>n.bottom&&(this.list.scrollTop+=(t.bottom-n.bottom)/r)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=jU(this.view.state.field(zU).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:VU.of(t)})}static open(e){return new eV(e)}}function tV(e){return'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" '.concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:'viewBox="0 0 40 40"',">").concat(encodeURIComponent(e),"</svg>')")}function nV(e){return tV('<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="'.concat(e,'" fill="none" stroke-width=".7"/>'),'width="6" height="3"')}const rV=UR.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:nV("#d11")},".cm-lintRange-warning":{backgroundImage:nV("orange")},".cm-lintRange-info":{backgroundImage:nV("#999")},".cm-lintRange-hint":{backgroundImage:nV("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});const iV=[zU,UR.decorations.compute([zU],(e=>{let{selected:t,panel:n}=e.field(zU);return t&&n&&t.from!=t.to?rI.set([HU.range(t.from,t.to)]):rI.none})),QD(WU,{hideOn:FU}),rV];var oV=function(e){void 0===e&&(e={});var{crosshairCursor:t=!1}=e,n=[];!1!==e.closeBracketsKeymap&&(n=n.concat(EU)),!1!==e.defaultKeymap&&(n=n.concat(Oq)),!1!==e.searchKeymap&&(n=n.concat(CB)),!1!==e.historyKeymap&&(n=n.concat(AF)),!1!==e.foldKeymap&&(n=n.concat(gj)),!1!==e.completionKeymap&&(n=n.concat(RU)),!1!==e.lintKeymap&&(n=n.concat(YU));var r=[];return!1!==e.lineNumbers&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[yM.of(e),uM(),_M]}()),!1!==e.highlightActiveLineGutter&&r.push(SM),!1!==e.highlightSpecialChars&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[kD.of(e),SD||(SD=TI.fromClass(class{constructor(e){this.view=e,this.decorations=rI.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(kD)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new yD({regexp:e.specialChars,decoration:(t,n,r)=>{let{doc:i}=n.state,o=wO(t[0],0);if(9==o){let e=i.lineAt(r),t=n.state.tabSize,o=zA(e.text,t,r-e.from);return rI.replace({widget:new CD((t-o%t)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[o]||(this.decorationCache[o]=rI.replace({widget:new ED(e,o)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(kD);e.startState.facet(kD)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}()),!1!==e.history&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[dF,hF.of(e),UR.domEventHandlers({beforeinput(e,t){let n="historyUndo"==e.inputType?pF:"historyRedo"==e.inputType?gF:null;return!!n&&(e.preventDefault(),n(t))}})]}()),!1!==e.foldGutter&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign(Object.assign({},xj),e),n=new kj(t,!0),r=new kj(t,!1),i=TI.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(VL)!=e.state.facet(VL)||e.startState.field(uj,!1)!=e.state.field(uj,!1)||RL(e.startState)!=RL(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new PA;for(let i of e.viewportLineBlocks){let o=hj(e.state,i.from,i.to)?r:oj(e.state,i.from,i.to)?n:null;o&&t.add(i.from,i.from,o)}return t.finish()}}),{domEventHandlers:o}=t;return[i,lM({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(i))||void 0===t?void 0:t.markers)||IA.empty},initialSpacer:()=>new kj(t,!1),domEventHandlers:Object.assign(Object.assign({},o),{click:(e,t,n)=>{if(o.click&&o.click(e,t,n))return!0;let r=hj(e.state,t.from,t.to);if(r)return e.dispatch({effects:lj.of(r)}),!0;let i=oj(e.state,t.from,t.to);return!!i&&(e.dispatch({effects:aj.of(i)}),!0)}})}),yj()]}()),!1!==e.drawSelection&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[aD.of(e),cD,hD,fD,wI.of(!0)]}()),!1!==e.dropCursor&&r.push([gD,mD]),!1!==e.allowMultipleSelections&&r.push(EA.allowMultipleSelections.of(!0)),!1!==e.indentOnInput&&r.push(EA.transactionFilter.of((e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:r}=e.newSelection.main,i=n.lineAt(r);if(r>i.from+200)return e;let o=n.sliceString(i.from,r);if(!t.some((e=>e.test(o))))return e;let{state:s}=e,a=-1,l=[];for(let{head:c}of s.selection.ranges){let e=s.doc.lineAt(c);if(e.from==a)continue;a=e.from;let t=GL(s,e.from);if(null==t)continue;let n=/^\s*/.exec(e.text)[0],r=KL(s,t);n!=r&&l.push({from:e.from,to:e.from+n.length,insert:r})}return l.length?[e,{changes:l,sequential:!0}]:e}))),!1!==e.syntaxHighlighting&&r.push(Aj(Pj,{fallback:!0})),!1!==e.bracketMatching&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[Lj.of(e),Uj]}()),!1!==e.closeBrackets&&r.push([SU,bU]),!1!==e.autocompletion&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[cU,KB.of(e),pU,DU,gU]}()),!1!==e.rectangularSelection&&r.push(function(e){let t=(null===e||void 0===e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return UR.mouseSelectionStyle.of(((e,n)=>t(n)?PD(e,n):null))}()),!1!==t&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,n]=RD[e.key||"Alt"],r=TI.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventObservers:{keydown(e){this.set(e.keyCode==t||n(e))},keyup(e){e.keyCode!=t&&n(e)||this.set(!1)},mousemove(e){this.set(n(e))}}});return[r,UR.contentAttributes.of((e=>{var t;return(null===(t=e.plugin(r))||void 0===t?void 0:t.isDown)?DD:null}))]}()),!1!==e.highlightActiveLine&&r.push(OD),!1!==e.highlightSelectionMatches&&r.push(function(e){let t=[Xq,$q];return e&&t.push(Kq.of(e)),t}()),e.tabSize&&"number"===typeof e.tabSize&&r.push(HL.of(" ".repeat(e.tabSize))),r.concat([YR.of(n.flat())]).filter(Boolean)};const sV="#e5c07b",aV="#e06c75",lV="#56b6c2",cV="#ffffff",uV="#abb2bf",hV="#7d8799",dV="#61afef",fV="#98c379",pV="#d19a66",gV="#c678dd",mV="#21252b",vV="#2c313a",yV="#282c34",bV="#353a42",wV="#3E4451",_V="#528bff",xV=[UR.theme({"&":{color:uV,backgroundColor:yV},".cm-content":{caretColor:_V},".cm-cursor, .cm-dropCursor":{borderLeftColor:_V},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:wV},".cm-panels":{backgroundColor:mV,color:uV},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:yV,color:hV,border:"none"},".cm-activeLineGutter":{backgroundColor:vV},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:bV},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:bV,borderBottomColor:bV},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:vV,color:uV}}},{dark:!0}),Aj(Ej.define([{tag:TL.keyword,color:gV},{tag:[TL.name,TL.deleted,TL.character,TL.propertyName,TL.macroName],color:aV},{tag:[TL.function(TL.variableName),TL.labelName],color:dV},{tag:[TL.color,TL.constant(TL.name),TL.standard(TL.name)],color:pV},{tag:[TL.definition(TL.name),TL.separator],color:uV},{tag:[TL.typeName,TL.className,TL.number,TL.changed,TL.annotation,TL.modifier,TL.self,TL.namespace],color:sV},{tag:[TL.operator,TL.operatorKeyword,TL.url,TL.escape,TL.regexp,TL.link,TL.special(TL.string)],color:lV},{tag:[TL.meta,TL.comment],color:hV},{tag:TL.strong,fontWeight:"bold"},{tag:TL.emphasis,fontStyle:"italic"},{tag:TL.strikethrough,textDecoration:"line-through"},{tag:TL.link,color:hV,textDecoration:"underline"},{tag:TL.heading,fontWeight:"bold",color:aV},{tag:[TL.atom,TL.bool,TL.special(TL.variableName)],color:pV},{tag:[TL.processingInstruction,TL.string,TL.inserted],color:fV},{tag:TL.invalid,color:cV}]))];var kV=UR.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),SV=function(e){void 0===e&&(e={});var{indentWithTab:t=!0,editable:n=!0,readOnly:r=!1,theme:i="light",placeholder:o="",basicSetup:s=!0}=e,a=[];switch(t&&a.unshift(YR.of([Aq])),s&&("boolean"===typeof s?a.unshift(oV()):a.unshift(oV(s))),o&&a.unshift(function(e){return TI.fromClass(class{constructor(t){this.view=t,this.placeholder=e?rI.set([rI.widget({widget:new AD(e),side:1}).range(0)]):rI.none}get decorations(){return this.view.state.doc.length?rI.none:this.placeholder}},{decorations:e=>e.decorations})}(o)),i){case"light":a.push(kV);break;case"dark":a.push(xV);break;case"none":break;default:a.push(i)}return!1===n&&a.push(UR.editable.of(!1)),r&&a.push(EA.readOnly.of(!0)),[...a]},EV=uA.define(),CV=[];var TV=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],OV=(0,t.forwardRef)(((e,n)=>{var{className:r,value:i="",selection:o,extensions:s=[],onChange:a,onStatistics:l,onCreateEditor:c,onUpdate:u,autoFocus:h,theme:d="light",height:f,minHeight:p,maxHeight:g,width:m,minWidth:v,maxWidth:y,basicSetup:b,placeholder:w,indentWithTab:_,editable:x,readOnly:k,root:S,initialState:E}=e,C=Se(e,TV),T=(0,t.useRef)(null),{state:O,view:A,container:N}=function(e){var{value:n,selection:r,onChange:i,onStatistics:o,onCreateEditor:s,onUpdate:a,extensions:l=CV,autoFocus:c,theme:u="light",height:h=null,minHeight:d=null,maxHeight:f=null,width:p=null,minWidth:g=null,maxWidth:m=null,placeholder:v="",editable:y=!0,readOnly:b=!1,indentWithTab:w=!0,basicSetup:_=!0,root:x,initialState:k}=e,[S,E]=(0,t.useState)(),[C,T]=(0,t.useState)(),[O,A]=(0,t.useState)(),N=UR.theme({"&":{height:h,minHeight:d,maxHeight:f,width:p,minWidth:g,maxWidth:m},"& .cm-scroller":{height:"100% !important"}}),I=UR.updateListener.of((e=>{if(e.docChanged&&"function"===typeof i&&!e.transactions.some((e=>e.annotation(EV)))){var t=e.state.doc.toString();i(t,e)}o&&o((e=>({line:e.state.doc.lineAt(e.state.selection.main.from),lineCount:e.state.doc.lines,lineBreak:e.state.lineBreak,length:e.state.doc.length,readOnly:e.state.readOnly,tabSize:e.state.tabSize,selection:e.state.selection,selectionAsSingle:e.state.selection.asSingle().main,ranges:e.state.selection.ranges,selectionCode:e.state.sliceDoc(e.state.selection.main.from,e.state.selection.main.to),selections:e.state.selection.ranges.map((t=>e.state.sliceDoc(t.from,t.to))),selectedText:e.state.selection.ranges.some((e=>!e.empty))}))(e))})),P=[I,N,...SV({theme:u,editable:y,readOnly:b,placeholder:v,indentWithTab:w,basicSetup:_})];return a&&"function"===typeof a&&P.push(UR.updateListener.of(a)),P=P.concat(l),(0,t.useEffect)((()=>{if(S&&!O){var e={doc:n,selection:r,extensions:P},t=k?EA.fromJSON(k.json,e,k.fields):EA.create(e);if(A(t),!C){var i=new UR({state:t,parent:S,root:x});T(i),s&&s(i,t)}}return()=>{C&&(A(void 0),T(void 0))}}),[S,O]),(0,t.useEffect)((()=>E(e.container)),[e.container]),(0,t.useEffect)((()=>()=>{C&&(C.destroy(),T(void 0))}),[C]),(0,t.useEffect)((()=>{c&&C&&C.focus()}),[c,C]),(0,t.useEffect)((()=>{C&&C.dispatch({effects:fA.reconfigure.of(P)})}),[u,l,h,d,f,p,g,m,v,y,b,w,_,i,a]),(0,t.useEffect)((()=>{if(void 0!==n){var e=C?C.state.doc.toString():"";C&&n!==e&&C.dispatch({changes:{from:0,to:e.length,insert:n||""},annotations:[EV.of(!0)]})}}),[n,C]),{state:O,setState:A,view:C,setView:T,container:S,setContainer:E}}({container:T.current,root:S,value:i,autoFocus:h,theme:d,height:f,minHeight:p,maxHeight:g,width:m,minWidth:v,maxWidth:y,basicSetup:b,placeholder:w,indentWithTab:_,editable:x,readOnly:k,selection:o,onChange:a,onStatistics:l,onCreateEditor:c,onUpdate:u,extensions:s,initialState:E});if((0,t.useImperativeHandle)(n,(()=>({editor:T.current,state:O,view:A})),[T,N,O,A]),"string"!==typeof i)throw new Error("value must be typeof string but got "+typeof i);var I="string"===typeof d?"cm-theme-"+d:"cm-theme";return(0,Ie.jsx)("div",ke({ref:T,className:I+(r?" "+r:"")},C))}));OV.displayName="CodeMirror";const AV=OV,NV=t.forwardRef(((e,t)=>{let{bsPrefix:n,className:r,striped:i,bordered:o,borderless:s,hover:a,size:l,variant:c,responsive:u,...h}=e;const d=je(n,"table"),f=we()(r,d,c&&"".concat(d,"-").concat(c),l&&"".concat(d,"-").concat(l),i&&"".concat(d,"-").concat("string"===typeof i?"striped-".concat(i):"striped"),o&&"".concat(d,"-bordered"),s&&"".concat(d,"-borderless"),a&&"".concat(d,"-hover")),p=(0,Ie.jsx)("table",{...h,className:f,ref:t});if(u){let e="".concat(d,"-responsive");return"string"===typeof u&&(e="".concat(e,"-").concat(u)),(0,Ie.jsx)("div",{className:e,children:p})}return p})),IV=NV;function PV(){const[e,n]=(0,t.useState)({}),[r,i]=(0,t.useState)(!1),[o,s]=(0,t.useState)(""),[a,l]=(0,t.useState)((0,Ie.jsx)(Ie.Fragment,{})),[c,u]=(0,t.useState)((0,Ie.jsx)(Ie.Fragment,{})),h=J();let{problemid:d}=Z();return async function(){if(!r){let e=await JT(d);console.log(e),null==e?(alert("\ubb38\uc81c\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4!"),i(!0),h("/")):(i(!0),n(e),function(e,t){let n=(0,Ie.jsx)(Ie.Fragment,{});console.log(e);for(let r=0;r<e.length;r++){console.log(e[r]),e[r]=e[r].replace(/(?:\r\n|\r|\n)/g,"<br/>"),t[r]=t[r].replace(/(?:\r\n|\r|\n)/g,"<br/>");let i=(0,Ie.jsxs)(Ie.Fragment,{children:[(0,Ie.jsxs)("tr",{style:{"white-space":"pre-wrap"},children:[" ",(0,Ie.jsx)("td",{children:(r+1).toString()+"\ubc88 \uc785\ub825"})," ",(0,Ie.jsx)("td",{dangerouslySetInnerHTML:{__html:e[r]}})," "]})," ",(0,Ie.jsxs)("tr",{children:[" ",(0,Ie.jsx)("td",{children:(r+1).toString()+"\ubc88 \ucd9c\ub825"})," ",(0,Ie.jsx)("td",{dangerouslySetInnerHTML:{__html:t[r]}})," "]})]});n=(0,Ie.jsxs)(Ie.Fragment,{children:[n,i]})}l((0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)(IV,{bordered:!0,hover:!0,children:[" ",(0,Ie.jsxs)("thead",{children:[(0,Ie.jsxs)("tr",{children:[" ",(0,Ie.jsx)("th",{children:"\ubc88\ud638"})," ",(0,Ie.jsx)("th",{children:"\ub370\uc774\ud130"}),"  "]})," "]})," ",(0,Ie.jsx)("tbody",{children:n})]})}))}(e.example_input,e.example_output),function(e){let t=(0,Ie.jsx)(Ie.Fragment,{});console.log(e);for(let n=0;n<e.length;n++){console.log(e[n]),e[n].explanation=e[n].explanation.replace(/(?:\r\n|\r|\n)/g,"<br/>");let r=(0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)("tr",{style:{"white-space":"pre-wrap"},children:[" ",(0,Ie.jsx)("td",{children:(n+1).toString()})," ",(0,Ie.jsx)("td",{children:e[n].explanation})," ",(0,Ie.jsx)("td",{children:e[n].score})," "]})});t=(0,Ie.jsxs)(Ie.Fragment,{children:[t,r]})}u((0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)(IV,{bordered:!0,hover:!0,children:[" ",(0,Ie.jsxs)("thead",{children:[(0,Ie.jsxs)("tr",{children:[" ",(0,Ie.jsx)("th",{children:"\ubc88\ud638"})," ",(0,Ie.jsx)("th",{children:"\uc124\uba85"})," ",(0,Ie.jsx)("th",{children:"\uc810\uc218"}),"  "]})," "]})," ",(0,Ie.jsx)("tbody",{children:t})]})}))}(e.subtask))}}(),(0,Ie.jsxs)("div",{children:[(0,Ie.jsx)("h1",{children:e.name}),(0,Ie.jsxs)("p",{children:["\uc2dc\uac04\uc81c\ud55c: ",e.time,"\ucd08 / \uba54\ubaa8\ub9ac \uc81c\ud55c: ",e.memory,"MB"]}),(0,Ie.jsx)("h4",{children:"\ubb38\uc81c"}),(0,Ie.jsx)("div",{dangerouslySetInnerHTML:{__html:e.problem}}),(0,Ie.jsx)("h4",{children:"\uc785\ub825"}),(0,Ie.jsx)("p",{children:e.input}),(0,Ie.jsx)("h4",{children:"\ucd9c\ub825"}),(0,Ie.jsx)("p",{children:e.output}),a,c,(0,Ie.jsx)(AV,{value:o,name:"codeInput",height:"400px",onChange:(e,t)=>{s(e)}}),(0,Ie.jsx)(GT,{variant:"primary",onClick:async function(){if(null!=XC.currentUser){for(let t=0;t<e.subtask.length;t++)console.log(e.subtask[t].score),await ZT(e,o,"",t+1,e.subtask[t].score);h("/judgeboard")}else alert("\uc81c\ucd9c\uc744 \uc704\ud574\uc120 \ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4!"),h("/login")},children:"\uc81c\ucd9c"})]})}function RV(){const[e,n]=(0,t.useState)({}),[r,i]=(0,t.useState)(!1),[o,s]=(0,t.useState)(""),[a,l]=(0,t.useState)(""),c=nC(JC,"judgeresults"),u=nC(JC,"judgequeue");return(0,t.useEffect)((()=>{cC(c,(e=>{!async function(e){console.log(e);let t=(0,Ie.jsx)(Ie.Fragment,{});for(let r in e){var n=new Date(1e3*e[r].timestamp);console.log(n);let i=(0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)("tr",{children:[" ",(0,Ie.jsx)("td",{children:n.toString()})," ",(0,Ie.jsx)("td",{children:r})," ",(0,Ie.jsx)("td",{children:e[r].user})," ",(0,Ie.jsx)("td",{children:e[r].problemId}),(0,Ie.jsx)("td",{children:e[r].subtask}),"  ",(0,Ie.jsx)("td",{children:e[r].score})," ",(0,Ie.jsx)("td",{children:e[r].result})," ",(0,Ie.jsx)("td",{children:e[r].contest})]})});t=(0,Ie.jsxs)(Ie.Fragment,{children:[i,t]})}s((0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)(IV,{bordered:!0,hover:!0,children:[" ",(0,Ie.jsxs)("thead",{children:[" ",(0,Ie.jsxs)("tr",{children:[" ",(0,Ie.jsx)("th",{children:"\ucc44\uc810 \uc2dc\uac04"}),"  ",(0,Ie.jsx)("th",{children:"\ucc44\uc810 \uacb0\uacfc ID"})," ",(0,Ie.jsx)("th",{children:"\uc81c\ucd9c\uc790"})," ",(0,Ie.jsx)("th",{children:"\ubb38\uc81c \ubc88\ud638"})," ",(0,Ie.jsx)("th",{children:"\uc11c\ube0c\ud14c\uc2a4\ud06c \ubc88\ud638"})," ",(0,Ie.jsx)("th",{children:"\ubb38\uc81c \ubc30\uc810"}),"  ",(0,Ie.jsx)("th",{children:"\ucc44\uc810 \uacb0\uacfc"}),"  ",(0,Ie.jsx)("th",{children:"\ub300\ud68c"}),"  "]})]}),(0,Ie.jsxs)("tbody",{children:[" ",t," "]})]})}))}(e.val())})),cC(u,(e=>{!async function(e){console.log(e);let t=(0,Ie.jsx)(Ie.Fragment,{});for(let n in e){let r=(0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)("tr",{children:[" ",(0,Ie.jsx)("td",{children:e[n].user})," ",(0,Ie.jsx)("td",{children:e[n].problemId}),"  ",(0,Ie.jsx)("td",{children:e[n].subtask})," "]})});t=(0,Ie.jsxs)(Ie.Fragment,{children:[r,t]})}l((0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)(IV,{bordered:!0,hover:!0,children:[" ",(0,Ie.jsxs)("thead",{children:[(0,Ie.jsxs)("tr",{children:[" ",(0,Ie.jsx)("th",{children:"\uc81c\ucd9c\uc790"})," ",(0,Ie.jsx)("th",{children:"\ubb38\uc81c \ubc88\ud638"})," ",(0,Ie.jsx)("th",{children:"\uc11c\ube0c\ud14c\uc2a4\ud06c \ubc88\ud638"}),"  "]})," "]})," ",(0,Ie.jsx)("tbody",{children:t})]})}))}(e.val())}))}),[]),(0,Ie.jsxs)("div",{children:[(0,Ie.jsx)("h1",{children:"Judge Results Board!"}),(0,Ie.jsx)("h5",{children:"\ucc44\uc810 \ub300\uae30 \ud050"}),a,(0,Ie.jsx)("h5",{children:"\ucc44\uc810 \uacb0\uacfc"}),o]})}function DV(){const e=J(),[n,r]=(0,t.useState)({}),[i,o]=(0,t.useState)((0,Ie.jsx)(Ie.Fragment,{})),[s,a]=(0,t.useState)(new Date),[l,c]=(0,t.useState)(new Date);let{contestid:u}=Z();const[h,d]=(0,t.useState)(!1);function f(t){e("/problem/"+t+"/"+u)}return(0,t.useEffect)((()=>{!async function(){let e=(0,Ie.jsx)(Ie.Fragment,{}),t=await eO(u);r(t),console.log("B"),console.log(t.problems);for(let r of t.problems){console.log("A");let t=await JT(r);console.log(t),console.log("P: "+r);let n=(0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)("tr",{onClick:()=>{f(r)},children:[" ",(0,Ie.jsx)("td",{children:r})," ",(0,Ie.jsx)("td",{children:t?t.name:"\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \ubb38\uc81c\uc785\ub2c8\ub2e4"})]})});e=(0,Ie.jsxs)(Ie.Fragment,{children:[e,n]})}a(new Date(1e3*t.start.seconds)),c(new Date(1e3*t.end.seconds)),o((0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)(IV,{bordered:!0,hover:!0,children:[" ",(0,Ie.jsxs)("thead",{children:[(0,Ie.jsxs)("tr",{children:[" ",(0,Ie.jsx)("th",{children:"\ubb38\uc81c \uc544\uc774\ub514"})," ",(0,Ie.jsx)("th",{children:"\ubb38\uc81c \uc774\ub984"})," "]})," "]})," ",(0,Ie.jsx)("tbody",{children:e})]})}));const n=new Date(1e3*t.end.seconds),i=setInterval((()=>{(new Date).getTime()>n&&(d(!0),clearInterval(i))}),1e3)}()}),[u]),s>new Date?(0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsx)("h1",{children:"\ub300\ud68c \uc2dc\uc791 \uc804\uc785\ub2c8\ub2e4!"})}):h?(0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsx)("h1",{children:"\ub300\ud68c\uac00 \uc885\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4!"})}):(0,Ie.jsxs)(Ie.Fragment,{children:[(0,Ie.jsx)("h1",{children:n.name}),(0,Ie.jsx)("h4",{children:n.info}),(0,Ie.jsx)(GT,{variant:"primary",onClick:function(){e("/ranking/"+u)},children:"\ub7ad\ud0b9"}),(0,Ie.jsx)(GT,{variant:"primary",onClick:function(){e("/judgeboard/"+u)},children:"\ucc44\uc810\uae30\ub85d"}),(0,Ie.jsxs)("h4",{children:["\uc2dc\uc791: ",s.toString()]}),(0,Ie.jsxs)("h4",{children:["\uc885\ub8cc: ",l.toString()]}),i]})}function MV(){const[e,n]=(0,t.useState)({}),[r,i]=(0,t.useState)(!1);let{contestid:o}=Z();const[s,a]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),u=vC(nC(JC,"judgeresults"),pC("contest"),mC(o)),h=vC(nC(JC,"judgequeue"),pC("contest"),mC(o));return(0,t.useEffect)((()=>{cC(u,(e=>{!async function(e){console.log(e);let t=(0,Ie.jsx)(Ie.Fragment,{});for(let r in e){var n=new Date(1e3*e[r].timestamp);console.log(n);let i=(0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)("tr",{children:[" ",(0,Ie.jsx)("td",{children:n.toString()})," ",(0,Ie.jsx)("td",{children:r})," ",(0,Ie.jsx)("td",{children:e[r].user})," ",(0,Ie.jsx)("td",{children:e[r].problemId}),(0,Ie.jsx)("td",{children:e[r].subtask}),"  ",(0,Ie.jsx)("td",{children:e[r].score})," ",(0,Ie.jsx)("td",{children:e[r].result})," ",(0,Ie.jsx)("td",{children:e[r].contest})]})});t=(0,Ie.jsxs)(Ie.Fragment,{children:[i,t]})}a((0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)(IV,{bordered:!0,hover:!0,children:[" ",(0,Ie.jsxs)("thead",{children:[" ",(0,Ie.jsxs)("tr",{children:[" ",(0,Ie.jsx)("th",{children:"\ucc44\uc810 \uc2dc\uac04"}),"  ",(0,Ie.jsx)("th",{children:"\ucc44\uc810 \uacb0\uacfc ID"})," ",(0,Ie.jsx)("th",{children:"\uc81c\ucd9c\uc790"})," ",(0,Ie.jsx)("th",{children:"\ubb38\uc81c \ubc88\ud638"})," ",(0,Ie.jsx)("th",{children:"\uc11c\ube0c\ud14c\uc2a4\ud06c \ubc88\ud638"})," ",(0,Ie.jsx)("th",{children:"\ubb38\uc81c \ubc30\uc810"}),"  ",(0,Ie.jsx)("th",{children:"\ucc44\uc810 \uacb0\uacfc"}),"  ",(0,Ie.jsx)("th",{children:"\ub300\ud68c"}),"  "]})]}),(0,Ie.jsxs)("tbody",{children:[" ",t," "]})]})}))}(e.val())})),cC(h,(e=>{!async function(e){console.log(e);let t=(0,Ie.jsx)(Ie.Fragment,{});for(let n in e){let r=(0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)("tr",{children:[" ",(0,Ie.jsx)("td",{children:e[n].user})," ",(0,Ie.jsx)("td",{children:e[n].problemId}),"  ",(0,Ie.jsx)("td",{children:e[n].subtask})," "]})});t=(0,Ie.jsxs)(Ie.Fragment,{children:[r,t]})}c((0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)(IV,{bordered:!0,hover:!0,children:[" ",(0,Ie.jsxs)("thead",{children:[(0,Ie.jsxs)("tr",{children:[" ",(0,Ie.jsx)("th",{children:"\uc81c\ucd9c\uc790"})," ",(0,Ie.jsx)("th",{children:"\ubb38\uc81c \ubc88\ud638"})," ",(0,Ie.jsx)("th",{children:"\uc11c\ube0c\ud14c\uc2a4\ud06c \ubc88\ud638"}),"  "]})," "]})," ",(0,Ie.jsx)("tbody",{children:t})]})}))}(e.val())}))}),[]),(0,Ie.jsxs)("div",{children:[(0,Ie.jsxs)("h1",{children:[o," Judge Results Board!"]}),(0,Ie.jsx)("h5",{children:"\ucc44\uc810 \ub300\uae30 \ud050"}),l,(0,Ie.jsx)("h5",{children:"\ucc44\uc810 \uacb0\uacfc"}),s]})}function LV(){const[e,n]=(0,t.useState)({}),[r,i]=(0,t.useState)(!1),[o,s]=(0,t.useState)(""),[a,l]=(0,t.useState)((0,Ie.jsx)(Ie.Fragment,{})),[c,u]=(0,t.useState)((0,Ie.jsx)(Ie.Fragment,{})),h=J();let{problemid:d}=Z(),{contestid:f}=Z();return async function(){if(!r){let e=await JT(d);console.log(e),null==e?(alert("\ubb38\uc81c\uac00 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4!"),i(!0),h("/")):(i(!0),n(e),function(e,t){let n=(0,Ie.jsx)(Ie.Fragment,{});console.log(e);for(let r=0;r<e.length;r++){console.log(e[r]),e[r]=e[r].replace(/(?:\r\n|\r|\n)/g,"<br/>"),t[r]=t[r].replace(/(?:\r\n|\r|\n)/g,"<br/>");let i=(0,Ie.jsxs)(Ie.Fragment,{children:[(0,Ie.jsxs)("tr",{style:{"white-space":"pre-wrap"},children:[" ",(0,Ie.jsx)("td",{children:(r+1).toString()+"\ubc88 \uc785\ub825"})," ",(0,Ie.jsx)("td",{dangerouslySetInnerHTML:{__html:e[r]}})," "]})," ",(0,Ie.jsxs)("tr",{children:[" ",(0,Ie.jsx)("td",{children:(r+1).toString()+"\ubc88 \ucd9c\ub825"})," ",(0,Ie.jsx)("td",{dangerouslySetInnerHTML:{__html:t[r]}})," "]})]});n=(0,Ie.jsxs)(Ie.Fragment,{children:[n,i]})}l((0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)(IV,{bordered:!0,hover:!0,children:[" ",(0,Ie.jsxs)("thead",{children:[(0,Ie.jsxs)("tr",{children:[" ",(0,Ie.jsx)("th",{children:"\ubc88\ud638"})," ",(0,Ie.jsx)("th",{children:"\ub370\uc774\ud130"}),"  "]})," "]})," ",(0,Ie.jsx)("tbody",{children:n})]})}))}(e.example_input,e.example_output),function(e){let t=(0,Ie.jsx)(Ie.Fragment,{});console.log(e);for(let n=0;n<e.length;n++){console.log(e[n]),e[n].explanation=e[n].explanation.replace(/(?:\r\n|\r|\n)/g,"<br/>");let r=(0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)("tr",{style:{"white-space":"pre-wrap"},children:[" ",(0,Ie.jsx)("td",{children:(n+1).toString()})," ",(0,Ie.jsx)("td",{children:e[n].explanation})," ",(0,Ie.jsx)("td",{children:e[n].score})," "]})});t=(0,Ie.jsxs)(Ie.Fragment,{children:[t,r]})}u((0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)(IV,{bordered:!0,hover:!0,children:[" ",(0,Ie.jsxs)("thead",{children:[(0,Ie.jsxs)("tr",{children:[" ",(0,Ie.jsx)("th",{children:"\ubc88\ud638"})," ",(0,Ie.jsx)("th",{children:"\uc124\uba85"})," ",(0,Ie.jsx)("th",{children:"\uc810\uc218"}),"  "]})," "]})," ",(0,Ie.jsx)("tbody",{children:t})]})}))}(e.subtask))}}(),(0,Ie.jsxs)("div",{children:[(0,Ie.jsx)("h1",{children:e.name}),(0,Ie.jsxs)("p",{children:["\uc2dc\uac04\uc81c\ud55c: ",e.time,"\ucd08 / \uba54\ubaa8\ub9ac \uc81c\ud55c: ",e.memory,"MB"]}),(0,Ie.jsx)("h4",{children:"\ubb38\uc81c"}),(0,Ie.jsx)("div",{dangerouslySetInnerHTML:{__html:e.problem}}),(0,Ie.jsx)("h4",{children:"\uc785\ub825"}),(0,Ie.jsx)("p",{children:e.input}),(0,Ie.jsx)("h4",{children:"\ucd9c\ub825"}),(0,Ie.jsx)("p",{children:e.output}),a,c,(0,Ie.jsx)(AV,{value:o,name:"codeInput",height:"400px",onChange:(e,t)=>{s(e)}}),(0,Ie.jsx)(GT,{variant:"primary",onClick:async function(){if(null!=XC.currentUser){for(let t=0;t<e.subtask.length;t++)console.log(e.subtask[t].score),await ZT(e,o,f,t+1,e.subtask[t].score);h("/judgeboard/"+f)}else alert("\uc81c\ucd9c\uc744 \uc704\ud574\uc120 \ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4!"),h("/login")},children:"\uc81c\ucd9c"})]})}function jV(){const[e,n]=(0,t.useState)((0,Ie.jsx)(Ie.Fragment,{}));function r(e,t){let n=0;for(let r=0;r<e.length;r++){const i=e[r];console.log(i),i.user===t&&"Correct"===i.result&&(n+=i.score)}return n}function i(e,t){let n=[];for(let r=0;r<e.length;r++){const i=e[r];console.log(i),i.user===t&&"Correct"===i.result&&-1==n.indexOf(i.problemId)&&n.push(i.problemId)}return n}function o(e,t){let n=0;for(let r=0;r<e.length;r++){const i=e[r];console.log(i),i.user===t&&(n+=1)}return n}function s(e,t){return e.score<t.score?1:e.score>t.score?-1:e.submittedCount-t.submittedCount}function a(e){const t=function(e){const t=new Map;let n=[];for(let i=0;i<e.length;i++){const r=e[i],o="".concat(r.user,"-").concat(r.problemId,"-").concat(r.subtask);"Correct"==r.result?(!t.has(o)||t.get(o).timestamp>r.timestamp)&&t.set(o,r):n.push(r)}const r=t.entries();for(const i of r){const[e,t]=i;n.push(t)}return n}(Object.values(e)),a=function(e,t){const n=new Set;for(const r of e){const e=r[t];n.add(e)}return Array.from(n)}(t,"user"),l=[];for(let n=0;n<a.length;n++){console.log(r(t,a[n])),console.log(o(t,a[n]));let e={user:a[n],score:r(t,a[n]),submittedCount:o(t,a[n]),corrected:i(t,a[n])};console.log(e),l.push(e)}l.sort(s),console.log(l),async function(e){console.log(e);let t=1,r=(0,Ie.jsx)(Ie.Fragment,{});for(let n=0;n<e.length;n++){0==n||e[n-1].score==e[n].score&&e[n-1].submittedCount==e[n].submittedCount||(t+=1);let i=(0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)("tr",{children:[" ",(0,Ie.jsx)("td",{children:t}),(0,Ie.jsx)("td",{children:e[n].user})," ",(0,Ie.jsx)("td",{children:e[n].score}),"  ",(0,Ie.jsx)("td",{children:e[n].submittedCount}),"  ",(0,Ie.jsx)("td",{children:e[n].corrected.toString()}),"  "]})});r=(0,Ie.jsxs)(Ie.Fragment,{children:[r,i]})}n((0,Ie.jsx)(Ie.Fragment,{children:(0,Ie.jsxs)(IV,{bordered:!0,hover:!0,children:[" ",(0,Ie.jsxs)("thead",{children:[(0,Ie.jsxs)("tr",{children:[(0,Ie.jsx)("th",{children:"\uc21c\uc704"})," ",(0,Ie.jsx)("th",{children:"\uc0ac\uc6a9\uc790"})," ",(0,Ie.jsx)("th",{children:"\uc810\uc218"})," ",(0,Ie.jsx)("th",{children:"\uc81c\ucd9c\ud69f\uc218"}),"  ",(0,Ie.jsx)("th",{children:"\ud574\uacb0\ud55c \ubb38\uc81c"})," "]})," "]})," ",(0,Ie.jsx)("tbody",{children:r})]})}))}(l)}let{contestid:l}=Z();const c=vC(nC(JC,"judgeresults"),pC("contest"),mC(l));return(0,t.useEffect)((()=>{cC(c,(e=>{const t=e.val();console.log(t),a(t)}))}),[]),(0,Ie.jsxs)("div",{children:[(0,Ie.jsx)("h1",{children:"Ranking!"}),e]})}function FV(){return(0,Ie.jsx)("div",{children:(0,Ie.jsx)("h1",{children:"\uacc4\uc815 \ud655\uc778\uc911...\uc7a0\uc2dc\ub9cc \uae30\ub2e4\ub824 \uc8fc\uc138\uc694.."})})}function qV(){return(0,Ie.jsx)("div",{children:(0,Ie.jsx)("h1",{children:"\uad8c\ud55c\uc774 \ubd80\uc871\ud569\ub2c8\ub2e4"})})}var BV=n(6770),UV=n.n(BV);function VV(e){let{useremail:n}=e;const r=J(),i={toolbar:{container:[["image"],[{header:[1,2,3,4,5,!1]}],["bold","underline","italic","strike"]]}},[o,s]=(0,t.useState)(""),[a,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(""),[h,d]=(0,t.useState)(""),[f,p]=(0,t.useState)(""),[g,m]=(0,t.useState)(""),[v,y]=(0,t.useState)(""),[b,w]=(0,t.useState)(""),[_,x]=(0,t.useState)(""),[k,S]=(0,t.useState)(""),[E,C]=(0,t.useState)(""),[T,O]=(0,t.useState)("");return XC.onAuthStateChanged((async function(e){if(e){let e=await async function(){const e=Hb($C,"authority",XC.currentUser.email),t=await kw(e);return t.exists()?t.data().role:"noauth"}();console.log(e),s(e)}else s("No")})),""==o?(0,Ie.jsx)(FV,{}):"admin"==o||"editor"==o?(0,Ie.jsxs)("div",{children:[(0,Ie.jsx)("h1",{children:"Create Problem!"}),(0,Ie.jsxs)(WT,{children:[(0,Ie.jsxs)(WT.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,Ie.jsx)(WT.Label,{children:"\ubb38\uc81c ID"}),(0,Ie.jsx)(WT.Control,{placeholder:"\uc22b\uc790 4~6\uc790\ub9ac",onChange:e=>{l(e.currentTarget.value)}})]}),(0,Ie.jsx)(GT,{variant:"primary",onClick:async function(){let e=await async function(e){const t=Hb($C,"problems",e);return!!(await kw(t)).exists()||(console.log("WW"),!1)}(a);e?alert("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 ID \uc785\ub2c8\ub2e4! \ubc14\uafd4\uc8fc\uc138\uc694!"):alert("\uc0ac\uc6a9 \uac00\ub2a5\ud55c ID \uc785\ub2c8\ub2e4!")},children:"ID \uc911\ubcf5\ud655\uc778"}),(0,Ie.jsxs)(WT.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,Ie.jsx)(WT.Label,{children:"\ubb38\uc81c \uc774\ub984"}),(0,Ie.jsx)(WT.Control,{placeholder:"\ubb38\uc81c \uc81c\ubaa9",onChange:e=>{u(e.currentTarget.value)}})]}),(0,Ie.jsxs)(WT.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,Ie.jsx)(WT.Label,{children:"\uc810\uc218(\ucd1d)"}),(0,Ie.jsx)(WT.Control,{placeholder:"100",onChange:e=>{d(e.currentTarget.value)}})]}),(0,Ie.jsxs)(WT.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,Ie.jsx)(WT.Label,{children:"\ubb38\uc81c \uc124\uba85"}),(0,Ie.jsx)(UV(),{style:{width:"100%",height:"500px"},onChange:e=>{p(e)},modules:i})]}),(0,Ie.jsxs)(WT.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,Ie.jsx)(WT.Label,{children:"\uc785\ub825"}),(0,Ie.jsx)(WT.Control,{as:"textarea",rows:3,placeholder:"\uc785\ub825 \uc870\uac74\uc744 \uc791\uc131\ud558\uc138\uc694",onChange:e=>{m(e.currentTarget.value)}})]}),(0,Ie.jsxs)(WT.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,Ie.jsx)(WT.Label,{children:"\ucd9c\ub825"}),(0,Ie.jsx)(WT.Control,{as:"textarea",rows:3,placeholder:"\ucd9c\ub825 \uc870\uac74\uc744 \uc791\uc131\ud558\uc138\uc694",onChange:e=>{y(e.currentTarget.value)}})]}),(0,Ie.jsxs)(WT.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,Ie.jsx)(WT.Label,{children:"\uc2dc\uac04\uc81c\ud55c(\ucd08)"}),(0,Ie.jsx)(WT.Control,{placeholder:"2",onChange:e=>{w(e.currentTarget.value)}})]}),(0,Ie.jsxs)(WT.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,Ie.jsx)(WT.Label,{children:"\uba54\ubaa8\ub9ac \uc81c\ud55c(MB)"}),(0,Ie.jsx)(WT.Control,{placeholder:"128",onChange:e=>{x(e.currentTarget.value)}})]}),(0,Ie.jsxs)(WT.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,Ie.jsx)(WT.Label,{children:"\uc11c\ube0c\ud14c\uc2a4\ud06c JSON"}),(0,Ie.jsx)(WT.Control,{as:"textarea",rows:3,placeholder:'[{"explanation":"0 < A, B < 10", "score": 50}, {"explanation":"0 < A, B < 20", "score": 50}]',onChange:e=>{S(e.currentTarget.value)}})]}),(0,Ie.jsxs)(WT.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,Ie.jsx)(WT.Label,{children:"\uc785\ub825\uc608\uc2dc Array"}),(0,Ie.jsx)(WT.Control,{as:"textarea",rows:3,placeholder:'["1, 2", "3, 4"]',onChange:e=>{C(e.currentTarget.value)}})]}),(0,Ie.jsxs)(WT.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,Ie.jsx)(WT.Label,{children:"\ucd9c\ub825\uc608\uc2dc Array"}),(0,Ie.jsx)(WT.Control,{as:"textarea",rows:3,placeholder:'["3", "7"]',onChange:e=>{O(e.currentTarget.value)}})]}),(0,Ie.jsx)(GT,{variant:"primary",onClick:async function(){""==a||""==c||""==h||""==f||""==g||""==v||""==b||""==_||""==k||""==E||""==T?alert("\ubaa8\ub4e0 \ud56d\ubaa9\uc744 \ub2e4 \ucc44\uc6cc\uc8fc\uc138\uc694!"):(!async function(e){await Ew(Hb($C,"problems",e.id),e)}(function(){let e={};return e.id=a,e.name=c,e.score=Number(h),e.problem=f,e.input=g,e.output=v,e.time=Number(b),e.memory=Number(_),e.subtask=JSON.parse(k),e.example_input=JSON.parse(E),e.example_output=JSON.parse(T),console.log(e),e}()),alert("\ubb38\uc81c \ucd94\uac00 \uc644\ub8cc!"),r("/problem/"+a))},children:"\ubb38\uc81c \ub4f1\ub85d"})]})]}):(0,Ie.jsx)(qV,{})}function zV(){const[e,n]=(0,t.useState)(!1),[r,i]=(0,t.useState)(""),[o,s]=(0,t.useState)(""),[a,l]=(0,t.useState)("");return e?(0,Ie.jsx)("h1",{children:"Loading.."}):(0,Ie.jsxs)("div",{children:[(0,Ie.jsx)("h1",{children:"Create User!"}),(0,Ie.jsxs)(WT,{children:[(0,Ie.jsx)(WT.Control,{id:"name","aria-describedby":"idHelpBlock",placeholder:"Name",onChange:function(e){s(e.currentTarget.value),console.log(e.currentTarget.value)}}),(0,Ie.jsx)(WT.Control,{id:"email","aria-describedby":"idHelpBlock",placeholder:"Email",onChange:function(e){i(e.currentTarget.value),console.log(e.currentTarget.value)}}),(0,Ie.jsx)(WT.Control,{type:"password",id:"password","aria-describedby":"passwordHelpBlock",placeholder:"PS(Problem Solving \uc774 \uc544\ub2d9\ub2c8\ub2e4!)",onChange:function(e){l(e.currentTarget.value),console.log(e.currentTarget.value)}}),(0,Ie.jsx)(GT,{variant:"primary",type:"submit",onClick:async function(){n(!0),await eT(o,r,a),alert("OK!"),n(!1)},children:"Login"})]})]})}function HV(){const e=J();return(0,Ie.jsxs)(Ie.Fragment,{children:[(0,Ie.jsx)("h1",{children:"Contests"}),(0,Ie.jsx)("h2",{children:"\ud06c\ub9ac\uc2a4\ub9c8\uc2a4 \ucf54\ub529\ud30c\ud2f0 \uc9c4\ud589\uc911!!"}),(0,Ie.jsx)(GT,{variant:"primary",onClick:function(){e("/contest/christmas")},children:"\uc774\ub3d9\ud558\uae30!"})]})}const WV=function(){const[e,n]=(0,t.useState)({});return XC.currentUser,(0,t.useEffect)((()=>{!function(e,t,n,r){di(e).onAuthStateChanged(t,n,r)}(XC,(e=>{n(e),console.log(e)}))}),[e]),(0,Ie.jsx)("div",{children:(0,Ie.jsxs)(me,{basename:"roj",children:[(0,Ie.jsx)(nT,{user:e}),(0,Ie.jsxs)(fe,{children:[(0,Ie.jsx)(he,{path:"/",element:(0,Ie.jsx)(rT,{})}),(0,Ie.jsx)(he,{path:"/Login",element:(0,Ie.jsx)(YT,{})}),(0,Ie.jsx)(he,{path:"/Register",element:(0,Ie.jsx)(QT,{})}),(0,Ie.jsx)(he,{path:"/ranking/:contestid",element:(0,Ie.jsx)(jV,{})}),(0,Ie.jsx)(he,{path:"/Logout",element:(0,Ie.jsx)($T,{})}),(0,Ie.jsx)(he,{path:"/judgeboard",element:(0,Ie.jsx)(RV,{})}),(0,Ie.jsx)(he,{path:"/judgeboard/:contestid",element:(0,Ie.jsx)(MV,{})}),(0,Ie.jsx)(he,{path:"/problem/:problemid/:contestid",element:(0,Ie.jsx)(LV,{})}),(0,Ie.jsx)(he,{path:"/problem/:problemid",element:(0,Ie.jsx)(PV,{})}),(0,Ie.jsx)(he,{path:"/contest/:contestid",element:(0,Ie.jsx)(DV,{})}),(0,Ie.jsx)(he,{path:"/createproblem",element:(0,Ie.jsx)(VV,{})}),(0,Ie.jsx)(he,{path:"/createuser",element:(0,Ie.jsx)(zV,{})}),(0,Ie.jsx)(he,{path:"/contests",element:(0,Ie.jsx)(HV,{})}),(0,Ie.jsx)(he,{path:"*",element:(0,Ie.jsx)(hT,{})})]})]})})},KV=e=>{e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:s}=t;n(e),r(e),i(e),o(e),s(e)}))};i.createRoot(document.getElementById("root")).render((0,Ie.jsx)(WV,{})),KV()})()})();
//# sourceMappingURL=main.892bc7dd.js.map